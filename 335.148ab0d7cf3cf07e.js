(self.webpackChunkwafflle_video_editor=self.webpackChunkwafflle_video_editor||[]).push([[335],{335:(rt,We,De)=>{"use strict";De.r(We),De.d(We,{VideoEditorPageComponent:()=>Xy});var Ee=De(8834),R=De(9217),S=De(3953),qe=De(6600),Ce=De(6860),he=De(177);const je=["*",[["mat-toolbar-row"]]],He=["*","mat-toolbar-row"];let Ge=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275dir=S.FsC({type:s,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}return s})(),Re=(()=>{class s{constructor(t,i,e){this._elementRef=t,this._platform=i,this._document=e}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static#e=this.\u0275fac=function(i){return new(i||s)(S.rXU(S.aKT),S.rXU(Ce.OD),S.rXU(he.qQ))};static#t=this.\u0275cmp=S.VBU({type:s,selectors:[["mat-toolbar"]],contentQueries:function(i,e,n){if(1&i&&S.wni(n,Ge,5),2&i){let a;S.mGM(a=S.lsd())&&(e._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,e){2&i&&(S.HbH(e.color?"mat-"+e.color:""),S.AVh("mat-toolbar-multiple-rows",e._toolbarRows.length>0)("mat-toolbar-single-row",0===e._toolbarRows.length))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[S.aNF],ngContentSelectors:He,decls:2,vars:0,template:function(i,e){1&i&&(S.NAR(je),S.SdG(0),S.SdG(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}return s})(),we=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=S.$C({type:s});static#i=this.\u0275inj=S.G2t({imports:[qe.yE,qe.yE]})}return s})();var et=De(2843),M=De.n(et),It=De(410),ue=De.n(It);function vt(){return vt=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},vt.apply(this,arguments)}var Ie=De(2610),ne=De.n(Ie);function pe(s){if(void 0===s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Je(s,r){return(Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,e){return i.__proto__=e,i})(s,r)}function Y(s,r){s.prototype=Object.create(r.prototype),s.prototype.constructor=s,Je(s,r)}var ht=De(9766),_t=De.n(ht),it=De(7621),N=De.n(it),U=De(509),Q=De.n(U);function Ae(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ae=function(){return!!s})()}function _e(s,r,t){if(Ae())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,r);var e=new(s.bind.apply(s,i));return t&&Je(e,t.prototype),e}var Oe=De(4753),Fe=De.n(Oe);const be=function(r,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(r)&&(r=M().location&&M().location.href||"");var i="function"==typeof M().URL,e=/^\/\//.test(r),n=!M().location&&!/\/\//i.test(r);if(i?r=new(M().URL)(r,M().location||"http://example.com"):/\/\//i.test(r)||(r=Fe().buildAbsoluteURL(M().location&&M().location.href||"",r)),i){var a=new URL(t,r);return n?a.href.slice(18):e?a.href.slice(a.protocol.length):a.href}return Fe().buildAbsoluteURL(r,t)};var Se=function(){function s(){this.listeners={}}var r=s.prototype;return r.on=function(i,e){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(e)},r.off=function(i,e){if(!this.listeners[i])return!1;var n=this.listeners[i].indexOf(e);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(n,1),n>-1},r.trigger=function(i){var e=this.listeners[i];if(e)if(2===arguments.length)for(var n=e.length,a=0;a<n;++a)e[a].call(this,arguments[1]);else for(var u=Array.prototype.slice.call(arguments,1),c=e.length,d=0;d<c;++d)e[d].apply(this,u)},r.dispose=function(){this.listeners={}},r.pipe=function(i){this.on("data",function(e){i.push(e)})},s}();function yt(s){for(var r=function(r){return M().atob?M().atob(r):Buffer.from(r,"base64").toString("binary")}(s),t=new Uint8Array(r.length),i=0;i<r.length;i++)t[i]=r.charCodeAt(i);return t}var s,Vo,Ct=function(s){function r(){var i;return(i=s.call(this)||this).buffer="",i}return Y(r,s),r.prototype.push=function(e){var n;for(this.buffer+=e,n=this.buffer.indexOf("\n");n>-1;n=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,n)),this.buffer=this.buffer.substring(n+1)},r}(Se),Ze=function(r){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(r||""),i={};return t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),i},kt=function(r){for(var n,t=r.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},e=t.length;e--;)""!==t[e]&&((n=/([^=]*)=(.*)/.exec(t[e]).slice(1))[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),i[n[0]]=n[1]);return i},Gt=function(s){function r(){var i;return(i=s.call(this)||this).customParsers=[],i.tagMappers=[],i}Y(r,s);var t=r.prototype;return t.push=function(e){var a,u,n=this;if(0!==(e=e.trim()).length){if("#"!==e[0])return void this.trigger("data",{type:"uri",uri:e});this.tagMappers.reduce(function(d,p){var y=p(e);return y===e?d:d.concat([y])},[e]).forEach(function(d){for(var p=0;p<n.customParsers.length;p++)if(n.customParsers[p].call(n,d))return;if(0===d.indexOf("#EXT"))if(d=d.replace("\r",""),a=/^#EXTM3U/.exec(d))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(a=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(d))return u={type:"tag",tagType:"inf"},a[1]&&(u.duration=parseFloat(a[1])),a[2]&&(u.title=a[2]),void n.trigger("data",u);if(a=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(d))return u={type:"tag",tagType:"targetduration"},a[1]&&(u.duration=parseInt(a[1],10)),void n.trigger("data",u);if(a=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(d))return u={type:"tag",tagType:"version"},a[1]&&(u.version=parseInt(a[1],10)),void n.trigger("data",u);if(a=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(d))return u={type:"tag",tagType:"media-sequence"},a[1]&&(u.number=parseInt(a[1],10)),void n.trigger("data",u);if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(d))return u={type:"tag",tagType:"discontinuity-sequence"},a[1]&&(u.number=parseInt(a[1],10)),void n.trigger("data",u);if(a=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(d))return u={type:"tag",tagType:"playlist-type"},a[1]&&(u.playlistType=a[1]),void n.trigger("data",u);if(a=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(d))return u=vt(Ze(a[1]),{type:"tag",tagType:"byterange"}),void n.trigger("data",u);if(a=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(d))return u={type:"tag",tagType:"allow-cache"},a[1]&&(u.allowed=!/NO/.test(a[1])),void n.trigger("data",u);if(a=/^#EXT-X-MAP:?(.*)$/.exec(d)){if(u={type:"tag",tagType:"map"},a[1]){var y=kt(a[1]);y.URI&&(u.uri=y.URI),y.BYTERANGE&&(u.byterange=Ze(y.BYTERANGE))}n.trigger("data",u)}else if(a=/^#EXT-X-STREAM-INF:?(.*)$/.exec(d)){if(u={type:"tag",tagType:"stream-inf"},a[1]){if(u.attributes=kt(a[1]),u.attributes.RESOLUTION){var v=u.attributes.RESOLUTION.split("x"),b={};v[0]&&(b.width=parseInt(v[0],10)),v[1]&&(b.height=parseInt(v[1],10)),u.attributes.RESOLUTION=b}u.attributes.BANDWIDTH&&(u.attributes.BANDWIDTH=parseInt(u.attributes.BANDWIDTH,10)),u.attributes["FRAME-RATE"]&&(u.attributes["FRAME-RATE"]=parseFloat(u.attributes["FRAME-RATE"])),u.attributes["PROGRAM-ID"]&&(u.attributes["PROGRAM-ID"]=parseInt(u.attributes["PROGRAM-ID"],10))}n.trigger("data",u)}else{if(a=/^#EXT-X-MEDIA:?(.*)$/.exec(d))return u={type:"tag",tagType:"media"},a[1]&&(u.attributes=kt(a[1])),void n.trigger("data",u);if(a=/^#EXT-X-ENDLIST/.exec(d))n.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(a=/^#EXT-X-DISCONTINUITY/.exec(d)))return(a=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(d))?(u={type:"tag",tagType:"program-date-time"},a[1]&&(u.dateTimeString=a[1],u.dateTimeObject=new Date(a[1])),void n.trigger("data",u)):(a=/^#EXT-X-KEY:?(.*)$/.exec(d))?(u={type:"tag",tagType:"key"},a[1]&&(u.attributes=kt(a[1]),u.attributes.IV&&("0x"===u.attributes.IV.substring(0,2).toLowerCase()&&(u.attributes.IV=u.attributes.IV.substring(2)),u.attributes.IV=u.attributes.IV.match(/.{8}/g),u.attributes.IV[0]=parseInt(u.attributes.IV[0],16),u.attributes.IV[1]=parseInt(u.attributes.IV[1],16),u.attributes.IV[2]=parseInt(u.attributes.IV[2],16),u.attributes.IV[3]=parseInt(u.attributes.IV[3],16),u.attributes.IV=new Uint32Array(u.attributes.IV))),void n.trigger("data",u)):(a=/^#EXT-X-START:?(.*)$/.exec(d))?(u={type:"tag",tagType:"start"},a[1]&&(u.attributes=kt(a[1]),u.attributes["TIME-OFFSET"]=parseFloat(u.attributes["TIME-OFFSET"]),u.attributes.PRECISE=/YES/.test(u.attributes.PRECISE)),void n.trigger("data",u)):(a=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(d))?((u={type:"tag",tagType:"cue-out-cont"}).data=a[1]?a[1]:"",void n.trigger("data",u)):(a=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(d))?((u={type:"tag",tagType:"cue-out"}).data=a[1]?a[1]:"",void n.trigger("data",u)):(a=/^#EXT-X-CUE-IN:?(.*)?$/.exec(d))?((u={type:"tag",tagType:"cue-in"}).data=a[1]?a[1]:"",void n.trigger("data",u)):(a=/^#EXT-X-SKIP:(.*)$/.exec(d))&&a[1]?((u={type:"tag",tagType:"skip"}).attributes=kt(a[1]),u.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(u.attributes["SKIPPED-SEGMENTS"]=parseInt(u.attributes["SKIPPED-SEGMENTS"],10)),u.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(u.attributes["RECENTLY-REMOVED-DATERANGES"]=u.attributes["RECENTLY-REMOVED-DATERANGES"].split("\t")),void n.trigger("data",u)):(a=/^#EXT-X-PART:(.*)$/.exec(d))&&a[1]?((u={type:"tag",tagType:"part"}).attributes=kt(a[1]),["DURATION"].forEach(function(D){u.attributes.hasOwnProperty(D)&&(u.attributes[D]=parseFloat(u.attributes[D]))}),["INDEPENDENT","GAP"].forEach(function(D){u.attributes.hasOwnProperty(D)&&(u.attributes[D]=/YES/.test(u.attributes[D]))}),u.attributes.hasOwnProperty("BYTERANGE")&&(u.attributes.byterange=Ze(u.attributes.BYTERANGE)),void n.trigger("data",u)):(a=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(d))&&a[1]?((u={type:"tag",tagType:"server-control"}).attributes=kt(a[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(D){u.attributes.hasOwnProperty(D)&&(u.attributes[D]=parseFloat(u.attributes[D]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(D){u.attributes.hasOwnProperty(D)&&(u.attributes[D]=/YES/.test(u.attributes[D]))}),void n.trigger("data",u)):(a=/^#EXT-X-PART-INF:(.*)$/.exec(d))&&a[1]?((u={type:"tag",tagType:"part-inf"}).attributes=kt(a[1]),["PART-TARGET"].forEach(function(D){u.attributes.hasOwnProperty(D)&&(u.attributes[D]=parseFloat(u.attributes[D]))}),void n.trigger("data",u)):(a=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(d))&&a[1]?((u={type:"tag",tagType:"preload-hint"}).attributes=kt(a[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(D){if(u.attributes.hasOwnProperty(D)){u.attributes[D]=parseInt(u.attributes[D],10);var I="BYTERANGE-LENGTH"===D?"length":"offset";u.attributes.byterange=u.attributes.byterange||{},u.attributes.byterange[I]=u.attributes[D],delete u.attributes[D]}}),void n.trigger("data",u)):(a=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(d))&&a[1]?((u={type:"tag",tagType:"rendition-report"}).attributes=kt(a[1]),["LAST-MSN","LAST-PART"].forEach(function(D){u.attributes.hasOwnProperty(D)&&(u.attributes[D]=parseInt(u.attributes[D],10))}),void n.trigger("data",u)):void n.trigger("data",{type:"tag",data:d.slice(4)});n.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else n.trigger("data",{type:"comment",text:d.slice(1)})})}},t.addParser=function(e){var n=this,a=e.expression,u=e.customType,c=e.dataParser,d=e.segment;"function"!=typeof c&&(c=function(y){return y}),this.customParsers.push(function(p){if(a.exec(p))return n.trigger("data",{type:"custom",data:c(p),customType:u,segment:d}),!0})},t.addTagMapper=function(e){var n=e.expression,a=e.map;this.tagMappers.push(function(d){return n.test(d)?a(d):d})},r}(Se),ci=function(r){var t={};return Object.keys(r).forEach(function(i){t[function(r){return r.toLowerCase().replace(/-(\w)/g,function(t){return t[1].toUpperCase()})}(i)]=r[i]}),t},Xi=function(r){var t=r.serverControl,i=r.targetDuration,e=r.partTargetDuration;if(t){var n="#EXT-X-SERVER-CONTROL",a="holdBack",u="partHoldBack",c=i&&3*i,d=e&&2*e;i&&!t.hasOwnProperty(a)&&(t[a]=c,this.trigger("info",{message:n+" defaulting HOLD-BACK to targetDuration * 3 ("+c+")."})),c&&t[a]<c&&(this.trigger("warn",{message:n+" clamping HOLD-BACK ("+t[a]+") to targetDuration * 3 ("+c+")"}),t[a]=c),e&&!t.hasOwnProperty(u)&&(t[u]=3*e,this.trigger("info",{message:n+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[u]+")."})),e&&t[u]<d&&(this.trigger("warn",{message:n+" clamping PART-HOLD-BACK ("+t[u]+") to partTargetDuration * 2 ("+d+")."}),t[u]=d)}},na=function(s){function r(){var i;(i=s.call(this)||this).lineStream=new Ct,i.parseStream=new Gt,i.lineStream.pipe(i.parseStream);var u,c,e=pe(i),n=[],a={},d=!1,p=function(){},y={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},b=0;i.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var D=0,I=0;return i.on("end",function(){a.uri||!a.parts&&!a.preloadHints||(!a.map&&u&&(a.map=u),!a.key&&c&&(a.key=c),!a.timeline&&"number"==typeof b&&(a.timeline=b),i.manifest.preloadSegment=a)}),i.parseStream.on("data",function(P){var G,ie;({tag:function(){({version:function(){P.version&&(this.manifest.version=P.version)},"allow-cache":function(){this.manifest.allowCache=P.allowed,"allowed"in P||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var ee={};"length"in P&&(a.byterange=ee,ee.length=P.length,"offset"in P||(P.offset=D)),"offset"in P&&(a.byterange=ee,ee.offset=P.offset),D=ee.offset+ee.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),P.duration>0&&(a.duration=P.duration),0===P.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key:function(){if(P.attributes)if("NONE"!==P.attributes.METHOD)if(P.attributes.URI){if("com.apple.streamingkeydelivery"===P.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:P.attributes});if("com.microsoft.playready"===P.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:P.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===P.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(P.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===P.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==P.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):P.attributes.KEYID&&"0x"===P.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:P.attributes.KEYFORMAT,keyId:P.attributes.KEYID.substring(2)},pssh:yt(P.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));P.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),c={method:P.attributes.METHOD||"AES-128",uri:P.attributes.URI},typeof P.attributes.IV<"u"&&(c.iv=P.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else c=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(P.number)?this.manifest.mediaSequence=P.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+P.number})},"discontinuity-sequence":function(){isFinite(P.number)?(this.manifest.discontinuitySequence=P.number,b=P.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+P.number})},"playlist-type":function(){/VOD|EVENT/.test(P.playlistType)?this.manifest.playlistType=P.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+P.playlist})},map:function(){u={},P.uri&&(u.uri=P.uri),P.byterange&&(u.byterange=P.byterange),c&&(u.key=c)},"stream-inf":function(){this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||y,P.attributes?(a.attributes||(a.attributes={}),vt(a.attributes,P.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||y,P.attributes&&P.attributes.TYPE&&P.attributes["GROUP-ID"]&&P.attributes.NAME){var ee=this.manifest.mediaGroups[P.attributes.TYPE];ee[P.attributes["GROUP-ID"]]=ee[P.attributes["GROUP-ID"]]||{},G=ee[P.attributes["GROUP-ID"]],(ie={default:/yes/i.test(P.attributes.DEFAULT)}).autoselect=!!ie.default||/yes/i.test(P.attributes.AUTOSELECT),P.attributes.LANGUAGE&&(ie.language=P.attributes.LANGUAGE),P.attributes.URI&&(ie.uri=P.attributes.URI),P.attributes["INSTREAM-ID"]&&(ie.instreamId=P.attributes["INSTREAM-ID"]),P.attributes.CHARACTERISTICS&&(ie.characteristics=P.attributes.CHARACTERISTICS),P.attributes.FORCED&&(ie.forced=/yes/i.test(P.attributes.FORCED)),G[P.attributes.NAME]=ie}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){b+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=P.dateTimeString,this.manifest.dateTimeObject=P.dateTimeObject),a.dateTimeString=P.dateTimeString,a.dateTimeObject=P.dateTimeObject},targetduration:function(){!isFinite(P.duration)||P.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+P.duration}):(this.manifest.targetDuration=P.duration,Xi.call(this,this.manifest))},start:function(){P.attributes&&!isNaN(P.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:P.attributes["TIME-OFFSET"],precise:P.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){a.cueOut=P.data},"cue-out-cont":function(){a.cueOutCont=P.data},"cue-in":function(){a.cueIn=P.data},skip:function(){this.manifest.skip=ci(P.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",P.attributes,["SKIPPED-SEGMENTS"])},part:function(){var ee=this;d=!0;var fe=this.manifest.segments.length,re=ci(P.attributes);a.parts=a.parts||[],a.parts.push(re),re.byterange&&(re.byterange.hasOwnProperty("offset")||(re.byterange.offset=I),I=re.byterange.offset+re.byterange.length),this.warnOnMissingAttributes_("#EXT-X-PART #"+(a.parts.length-1)+" for segment #"+fe,P.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(me,le){me.hasOwnProperty("lastPart")||ee.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+le+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var ee=this.manifest.serverControl=ci(P.attributes);ee.hasOwnProperty("canBlockReload")||(ee.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Xi.call(this,this.manifest),ee.canSkipDateranges&&!ee.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var ee=this.manifest.segments.length,fe=ci(P.attributes),re=fe.type&&"PART"===fe.type;a.preloadHints=a.preloadHints||[],a.preloadHints.push(fe),fe.byterange&&(fe.byterange.hasOwnProperty("offset")||(fe.byterange.offset=re?I:0,re&&(I=fe.byterange.offset+fe.byterange.length)));var ae=a.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+ae+" for segment #"+ee,P.attributes,["TYPE","URI"]),fe.type)for(var me=0;me<a.preloadHints.length-1;me++){var le=a.preloadHints[me];le.type&&le.type===fe.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+ae+" for segment #"+ee+" has the same TYPE "+fe.type+" as preload hint #"+me})}},"rendition-report":function(){var ee=ci(P.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(ee);var fe=this.manifest.renditionReports.length-1,re=["LAST-MSN","URI"];d&&re.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+fe,P.attributes,re)},"part-inf":function(){this.manifest.partInf=ci(P.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",P.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Xi.call(this,this.manifest)}}[P.tagType]||p).call(e)},uri:function(){a.uri=P.uri,n.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),c&&(a.key=c),a.timeline=b,u&&(a.map=u),I=0,a={}},comment:function(){},custom:function(){P.segment?(a.custom=a.custom||{},a.custom[P.customType]=P.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[P.customType]=P.data)}})[P.type].call(e)}),i}Y(r,s);var t=r.prototype;return t.warnOnMissingAttributes_=function(e,n,a){var u=[];a.forEach(function(c){n.hasOwnProperty(c)||u.push(c)}),u.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+u.join(", ")})},t.push=function(e){this.lineStream.push(e)},t.end=function(){this.lineStream.push("\n"),this.trigger("end")},t.addParser=function(e){this.parseStream.addParser(e)},t.addTagMapper=function(e){this.parseStream.addTagMapper(e)},r}(Se),at={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},si=["video","audio","text"],Or=["Video","Audio","Text"],wt=function(r){return r&&r.replace(/avc1\.(\d+)\.(\d+)/i,function(t,i,e){return"avc1."+("00"+Number(i).toString(16)).slice(-2)+"00"+("00"+Number(e).toString(16)).slice(-2)})},oi=function(r){void 0===r&&(r="");var t=r.split(","),i=[];return t.forEach(function(e){var n;e=e.trim(),si.forEach(function(a){var u=at[a].exec(e.toLowerCase());if(u&&!(u.length<=1)){n=a;var c=e.substring(0,u[1].length),d=e.replace(c,"");i.push({type:c,details:d,mediaType:a})}}),n||i.push({type:e,details:"",mediaType:"unknown"})}),i},vi=function(r){return void 0===r&&(r=""),at.audio.test(r.trim().toLowerCase())},_i=function(r){if(r&&"string"==typeof r){var t=r.toLowerCase().split(",").map(function(n){return wt(n.trim())}),i="video";1===t.length&&vi(t[0])?i="audio":1===t.length&&function(r){return void 0===r&&(r=""),at.text.test(r.trim().toLowerCase())}(t[0])&&(i="application");var e="mp4";return t.every(function(n){return at.mp4.test(n)})?e="mp4":t.every(function(n){return at.webm.test(n)})?e="webm":t.every(function(n){return at.ogg.test(n)})&&(e="ogg"),i+"/"+e+';codecs="'+r+'"'}},Bn=function(r){return void 0===r&&(r=""),M().MediaSource&&M().MediaSource.isTypeSupported&&M().MediaSource.isTypeSupported(_i(r))||!1},tn=function(r){return void 0===r&&(r=""),r.toLowerCase().split(",").every(function(t){t=t.trim();for(var i=0;i<Or.length;i++)if(at["muxer"+Or[i]].test(t))return!0;return!1})},rn="mp4a.40.2",gs=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Ba=/^application\/dash\+xml/i,Tn=function(r){return gs.test(r)?"hls":Ba.test(r)?"dash":"application/vnd.videojs.vhs+json"===r?"vhs-json":null},Vn=function(r){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer},Qe=function(r){return r instanceof Uint8Array?r:(!Array.isArray(r)&&!function(r){return Vn(r)}(r)&&!(r instanceof ArrayBuffer)&&(r="number"!=typeof r||"number"==typeof r&&r!=r?0:[r]),new Uint8Array(r&&r.buffer||r,r&&r.byteOffset||0,r&&r.byteLength||0))},di=M().BigInt||Number,sa=[di("0x1"),di("0x100"),di("0x10000"),di("0x1000000"),di("0x100000000"),di("0x10000000000"),di("0x1000000000000"),di("0x100000000000000"),di("0x10000000000000000")],Ts=(s=new Uint16Array([65484]),new Uint8Array(s.buffer,s.byteOffset,s.byteLength),function(r,t){var i=void 0===t?{}:t,e=i.signed,n=void 0!==e&&e,a=i.le,u=void 0!==a&&a;r=Qe(r);var c=u?"reduce":"reduceRight",p=(r[c]?r[c]:Array.prototype[c]).call(r,function(v,b,D){var I=u?D:Math.abs(D+1-r.length);return v+di(b)*sa[I]},di(0));if(n){var y=sa[r.length]/di(2)-di(1);(p=di(p))>y&&(p-=y,p-=y,p-=di(2))}return Number(p)}),bn=function(r,t){if("string"!=typeof r&&r&&"function"==typeof r.toString&&(r=r.toString()),"string"!=typeof r)return new Uint8Array;t||(r=unescape(encodeURIComponent(r)));for(var i=new Uint8Array(r.length),e=0;e<r.length;e++)i[e]=r.charCodeAt(e);return i},Ft=function(r,t,i){var e=void 0===i?{}:i,n=e.offset,a=void 0===n?0:n,u=e.mask,c=void 0===u?[]:u;return r=Qe(r),(t=Qe(t)).length&&r.length-a>=t.length&&(t.every?t.every:Array.prototype.every).call(t,function(p,y){return p===(c[y]?c[y]&r[a+y]:r[a+y])})},O=De(2419),te=function(r){return!!r&&"object"==typeof r},xe=function s(){for(var r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];return t.reduce(function(e,n){return"object"!=typeof n||Object.keys(n).forEach(function(a){e[a]=Array.isArray(e[a])&&Array.isArray(n[a])?e[a].concat(n[a]):te(e[a])&&te(n[a])?s(e[a],n[a]):n[a]}),e},{})},ut=function(r){return Object.keys(r).map(function(t){return r[t]})},yi=function(r){return r.reduce(function(t,i){return t.concat(i)},[])},Lr=function(r){if(!r.length)return[];for(var t=[],i=0;i<r.length;i++)t.push(r[i]);return t},_r=function(r,t){for(var i=0;i<r.length;i++)if(t(r[i]))return i;return-1},yr=function(r){var t=r.baseUrl,e=r.source,n=void 0===e?"":e,a=r.range,u=void 0===a?"":a,c=r.indexRange,d=void 0===c?"":c,p={uri:n,resolvedUri:be((void 0===t?"":t)||"",n)};if(u||d){var I,v=(u||d).split("-"),b=M().BigInt?M().BigInt(v[0]):parseInt(v[0],10),D=M().BigInt?M().BigInt(v[1]):parseInt(v[1],10);b<Number.MAX_SAFE_INTEGER&&"bigint"==typeof b&&(b=Number(b)),D<Number.MAX_SAFE_INTEGER&&"bigint"==typeof D&&(D=Number(D)),"bigint"==typeof(I="bigint"==typeof D||"bigint"==typeof b?M().BigInt(D)-M().BigInt(b)+M().BigInt(1):D-b+1)&&I<Number.MAX_SAFE_INTEGER&&(I=Number(I)),p.byterange={length:I,offset:b}}return p},an=function(r){return r&&"number"!=typeof r&&(r=parseInt(r,10)),isNaN(r)?null:r},sn={static:function(r){var t=r.duration,i=r.timescale,e=void 0===i?1:i,n=r.sourceDuration,a=r.periodDuration,u=an(r.endNumber),c=t/e;return"number"==typeof u?{start:0,end:u}:"number"==typeof a?{start:0,end:a/c}:{start:0,end:n/c}},dynamic:function(r){var t=r.NOW,i=r.clientOffset,e=r.availabilityStartTime,n=r.timescale,a=void 0===n?1:n,u=r.duration,c=r.periodStart,d=void 0===c?0:c,p=r.minimumUpdatePeriod,y=void 0===p?0:p,v=r.timeShiftBufferDepth,b=void 0===v?1/0:v,D=an(r.endNumber),I=(t+i)/1e3,P=e+d,ye=Math.ceil((I+y-P)*a/u),Z=Math.floor((I-P-b)*a/u),ee=Math.floor((I-P)*a/u);return{start:Math.max(0,Z),end:"number"==typeof D?D:Math.min(ye,ee)}}},Va=function(r){var t=r.type,i=r.duration,e=r.timescale,n=void 0===e?1:e,a=r.periodDuration,u=r.sourceDuration,c=sn[t](r),y=function(r,t){for(var i=[],e=r;e<t;e++)i.push(e);return i}(c.start,c.end).map(function(r){return function(t){var i=r.duration,e=r.timescale,u=r.startNumber;return{number:(void 0===u?1:u)+t,duration:i/(void 0===e?1:e),timeline:r.periodStart,time:t*i}}}(r));if("static"===t){var v=y.length-1;y[v].duration=("number"==typeof a?a:u)-i/n*v}return y},Sn=function(r){var t=r.baseUrl,i=r.initialization,e=void 0===i?{}:i,n=r.sourceDuration,a=r.indexRange,u=void 0===a?"":a,c=r.periodStart,d=r.presentationTime,p=r.number,y=void 0===p?0:p,v=r.duration;if(!t)throw new Error("NO_BASE_URL");var b=yr({baseUrl:t,source:e.sourceURL,range:e.range}),D=yr({baseUrl:t,source:t,indexRange:u});if(D.map=b,v){var I=Va(r);I.length&&(D.duration=I[0].duration,D.timeline=I[0].timeline)}else n&&(D.duration=n,D.timeline=c);return D.presentationTime=d||c,D.number=y,[D]},ua=function(r,t,i){var P,e=r.sidx.map?r.sidx.map:null,n=r.sidx.duration,a=r.timeline||0,u=r.sidx.byterange,c=u.offset+u.length,d=t.timescale,p=t.references.filter(function(me){return 1!==me.referenceType}),y=[],v=r.endList?"static":"dynamic",b=r.sidx.timeline,D=b,I=r.mediaSequence||0;P="bigint"==typeof t.firstOffset?M().BigInt(c)+t.firstOffset:c+t.firstOffset;for(var G=0;G<p.length;G++){var ee,ie=t.references[G],ye=ie.referencedSize,Z=ie.subsegmentDuration;ee="bigint"==typeof P?P+M().BigInt(ye)-M().BigInt(1):P+ye-1;var ae=Sn({baseUrl:i,timescale:d,timeline:a,periodStart:b,presentationTime:D,number:I,duration:Z,sourceDuration:n,indexRange:P+"-"+ee,type:v})[0];e&&(ae.map=e),y.push(ae),P+="bigint"==typeof P?M().BigInt(ye):ye,D+=Z/d,I++}return r.segments=y,r},Kc=["AUDIO","SUBTITLES"],Yc=1/60,Qc=function(r){return function(r,t){return ut(r.reduce(function(i,e){return e.forEach(function(n){i[function(t){return t.timeline}(n)]=n}),i},{}))}(r).sort(function(t,i){return t.timeline>i.timeline?1:-1})},Jc=function(r){var t=[];return function(r,t,i){t.forEach(function(e){for(var n in r.mediaGroups[e])for(var a in r.mediaGroups[e][n])i(r.mediaGroups[e][n][a])})}(r,Kc,function(i,e,n,a){t=t.concat(i.playlists||[])}),t},Zc=function(r){var t=r.playlist;t.mediaSequence=r.mediaSequence,t.segments.forEach(function(e,n){e.number=t.mediaSequence+n})},Ss=function(r){return r&&r.uri+"-"+function(r){var t;return t="bigint"==typeof r.offset||"bigint"==typeof r.length?M().BigInt(r.offset)+M().BigInt(r.length)-M().BigInt(1):r.offset+r.length-1,r.offset+"-"+t}(r.byterange)},Es=function(r){return ut(r.reduce(function(i,e){var a,n=e.attributes.id+(e.attributes.lang||"");i[n]?(e.segments&&(e.segments[0]&&(e.segments[0].discontinuity=!0),(a=i[n].segments).push.apply(a,e.segments)),e.attributes.contentProtection&&(i[n].attributes.contentProtection=e.attributes.contentProtection)):(i[n]=e,i[n].attributes.timelineStarts=[]);return i[n].attributes.timelineStarts.push({start:e.attributes.periodStart,timeline:e.attributes.periodStart}),i},{})).map(function(i){return i.discontinuityStarts=function(r,t){return r.reduce(function(i,e,n){return e.discontinuity&&i.push(n),i},[])}(i.segments||[]),i})},el=function(r,t){var i=Ss(r.sidx),e=i&&t[i]&&t[i].sidx;return e&&ua(r,e,r.sidx.resolvedUri),r},id=function(r,t){if(void 0===t&&(t={}),!Object.keys(t).length)return r;for(var i in r)r[i]=el(r[i],t);return r},tl=function(r){var t,i=r.attributes,e=r.segments,n=r.sidx,a=r.discontinuityStarts,u={attributes:(t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuityStarts:a,timelineStarts:i.timelineStarts,segments:e};return i.frameRate&&(u.attributes["FRAME-RATE"]=i.frameRate),i.contentProtection&&(u.contentProtection=i.contentProtection),n&&(u.sidx=n),u},pp=function(r){var t=r.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType},sd=function(r){var t=r.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType},il=function(r){var t=r.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},la=function(r){return r?Object.keys(r).reduce(function(t,i){return t.concat(r[i].playlists)},[]):[]},od=function(r){var t,i=r.dashPlaylists,e=r.locations,n=r.sidxMapping,a=void 0===n?{}:n,u=r.previousManifest;if(!i.length)return{};var c=i[0].attributes,d=c.sourceDuration,p=c.type,y=c.suggestedPresentationDelay,v=c.minimumUpdatePeriod,b=Es(i.filter(pp)).map(tl),D=Es(i.filter(sd)),I=Es(i.filter(il)),P=i.map(function(re){return re.attributes.captionServices}).filter(Boolean),G={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:d,playlists:id(b,a)};v>=0&&(G.minimumUpdatePeriod=1e3*v),e&&(G.locations=e),"dynamic"===p&&(G.suggestedPresentationDelay=y);var ye=D.length?function(r,t,i){void 0===t&&(t={}),void 0===i&&(i=!1);var e,n=r.reduce(function(u,c){var d=c.attributes.role&&c.attributes.role.value||"",p=c.attributes.lang||"",y=c.attributes.label||"main";p&&!c.attributes.label&&(y=c.attributes.lang+(d?" ("+d+")":"")),u[y]||(u[y]={language:p,autoselect:!0,default:"main"===d,playlists:[],uri:""});var b=el(function(r,t){var i,e=r.attributes,n=r.segments,a=r.sidx,u=r.mediaSequence,c=r.discontinuitySequence,d=r.discontinuityStarts,p={attributes:(i={NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuitySequence:c,discontinuityStarts:d,timelineStarts:e.timelineStarts,mediaSequence:u,segments:n};return e.contentProtection&&(p.contentProtection=e.contentProtection),a&&(p.sidx=a),t&&(p.attributes.AUDIO="audio",p.attributes.SUBTITLES="subs"),p}(c,i),t);return u[y].playlists.push(b),typeof e>"u"&&"main"===d&&((e=c).default=!0),u},{});return e||(n[Object.keys(n)[0]].default=!0),n}(D,a,0===G.playlists.length):null,Z=I.length?function(r,t){return void 0===t&&(t={}),r.reduce(function(i,e){var n=e.attributes.lang||"text";return i[n]||(i[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),i[n].playlists.push(el(function(r){var t,i=r.attributes,e=r.segments,n=r.mediaSequence,a=r.discontinuityStarts,u=r.discontinuitySequence;typeof e>"u"&&(e=[{uri:i.baseUrl,timeline:i.periodStart,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var c=((t={NAME:i.id,BANDWIDTH:i.bandwidth})["PROGRAM-ID"]=1,t);return i.codecs&&(c.CODECS=i.codecs),{attributes:c,uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,timelineStarts:i.timelineStarts,discontinuityStarts:a,discontinuitySequence:u,mediaSequence:n,segments:e}}(e),t)),i},{})}(I,a):null,ee=b.concat(la(ye),la(Z)),fe=ee.map(function(re){return re.timelineStarts});return G.timelineStarts=Qc(fe),function(r,t){r.forEach(function(i){i.mediaSequence=0,i.discontinuitySequence=_r(t,function(e){return e.timeline===i.timeline}),i.segments&&i.segments.forEach(function(e,n){e.number=n})})}(ee,G.timelineStarts),ye&&(G.mediaGroups.AUDIO.audio=ye),Z&&(G.mediaGroups.SUBTITLES.subs=Z),P.length&&(G.mediaGroups["CLOSED-CAPTIONS"].cc=function(r){return r.reduce(function(t,i){return i&&i.forEach(function(e){var a=e.language;t[a]={autoselect:!1,default:!1,instreamId:e.channel,language:a},e.hasOwnProperty("aspectRatio")&&(t[a].aspectRatio=e.aspectRatio),e.hasOwnProperty("easyReader")&&(t[a].easyReader=e.easyReader),e.hasOwnProperty("3D")&&(t[a]["3D"]=e["3D"])}),t},{})}(P)),u?function(r){var t=r.oldManifest,i=r.newManifest,e=t.playlists.concat(Jc(t)),n=i.playlists.concat(Jc(i));return i.timelineStarts=Qc([t.timelineStarts,i.timelineStarts]),function(r){var t=r.oldPlaylists,e=r.timelineStarts;r.newPlaylists.forEach(function(n){n.discontinuitySequence=_r(e,function(p){return p.timeline===n.timeline});var a=function(r,t){for(var i=0;i<r.length;i++)if(r[i].attributes.NAME===t)return r[i];return null}(t,n.attributes.NAME);if(a&&!n.sidx){var u=n.segments[0],c=_r(a.segments,function(p){return Math.abs(p.presentationTime-u.presentationTime)<Yc});if(-1===c)return Zc({playlist:n,mediaSequence:a.mediaSequence+a.segments.length}),n.segments[0].discontinuity=!0,n.discontinuityStarts.unshift(0),void((!a.segments.length&&n.timeline>a.timeline||a.segments.length&&n.timeline>a.segments[a.segments.length-1].timeline)&&n.discontinuitySequence--);a.segments[c].discontinuity&&!u.discontinuity&&(u.discontinuity=!0,n.discontinuityStarts.unshift(0),n.discontinuitySequence--),Zc({playlist:n,mediaSequence:a.segments[c].number})}})}({oldPlaylists:e,newPlaylists:n,timelineStarts:i.timelineStarts}),i}({oldManifest:u,newManifest:G}):G},ud=function(r,t,i){var u=r.timescale,d=r.periodStart,y=r.minimumUpdatePeriod;return Math.ceil((((r.NOW+r.clientOffset)/1e3+(void 0===y?0:y)-(r.availabilityStartTime+(void 0===d?0:d)))*(void 0===u?1:u)-t)/i)},ld=function(r,t){for(var i=r.type,e=r.minimumUpdatePeriod,n=void 0===e?0:e,a=r.media,u=void 0===a?"":a,c=r.sourceDuration,d=r.timescale,p=void 0===d?1:d,y=r.startNumber,v=void 0===y?1:y,b=r.periodStart,D=[],I=-1,P=0;P<t.length;P++){var G=t[P],ie=G.d,ye=G.r||0,Z=G.t||0;I<0&&(I=Z),Z&&Z>I&&(I=Z);var ee=void 0;if(ye<0){var fe=P+1;ee=fe===t.length?"dynamic"===i&&n>0&&u.indexOf("$Number$")>0?ud(r,I,ie):(c*p-I)/ie:(t[fe].t-I)/ie}else ee=ye+1;for(var re=v+D.length+ee,ae=v+D.length;ae<re;)D.push({number:ae,duration:ie/p,time:I,timeline:b}),I+=ie,ae++}return D},cd=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,nl=function(r,t){return r.replace(cd,function(r){return function(t,i,e,n){if("$$"===t)return"$";if(typeof r[i]>"u")return t;var a=""+r[i];return"RepresentationID"===i||(n=e?parseInt(n,10):1,a.length>=n)?a:""+new Array(n-a.length+1).join("0")+a}}(t))},mp=function(r,t){var i={RepresentationID:r.id,Bandwidth:r.bandwidth||0},e=r.initialization,n=void 0===e?{sourceURL:"",range:""}:e,a=yr({baseUrl:r.baseUrl,source:nl(n.sourceURL,i),range:n.range}),u=function(r,t){return r.duration||t?r.duration?Va(r):ld(r,t):[{number:r.startNumber||1,duration:r.sourceDuration,time:0,timeline:r.periodStart}]}(r,t);return u.map(function(c){i.Number=c.number,i.Time=c.time;var d=nl(r.media||"",i),v=r.periodStart+(c.time-(r.presentationTimeOffset||0))/(r.timescale||1);return{uri:d,timeline:c.timeline,duration:c.duration,resolvedUri:be(r.baseUrl||"",d),map:a,number:c.number,presentationTime:v}})},vp=function(r,t){var i=r.duration,e=r.segmentUrls,n=void 0===e?[]:e,a=r.periodStart;if(!i&&!t||i&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");var c,u=n.map(function(p){return function(r,t){var i=r.baseUrl,e=r.initialization,n=void 0===e?{}:e,a=yr({baseUrl:i,source:n.sourceURL,range:n.range}),u=yr({baseUrl:i,source:t.media,range:t.mediaRange});return u.map=a,u}(r,p)});return i&&(c=Va(r)),t&&(c=ld(r,t)),c.map(function(p,y){if(u[y]){var v=u[y],b=r.timescale||1,D=r.presentationTimeOffset||0;return v.timeline=p.timeline,v.duration=p.duration,v.number=p.number,v.presentationTime=a+(p.time-D)/b,v}}).filter(function(p){return p})},hd=function(r){var e,n,t=r.attributes,i=r.segmentInfo;i.template?(n=mp,e=xe(t,i.template)):i.base?(n=Sn,e=xe(t,i.base)):i.list&&(n=vp,e=xe(t,i.list));var a={attributes:t};if(!n)return a;var u=n(e,i.segmentTimeline);if(e.duration){var p=e.timescale;e.duration=e.duration/(void 0===p?1:p)}else e.duration=u.length?u.reduce(function(v,b){return Math.max(v,Math.ceil(b.duration))},0):0;return a.attributes=e,a.segments=u,i.base&&e.indexRange&&(a.sidx=u[0],a.segments=[]),a},fi=function(r,t){return Lr(r.childNodes).filter(function(i){return i.tagName===t})},al=function(r){return r.textContent.trim()},Hn=function(r){var c=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(r);if(!c)return 0;var d=c.slice(1),y=d[1],v=d[2],b=d[3],D=d[4],I=d[5];return 31536e3*parseFloat(d[0]||0)+2592e3*parseFloat(y||0)+86400*parseFloat(v||0)+3600*parseFloat(b||0)+60*parseFloat(D||0)+parseFloat(I||0)},pd={mediaPresentationDuration:function(r){return Hn(r)},availabilityStartTime:function(r){return function(r){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(r)&&(r+="Z"),Date.parse(r)}(r)/1e3},minimumUpdatePeriod:function(r){return Hn(r)},suggestedPresentationDelay:function(r){return Hn(r)},type:function(r){return r},timeShiftBufferDepth:function(r){return Hn(r)},start:function(r){return Hn(r)},width:function(r){return parseInt(r,10)},height:function(r){return parseInt(r,10)},bandwidth:function(r){return parseInt(r,10)},frameRate:function(r){return function(r){return parseFloat(r.split("/").reduce(function(t,i){return t/i}))}(r)},startNumber:function(r){return parseInt(r,10)},timescale:function(r){return parseInt(r,10)},presentationTimeOffset:function(r){return parseInt(r,10)},duration:function(r){var t=parseInt(r,10);return isNaN(t)?Hn(r):t},d:function(r){return parseInt(r,10)},t:function(r){return parseInt(r,10)},r:function(r){return parseInt(r,10)},DEFAULT:function(r){return r}},ji=function(r){return r&&r.attributes?Lr(r.attributes).reduce(function(t,i){return t[i.name]=(pd[i.name]||pd.DEFAULT)(i.value),t},{}):{}},bp={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Uo=function(r,t){return t.length?yi(r.map(function(i){return t.map(function(e){return be(i,al(e))})})):r},Ht=function(r){var t=fi(r,"SegmentTemplate")[0],i=fi(r,"SegmentList")[0],e=i&&fi(i,"SegmentURL").map(function(v){return xe({tag:"SegmentURL"},ji(v))}),n=fi(r,"SegmentBase")[0],a=i||t,u=a&&fi(a,"SegmentTimeline")[0],c=i||n||t,d=c&&fi(c,"Initialization")[0],p=t&&ji(t);p&&d?p.initialization=d&&ji(d):p&&p.initialization&&(p.initialization={sourceURL:p.initialization});var y={template:p,segmentTimeline:u&&fi(u,"S").map(function(v){return ji(v)}),list:i&&xe(ji(i),{segmentUrls:e,initialization:ji(d)}),base:n&&xe(ji(n),{initialization:ji(d)})};return Object.keys(y).forEach(function(v){y[v]||delete y[v]}),y},Cp=function(r,t){return function(i,e){var n=Uo(t,fi(i.node,"BaseURL")),a=xe(r,{periodStart:i.attributes.start});"number"==typeof i.attributes.duration&&(a.periodDuration=i.attributes.duration);var u=fi(i.node,"AdaptationSet"),c=Ht(i.node);return yi(u.map(function(r,t,i){return function(e){var n=ji(e),a=Uo(t,fi(e,"BaseURL")),u=fi(e,"Role")[0],c={role:ji(u)},d=xe(r,n,c),p=fi(e,"Accessibility")[0],y=function(r){return"urn:scte:dash:cc:cea-608:2015"===r.schemeIdUri?("string"!=typeof r.value?[]:r.value.split(";")).map(function(e){var n,a;if(a=e,/^CC\d=/.test(e)){var u=e.split("=");n=u[0],a=u[1]}else/^CC\d$/.test(e)&&(n=e);return{channel:n,language:a}}):"urn:scte:dash:cc:cea-708:2015"===r.schemeIdUri?("string"!=typeof r.value?[]:r.value.split(";")).map(function(e){var n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var a=e.split("="),c=a[1],d=void 0===c?"":c;n.channel=a[0],n.language=e,d.split(",").forEach(function(p){var y=p.split(":"),v=y[0],b=y[1];"lang"===v?n.language=b:"er"===v?n.easyReader=Number(b):"war"===v?n.aspectRatio=Number(b):"3D"===v&&(n["3D"]=Number(b))})}else n.language=e;return n.channel&&(n.channel="SERVICE"+n.channel),n}):void 0}(ji(p));y&&(d=xe(d,{captionServices:y}));var v=fi(e,"Label")[0];if(v&&v.childNodes.length){var b=v.childNodes[0].nodeValue.trim();d=xe(d,{label:b})}var D=function(r){return r.reduce(function(t,i){var e=ji(i);e.schemeIdUri&&(e.schemeIdUri=e.schemeIdUri.toLowerCase());var n=bp[e.schemeIdUri];if(n){t[n]={attributes:e};var a=fi(i,"cenc:pssh")[0];if(a){var u=al(a);t[n].pssh=u&&yt(u)}}return t},{})}(fi(e,"ContentProtection"));Object.keys(D).length&&(d=xe(d,{contentProtection:D}));var I=Ht(e),P=fi(e,"Representation"),G=xe(i,I);return yi(P.map(function(r,t,i){return function(e){var n=fi(e,"BaseURL"),a=Uo(t,n),u=xe(r,ji(e)),c=Ht(e);return a.map(function(d){return{segmentInfo:xe(i,c),attributes:xe(u,{baseUrl:d})}})}}(d,a,G)))}}(a,n,c)))}},sl=function(r){if(""===r)throw new Error("DASH_EMPTY_MANIFEST");var i,e,t=new O.DOMParser;try{e=(i=t.parseFromString(r,"application/xml"))&&"MPD"===i.documentElement.tagName?i.documentElement:null}catch{}if(!e||e&&e.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return e},gd=De(2081),ol=De.n(gd),Rr=Qe([73,68,51]),Ha=function s(r,t){return void 0===t&&(t=0),(r=Qe(r)).length-t<10||!Ft(r,Rr,{offset:t})?t:(t+=function(r,t){void 0===t&&(t=0);var e=(r=Qe(r))[t+6]<<21|r[t+7]<<14|r[t+8]<<7|r[t+9];return(16&r[t+5])>>4?e+20:e+10}(r,t),s(r,t))},sr=(new Uint8Array([79,112,117,115,72,101,97,100]),function(r){return"string"==typeof r?bn(r):r}),on=function(r){r=Qe(r);for(var t=[],i=0;r.length>i;){var e=r[i],n=0,a=0,u=r[++a];for(a++;128&u;)n=(127&u)<<7,u=r[a],a++;n+=127&u;for(var c=0;c<Vo.length;c++){var d=Vo[c];if(e===d.id){t.push((0,d.parser)(r.subarray(a,a+n)));break}}i+=n+a}return t};Vo=[{id:3,parser:function(r){var t={tag:3,id:r[0]<<8|r[1],flags:r[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=r[t.size]<<8|r[t.size+1],t.size+=2),64&t.flags){var i=r[t.size];t.url=function(r){if(!r)return"";r=Array.prototype.slice.call(r);var t=String.fromCharCode.apply(null,Qe(r));try{return decodeURIComponent(escape(t))}catch{}return t}(r.subarray(t.size+1,t.size+1+i)),t.size+=i}return 32&t.flags&&(t.ocrEsId=r[t.size]<<8|r[t.size+1],t.size+=2),t.descriptors=on(r.subarray(t.size))||[],t}},{id:4,parser:function(r){return{tag:4,oti:r[0],streamType:r[1],bufferSize:r[2]<<16|r[3]<<8|r[4],maxBitrate:r[5]<<24|r[6]<<16|r[7]<<8|r[8],avgBitrate:r[9]<<24|r[10]<<16|r[11]<<8|r[12],descriptors:on(r.subarray(13))}}},{id:5,parser:function(r){return{tag:5,bytes:r}}},{id:6,parser:function(r){return{tag:6,bytes:r}}}];var Ni=function s(r,t,i){void 0===i&&(i=!1),t=function(r){return Array.isArray(r)?r.map(function(t){return sr(t)}):[sr(r)]}(t),r=Qe(r);var e=[];if(!t.length)return e;for(var n=0;n<r.length;){var a=(r[n]<<24|r[n+1]<<16|r[n+2]<<8|r[n+3])>>>0,u=r.subarray(n+4,n+8);if(0===a)break;var c=n+a;if(c>r.length){if(i)break;c=r.length}var d=r.subarray(n+8,c);Ft(u,t[0])&&(1===t.length?e.push(d):e.push.apply(e,s(d,t.slice(1),i))),n=c}return e},$t={EBML:Qe([26,69,223,163]),DocType:Qe([66,130]),Segment:Qe([24,83,128,103]),SegmentInfo:Qe([21,73,169,102]),Tracks:Qe([22,84,174,107]),Track:Qe([174]),TrackNumber:Qe([215]),DefaultDuration:Qe([35,227,131]),TrackEntry:Qe([174]),TrackType:Qe([131]),FlagDefault:Qe([136]),CodecID:Qe([134]),CodecPrivate:Qe([99,162]),VideoTrack:Qe([224]),AudioTrack:Qe([225]),Cluster:Qe([31,67,182,117]),Timestamp:Qe([231]),TimestampScale:Qe([42,215,177]),BlockGroup:Qe([160]),BlockDuration:Qe([155]),Block:Qe([161]),SimpleBlock:Qe([163])},ll=[128,64,32,16,8,4,2,1],qn=function(r,t,i,e){void 0===i&&(i=!0),void 0===e&&(e=!1);var n=function(r){for(var t=1,i=0;i<ll.length&&!(r&ll[i]);i++)t++;return t}(r[t]),a=r.subarray(t,t+n);return i&&((a=Array.prototype.slice.call(r,t,t+n))[0]^=ll[n-1]),{length:n,value:Ts(a,{signed:e}),bytes:a}},As=function s(r){return"string"==typeof r?r.match(/.{1,2}/g).map(function(t){return s(t)}):"number"==typeof r?function(r,t){var e=(void 0===t?{}:t).le,n=void 0!==e&&e;("bigint"!=typeof r&&"number"!=typeof r||"number"==typeof r&&r!=r)&&(r=0);for(var a=function(r){return Math.ceil(function(r){return r.toString(2).length}(r)/8)}(r=di(r)),u=new Uint8Array(new ArrayBuffer(a)),c=0;c<a;c++){var d=n?c:Math.abs(c+1-u.length);u[d]=Number(r/sa[c]&di(255)),r<0&&(u[d]=Math.abs(~u[d]),u[d]-=0===c?1:2)}return u}(r):r},Mp=function s(r,t,i){if(i>=t.length)return t.length;var e=qn(t,i,!1);if(Ft(r.bytes,e.bytes))return i;var n=qn(t,i+e.length);return s(r,t,i+n.length+n.value+e.length)},Kt=function s(r,t){t=function(r){return Array.isArray(r)?r.map(function(t){return As(t)}):[As(r)]}(t),r=Qe(r);var i=[];if(!t.length)return i;for(var e=0;e<r.length;){var n=qn(r,e,!1),a=qn(r,e+n.length),u=e+n.length+a.length;127===a.value&&(a.value=Mp(n,r,u),a.value!==r.length&&(a.value-=u));var d=r.subarray(u,u+a.value>r.length?r.length:u+a.value);Ft(t[0],n.bytes)&&(1===t.length?i.push(d):i=i.concat(s(d,t.slice(1)))),e+=n.length+a.length+d.length}return i},Np=Qe([0,0,0,1]),fl=Qe([0,0,1]),hl=Qe([0,0,3]),Bp=function(r){for(var t=[],i=1;i<r.length-2;)Ft(r.subarray(i,i+3),hl)&&(t.push(i+2),i++),i++;if(0===t.length)return r;var e=r.length-t.length,n=new Uint8Array(e),a=0;for(i=0;i<e;a++,i++)a===t[0]&&(a++,t.shift()),n[i]=r[a];return n},pl=function(r,t,i,e){void 0===e&&(e=1/0),r=Qe(r),i=[].concat(i);for(var a,n=0,u=0;n<r.length&&(u<e||a);){var c=void 0;if(Ft(r.subarray(n),Np)?c=4:Ft(r.subarray(n),fl)&&(c=3),c){if(u++,a)return Bp(r.subarray(a,n));var d=void 0;"h264"===t?d=31&r[n+c]:"h265"===t&&(d=r[n+c]>>1&63),-1!==i.indexOf(d)&&(a=n+c),n+=c+("h264"===t?1:2)}else n++}return r.subarray(0,0)},xi={webm:Qe([119,101,98,109]),matroska:Qe([109,97,116,114,111,115,107,97]),flac:Qe([102,76,97,67]),ogg:Qe([79,103,103,83]),ac3:Qe([11,119]),riff:Qe([82,73,70,70]),avi:Qe([65,86,73]),wav:Qe([87,65,86,69]),"3gp":Qe([102,116,121,112,51,103]),mp4:Qe([102,116,121,112]),fmp4:Qe([115,116,121,112]),mov:Qe([102,116,121,112,113,116]),moov:Qe([109,111,111,118]),moof:Qe([109,111,111,102])},ca={aac:function(r){var t=Ha(r);return Ft(r,[255,16],{offset:t,mask:[255,22]})},mp3:function(r){var t=Ha(r);return Ft(r,[255,2],{offset:t,mask:[255,6]})},webm:function(r){var t=Kt(r,[$t.EBML,$t.DocType])[0];return Ft(t,xi.webm)},mkv:function(r){var t=Kt(r,[$t.EBML,$t.DocType])[0];return Ft(t,xi.matroska)},mp4:function(r){return!ca["3gp"](r)&&!ca.mov(r)&&(!!(Ft(r,xi.mp4,{offset:4})||Ft(r,xi.fmp4,{offset:4})||Ft(r,xi.moof,{offset:4})||Ft(r,xi.moov,{offset:4}))||void 0)},mov:function(r){return Ft(r,xi.mov,{offset:4})},"3gp":function(r){return Ft(r,xi["3gp"],{offset:4})},ac3:function(r){var t=Ha(r);return Ft(r,xi.ac3,{offset:t})},ts:function(r){if(r.length<189&&r.length>=1)return 71===r[0];for(var t=0;t+188<r.length&&t<188;){if(71===r[t]&&71===r[t+188])return!0;t+=1}return!1},flac:function(r){var t=Ha(r);return Ft(r,xi.flac,{offset:t})},ogg:function(r){return Ft(r,xi.ogg)},avi:function(r){return Ft(r,xi.riff)&&Ft(r,xi.avi,{offset:8})},wav:function(r){return Ft(r,xi.riff)&&Ft(r,xi.wav,{offset:8})},h264:function(r){return function(r,t,i){return pl(r,"h264",7,3)}(r).length},h265:function(r){return function(r,t,i){return pl(r,"h265",[32,33],3)}(r).length}},Ho=Object.keys(ca).filter(function(s){return"ts"!==s&&"h264"!==s&&"h265"!==s}).concat(["ts","h264","h265"]);Ho.forEach(function(s){var r=ca[s];ca[s]=function(t){return r(Qe(t))}});var Up=ca,gl=function(r){r=Qe(r);for(var t=0;t<Ho.length;t++){var i=Ho[t];if(Up[i](r))return i}return""},jo=De(9651);function vl(s){return(vl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(s)}function _l(s){var r="function"==typeof Map?new Map:void 0;return _l=function(i){if(null===i||!function Wa(s){try{return-1!==Function.toString.call(s).indexOf("[native code]")}catch{return"function"==typeof s}}(i))return i;if("function"!=typeof i)throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(i))return r.get(i);r.set(i,e)}function e(){return _e(i,arguments,vl(this).constructor)}return e.prototype=Object.create(i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Je(e,i)},_l(s)}for(var Ki,qr={},En=function(r,t){return qr[r]=qr[r]||[],t&&(qr[r]=qr[r].concat(t)),qr[r]},ws=function(r,t){var i=En(r).indexOf(t);return!(i<=-1||(qr[r]=qr[r].slice(),qr[r].splice(i,1),0))},Wo={prefixed:!0},qo=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],da=qo[0],Ds=0;Ds<qo.length;Ds++)if(qo[Ds][1]in ue()){Ki=qo[Ds];break}if(Ki){for(var Go=0;Go<Ki.length;Go++)Wo[da[Go]]=Ki[Go];Wo.prefixed=Ki[0]!==da[0]}var or=[],bt=function bd(s){var t,r="info",i=function(){for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];t("log",r,a)};return t=function(r,t){return function(i,e,n){var a=t.levels[e],u=new RegExp("^("+a+")$");if("log"!==i&&n.unshift(i.toUpperCase()+":"),n.unshift(r+":"),or){or.push([].concat(n));var c=or.length-1e3;or.splice(0,c>0?c:0)}if(M().console){var d=M().console[i];!d&&"debug"===i&&(d=M().console.info||M().console.log),d&&a&&u.test(i)&&d[Array.isArray(n)?"apply":"call"](M().console,n)}}}(s,i),i.createLogger=function(e){return bd(s+": "+e)},i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},i.level=function(e){if("string"==typeof e){if(!i.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');r=e}return r},(i.history=function(){return or?[].concat(or):[]}).filter=function(e){return(or||[]).filter(function(n){return new RegExp(".*"+e+".*").test(n[0])})},i.history.clear=function(){or&&(or.length=0)},i.history.disable=function(){null!==or&&(or.length=0,or=null)},i.history.enable=function(){null===or&&(or=[])},i.error=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t("error",r,n)},i.warn=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t("warn",r,n)},i.debug=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t("debug",r,n)},i}("VIDEOJS"),Is=bt.createLogger,$=Object.prototype.toString,oe=function(r){return xt(r)?Object.keys(r):[]};function J(s,r){oe(s).forEach(function(t){return r(s[t],t)})}function $e(s){for(var r=arguments.length,t=new Array(r>1?r-1:0),i=1;i<r;i++)t[i-1]=arguments[i];return Object.assign?vt.apply(void 0,[s].concat(t)):(t.forEach(function(e){e&&J(e,function(n,a){s[a]=n})}),s)}function xt(s){return!!s&&"object"==typeof s}function ei(s){return xt(s)&&"[object Object]"===$.call(s)&&s.constructor===Object}function Pt(s,r){if(!s||!r)return"";if("function"==typeof M().getComputedStyle){var t;try{t=M().getComputedStyle(s)}catch{return""}return t?t.getPropertyValue(r)||t[r]:""}return""}var Ti=M().navigator&&M().navigator.userAgent||"",xd=/AppleWebKit\/([\d.]+)/i.exec(Ti),Fr=xd?parseFloat(xd.pop()):null,Ps=/iPod/i.test(Ti),Wp=function(){var s=Ti.match(/OS (\d+)_/i);return s&&s[1]?s[1]:null}(),ur=/Android/i.test(Ti),qa=function(){var s=Ti.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!s)return null;var r=s[1]&&parseFloat(s[1]),t=s[2]&&parseFloat(s[2]);return r&&t?parseFloat(s[1]+"."+s[2]):r||null}(),ks=ur&&qa<5&&Fr<537,Ot=/Firefox/i.test(Ti),Os=/Edg/i.test(Ti),un=!Os&&(/Chrome/i.test(Ti)||/CriOS/i.test(Ti)),Ls=function(){var s=Ti.match(/(Chrome|CriOS)\/(\d+)/);return s&&s[2]?parseFloat(s[2]):null}(),Rs=function(){var s=/MSIE\s(\d+)\.\d/.exec(Ti),r=s&&parseFloat(s[1]);return!r&&/Trident\/7.0/i.test(Ti)&&/rv:11.0/.test(Ti)&&(r=11),r}(),yl=/Safari/i.test(Ti)&&!un&&!ur&&!Os,Sd=/Windows/i.test(Ti),Cn=!(!cn()||!("ontouchstart"in M()||M().navigator.maxTouchPoints||M().DocumentTouch&&M().document instanceof M().DocumentTouch)),ln=/iPad/i.test(Ti)||yl&&Cn&&!/iPhone/i.test(Ti),Ga=/iPhone/i.test(Ti)&&!ln,qi=Ga||ln||Ps,fa=(yl||qi)&&!un,Ed=Object.freeze({__proto__:null,IS_IPOD:Ps,IOS_VERSION:Wp,IS_ANDROID:ur,ANDROID_VERSION:qa,IS_NATIVE_ANDROID:ks,IS_FIREFOX:Ot,IS_EDGE:Os,IS_CHROME:un,CHROME_VERSION:Ls,IE_VERSION:Rs,IS_SAFARI:yl,IS_WINDOWS:Sd,TOUCH_ENABLED:Cn,IS_IPAD:ln,IS_IPHONE:Ga,IS_IOS:qi,IS_ANY_SAFARI:fa});function Tl(s){return"string"==typeof s&&!!s.trim()}function Ms(s){if(s.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function cn(){return ue()===M().document}function Nr(s){return xt(s)&&1===s.nodeType}function Fs(){try{return M().parent!==M().self}catch{return!0}}function Ad(s){return function(r,t){if(!Tl(r))return ue()[s](null);Tl(t)&&(t=ue().querySelector(t));var i=Nr(t)?t:ue();return i[s]&&i[s](r)}}function At(s,r,t,i){void 0===s&&(s="div"),void 0===r&&(r={}),void 0===t&&(t={});var e=ue().createElement(s);return Object.getOwnPropertyNames(r).forEach(function(n){var a=r[n];-1!==n.indexOf("aria-")||"role"===n||"type"===n?(bt.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+n+" to "+a+"."),e.setAttribute(n,a)):"textContent"===n?ha(e,a):(e[n]!==a||"tabIndex"===n)&&(e[n]=a)}),Object.getOwnPropertyNames(t).forEach(function(n){e.setAttribute(n,t[n])}),i&&ma(e,i),e}function ha(s,r){return typeof s.textContent>"u"?s.innerText=r:s.textContent=r,s}function za(s,r){r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s)}function dn(s,r){return Ms(r),s.classList?s.classList.contains(r):function Cd(s){return new RegExp("(^|\\s)"+s+"($|\\s)")}(r).test(s.className)}function Gr(s,r){return s.classList?s.classList.add(r):dn(s,r)||(s.className=(s.className+" "+r).trim()),s}function Ns(s,r){return s?(s.classList?s.classList.remove(r):(Ms(r),s.className=s.className.split(/\s+/).filter(function(t){return t!==r}).join(" ")),s):(bt.warn("removeClass was called with an element that doesn't exist"),null)}function bl(s,r,t){var i=dn(s,r);if("function"==typeof t&&(t=t(s,r)),"boolean"!=typeof t&&(t=!i),t!==i)return t?Gr(s,r):Ns(s,r),s}function wd(s,r){Object.getOwnPropertyNames(r).forEach(function(t){var i=r[t];null===i||typeof i>"u"||!1===i?s.removeAttribute(t):s.setAttribute(t,!0===i?"":i)})}function An(s){var r={};if(s&&s.attributes&&s.attributes.length>0)for(var i=s.attributes,e=i.length-1;e>=0;e--){var n=i[e].name,a=i[e].value;("boolean"==typeof s[n]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+n+","))&&(a=null!==a),r[n]=a}return r}function bi(s,r){return s.getAttribute(r)}function hi(s,r,t){s.setAttribute(r,t)}function zo(s,r){s.removeAttribute(r)}function Dd(){ue().body.focus(),ue().onselectstart=function(){return!1}}function xl(){ue().onselectstart=function(){return!0}}function Xa(s){if(s&&s.getBoundingClientRect&&s.parentNode){var r=s.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(function(i){void 0!==r[i]&&(t[i]=r[i])}),t.height||(t.height=parseFloat(Pt(s,"height"))),t.width||(t.width=parseFloat(Pt(s,"width"))),t}}function pa(s){if(!s||s&&!s.offsetParent)return{left:0,top:0,width:0,height:0};for(var r=s.offsetWidth,t=s.offsetHeight,i=0,e=0;s.offsetParent&&s!==ue()[Wo.fullscreenElement];)i+=s.offsetLeft,e+=s.offsetTop,s=s.offsetParent;return{left:i,top:e,width:r,height:t}}function zn(s,r){var t={x:0,y:0};if(qi)for(var i=s;i&&"html"!==i.nodeName.toLowerCase();){var e=Pt(i,"transform");if(/^matrix/.test(e)){var n=e.slice(7,-1).split(/,\s/).map(Number);t.x+=n[4],t.y+=n[5]}else if(/^matrix3d/.test(e)){var a=e.slice(9,-1).split(/,\s/).map(Number);t.x+=a[12],t.y+=a[13]}i=i.parentNode}var u={},c=pa(r.target),d=pa(s),p=d.width,v=r.offsetY-(d.top-c.top),b=r.offsetX-(d.left-c.left);return r.changedTouches&&(b=r.changedTouches[0].pageX-d.left,v=r.changedTouches[0].pageY+d.top,qi&&(b-=t.x,v-=t.y)),u.y=1-Math.max(0,Math.min(1,v/d.height)),u.x=Math.max(0,Math.min(1,b/p)),u}function Xo(s){return xt(s)&&3===s.nodeType}function Xn(s){for(;s.firstChild;)s.removeChild(s.firstChild);return s}function $a(s){return"function"==typeof s&&(s=s()),(Array.isArray(s)?s:[s]).map(function(r){return"function"==typeof r&&(r=r()),Nr(r)||Xo(r)?r:"string"==typeof r&&/\S/.test(r)?ue().createTextNode(r):void 0}).filter(function(r){return r})}function ma(s,r){return $a(r).forEach(function(t){return s.appendChild(t)}),s}function Bs(s,r){return ma(Xn(s),r)}function fn(s){return void 0===s.button&&void 0===s.buttons||0===s.button&&void 0===s.buttons||"mouseup"===s.type&&0===s.button&&0===s.buttons||!(0!==s.button||1!==s.buttons)}var Sl,$n=Ad("querySelector"),Id=Ad("querySelectorAll"),Pd=Object.freeze({__proto__:null,isReal:cn,isEl:Nr,isInFrame:Fs,createEl:At,textContent:ha,prependTo:za,hasClass:dn,addClass:Gr,removeClass:Ns,toggleClass:bl,setAttributes:wd,getAttributes:An,getAttribute:bi,setAttribute:hi,removeAttribute:zo,blockTextSelection:Dd,unblockTextSelection:xl,getBoundingClientRect:Xa,findPosition:pa,getPointerPosition:zn,isTextNode:Xo,emptyEl:Xn,normalizeContent:$a,appendContent:ma,insertContent:Bs,isSingleLeftClick:fn,$:$n,$$:Id}),kd=!1,$o=function(){if(!1!==Sl.options.autoSetup){var r=Array.prototype.slice.call(ue().getElementsByTagName("video")),t=Array.prototype.slice.call(ue().getElementsByTagName("audio")),i=Array.prototype.slice.call(ue().getElementsByTagName("video-js")),e=r.concat(t,i);if(e&&e.length>0)for(var n=0,a=e.length;n<a;n++){var u=e[n];if(!u||!u.getAttribute){ga(1);break}void 0===u.player&&null!==u.getAttribute("data-setup")&&Sl(u)}else kd||ga(1)}};function ga(s,r){cn()&&(r&&(Sl=r),M().setTimeout($o,s))}function Ko(){kd=!0,M().removeEventListener("load",Ko)}cn()&&("complete"===ue().readyState?Ko():M().addEventListener("load",Ko));var Od,k=function(r){var t=ue().createElement("style");return t.className=r,t},va=function(r,t){r.styleSheet?r.styleSheet.cssText=t:r.textContent=t},Br=3;function pt(){return Br++}M().WeakMap||(Od=function(){function s(){this.vdata="vdata"+Math.floor(M().performance&&M().performance.now()||Date.now()),this.data={}}var r=s.prototype;return r.set=function(i,e){var n=i[this.vdata]||pt();return i[this.vdata]||(i[this.vdata]=n),this.data[n]=e,this},r.get=function(i){var e=i[this.vdata];if(e)return this.data[e];bt("We have no data for this element",i)},r.has=function(i){return i[this.vdata]in this.data},r.delete=function(i){var e=i[this.vdata];e&&(delete this.data[e],delete i[this.vdata])},s}());var Yi=M().WeakMap?new WeakMap:new Od;function Ld(s,r){if(Yi.has(s)){var t=Yi.get(s);0===t.handlers[r].length&&(delete t.handlers[r],s.removeEventListener?s.removeEventListener(r,t.dispatcher,!1):s.detachEvent&&s.detachEvent("on"+r,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),0===Object.getOwnPropertyNames(t).length&&Yi.delete(s)}}function wn(s,r,t,i){t.forEach(function(e){s(r,e,i)})}function Qo(s){if(s.fixed_)return s;function r(){return!0}function t(){return!1}if(!s||!s.isPropagationStopped||!s.isImmediatePropagationStopped){var i=s||M().event;for(var e in s={},i)"layerX"!==e&&"layerY"!==e&&"keyLocation"!==e&&"webkitMovementX"!==e&&"webkitMovementY"!==e&&"path"!==e&&("returnValue"===e&&i.preventDefault||(s[e]=i[e]));if(s.target||(s.target=s.srcElement||ue()),s.relatedTarget||(s.relatedTarget=s.fromElement===s.target?s.toElement:s.fromElement),s.preventDefault=function(){i.preventDefault&&i.preventDefault(),s.returnValue=!1,i.returnValue=!1,s.defaultPrevented=!0},s.defaultPrevented=!1,s.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),s.cancelBubble=!0,i.cancelBubble=!0,s.isPropagationStopped=r},s.isPropagationStopped=t,s.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),s.isImmediatePropagationStopped=r,s.stopPropagation()},s.isImmediatePropagationStopped=t,null!=s.clientX){var n=ue().documentElement,a=ue().body;s.pageX=s.clientX+(n&&n.scrollLeft||a&&a.scrollLeft||0)-(n&&n.clientLeft||a&&a.clientLeft||0),s.pageY=s.clientY+(n&&n.scrollTop||a&&a.scrollTop||0)-(n&&n.clientTop||a&&a.clientTop||0)}s.which=s.charCode||s.keyCode,null!=s.button&&(s.button=1&s.button?0:4&s.button?1:2&s.button?2:0)}return s.fixed_=!0,s}var Jo,qp=function(){if("boolean"!=typeof Jo){Jo=!1;try{var r=Object.defineProperty({},"passive",{get:function(){Jo=!0}});M().addEventListener("test",null,r),M().removeEventListener("test",null,r)}catch{}}return Jo},Gp=["touchstart","touchmove"];function br(s,r,t){if(Array.isArray(r))return wn(br,s,r,t);Yi.has(s)||Yi.set(s,{});var i=Yi.get(s);if(i.handlers||(i.handlers={}),i.handlers[r]||(i.handlers[r]=[]),t.guid||(t.guid=pt()),i.handlers[r].push(t),i.dispatcher||(i.disabled=!1,i.dispatcher=function(n,a){if(!i.disabled){n=Qo(n);var u=i.handlers[n.type];if(u)for(var c=u.slice(0),d=0,p=c.length;d<p&&!n.isImmediatePropagationStopped();d++)try{c[d].call(s,n,a)}catch(y){bt.error(y)}}}),1===i.handlers[r].length)if(s.addEventListener){var e=!1;qp()&&Gp.indexOf(r)>-1&&(e={passive:!0}),s.addEventListener(r,i.dispatcher,e)}else s.attachEvent&&s.attachEvent("on"+r,i.dispatcher)}function Yt(s,r,t){if(Yi.has(s)){var i=Yi.get(s);if(i.handlers){if(Array.isArray(r))return wn(Yt,s,r,t);var e=function(d,p){i.handlers[p]=[],Ld(d,p)};if(void 0===r){for(var n in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},n)&&e(s,n);return}var a=i.handlers[r];if(a){if(!t)return void e(s,r);if(t.guid)for(var u=0;u<a.length;u++)a[u].guid===t.guid&&a.splice(u--,1);Ld(s,r)}}}}function Ka(s,r,t){var i=Yi.has(s)?Yi.get(s):{},e=s.parentNode||s.ownerDocument;if("string"==typeof r?r={type:r,target:s}:r.target||(r.target=s),r=Qo(r),i.dispatcher&&i.dispatcher.call(s,r,t),e&&!r.isPropagationStopped()&&!0===r.bubbles)Ka.call(null,e,r,t);else if(!e&&!r.defaultPrevented&&r.target&&r.target[r.type]){Yi.has(r.target)||Yi.set(r.target,{});var n=Yi.get(r.target);r.target[r.type]&&(n.disabled=!0,"function"==typeof r.target[r.type]&&r.target[r.type](),n.disabled=!1)}return!r.defaultPrevented}function Zo(s,r,t){if(Array.isArray(r))return wn(Zo,s,r,t);var i=function e(){Yt(s,r,e),t.apply(this,arguments)};i.guid=t.guid=t.guid||pt(),br(s,r,i)}function Rd(s,r,t){var i=function e(){Yt(s,r,e),t.apply(this,arguments)};i.guid=t.guid=t.guid||pt(),br(s,r,i)}var Us,zp=Object.freeze({__proto__:null,fixEvent:Qo,on:br,off:Yt,trigger:Ka,one:Zo,any:Rd}),Dt=function(r,t,i){t.guid||(t.guid=pt());var e=t.bind(r);return e.guid=i?i+"_"+t.guid:t.guid,e},Dn=function(r,t){var i=M().performance.now();return function(){var a=M().performance.now();a-i>=t&&(r.apply(void 0,arguments),i=a)}},Ii=function(){};Ii.prototype.allowedEvents_={},Ii.prototype.on=function(s,r){var t=this.addEventListener;this.addEventListener=function(){},br(this,s,r),this.addEventListener=t},Ii.prototype.addEventListener=Ii.prototype.on,Ii.prototype.off=function(s,r){Yt(this,s,r)},Ii.prototype.removeEventListener=Ii.prototype.off,Ii.prototype.one=function(s,r){var t=this.addEventListener;this.addEventListener=function(){},Zo(this,s,r),this.addEventListener=t},Ii.prototype.any=function(s,r){var t=this.addEventListener;this.addEventListener=function(){},Rd(this,s,r),this.addEventListener=t},Ii.prototype.trigger=function(s){var r=s.type||s;"string"==typeof s&&(s={type:r}),s=Qo(s),this.allowedEvents_[r]&&this["on"+r]&&this["on"+r](s),Ka(this,s)},Ii.prototype.dispatchEvent=Ii.prototype.trigger,Ii.prototype.queueTrigger=function(s){var r=this;Us||(Us=new Map);var t=s.type||s,i=Us.get(this);i||Us.set(this,i=new Map);var e=i.get(t);i.delete(t),M().clearTimeout(e);var n=M().setTimeout(function(){i.delete(t),0===i.size&&(i=null,Us.delete(r)),r.trigger(s)},0);i.set(t,n)};var eu=function(r){return"function"==typeof r.name?r.name():"string"==typeof r.name?r.name:r.name_?r.name_:r.constructor&&r.constructor.name?r.constructor.name:typeof r},Qi=function(r){return r instanceof Ii||!!r.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof r[t]})},El=function(r){return"string"==typeof r&&/\S/.test(r)||Array.isArray(r)&&!!r.length},lr=function(r,t,i){if(!r||!r.nodeName&&!Qi(r))throw new Error("Invalid target for "+eu(t)+"#"+i+"; must be a DOM node or evented object.")},Md=function(r,t,i){if(!El(r))throw new Error("Invalid event type for "+eu(t)+"#"+i+"; must be a non-empty string or array.")},Fd=function(r,t,i){if("function"!=typeof r)throw new Error("Invalid listener for "+eu(t)+"#"+i+"; must be a function.")},Cl=function(r,t,i){var n,a,u,e=t.length<3||t[0]===r||t[0]===r.eventBusEl_;return e?(n=r.eventBusEl_,t.length>=3&&t.shift(),a=t[0],u=t[1]):(n=t[0],a=t[1],u=t[2]),lr(n,r,i),Md(a,r,i),Fd(u,r,i),{isTargetingSelf:e,target:n,type:a,listener:u=Dt(r,u)}},_a=function(r,t,i,e){lr(r,r,t),r.nodeName?zp[t](r,i,e):r[t](i,e)},Kp={on:function(){for(var r=this,t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];var n=Cl(this,i,"on"),a=n.isTargetingSelf,u=n.target,c=n.type,d=n.listener;if(_a(u,"on",c,d),!a){var p=function(){return r.off(u,c,d)};p.guid=d.guid;var y=function(){return r.off("dispose",p)};y.guid=d.guid,_a(this,"on","dispose",p),_a(u,"on","dispose",y)}},one:function(){for(var r=this,t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];var n=Cl(this,i,"one"),u=n.target,c=n.type,d=n.listener;if(n.isTargetingSelf)_a(u,"one",c,d);else{var p=function y(){r.off(u,c,y);for(var v=arguments.length,b=new Array(v),D=0;D<v;D++)b[D]=arguments[D];d.apply(null,b)};p.guid=d.guid,_a(u,"one",c,p)}},any:function(){for(var r=this,t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];var n=Cl(this,i,"any"),u=n.target,c=n.type,d=n.listener;if(n.isTargetingSelf)_a(u,"any",c,d);else{var p=function y(){r.off(u,c,y);for(var v=arguments.length,b=new Array(v),D=0;D<v;D++)b[D]=arguments[D];d.apply(null,b)};p.guid=d.guid,_a(u,"any",c,p)}},off:function(r,t,i){if(!r||El(r))Yt(this.eventBusEl_,r,t);else{var e=r,n=t;lr(e,this,"off"),Md(n,this,"off"),Fd(i,this,"off"),i=Dt(this,i),this.off("dispose",i),e.nodeName?(Yt(e,n,i),Yt(e,"dispose",i)):Qi(e)&&(e.off(n,i),e.off("dispose",i))}},trigger:function(r,t){if(lr(this.eventBusEl_,this,"trigger"),!El(r&&"string"!=typeof r?r.type:r)){var e="Invalid event type for "+eu(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!r)throw new Error(e);(this.log||bt).error(e)}return Ka(this.eventBusEl_,r,t)}};function tu(s,r){void 0===r&&(r={});var i=r.eventBusKey;if(i){if(!s[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');s.eventBusEl_=s[i]}else s.eventBusEl_=At("span",{className:"vjs-event-bus"});return $e(s,Kp),s.eventedCallbacks&&s.eventedCallbacks.forEach(function(e){e()}),s.on("dispose",function(){s.off(),[s,s.el_,s.eventBusEl_].forEach(function(e){e&&Yi.has(e)&&Yi.delete(e)}),M().setTimeout(function(){s.eventBusEl_=null},0)}),s}var Nd={state:{},setState:function(r){var i,t=this;return"function"==typeof r&&(r=r()),J(r,function(e,n){t.state[n]!==e&&((i=i||{})[n]={from:t.state[n],to:e}),t.state[n]=e}),i&&Qi(this)&&this.trigger({changes:i,type:"statechanged"}),i}};function Bd(s,r){return $e(s,Nd),s.state=$e({},s.state,r),"function"==typeof s.handleStateChanged&&Qi(s)&&s.on("statechanged",s.handleStateChanged),s}var iu=function(r){return"string"!=typeof r?r:r.replace(/./,function(t){return t.toLowerCase()})},ti=function(r){return"string"!=typeof r?r:r.replace(/./,function(t){return t.toUpperCase()})};function Bt(){for(var s={},r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];return t.forEach(function(e){e&&J(e,function(n,a){ei(n)?(ei(s[a])||(s[a]={}),s[a]=Bt(s[a],n)):s[a]=n})}),s}var Yp=function(){function s(){this.map_={}}var r=s.prototype;return r.has=function(i){return i in this.map_},r.delete=function(i){var e=this.has(i);return delete this.map_[i],e},r.set=function(i,e){return this.map_[i]=e,this},r.forEach=function(i,e){for(var n in this.map_)i.call(e,this.map_[n],n,this)},s}(),Ud=M().Map?M().Map:Yp,Qp=function(){function s(){this.set_={}}var r=s.prototype;return r.has=function(i){return i in this.set_},r.delete=function(i){var e=this.has(i);return delete this.set_[i],e},r.add=function(i){return this.set_[i]=1,this},r.forEach=function(i,e){for(var n in this.set_)i.call(e,n,n,this)},s}(),Xr=M().Set?M().Set:Qp,ge=function(){function s(t,i,e){var n=this;if(this.player_=!t&&this.play?t=this:t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Bt({},this.options_),i=this.options_=Bt(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){var a=t&&t.id&&t.id()||"no_player";this.id_=a+"_component_"+pt()}this.name_=i.name||null,i.el?this.el_=i.el:!1!==i.createEl&&(this.el_=this.createEl()),i.className&&this.el_&&i.className.split(" ").forEach(function(u){return n.addClass(u)}),!1!==i.evented&&(tu(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Bd(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Xr,this.setIntervalIds_=new Xr,this.rafIds_=new Xr,this.namedRafs_=new Ud,this.clearingTimersOnDispose_=!1,!1!==i.initChildren&&this.initChildren(),this.ready(e),!1!==i.reportTouchActivity&&this.enableTouchActivity()}var r=s.prototype;return r.dispose=function(i){if(void 0===i&&(i={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(i.restoreEl?this.el_.parentNode.replaceChild(i.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},r.isDisposed=function(){return!!this.isDisposed_},r.player=function(){return this.player_},r.options=function(i){return i?(this.options_=Bt(this.options_,i),this.options_):this.options_},r.el=function(){return this.el_},r.createEl=function(i,e,n){return At(i,e,n)},r.localize=function(i,e,n){void 0===n&&(n=i);var a=this.player_.language&&this.player_.language(),u=this.player_.languages&&this.player_.languages(),c=u&&u[a],d=a&&a.split("-")[0],p=u&&u[d],y=n;return c&&c[i]?y=c[i]:p&&p[i]&&(y=p[i]),e&&(y=y.replace(/\{(\d+)\}/g,function(v,b){var D=e[b-1],I=D;return typeof D>"u"&&(I=v),I})),y},r.handleLanguagechange=function(){},r.contentEl=function(){return this.contentEl_||this.el_},r.id=function(){return this.id_},r.name=function(){return this.name_},r.children=function(){return this.children_},r.getChildById=function(i){return this.childIndex_[i]},r.getChild=function(i){if(i)return this.childNameIndex_[i]},r.getDescendant=function(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];e=e.reduce(function(c,d){return c.concat(d)},[]);for(var a=this,u=0;u<e.length;u++)if(!(a=a.getChild(e[u]))||!a.getChild)return;return a},r.addChild=function(i,e,n){var a,u;if(void 0===e&&(e={}),void 0===n&&(n=this.children_.length),"string"==typeof i){u=ti(i);var c=e.componentClass||u;e.name=u;var d=s.getComponent(c);if(!d)throw new Error("Component "+c+" does not exist");if("function"!=typeof d)return null;a=new d(this.player_||this,e)}else a=i;if(a.parentComponent_&&a.parentComponent_.removeChild(a),this.children_.splice(n,0,a),a.parentComponent_=this,"function"==typeof a.id&&(this.childIndex_[a.id()]=a),(u=u||a.name&&ti(a.name()))&&(this.childNameIndex_[u]=a,this.childNameIndex_[iu(u)]=a),"function"==typeof a.el&&a.el()){var p=null;this.children_[n+1]&&(this.children_[n+1].el_?p=this.children_[n+1].el_:Nr(this.children_[n+1])&&(p=this.children_[n+1])),this.contentEl().insertBefore(a.el(),p)}return a},r.removeChild=function(i){if("string"==typeof i&&(i=this.getChild(i)),i&&this.children_){for(var e=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===i){e=!0,this.children_.splice(n,1);break}if(e){i.parentComponent_=null,this.childIndex_[i.id()]=null,this.childNameIndex_[ti(i.name())]=null,this.childNameIndex_[iu(i.name())]=null;var a=i.el();a&&a.parentNode===this.contentEl()&&this.contentEl().removeChild(i.el())}}},r.initChildren=function(){var i=this,e=this.options_.children;if(e){var u,n=this.options_,c=s.getComponent("Tech");(u=Array.isArray(e)?e:Object.keys(e)).concat(Object.keys(this.options_).filter(function(d){return!u.some(function(p){return"string"==typeof p?d===p:d===p.name})})).map(function(d){var p,y;return"string"==typeof d?y=e[p=d]||i.options_[p]||{}:(p=d.name,y=d),{name:p,opts:y}}).filter(function(d){var p=s.getComponent(d.opts.componentClass||ti(d.name));return p&&!c.isTech(p)}).forEach(function(p){var y=p.name,v=p.opts;if(void 0!==n[y]&&(v=n[y]),!1!==v){!0===v&&(v={}),v.playerOptions=i.options_.playerOptions;var b=i.addChild(y,v);b&&(i[y]=b)}})}},r.buildCSSClass=function(){return""},r.ready=function(i,e){if(void 0===e&&(e=!1),i){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(i);e?i.call(this):this.setTimeout(i,1)}},r.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var i=this.readyQueue_;this.readyQueue_=[],i&&i.length>0&&i.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},r.$=function(i,e){return $n(i,e||this.contentEl())},r.$$=function(i,e){return Id(i,e||this.contentEl())},r.hasClass=function(i){return dn(this.el_,i)},r.addClass=function(i){Gr(this.el_,i)},r.removeClass=function(i){Ns(this.el_,i)},r.toggleClass=function(i,e){bl(this.el_,i,e)},r.show=function(){this.removeClass("vjs-hidden")},r.hide=function(){this.addClass("vjs-hidden")},r.lockShowing=function(){this.addClass("vjs-lock-showing")},r.unlockShowing=function(){this.removeClass("vjs-lock-showing")},r.getAttribute=function(i){return bi(this.el_,i)},r.setAttribute=function(i,e){hi(this.el_,i,e)},r.removeAttribute=function(i){zo(this.el_,i)},r.width=function(i,e){return this.dimension("width",i,e)},r.height=function(i,e){return this.dimension("height",i,e)},r.dimensions=function(i,e){this.width(i,!0),this.height(e)},r.dimension=function(i,e,n){if(void 0!==e)return(null===e||e!=e)&&(e=0),this.el_.style[i]=-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?e:"auto"===e?"":e+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var a=this.el_.style[i],u=a.indexOf("px");return parseInt(-1!==u?a.slice(0,u):this.el_["offset"+ti(i)],10)},r.currentDimension=function(i){var e=0;if("width"!==i&&"height"!==i)throw new Error("currentDimension only accepts width or height value");if(e=Pt(this.el_,i),0===(e=parseFloat(e))||isNaN(e)){var n="offset"+ti(i);e=this.el_[n]}return e},r.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},r.currentWidth=function(){return this.currentDimension("width")},r.currentHeight=function(){return this.currentDimension("height")},r.focus=function(){this.el_.focus()},r.blur=function(){this.el_.blur()},r.handleKeyDown=function(i){this.player_&&(ne().isEventKey(i,"Tab")||i.stopPropagation(),this.player_.handleKeyDown(i))},r.handleKeyPress=function(i){this.handleKeyDown(i)},r.emitTapEvents=function(){var u,i=0,e=null;this.on("touchstart",function(d){1===d.touches.length&&(e={pageX:d.touches[0].pageX,pageY:d.touches[0].pageY},i=M().performance.now(),u=!0)}),this.on("touchmove",function(d){if(d.touches.length>1)u=!1;else if(e){var p=d.touches[0].pageX-e.pageX,y=d.touches[0].pageY-e.pageY;Math.sqrt(p*p+y*y)>10&&(u=!1)}});var c=function(){u=!1};this.on("touchleave",c),this.on("touchcancel",c),this.on("touchend",function(d){e=null,!0===u&&M().performance.now()-i<200&&(d.preventDefault(),this.trigger("tap"))})},r.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,i=Dt(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){i(),this.clearInterval(e),e=this.setInterval(i,250)});var n=function(u){i(),this.clearInterval(e)};this.on("touchmove",i),this.on("touchend",n),this.on("touchcancel",n)}},r.setTimeout=function(i,e){var a,n=this;return i=Dt(this,i),this.clearTimersOnDispose_(),a=M().setTimeout(function(){n.setTimeoutIds_.has(a)&&n.setTimeoutIds_.delete(a),i()},e),this.setTimeoutIds_.add(a),a},r.clearTimeout=function(i){return this.setTimeoutIds_.has(i)&&(this.setTimeoutIds_.delete(i),M().clearTimeout(i)),i},r.setInterval=function(i,e){i=Dt(this,i),this.clearTimersOnDispose_();var n=M().setInterval(i,e);return this.setIntervalIds_.add(n),n},r.clearInterval=function(i){return this.setIntervalIds_.has(i)&&(this.setIntervalIds_.delete(i),M().clearInterval(i)),i},r.requestAnimationFrame=function(i){var n,e=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),i=Dt(this,i),n=M().requestAnimationFrame(function(){e.rafIds_.has(n)&&e.rafIds_.delete(n),i()}),this.rafIds_.add(n),n):this.setTimeout(i,1e3/60)},r.requestNamedAnimationFrame=function(i,e){var n=this;if(!this.namedRafs_.has(i)){this.clearTimersOnDispose_(),e=Dt(this,e);var a=this.requestAnimationFrame(function(){e(),n.namedRafs_.has(i)&&n.namedRafs_.delete(i)});return this.namedRafs_.set(i,a),i}},r.cancelNamedAnimationFrame=function(i){this.namedRafs_.has(i)&&(this.cancelAnimationFrame(this.namedRafs_.get(i)),this.namedRafs_.delete(i))},r.cancelAnimationFrame=function(i){return this.supportsRaf_?(this.rafIds_.has(i)&&(this.rafIds_.delete(i),M().cancelAnimationFrame(i)),i):this.clearTimeout(i)},r.clearTimersOnDispose_=function(){var i=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var a=e[1];i[e[0]].forEach(function(u,c){return i[a](c)})}),i.clearingTimersOnDispose_=!1}))},s.registerComponent=function(i,e){if("string"!=typeof i||!i)throw new Error('Illegal component name, "'+i+'"; must be a non-empty string.');var n=s.getComponent("Tech"),a=n&&n.isTech(e),u=s===e||s.prototype.isPrototypeOf(e.prototype);if(a||!u)throw new Error('Illegal component, "'+i+'"; '+(a?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");i=ti(i),s.components_||(s.components_={});var d=s.getComponent("Player");if("Player"===i&&d&&d.players){var p=d.players,y=Object.keys(p);if(p&&y.length>0&&y.map(function(v){return p[v]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return s.components_[i]=e,s.components_[iu(i)]=e,e},s.getComponent=function(i){if(i&&s.components_)return s.components_[i]},s}();function xr(s,r,t,i){return function ya(s,r,t){if("number"!=typeof r||r<0||r>t)throw new Error("Failed to execute '"+s+"' on 'TimeRanges': The index provided ("+r+") is non-numeric or out of bounds (0-"+t+").")}(s,i,t.length-1),t[i][r]}function Al(s){var r;return r=void 0===s||0===s.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:s.length,start:xr.bind(null,"start",0,s),end:xr.bind(null,"end",1,s)},M().Symbol&&M().Symbol.iterator&&(r[M().Symbol.iterator]=function(){return(s||[]).values()}),r}function Kn(s,r){return Array.isArray(s)?Al(s):void 0===s||void 0===r?Al():Al([[s,r]])}function wl(s,r){var i,e,t=0;if(!r)return 0;(!s||!s.length)&&(s=Kn(0,0));for(var n=0;n<s.length;n++)i=s.start(n),(e=s.end(n))>r&&(e=r),t+=e-i;return t/r}function Si(s){if(s instanceof Si)return s;"number"==typeof s?this.code=s:"string"==typeof s?this.message=s:xt(s)&&("number"==typeof s.code&&(this.code=s.code),$e(this,s)),this.message||(this.message=Si.defaultMessages[this.code]||"")}ge.prototype.supportsRaf_="function"==typeof M().requestAnimationFrame&&"function"==typeof M().cancelAnimationFrame,ge.registerComponent("Component",ge),Si.prototype.code=0,Si.prototype.message="",Si.prototype.status=null,Si.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Si.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Sr=0;Sr<Si.errorTypes.length;Sr++)Si[Si.errorTypes[Sr]]=Sr,Si.prototype[Si.errorTypes[Sr]]=Sr;function Ya(s){return null!=s&&"function"==typeof s.then}function hn(s){Ya(s)&&s.then(null,function(r){})}var Qa=function(r){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(i,e,n){return r[e]&&(i[e]=r[e]),i},{cues:r.cues&&Array.prototype.map.call(r.cues,function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}})})},Hs="vjs-modal-dialog",Ta=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).handleKeyDown_=function(a){return n.handleKeyDown(a)},n.close_=function(a){return n.close(a)},n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=At("div",{className:Hs+"-content"},{role:"document"}),n.descEl_=At("p",{className:Hs+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),ha(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}Y(r,s);var t=r.prototype;return t.createEl=function(){return s.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,s.prototype.dispose.call(this)},t.buildCSSClass=function(){return Hs+" vjs-hidden "+s.prototype.buildCSSClass.call(this)},t.label=function(){return this.localize(this.options_.label||"Modal Window")},t.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.closeable=function(e){if("boolean"==typeof e){var n=this.closeable_=!!e,a=this.getChild("closeButton");if(n&&!a){var u=this.contentEl_;this.contentEl_=this.el_,a=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=u,this.on(a,"close",this.close_)}!n&&a&&(this.off(a,"close",this.close_),this.removeChild(a),a.dispose())}return this.closeable_},t.fill=function(){this.fillWith(this.content())},t.fillWith=function(e){var n=this.contentEl(),a=n.parentNode,u=n.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,a.removeChild(n),this.empty(),Bs(n,e),this.trigger("modalfill"),u?a.insertBefore(n,u):a.appendChild(n);var c=this.getChild("closeButton");c&&a.appendChild(c.el_)},t.empty=function(){this.trigger("beforemodalempty"),Xn(this.contentEl()),this.trigger("modalempty")},t.content=function(e){return typeof e<"u"&&(this.content_=e),this.content_},t.conditionalFocus_=function(){var e=ue().activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(e)||n===e)&&(this.previouslyActiveEl_=e,this.focus())},t.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},t.handleKeyDown=function(e){if(e.stopPropagation(),ne().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(ne().isEventKey(e,"Tab")){for(var u,n=this.focusableEls_(),a=this.el_.querySelector(":focus"),c=0;c<n.length;c++)if(a===n[c]){u=c;break}ue().activeElement===this.el_&&(u=0),e.shiftKey&&0===u?(n[n.length-1].focus(),e.preventDefault()):!e.shiftKey&&u===n.length-1&&(n[0].focus(),e.preventDefault())}},t.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(n){return(n instanceof M().HTMLAnchorElement||n instanceof M().HTMLAreaElement)&&n.hasAttribute("href")||(n instanceof M().HTMLInputElement||n instanceof M().HTMLSelectElement||n instanceof M().HTMLTextAreaElement||n instanceof M().HTMLButtonElement)&&!n.hasAttribute("disabled")||n instanceof M().HTMLIFrameElement||n instanceof M().HTMLObjectElement||n instanceof M().HTMLEmbedElement||n.hasAttribute("tabindex")&&-1!==n.getAttribute("tabindex")||n.hasAttribute("contenteditable")})},r}(ge);Ta.prototype.options_={pauseOnOpen:!0,temporary:!0},ge.registerComponent("ModalDialog",Ta);var Ji=function(s){function r(i){var e;void 0===i&&(i=[]),(e=s.call(this)||this).tracks_=[],Object.defineProperty(pe(e),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<i.length;n++)e.addTrack(i[n]);return e}Y(r,s);var t=r.prototype;return t.addTrack=function(e){var n=this,a=this.tracks_.length;""+a in this||Object.defineProperty(this,a,{get:function(){return this.tracks_[a]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){n.trigger({track:e,type:"labelchange",target:n})},Qi(e)&&e.addEventListener("labelchange",e.labelchange_)},t.removeTrack=function(e){for(var n,a=0,u=this.length;a<u;a++)if(this[a]===e){(n=this[a]).off&&n.off(),this.tracks_.splice(a,1);break}n&&this.trigger({track:n,type:"removetrack",target:this})},t.getTrackById=function(e){for(var n=null,a=0,u=this.length;a<u;a++){var c=this[a];if(c.id===e){n=c;break}}return n},r}(Ii);for(var Dl in Ji.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Ji.prototype.allowedEvents_)Ji.prototype["on"+Dl]=null;var Ja=function(r,t){for(var i=0;i<r.length;i++)!Object.keys(r[i]).length||t.id===r[i].id||(r[i].enabled=!1)},ba=function(s){function r(i){var e;void 0===i&&(i=[]);for(var n=i.length-1;n>=0;n--)if(i[n].enabled){Ja(i,i[n]);break}return(e=s.call(this,i)||this).changing_=!1,e}Y(r,s);var t=r.prototype;return t.addTrack=function(e){var n=this;e.enabled&&Ja(this,e),s.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){n.changing_||(n.changing_=!0,Ja(n,e),n.changing_=!1,n.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},t.removeTrack=function(e){s.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},r}(Ji),ru=function(r,t){for(var i=0;i<r.length;i++)!Object.keys(r[i]).length||t.id===r[i].id||(r[i].selected=!1)},Zi=function(s){function r(i){var e;void 0===i&&(i=[]);for(var n=i.length-1;n>=0;n--)if(i[n].selected){ru(i,i[n]);break}return(e=s.call(this,i)||this).changing_=!1,Object.defineProperty(pe(e),"selectedIndex",{get:function(){for(var u=0;u<this.length;u++)if(this[u].selected)return u;return-1},set:function(){}}),e}Y(r,s);var t=r.prototype;return t.addTrack=function(e){var n=this;e.selected&&ru(this,e),s.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){n.changing_||(n.changing_=!0,ru(n,e),n.changing_=!1,n.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},t.removeTrack=function(e){s.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},r}(Ji),nu=function(s){function r(){return s.apply(this,arguments)||this}Y(r,s);var t=r.prototype;return t.addTrack=function(e){var n=this;s.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},t.removeTrack=function(e){s.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},r}(Ji),Zp=function(){function s(t){void 0===t&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var i=0,e=t.length;i<e;i++)this.addTrackElement_(t[i])}var r=s.prototype;return r.addTrackElement_=function(i){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(i)&&this.trackElements_.push(i)},r.getTrackElementByTrack_=function(i){for(var e,n=0,a=this.trackElements_.length;n<a;n++)if(i===this.trackElements_[n].track){e=this.trackElements_[n];break}return e},r.removeTrackElement_=function(i){for(var e=0,n=this.trackElements_.length;e<n;e++)if(i===this.trackElements_[e]){this.trackElements_[e].track&&"function"==typeof this.trackElements_[e].track.off&&this.trackElements_[e].track.off(),"function"==typeof this.trackElements_[e].off&&this.trackElements_[e].off(),this.trackElements_.splice(e,1);break}},s}(),Hd=function(){function s(t){s.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var r=s.prototype;return r.setCues_=function(i){var e=this.length||0,n=0,a=i.length;this.cues_=i,this.length_=i.length;var u=function(d){""+d in this||Object.defineProperty(this,""+d,{get:function(){return this.cues_[d]}})};if(e<a)for(n=e;n<a;n++)u.call(this,n)},r.getCueById=function(i){for(var e=null,n=0,a=this.length;n<a;n++){var u=this[n];if(u.id===i){e=u;break}}return e},s}(),em={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Il={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},tm={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Za={disabled:"disabled",hidden:"hidden",showing:"showing"},au=function(s){function r(t){var i;void 0===t&&(t={}),i=s.call(this)||this;var e={id:t.id||"vjs_track_"+pt(),kind:t.kind||"",language:t.language||""},n=t.label||"",a=function(d){Object.defineProperty(pe(i),d,{get:function(){return e[d]},set:function(){}})};for(var u in e)a(u);return Object.defineProperty(pe(i),"label",{get:function(){return n},set:function(d){d!==n&&(n=d,this.trigger("labelchange"))}}),i}return Y(r,s),r}(Ii),Pl=function(r){var t=["protocol","hostname","port","pathname","search","hash","host"],i=ue().createElement("a");i.href=r;for(var e={},n=0;n<t.length;n++)e[t[n]]=i[t[n]];return"http:"===e.protocol&&(e.host=e.host.replace(/:80$/,"")),"https:"===e.protocol&&(e.host=e.host.replace(/:443$/,"")),e.protocol||(e.protocol=M().location.protocol),e.host||(e.host=M().location.host),e},jd=function(r){if(!r.match(/^https?:\/\//)){var t=ue().createElement("a");t.href=r,r=t.href}return r},xa=function(r){if("string"==typeof r){var i=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(r);if(i)return i.pop().toLowerCase()}return""},su=function(r,t){void 0===t&&(t=M().location);var i=Pl(r);return(":"===i.protocol?t.protocol:i.protocol)+i.host!==t.protocol+t.host},im=Object.freeze({__proto__:null,parseUrl:Pl,getAbsoluteURL:jd,getFileExtension:xa,isCrossOrigin:su}),ou=function(r,t){var i=new(M().WebVTT.Parser)(M(),M().vttjs,M().WebVTT.StringDecoder()),e=[];i.oncue=function(n){t.addCue(n)},i.onparsingerror=function(n){e.push(n)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(r),e.length>0&&(M().console&&M().console.groupCollapsed&&M().console.groupCollapsed("Text Track parsing errors for "+t.src),e.forEach(function(n){return bt.error(n)}),M().console&&M().console.groupEnd&&M().console.groupEnd()),i.flush()},kl=function(r,t){var i={uri:r},e=su(r);e&&(i.cors=e);var n="use-credentials"===t.tech_.crossOrigin();n&&(i.withCredentials=n),N()(i,Dt(this,function(a,u,c){if(a)return bt.error(a,u);t.loaded_=!0,"function"!=typeof M().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(d){if("vttjserror"!==d.type)return ou(c,t);bt.error("vttjs failed to load, stopping trying to process "+t.src)}):ou(c,t)}))},js=function(s){function r(i){var e;if(void 0===i&&(i={}),!i.tech)throw new Error("A tech was not provided.");var n=Bt(i,{kind:tm[i.kind]||"subtitles",language:i.language||i.srclang||""}),a=Za[n.mode]||"disabled",u=n.default;("metadata"===n.kind||"chapters"===n.kind)&&(a="hidden"),(e=s.call(this,n)||this).tech_=n.tech,e.cues_=[],e.activeCues_=[],e.preload_=!1!==e.tech_.preloadTextTracks;var c=new Hd(e.cues_),d=new Hd(e.activeCues_),p=!1;return e.timeupdateHandler=Dt(pe(e),function(v){if(void 0===v&&(v={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_)return void("timeupdate"!==v.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)));this.activeCues=this.activeCues,p&&(this.trigger("cuechange"),p=!1),"timeupdate"!==v.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}}),e.tech_.one("dispose",function(){e.stopTracking()}),"disabled"!==a&&e.startTracking(),Object.defineProperties(pe(e),{default:{get:function(){return u},set:function(){}},mode:{get:function(){return a},set:function(b){Za[b]&&a!==b&&(a=b,!this.preload_&&"disabled"!==a&&0===this.cues.length&&kl(this.src,this),this.stopTracking(),"disabled"!==a&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?c:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return d;for(var b=this.tech_.currentTime(),D=[],I=0,P=this.cues.length;I<P;I++){var G=this.cues[I];(G.startTime<=b&&G.endTime>=b||G.startTime===G.endTime&&G.startTime<=b&&G.startTime+.5>=b)&&D.push(G)}if(p=!1,D.length!==this.activeCues_.length)p=!0;else for(var ie=0;ie<D.length;ie++)-1===this.activeCues_.indexOf(D[ie])&&(p=!0);return this.activeCues_=D,d.setCues_(this.activeCues_),d},set:function(){}}}),n.src?(e.src=n.src,e.preload_||(e.loaded_=!0),(e.preload_||"subtitles"!==n.kind&&"captions"!==n.kind)&&kl(e.src,pe(e))):e.loaded_=!0,e}Y(r,s);var t=r.prototype;return t.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},t.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},t.addCue=function(e){var n=e;if(n.constructor&&"VTTCue"!==n.constructor.name){for(var a in n=new(M().vttjs.VTTCue)(e.startTime,e.endTime,e.text),e)a in n||(n[a]=e[a]);n.id=e.id,n.originalCue_=e}for(var u=this.tech_.textTracks(),c=0;c<u.length;c++)u[c]!==this&&u[c].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)},t.removeCue=function(e){for(var n=this.cues_.length;n--;){var a=this.cues_[n];if(a===e||a.originalCue_&&a.originalCue_===e){this.cues_.splice(n,1),this.cues.setCues_(this.cues_);break}}},r}(au);js.prototype.allowedEvents_={cuechange:"cuechange"};var Wd=function(s){function r(t){var i;void 0===t&&(t={});var e=Bt(t,{kind:Il[t.kind]||""});i=s.call(this,e)||this;var n=!1;return Object.defineProperty(pe(i),"enabled",{get:function(){return n},set:function(u){"boolean"!=typeof u||u===n||(n=u,this.trigger("enabledchange"))}}),e.enabled&&(i.enabled=e.enabled),i.loaded_=!0,i}return Y(r,s),r}(au),qd=function(s){function r(t){var i;void 0===t&&(t={});var e=Bt(t,{kind:em[t.kind]||""});i=s.call(this,e)||this;var n=!1;return Object.defineProperty(pe(i),"selected",{get:function(){return n},set:function(u){"boolean"!=typeof u||u===n||(n=u,this.trigger("selectedchange"))}}),e.selected&&(i.selected=e.selected),i}return Y(r,s),r}(au),Sa=function(s){function r(t){var i;void 0===t&&(t={}),i=s.call(this)||this;var e,n=new js(t);return i.kind=n.kind,i.src=n.src,i.srclang=n.language,i.label=n.label,i.default=n.default,Object.defineProperties(pe(i),{readyState:{get:function(){return e}},track:{get:function(){return n}}}),e=0,n.addEventListener("loadeddata",function(){e=2,i.trigger({type:"load",target:pe(i)})}),i}return Y(r,s),r}(Ii);Sa.prototype.allowedEvents_={load:"load"},Sa.NONE=0,Sa.LOADING=1,Sa.LOADED=2,Sa.ERROR=3;var Er={audio:{ListClass:ba,TrackClass:Wd,capitalName:"Audio"},video:{ListClass:Zi,TrackClass:qd,capitalName:"Video"},text:{ListClass:nu,TrackClass:js,capitalName:"Text"}};Object.keys(Er).forEach(function(s){Er[s].getterName=s+"Tracks",Er[s].privateName=s+"Tracks_"});var Ea={remoteText:{ListClass:nu,TrackClass:js,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Zp,TrackClass:Sa,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ki=vt({},Er,Ea);Ea.names=Object.keys(Ea),Er.names=Object.keys(Er),ki.names=[].concat(Ea.names).concat(Er.names);var Ut=function(s){function r(i,e){var n;return void 0===i&&(i={}),void 0===e&&(e=function(){}),i.reportTouchActivity=!1,(n=s.call(this,null,i,e)||this).onDurationChange_=function(a){return n.onDurationChange(a)},n.trackProgress_=function(a){return n.trackProgress(a)},n.trackCurrentTime_=function(a){return n.trackCurrentTime(a)},n.stopTrackingCurrentTime_=function(a){return n.stopTrackingCurrentTime(a)},n.disposeSourceHandler_=function(a){return n.disposeSourceHandler(a)},n.queuedHanders_=new Set,n.hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),ki.names.forEach(function(a){var u=ki[a];i&&i[u.getterName]&&(n[u.privateName]=i[u.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(a){!1===i["native"+a+"Tracks"]&&(n["featuresNative"+a+"Tracks"]=!1)}),!1===i.nativeCaptions||!1===i.nativeTextTracks?n.featuresNativeTextTracks=!1:(!0===i.nativeCaptions||!0===i.nativeTextTracks)&&(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.preloadTextTracks=!1!==i.preloadTextTracks,n.autoRemoteTextTracks_=new ki.text.ListClass,n.initTrackListeners(),i.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}Y(r,s);var t=r.prototype;return t.triggerSourceset=function(e){var n=this;this.isReady_||this.one("ready",function(){return n.setTimeout(function(){return n.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},t.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},t.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},t.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Dt(this,function(){var n=this.bufferedPercent();this.bufferedPercent_!==n&&this.trigger("progress"),this.bufferedPercent_=n,1===n&&this.stopTrackingProgress()}),500)},t.onDurationChange=function(e){this.duration_=this.duration()},t.buffered=function(){return Kn(0,0)},t.bufferedPercent=function(){return wl(this.buffered(),this.duration_)},t.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},t.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},t.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.dispose=function(){this.clearTracks(Er.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),s.prototype.dispose.call(this)},t.clearTracks=function(e){var n=this;(e=[].concat(e)).forEach(function(a){for(var u=n[a+"Tracks"]()||[],c=u.length;c--;){var d=u[c];"text"===a&&n.removeRemoteTextTrack(d),u.removeTrack(d)}})},t.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],n=e.length;n--;)this.removeRemoteTextTrack(e[n])},t.reset=function(){},t.crossOrigin=function(){},t.setCrossOrigin=function(){},t.error=function(e){return void 0!==e&&(this.error_=new Si(e),this.trigger("error")),this.error_},t.played=function(){return this.hasStarted_?Kn(0,0):Kn()},t.play=function(){},t.setScrubbing=function(){},t.scrubbing=function(){},t.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.initTrackListeners=function(){var e=this;Er.names.forEach(function(n){var u=function(){e.trigger(n+"trackchange")},c=e[Er[n].getterName]();c.addEventListener("removetrack",u),c.addEventListener("addtrack",u),e.on("dispose",function(){c.removeEventListener("removetrack",u),c.removeEventListener("addtrack",u)})})},t.addWebVttScript_=function(){var e=this;if(!M().WebVTT)if(ue().body.contains(this.el())){if(!this.options_["vtt.js"]&&ei(Q())&&Object.keys(Q()).length>0)return void this.trigger("vttjsloaded");var n=ue().createElement("script");n.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",n.onload=function(){e.trigger("vttjsloaded")},n.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){n.onload=null,n.onerror=null}),M().WebVTT=!0,this.el().parentNode.appendChild(n)}else this.ready(this.addWebVttScript_)},t.emulateTextTracks=function(){var e=this,n=this.textTracks(),a=this.remoteTextTracks(),u=function(v){return n.addTrack(v.track)},c=function(v){return n.removeTrack(v.track)};a.on("addtrack",u),a.on("removetrack",c),this.addWebVttScript_();var d=function(){return e.trigger("texttrackchange")},p=function(){d();for(var v=0;v<n.length;v++){var b=n[v];b.removeEventListener("cuechange",d),"showing"===b.mode&&b.addEventListener("cuechange",d)}};p(),n.addEventListener("change",p),n.addEventListener("addtrack",p),n.addEventListener("removetrack",p),this.on("dispose",function(){a.off("addtrack",u),a.off("removetrack",c),n.removeEventListener("change",p),n.removeEventListener("addtrack",p),n.removeEventListener("removetrack",p);for(var y=0;y<n.length;y++)n[y].removeEventListener("cuechange",d)})},t.addTextTrack=function(e,n,a){if(!e)throw new Error("TextTrack kind is required but was not provided");return function rm(s,r,t,i,e){void 0===e&&(e={});var n=s.textTracks();e.kind=r,t&&(e.label=t),i&&(e.language=i),e.tech=s;var a=new ki.text.TrackClass(e);return n.addTrack(a),a}(this,e,n,a)},t.createRemoteTextTrack=function(e){var n=Bt(e,{tech:this});return new Ea.remoteTextEl.TrackClass(n)},t.addRemoteTextTrack=function(e,n){var a=this;void 0===e&&(e={});var u=this.createRemoteTextTrack(e);return!0!==n&&!1!==n&&(bt.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),n=!0),this.remoteTextTrackEls().addTrackElement_(u),this.remoteTextTracks().addTrack(u.track),!0!==n&&this.ready(function(){return a.autoRemoteTextTracks_.addTrack(u.track)}),u},t.removeRemoteTextTrack=function(e){var n=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(n),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},t.getVideoPlaybackQuality=function(){return{}},t.requestPictureInPicture=function(){var e=this.options_.Promise||M().Promise;if(e)return e.reject()},t.disablePictureInPicture=function(){return!0},t.setDisablePictureInPicture=function(){},t.requestVideoFrameCallback=function(e){var n=this,a=pt();return!this.isReady_||this.paused()?(this.queuedHanders_.add(a),this.one("playing",function(){n.queuedHanders_.has(a)&&(n.queuedHanders_.delete(a),e())})):this.requestNamedAnimationFrame(a,e),a},t.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},t.setPoster=function(){},t.playsinline=function(){},t.setPlaysinline=function(){},t.overrideNativeAudioTracks=function(){},t.overrideNativeVideoTracks=function(){},t.canPlayType=function(){return""},r.canPlayType=function(){return""},r.canPlaySource=function(e,n){return r.canPlayType(e.type)},r.isTech=function(e){return e.prototype instanceof r||e instanceof r||e===r},r.registerTech=function(e,n){if(r.techs_||(r.techs_={}),!r.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!r.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!r.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=ti(e),r.techs_[e]=n,r.techs_[iu(e)]=n,"Tech"!==e&&r.defaultTechOrder_.push(e),n},r.getTech=function(e){if(e){if(r.techs_&&r.techs_[e])return r.techs_[e];if(e=ti(e),M()&&M().videojs&&M().videojs[e])return bt.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),M().videojs[e]}},r}(ge);ki.names.forEach(function(s){var r=ki[s];Ut.prototype[r.getterName]=function(){return this[r.privateName]=this[r.privateName]||new r.ListClass,this[r.privateName]}}),Ut.prototype.featuresVolumeControl=!0,Ut.prototype.featuresMuteControl=!0,Ut.prototype.featuresFullscreenResize=!1,Ut.prototype.featuresPlaybackRate=!1,Ut.prototype.featuresProgressEvents=!1,Ut.prototype.featuresSourceset=!1,Ut.prototype.featuresTimeupdateEvents=!1,Ut.prototype.featuresNativeTextTracks=!1,Ut.prototype.featuresVideoFrameCallback=!1,Ut.withSourceHandlers=function(s){s.registerSourceHandler=function(t,i){var e=s.sourceHandlers;e||(e=s.sourceHandlers=[]),void 0===i&&(i=e.length),e.splice(i,0,t)},s.canPlayType=function(t){for(var e,i=s.sourceHandlers||[],n=0;n<i.length;n++)if(e=i[n].canPlayType(t))return e;return""},s.selectSourceHandler=function(t,i){for(var e=s.sourceHandlers||[],a=0;a<e.length;a++)if(e[a].canHandleSource(t,i))return e[a];return null},s.canPlaySource=function(t,i){var e=s.selectSourceHandler(t,i);return e?e.canHandleSource(t,i):""},["seekable","seeking","duration"].forEach(function(t){var i=this[t];"function"==typeof i&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},s.prototype),s.prototype.setSource=function(t){var i=s.selectSourceHandler(t,this.options_);i||(s.nativeSourceHandler?i=s.nativeSourceHandler:bt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==s.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},s.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},ge.registerComponent("Tech",Ut),Ut.registerTech("Tech",Ut),Ut.defaultTechOrder_=[];var Yn={},Ml={},Ws={};function Fl(s,r,t){s.setTimeout(function(){return Oi(r,Yn[r.type],t,s)},1)}function uu(s,r,t,i){void 0===i&&(i=null);var e="call"+ti(t),n=s.reduce(Ca(e),i),a=n===Ws,u=a?null:r[t](n);return function $d(s,r,t,i){for(var e=s.length-1;e>=0;e--){var n=s[e];n[r]&&n[r](i,t)}}(s,t,u,a),u}var St={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},sm={setCurrentTime:1,setMuted:1,setVolume:1},Xd={play:1,pause:1};function Ca(s){return function(r,t){return r===Ws?Ws:t[s]?t[s](r):r}}function Oi(s,r,t,i,e,n){void 0===s&&(s={}),void 0===r&&(r=[]),void 0===e&&(e=[]),void 0===n&&(n=!1);var u=r[0],c=r.slice(1);if("string"==typeof u)Oi(s,Yn[u],t,i,e,n);else if(u){var d=function um(s,r){var t=Ml[s.id()],i=null;if(null==t)return i=r(s),Ml[s.id()]=[[r,i]],i;for(var e=0;e<t.length;e++){var n=t[e];n[0]===r&&(i=n[1])}return null===i&&(i=r(s),t.push([r,i])),i}(i,u);if(!d.setSource)return e.push(d),Oi(s,c,t,i,e,n);d.setSource($e({},s),function(p,y){if(p)return Oi(s,c,t,i,e,n);e.push(d),Oi(y,s.type===y.type?c:Yn[y.type],t,i,e,n)})}else c.length?Oi(s,c,t,i,e,n):n?t(s,e):Oi(s,Yn["*"],t,i,e,!0)}var lm={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Aa=function(r){void 0===r&&(r="");var t=xa(r);return lm[t.toLowerCase()]||""},Kd=function s(r){if(Array.isArray(r)){var t=[];r.forEach(function(i){i=s(i),Array.isArray(i)?t=t.concat(i):xt(i)&&t.push(i)}),r=t}else r="string"==typeof r&&r.trim()?[Ul({src:r})]:xt(r)&&"string"==typeof r.src&&r.src&&r.src.trim()?[Ul(r)]:[];return r};function Ul(s){if(!s.type){var r=Aa(s.src);r&&(s.type=r)}return s}var Cr=function(s){function r(t,i,e){var n,a=Bt({createEl:!1},i);if(n=s.call(this,t,a,e)||this,i.playerOptions.sources&&0!==i.playerOptions.sources.length)t.src(i.playerOptions.sources);else for(var u=0,c=i.playerOptions.techOrder;u<c.length;u++){var d=ti(c[u]),p=Ut.getTech(d);if(d||(p=ge.getComponent(d)),p&&p.isSupported()){t.loadTech_(d);break}}return n}return Y(r,s),r}(ge);ge.registerComponent("MediaLoader",Cr);var $r=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).options_.controlText&&n.controlText(n.options_.controlText),n.handleMouseOver_=function(a){return n.handleMouseOver(a)},n.handleMouseOut_=function(a){return n.handleMouseOut(a)},n.handleClick_=function(a){return n.handleClick(a)},n.handleKeyDown_=function(a){return n.handleKeyDown(a)},n.emitTapEvents(),n.enable(),n}Y(r,s);var t=r.prototype;return t.createEl=function(e,n,a){void 0===e&&(e="div"),void 0===n&&(n={}),void 0===a&&(a={}),n=$e({className:this.buildCSSClass(),tabIndex:0},n),"button"===e&&bt.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),a=$e({role:"button"},a),this.tabIndex_=n.tabIndex;var u=At(e,n,a);return u.appendChild(At("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(u),u},t.dispose=function(){this.controlTextEl_=null,s.prototype.dispose.call(this)},t.createControlTextEl=function(e){return this.controlTextEl_=At("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.controlText=function(e,n){if(void 0===n&&(n=this.el()),void 0===e)return this.controlText_||"Need Text";var a=this.localize(e);this.controlText_=e,ha(this.controlTextEl_,a),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&n.setAttribute("title",a)},t.buildCSSClass=function(){return"vjs-control vjs-button "+s.prototype.buildCSSClass.call(this)},t.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},t.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},t.handleLanguagechange=function(){this.controlText(this.controlText_)},t.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},t.handleKeyDown=function(e){ne().isEventKey(e,"Space")||ne().isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):s.prototype.handleKeyDown.call(this,e)},r}(ge);ge.registerComponent("ClickableComponent",$r);var Vl=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).update(),n.update_=function(a){return n.update(a)},i.on("posterchange",n.update_),n}Y(r,s);var t=r.prototype;return t.dispose=function(){this.player().off("posterchange",this.update_),s.prototype.dispose.call(this)},t.createEl=function(){return At("div",{className:"vjs-poster",tabIndex:-1})},t.update=function(e){var n=this.player().poster();this.setSrc(n),n?this.show():this.hide()},t.setSrc=function(e){var n="";e&&(n='url("'+e+'")'),this.el_.style.backgroundImage=n},t.handleClick=function(e){if(this.player_.controls()){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((Rs||Os)&&n)&&this.player_.tech(!0).focus(),this.player_.paused()?hn(this.player_.play()):this.player_.pause()}},r}($r);ge.registerComponent("PosterImage",Vl);var Ar="#222",Yd={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Gs(s,r){var t;if(4===s.length)t=s[1]+s[1]+s[2]+s[2]+s[3]+s[3];else{if(7!==s.length)throw new Error("Invalid color code provided, "+s+"; must be formatted as e.g. #f0e or #f604e2.");t=s.slice(1)}return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+r+")"}function lu(s,r,t){try{s.style[r]=t}catch{return}}var Hl=function(s){function r(i,e,n){var a;a=s.call(this,i,e,n)||this;var u=function(d){return a.updateDisplay(d)};return i.on("loadstart",function(c){return a.toggleDisplay(c)}),i.on("texttrackchange",u),i.on("loadedmetadata",function(c){return a.preselectTrack(c)}),i.ready(Dt(pe(a),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)this.hide();else{i.on("fullscreenchange",u),i.on("playerresize",u),M().addEventListener("orientationchange",u),i.on("dispose",function(){return M().removeEventListener("orientationchange",u)});for(var c=this.options_.playerOptions.tracks||[],d=0;d<c.length;d++)this.player_.addRemoteTextTrack(c[d],!0);this.preselectTrack()}})),a}Y(r,s);var t=r.prototype;return t.preselectTrack=function(){for(var u,c,d,e={captions:1,subtitles:1},n=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,p=0;p<n.length;p++){var y=n[p];a&&a.enabled&&a.language&&a.language===y.language&&y.kind in e?y.kind===a.kind?d=y:d||(d=y):a&&!a.enabled?(d=null,u=null,c=null):y.default&&("descriptions"!==y.kind||u?y.kind in e&&!c&&(c=y):u=y)}d?d.mode="showing":c?c.mode="showing":u&&(u.mode="showing")},t.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){"function"==typeof M().WebVTT&&M().WebVTT.processCues(M(),[],this.el_)},t.updateDisplay=function(){var e=this.player_.textTracks(),n=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),n){for(var a=[],u=0;u<e.length;++u){var c=e[u];"showing"===c.mode&&a.push(c)}this.updateForTrack(a)}else{for(var d=null,p=null,y=e.length;y--;){var v=e[y];"showing"===v.mode&&("descriptions"===v.kind?d=v:p=v)}p?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(p)):d&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(d))}},t.updateDisplayState=function(e){for(var n=this.player_.textTrackSettings.getValues(),a=e.activeCues,u=a.length;u--;){var c=a[u];if(c){var d=c.displayState;if(n.color&&(d.firstChild.style.color=n.color),n.textOpacity&&lu(d.firstChild,"color",Gs(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(d.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&lu(d.firstChild,"backgroundColor",Gs(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?lu(d,"backgroundColor",Gs(n.windowColor,n.windowOpacity)):d.style.backgroundColor=n.windowColor),n.edgeStyle&&("dropshadow"===n.edgeStyle?d.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Ar:"raised"===n.edgeStyle?d.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Ar:"depressed"===n.edgeStyle?d.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Ar:"uniform"===n.edgeStyle&&(d.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Ar)),n.fontPercent&&1!==n.fontPercent){var p=M().parseFloat(d.style.fontSize);d.style.fontSize=p*n.fontPercent+"px",d.style.height="auto",d.style.top="auto"}n.fontFamily&&"default"!==n.fontFamily&&("small-caps"===n.fontFamily?d.firstChild.style.fontVariant="small-caps":d.firstChild.style.fontFamily=Yd[n.fontFamily])}}},t.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof M().WebVTT&&!e.every(function(b){return!b.activeCues})){for(var n=[],a=0;a<e.length;++a)for(var u=e[a],c=0;c<u.activeCues.length;++c)n.push(u.activeCues[c]);M().WebVTT.processCues(M(),n,this.el_);for(var d=0;d<e.length;++d){for(var p=e[d],y=0;y<p.activeCues.length;++y){var v=p.activeCues[y].displayState;Gr(v,"vjs-text-track-cue"),Gr(v,"vjs-text-track-cue-"+(p.language?p.language:d)),p.language&&hi(v,"lang",p.language)}this.player_.textTrackSettings&&this.updateDisplayState(p)}}},r}(ge);ge.registerComponent("TextTrackDisplay",Hl);var jl=function(s){function r(){return s.apply(this,arguments)||this}return Y(r,s),r.prototype.createEl=function(){var e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),a=At("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),u=s.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return u.appendChild(a),u},r}(ge);ge.registerComponent("LoadingSpinner",jl);var Li=function(s){function r(){return s.apply(this,arguments)||this}Y(r,s);var t=r.prototype;return t.createEl=function(e,n,a){void 0===n&&(n={}),void 0===a&&(a={});var u=At("button",n=$e({className:this.buildCSSClass()},n),a=$e({type:"button"},a));return u.appendChild(At("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(u),u},t.addChild=function(e,n){return void 0===n&&(n={}),bt.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),ge.prototype.addChild.call(this,e,n)},t.enable=function(){s.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.disable=function(){s.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.handleKeyDown=function(e){ne().isEventKey(e,"Space")||ne().isEventKey(e,"Enter")?e.stopPropagation():s.prototype.handleKeyDown.call(this,e)},r}($r);ge.registerComponent("Button",Li);var Qd=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).mouseused_=!1,n.on("mousedown",function(a){return n.handleMouseDown(a)}),n}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=function(e){var n=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return hn(n),void(this.player_.tech(!0)&&(!Rs&&!Os||!a)&&this.player_.tech(!0).focus())}var u=this.player_.getChild("controlBar"),c=u&&u.getChild("playToggle");if(c){var d=function(){return c.focus()};Ya(n)?n.then(d,function(){}):this.setTimeout(d,1)}else this.player_.tech(!0).focus()},t.handleKeyDown=function(e){this.mouseused_=!1,s.prototype.handleKeyDown.call(this,e)},t.handleMouseDown=function(e){this.mouseused_=!0},r}(Li);Qd.prototype.controlText_="Play Video",ge.registerComponent("BigPlayButton",Qd);var Qn=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).controlText(e&&e.controlText||n.localize("Close")),n}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+s.prototype.buildCSSClass.call(this)},t.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t.handleKeyDown=function(e){ne().isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):s.prototype.handleKeyDown.call(this,e)},r}(Li);ge.registerComponent("CloseButton",Qn);var Wl=function(s){function r(i,e){var n;return void 0===e&&(e={}),n=s.call(this,i,e)||this,e.replay=void 0===e.replay||e.replay,n.on(i,"play",function(a){return n.handlePlay(a)}),n.on(i,"pause",function(a){return n.handlePause(a)}),e.replay&&n.on(i,"ended",function(a){return n.handleEnded(a)}),n}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+s.prototype.buildCSSClass.call(this)},t.handleClick=function(e){this.player_.paused()?hn(this.player_.play()):this.player_.pause()},t.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},t.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function(e){var n=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(a){return n.handleSeeked(a)})},r}(Li);Wl.prototype.controlText_="Play",ge.registerComponent("PlayToggle",Wl);var ql=function(r,t){r=r<0?0:r;var i=Math.floor(r%60),e=Math.floor(r/60%60),n=Math.floor(r/3600),a=Math.floor(t/60%60),u=Math.floor(t/3600);return(isNaN(r)||r===1/0)&&(n=e=i="-"),(n=n>0||u>0?n+":":"")+(e=((n||a>=10)&&e<10?"0"+e:e)+":")+(i<10?"0"+i:i)},zs=ql;function es(s,r){return void 0===r&&(r=s),zs(s,r)}var wa=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).on(i,["timeupdate","ended"],function(a){return n.updateContent(a)}),n.updateTextNode_(),n}Y(r,s);var t=r.prototype;return t.createEl=function(){var e=this.buildCSSClass(),n=s.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control"}),a=At("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return n.appendChild(a),this.contentEl_=At("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},t.dispose=function(){this.contentEl_=null,this.textNode_=null,s.prototype.dispose.call(this)},t.updateTextNode_=function(e){var n=this;void 0===e&&(e=0),e=es(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(n.contentEl_){var a=n.textNode_;a&&n.contentEl_.firstChild!==a&&(a=null,bt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),n.textNode_=ue().createTextNode(n.formattedTime_),n.textNode_&&(a?n.contentEl_.replaceChild(n.textNode_,a):n.contentEl_.appendChild(n.textNode_))}}))},t.updateContent=function(e){},r}(ge);wa.prototype.labelText_="Time",wa.prototype.controlText_="Time",ge.registerComponent("TimeDisplay",wa);var cu=function(s){function r(){return s.apply(this,arguments)||this}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-current-time"},t.updateContent=function(e){var n;n=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(n)},r}(wa);cu.prototype.labelText_="Current Time",cu.prototype.controlText_="Current Time",ge.registerComponent("CurrentTimeDisplay",cu);var Gl=function(s){function r(i,e){var n,a=function(c){return n.updateContent(c)};return(n=s.call(this,i,e)||this).on(i,"durationchange",a),n.on(i,"loadstart",a),n.on(i,"loadedmetadata",a),n}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(e){var n=this.player_.duration();this.updateTextNode_(n)},r}(wa);Gl.prototype.labelText_="Duration",Gl.prototype.controlText_="Duration",ge.registerComponent("DurationDisplay",Gl);var Jd=function(s){function r(){return s.apply(this,arguments)||this}return Y(r,s),r.prototype.createEl=function(){var e=s.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=s.prototype.createEl.call(this,"div"),a=s.prototype.createEl.call(this,"span",{textContent:"/"});return n.appendChild(a),e.appendChild(n),e},r}(ge);ge.registerComponent("TimeDivider",Jd);var du=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).on(i,"durationchange",function(a){return n.updateContent(a)}),n}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.createEl=function(){var e=s.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&e.insertBefore(At("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},t.updateContent=function(e){var n;"number"==typeof this.player_.duration()&&(n=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(n))},r}(wa);du.prototype.labelText_="Remaining Time",du.prototype.controlText_="Remaining Time",ge.registerComponent("RemainingTimeDisplay",du);var cr=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).updateShowing(),n.on(n.player(),"durationchange",function(a){return n.updateShowing(a)}),n}Y(r,s);var t=r.prototype;return t.createEl=function(){var e=s.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=At("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(At("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(ue().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e},t.dispose=function(){this.contentEl_=null,s.prototype.dispose.call(this)},t.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},r}(ge);ge.registerComponent("LiveDisplay",cr);var Kr=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).updateLiveEdgeStatus(),n.player_.liveTracker&&(n.updateLiveEdgeStatusHandler_=function(a){return n.updateLiveEdgeStatus(a)},n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatusHandler_)),n}Y(r,s);var t=r.prototype;return t.createEl=function(){var e=s.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=At("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},t.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,s.prototype.dispose.call(this)},r}(Li);Kr.prototype.controlText_="Seek to live, currently playing live",ge.registerComponent("SeekToLive",Kr);var fu=function(r,t,i){return r=Number(r),Math.min(i,Math.max(t,isNaN(r)?t:r))},zl=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).handleMouseDown_=function(a){return n.handleMouseDown(a)},n.handleMouseUp_=function(a){return n.handleMouseUp(a)},n.handleKeyDown_=function(a){return n.handleKeyDown(a)},n.handleClick_=function(a){return n.handleClick(a)},n.handleMouseMove_=function(a){return n.handleMouseMove(a)},n.update_=function(a){return n.update(a)},n.bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}Y(r,s);var t=r.prototype;return t.enabled=function(){return this.enabled_},t.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.createEl=function(e,n,a){return void 0===n&&(n={}),void 0===a&&(a={}),n.className=n.className+" vjs-slider",n=$e({tabIndex:0},n),a=$e({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},a),s.prototype.createEl.call(this,e,n,a)},t.handleMouseDown=function(e){var n=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"===e.type&&!un&&e.preventDefault(),Dd(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(n,"mousemove",this.handleMouseMove_),this.on(n,"mouseup",this.handleMouseUp_),this.on(n,"touchmove",this.handleMouseMove_),this.on(n,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},t.handleMouseMove=function(e){},t.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;xl(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},t.update=function(){var e=this;if(this.el_&&this.bar){var n=this.getProgress();return n===this.progress_||(this.progress_=n,this.requestNamedAnimationFrame("Slider#update",function(){var a=e.vertical()?"height":"width";e.bar.el().style[a]=(100*n).toFixed(2)+"%"})),n}},t.getProgress=function(){return Number(fu(this.getPercent(),0,1).toFixed(4))},t.calculateDistance=function(e){var n=zn(this.el_,e);return this.vertical()?n.y:n.x},t.handleKeyDown=function(e){ne().isEventKey(e,"Left")||ne().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):ne().isEventKey(e,"Right")||ne().isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):s.prototype.handleKeyDown.call(this,e)},t.handleClick=function(e){e.stopPropagation(),e.preventDefault()},t.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},r}(ge);ge.registerComponent("Slider",zl);var ts=function(r,t){return fu(r/t*100,0,100).toFixed(2)+"%"},is=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).partEls_=[],n.on(i,"progress",function(a){return n.update(a)}),n}Y(r,s);var t=r.prototype;return t.createEl=function(){var e=s.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=At("span",{className:"vjs-control-text"}),a=At("span",{textContent:this.localize("Loaded")}),u=ue().createTextNode(": ");return this.percentageEl_=At("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(n),n.appendChild(a),n.appendChild(u),n.appendChild(this.percentageEl_),e},t.dispose=function(){this.partEls_=null,this.percentageEl_=null,s.prototype.dispose.call(this)},t.update=function(e){var n=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var a=n.player_.liveTracker,u=n.player_.buffered(),c=a&&a.isLive()?a.seekableEnd():n.player_.duration(),d=n.player_.bufferedEnd(),p=n.partEls_,y=ts(d,c);n.percent_!==y&&(n.el_.style.width=y,ha(n.percentageEl_,y),n.percent_=y);for(var v=0;v<u.length;v++){var b=u.start(v),D=u.end(v),I=p[v];I||(I=n.el_.appendChild(At()),p[v]=I),(I.dataset.start!==b||I.dataset.end!==D)&&(I.dataset.start=b,I.dataset.end=D,I.style.left=ts(b,d),I.style.width=ts(D-b,d))}for(var P=p.length;P>u.length;P--)n.el_.removeChild(p[P-1]);p.length=u.length})},r}(ge);ge.registerComponent("LoadProgressBar",is);var Zd=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).update=Dn(Dt(pe(n),n.update),30),n}Y(r,s);var t=r.prototype;return t.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},t.update=function(e,n,a){var u=pa(this.el_),c=Xa(this.player_.el()),d=e.width*n;if(c&&u){var p=e.left-c.left+d,y=e.width-d+(c.right-e.right),v=u.width/2;p<v?v+=v-p:y<v&&(v=y),v<0?v=0:v>u.width&&(v=u.width),v=Math.round(v),this.el_.style.right="-"+v+"px",this.write(a)}},t.write=function(e){ha(this.el_,e)},t.updateTime=function(e,n,a,u){var c=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var d,p=c.player_.duration();if(c.player_.liveTracker&&c.player_.liveTracker.isLive()){var y=c.player_.liveTracker.liveWindow(),v=y-n*y;d=(v<1?"":"-")+es(v,y)}else d=es(a,p);c.update(e,n,d),u&&u()})},r}(ge);ge.registerComponent("TimeTooltip",Zd);var hu=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).update=Dn(Dt(pe(n),n.update),30),n}Y(r,s);var t=r.prototype;return t.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},t.update=function(e,n){var a=this.getChild("timeTooltip");if(a){var u=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();a.updateTime(e,n,u)}},r}(ge);hu.prototype.options_={children:[]},!qi&&!ur&&hu.prototype.options_.children.push("timeTooltip"),ge.registerComponent("PlayProgressBar",hu);var ef=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).update=Dn(Dt(pe(n),n.update),30),n}Y(r,s);var t=r.prototype;return t.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(e,n){var a=this,u=n*this.player_.duration();this.getChild("timeTooltip").updateTime(e,n,u,function(){a.el_.style.left=e.width*n+"px"})},r}(ge);ef.prototype.options_={children:["timeTooltip"]},ge.registerComponent("MouseTimeDisplay",ef);var Ia=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).setEventHandlers_(),n}Y(r,s);var t=r.prototype;return t.setEventHandlers_=function(){var e=this;this.update_=Dt(this,this.update),this.update=Dn(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(n){return e.enableInterval_(n)},this.disableIntervalHandler_=function(n){return e.disableInterval_(n)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in ue()&&"visibilityState"in ue()&&this.on(ue(),"visibilitychange",this.toggleVisibility_)},t.toggleVisibility_=function(e){"hidden"===ue().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},t.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},t.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},t.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update=function(e){var n=this;if("hidden"!==ue().visibilityState){var a=s.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var u=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),c=n.player_.liveTracker,d=n.player_.duration();c&&c.isLive()&&(d=n.player_.liveTracker.liveCurrentTime()),n.percent_!==a&&(n.el_.setAttribute("aria-valuenow",(100*a).toFixed(2)),n.percent_=a),(n.currentTime_!==u||n.duration_!==d)&&(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[es(u,d),es(d,d)],"{1} of {2}")),n.currentTime_=u,n.duration_=d),n.bar&&n.bar.update(Xa(n.el()),n.getProgress())}),a}},t.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},t.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.getPercent=function(){var n,e=this.getCurrentTime_(),a=this.player_.liveTracker;return a&&a.isLive()?(n=(e-a.seekableStart())/a.liveWindow(),a.atLiveEdge()&&(n=1)):n=e/this.player_.duration(),n},t.handleMouseDown=function(e){fn(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),s.prototype.handleMouseDown.call(this,e))},t.handleMouseMove=function(e,n){if(void 0===n&&(n=!1),fn(e)){!n&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var a,u=this.calculateDistance(e),c=this.player_.liveTracker;if(c&&c.isLive()){if(u>=.99)return void c.seekToLiveEdge();var d=c.seekableStart(),p=c.liveCurrentTime();if((a=d+u*c.liveWindow())>=p&&(a=p),a<=d&&(a=d+.1),a===1/0)return}else(a=u*this.player_.duration())===this.player_.duration()&&(a-=.1);this.userSeek_(a)}},t.enable=function(){s.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},t.disable=function(){s.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},t.handleMouseUp=function(e){s.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?hn(this.player_.play()):this.update_()},t.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},t.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},t.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyDown=function(e){var n=this.player_.liveTracker;if(ne().isEventKey(e,"Space")||ne().isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(ne().isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(ne().isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(ne()(e))){e.preventDefault(),e.stopPropagation();var a=10*(ne().codes[ne()(e)]-ne().codes[0])/100;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*a):this.userSeek_(this.player_.duration()*a)}else ne().isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):ne().isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):s.prototype.handleKeyDown.call(this,e)},t.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in ue()&&"visibilityState"in ue()&&this.off(ue(),"visibilitychange",this.toggleVisibility_),s.prototype.dispose.call(this)},r}(zl);Ia.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!qi&&!ur&&Ia.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),ge.registerComponent("SeekBar",Ia);var tf=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).handleMouseMove=Dn(Dt(pe(n),n.handleMouseMove),30),n.throttledHandleMouseSeek=Dn(Dt(pe(n),n.handleMouseSeek),30),n.handleMouseUpHandler_=function(a){return n.handleMouseUp(a)},n.handleMouseDownHandler_=function(a){return n.handleMouseDown(a)},n.enable(),n}Y(r,s);var t=r.prototype;return t.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function(e){var n=this.getChild("seekBar");if(n){var a=n.getChild("playProgressBar"),u=n.getChild("mouseTimeDisplay");if(a||u){var c=n.el(),d=pa(c),p=zn(c,e).x;p=fu(p,0,1),u&&u.update(d,p),a&&a.update(d,n.getProgress())}}},t.handleMouseSeek=function(e){var n=this.getChild("seekBar");n&&n.handleMouseMove(e)},t.enabled=function(){return this.enabled_},t.disable=function(){if(this.children().forEach(function(n){return n.disable&&n.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&hn(this.player_.play())}},t.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},t.handleMouseDown=function(e){var n=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseDown(e),this.on(n,"mousemove",this.throttledHandleMouseSeek),this.on(n,"touchmove",this.throttledHandleMouseSeek),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(e){var n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},r}(ge);tf.prototype.options_={children:["seekBar"]},ge.registerComponent("ProgressControl",tf);var Xl=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).on(i,["enterpictureinpicture","leavepictureinpicture"],function(a){return n.handlePictureInPictureChange(a)}),n.on(i,["disablepictureinpicturechanged","loadedmetadata"],function(a){return n.handlePictureInPictureEnabledChange(a)}),n.on(i,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){"audio"===i.currentType().substring(0,5)||i.audioPosterMode()||i.audioOnlyMode()?(i.isInPictureInPicture()&&i.exitPictureInPicture(),n.hide()):n.show()}),n.disable(),n}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-picture-in-picture-control "+s.prototype.buildCSSClass.call(this)},t.handlePictureInPictureEnabledChange=function(){ue().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},t.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},t.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},r}(Li);Xl.prototype.controlText_="Picture-in-Picture",ge.registerComponent("PictureInPictureToggle",Xl);var $l=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).on(i,"fullscreenchange",function(a){return n.handleFullscreenChange(a)}),!1===ue()[i.fsApi_.fullscreenEnabled]&&n.disable(),n}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+s.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},r}(Li);$l.prototype.controlText_="Fullscreen",ge.registerComponent("FullscreenToggle",$l);var rf=function(s){function r(){return s.apply(this,arguments)||this}return Y(r,s),r.prototype.createEl=function(){var e=s.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return e.appendChild(s.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),e},r}(ge);ge.registerComponent("VolumeLevel",rf);var mu=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).update=Dn(Dt(pe(n),n.update),30),n}Y(r,s);var t=r.prototype;return t.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},t.update=function(e,n,a,u){if(!a){var c=Xa(this.el_),d=Xa(this.player_.el()),p=e.width*n;if(!d||!c)return;var y=e.left-d.left+p,v=e.width-p+(d.right-e.right),b=c.width/2;y<b?b+=b-y:v<b&&(b=v),b<0?b=0:b>c.width&&(b=c.width),this.el_.style.right="-"+b+"px"}this.write(u+"%")},t.write=function(e){ha(this.el_,e)},t.updateVolume=function(e,n,a,u,c){var d=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){d.update(e,n,a,u.toFixed(0)),c&&c()})},r}(ge);ge.registerComponent("VolumeLevelTooltip",mu);var gu=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).update=Dn(Dt(pe(n),n.update),30),n}Y(r,s);var t=r.prototype;return t.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(e,n,a){var u=this,c=100*n;this.getChild("volumeLevelTooltip").updateVolume(e,n,a,c,function(){a?u.el_.style.bottom=e.height*n+"px":u.el_.style.left=e.width*n+"px"})},r}(ge);gu.prototype.options_={children:["volumeLevelTooltip"]},ge.registerComponent("MouseVolumeLevelDisplay",gu);var Pa=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).on("slideractive",function(a){return n.updateLastVolume_(a)}),n.on(i,"volumechange",function(a){return n.updateARIAAttributes(a)}),i.ready(function(){return n.updateARIAAttributes()}),n}Y(r,s);var t=r.prototype;return t.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function(e){fn(e)&&s.prototype.handleMouseDown.call(this,e)},t.handleMouseMove=function(e){var n=this.getChild("mouseVolumeLevelDisplay");if(n){var a=this.el(),u=Xa(a),c=this.vertical(),d=zn(a,e);d=fu(d=c?d.y:d.x,0,1),n.update(u,d,c)}fn(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},t.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function(e){var n=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",n),this.el_.setAttribute("aria-valuetext",n+"%")},t.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},t.updateLastVolume_=function(){var e=this,n=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(n)})},r}(zl);Pa.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!qi&&!ur&&Pa.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Pa.prototype.playerEvent="volumechange",ge.registerComponent("VolumeBar",Pa);var nf=function(s){function r(i,e){var n;return void 0===e&&(e={}),e.vertical=e.vertical||!1,(typeof e.volumeBar>"u"||ei(e.volumeBar))&&(e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical),function(r,t){t.tech_&&!t.tech_.featuresVolumeControl&&r.addClass("vjs-hidden"),r.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?r.removeClass("vjs-hidden"):r.addClass("vjs-hidden")})}(pe(n=s.call(this,i,e)||this),i),n.throttledHandleMouseMove=Dn(Dt(pe(n),n.handleMouseMove),30),n.handleMouseUpHandler_=function(a){return n.handleMouseUp(a)},n.on("mousedown",function(a){return n.handleMouseDown(a)}),n.on("touchstart",function(a){return n.handleMouseDown(a)}),n.on("mousemove",function(a){return n.handleMouseMove(a)}),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}Y(r,s);var t=r.prototype;return t.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),s.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},t.handleMouseDown=function(e){var n=this.el_.ownerDocument;this.on(n,"mousemove",this.throttledHandleMouseMove),this.on(n,"touchmove",this.throttledHandleMouseMove),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(e){var n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseMove),this.off(n,"touchmove",this.throttledHandleMouseMove),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)},t.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},r}(ge);nf.prototype.options_={children:["volumeBar"]},ge.registerComponent("VolumeControl",nf);var $s=function(s){function r(i,e){var n;return function(r,t){t.tech_&&!t.tech_.featuresMuteControl&&r.addClass("vjs-hidden"),r.on(t,"loadstart",function(){t.tech_.featuresMuteControl?r.removeClass("vjs-hidden"):r.addClass("vjs-hidden")})}(pe(n=s.call(this,i,e)||this),i),n.on(i,["loadstart","volumechange"],function(a){return n.update(a)}),n}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+s.prototype.buildCSSClass.call(this)},t.handleClick=function(e){var n=this.player_.volume(),a=this.player_.lastVolume_();0===n?(this.player_.volume(a<.1?.1:a),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},t.update=function(e){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function(){var e=this.player_.volume(),n=3;qi&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?n=0:e<.33?n=1:e<.67&&(n=2);for(var a=0;a<4;a++)Ns(this.el_,"vjs-vol-"+a);Gr(this.el_,"vjs-vol-"+n)},t.updateControlText_=function(){var n=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n)},r}(Li);$s.prototype.controlText_="Mute",ge.registerComponent("MuteToggle",$s);var Kl=function(s){function r(i,e){var n;return void 0===e&&(e={}),e.inline=!(typeof e.inline<"u")||e.inline,(typeof e.volumeControl>"u"||ei(e.volumeControl))&&(e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline),(n=s.call(this,i,e)||this).handleKeyPressHandler_=function(a){return n.handleKeyPress(a)},n.on(i,["loadstart"],function(a){return n.volumePanelState_(a)}),n.on(n.muteToggle,"keyup",function(a){return n.handleKeyPress(a)}),n.on(n.volumeControl,"keyup",function(a){return n.handleVolumeControlKeyUp(a)}),n.on("keydown",function(a){return n.handleKeyPress(a)}),n.on("mouseover",function(a){return n.handleMouseOver(a)}),n.on("mouseout",function(a){return n.handleMouseOut(a)}),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}Y(r,s);var t=r.prototype;return t.sliderActive_=function(){this.addClass("vjs-slider-active")},t.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),s.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},t.dispose=function(){this.handleMouseOut(),s.prototype.dispose.call(this)},t.handleVolumeControlKeyUp=function(e){ne().isEventKey(e,"Esc")&&this.muteToggle.focus()},t.handleMouseOver=function(e){this.addClass("vjs-hover"),br(ue(),"keyup",this.handleKeyPressHandler_)},t.handleMouseOut=function(e){this.removeClass("vjs-hover"),Yt(ue(),"keyup",this.handleKeyPressHandler_)},t.handleKeyPress=function(e){ne().isEventKey(e,"Esc")&&this.handleMouseOut()},r}(ge);Kl.prototype.options_={children:["muteToggle","volumeControl"]},ge.registerComponent("VolumePanel",Kl);var vu=function(s){function r(i,e){var n;return n=s.call(this,i,e)||this,e&&(n.menuButton_=e.menuButton),n.focusedChild_=-1,n.on("keydown",function(a){return n.handleKeyDown(a)}),n.boundHandleBlur_=function(a){return n.handleBlur(a)},n.boundHandleTapClick_=function(a){return n.handleTapClick(a)},n}Y(r,s);var t=r.prototype;return t.addEventListenerForItem=function(e){e instanceof ge&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},t.removeEventListenerForItem=function(e){e instanceof ge&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},t.removeChild=function(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),s.prototype.removeChild.call(this,e)},t.addItem=function(e){var n=this.addChild(e);n&&this.addEventListenerForItem(n)},t.createEl=function(){this.contentEl_=At(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=s.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),br(n,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),n},t.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,s.prototype.dispose.call(this)},t.handleBlur=function(e){var n=e.relatedTarget||ue().activeElement;if(!this.children().some(function(u){return u.el()===n})){var a=this.menuButton_;a&&a.buttonPressed_&&n!==a.el().firstChild&&a.unpressButton()}},t.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var n=this.children();if(!Array.isArray(n))return;var a=n.filter(function(u){return u.el()===e.target})[0];if(!a)return;"CaptionSettingsMenuItem"!==a.name()&&this.menuButton_.focus()}},t.handleKeyDown=function(e){ne().isEventKey(e,"Left")||ne().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(ne().isEventKey(e,"Right")||ne().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},t.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.focus=function(e){void 0===e&&(e=0);var n=this.children().slice();n.length&&n[0].hasClass("vjs-menu-title")&&n.shift(),n.length>0&&(e<0?e=0:e>=n.length&&(e=n.length-1),this.focusedChild_=e,n[e].el_.focus())},r}(ge);ge.registerComponent("Menu",vu);var Yl=function(s){function r(i,e){var n;void 0===e&&(e={}),(n=s.call(this,i,e)||this).menuButton_=new Li(i,e),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var a=Li.prototype.buildCSSClass();n.menuButton_.el_.className=n.buildCSSClass()+" "+a,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0;var u=function(d){return n.handleClick(d)};return n.handleMenuKeyUp_=function(c){return n.handleMenuKeyUp(c)},n.on(n.menuButton_,"tap",u),n.on(n.menuButton_,"click",u),n.on(n.menuButton_,"keydown",function(c){return n.handleKeyDown(c)}),n.on(n.menuButton_,"mouseenter",function(){n.addClass("vjs-hover"),n.menu.show(),br(ue(),"keyup",n.handleMenuKeyUp_)}),n.on("mouseleave",function(c){return n.handleMouseLeave(c)}),n.on("keydown",function(c){return n.handleSubmenuKeyDown(c)}),n}Y(r,s);var t=r.prototype;return t.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},t.createMenu=function(){var e=new vu(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var n=At("li",{className:"vjs-menu-title",textContent:ti(this.options_.title),tabIndex:-1}),a=new ge(this.player_,{el:n});e.addItem(a)}if(this.items=this.createItems(),this.items)for(var u=0;u<this.items.length;u++)e.addItem(this.items[u]);return e},t.createItems=function(){},t.createEl=function(){return s.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function(){var e="vjs-menu-button";return"vjs-menu-button "+(e+=!0===this.options_.inline?"-inline":"-popup")+" "+Li.prototype.buildCSSClass()+" "+s.prototype.buildCSSClass.call(this)},t.buildCSSClass=function(){var e="vjs-menu-button";return"vjs-menu-button "+(e+=!0===this.options_.inline?"-inline":"-popup")+" "+s.prototype.buildCSSClass.call(this)},t.controlText=function(e,n){return void 0===n&&(n=this.menuButton_.el()),this.menuButton_.controlText(e,n)},t.dispose=function(){this.handleMouseLeave(),s.prototype.dispose.call(this)},t.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},t.handleMouseLeave=function(e){this.removeClass("vjs-hover"),Yt(ue(),"keyup",this.handleMenuKeyUp_)},t.focus=function(){this.menuButton_.focus()},t.blur=function(){this.menuButton_.blur()},t.handleKeyDown=function(e){ne().isEventKey(e,"Esc")||ne().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),ne().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(ne().isEventKey(e,"Up")||ne().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},t.handleMenuKeyUp=function(e){(ne().isEventKey(e,"Esc")||ne().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},t.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},t.handleSubmenuKeyDown=function(e){(ne().isEventKey(e,"Esc")||ne().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),ne().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},t.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),qi&&Fs())return;this.menu.focus()}},t.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},r}(ge);ge.registerComponent("MenuButton",Yl);var _u=function(s){function r(t,i){var e,n=i.tracks;if((e=s.call(this,t,i)||this).items.length<=1&&e.hide(),!n)return pe(e);var a=Dt(pe(e),e.update);return n.addEventListener("removetrack",a),n.addEventListener("addtrack",a),n.addEventListener("labelchange",a),e.player_.on("ready",a),e.player_.on("dispose",function(){n.removeEventListener("removetrack",a),n.removeEventListener("addtrack",a),n.removeEventListener("labelchange",a)}),e}return Y(r,s),r}(Yl);ge.registerComponent("TrackButton",_u);var In=["Tab","Esc","Up","Down","Right","Left"],rs=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).selectable=e.selectable,n.isSelected_=e.selected||!1,n.multiSelectable=e.multiSelectable,n.selected(n.isSelected_),n.el_.setAttribute("role",n.selectable?n.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),n}Y(r,s);var t=r.prototype;return t.createEl=function(e,n,a){this.nonIconControl=!0;var u=s.prototype.createEl.call(this,"li",$e({className:"vjs-menu-item",tabIndex:-1},n),a);return u.replaceChild(At("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),u.querySelector(".vjs-icon-placeholder")),u},t.handleKeyDown=function(e){In.some(function(n){return ne().isEventKey(e,n)})||s.prototype.handleKeyDown.call(this,e)},t.handleClick=function(e){this.selected(!0)},t.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},r}($r);ge.registerComponent("MenuItem",rs);var ns=function(s){function r(i,e){var n,a=e.track,u=i.textTracks();e.label=a.label||a.language||"Unknown",e.selected="showing"===a.mode,(n=s.call(this,i,e)||this).track=a,n.kinds=(e.kinds||[e.kind||n.track.kind]).filter(Boolean);var p,c=function(){for(var v=arguments.length,b=new Array(v),D=0;D<v;D++)b[D]=arguments[D];n.handleTracksChange.apply(pe(n),b)},d=function(){for(var v=arguments.length,b=new Array(v),D=0;D<v;D++)b[D]=arguments[D];n.handleSelectedLanguageChange.apply(pe(n),b)};return i.on(["loadstart","texttrackchange"],c),u.addEventListener("change",c),u.addEventListener("selectedlanguagechange",d),n.on("dispose",function(){i.off(["loadstart","texttrackchange"],c),u.removeEventListener("change",c),u.removeEventListener("selectedlanguagechange",d)}),void 0===u.onchange&&n.on(["tap","click"],function(){if("object"!=typeof M().Event)try{p=new(M().Event)("change")}catch{}p||(p=ue().createEvent("Event")).initEvent("change",!0,!0),u.dispatchEvent(p)}),n.handleTracksChange(),n}Y(r,s);var t=r.prototype;return t.handleClick=function(e){var n=this.track,a=this.player_.textTracks();if(s.prototype.handleClick.call(this,e),a)for(var u=0;u<a.length;u++){var c=a[u];-1!==this.kinds.indexOf(c.kind)&&(c===n?"showing"!==c.mode&&(c.mode="showing"):"disabled"!==c.mode&&(c.mode="disabled"))}},t.handleTracksChange=function(e){var n="showing"===this.track.mode;n!==this.isSelected_&&this.selected(n)},t.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var n=this.player_.cache_.selectedLanguage;if(n&&n.enabled&&n.language===this.track.language&&n.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.dispose=function(){this.track=null,s.prototype.dispose.call(this)},r}(rs);ge.registerComponent("TextTrackMenuItem",ns);var sf=function(s){function r(i,e){return e.track={player:i,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"},e.kinds||(e.kinds=[e.kind]),e.track.label=e.label?e.label:e.kinds.join(" and ")+" off",e.selectable=!0,e.multiSelectable=!1,s.call(this,i,e)||this}Y(r,s);var t=r.prototype;return t.handleTracksChange=function(e){for(var n=this.player().textTracks(),a=!0,u=0,c=n.length;u<c;u++){var d=n[u];if(this.options_.kinds.indexOf(d.kind)>-1&&"showing"===d.mode){a=!1;break}}a!==this.isSelected_&&this.selected(a)},t.handleSelectedLanguageChange=function(e){for(var n=this.player().textTracks(),a=!0,u=0,c=n.length;u<c;u++){var d=n[u];if(["captions","descriptions","subtitles"].indexOf(d.kind)>-1&&"showing"===d.mode){a=!1;break}}a&&(this.player_.cache_.selectedLanguage={enabled:!1})},r}(ns);ge.registerComponent("OffTextTrackMenuItem",sf);var ka=function(s){function r(i,e){return void 0===e&&(e={}),e.tracks=i.textTracks(),s.call(this,i,e)||this}return Y(r,s),r.prototype.createItems=function(e,n){var a;void 0===e&&(e=[]),void 0===n&&(n=ns),this.label_&&(a=this.label_+" off"),e.push(new sf(this.player_,{kinds:this.kinds_,kind:this.kind_,label:a})),this.hideThreshold_+=1;var u=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var c=0;c<u.length;c++){var d=u[c];if(this.kinds_.indexOf(d.kind)>-1){var p=new n(this.player_,{track:d,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});p.addClass("vjs-"+d.kind+"-menu-item"),e.push(p)}}return e},r}(_u);ge.registerComponent("TextTrackButton",ka);var of=function(s){function r(i,e){var n,a=e.track,u=e.cue,c=i.currentTime();return e.selectable=!0,e.multiSelectable=!1,e.label=u.text,e.selected=u.startTime<=c&&c<u.endTime,(n=s.call(this,i,e)||this).track=a,n.cue=u,n}return Y(r,s),r.prototype.handleClick=function(e){s.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},r}(rs);ge.registerComponent("ChaptersTrackMenuItem",of);var Ql=function(s){function r(i,e,n){var a;return(a=s.call(this,i,e,n)||this).selectCurrentItem_=function(){a.items.forEach(function(u){u.selected(a.track_.activeCues[0]===u.cue)})},a}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-chapters-button "+s.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-chapters-button "+s.prototype.buildWrapperCSSClass.call(this)},t.update=function(e){if(!e||!e.track||"chapters"===e.track.kind){var n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),s.prototype.update.call(this)):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&s.prototype.update.call(this)}},t.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},t.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],n=e.length-1;n>=0;n--){var a=e[n];if(a.kind===this.kind_)return a}},t.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ti(this.kind_))},t.createMenu=function(){return this.options_.title=this.getMenuCaption(),s.prototype.createMenu.call(this)},t.createItems=function(){var e=[];if(!this.track_)return e;var n=this.track_.cues;if(!n)return e;for(var a=0,u=n.length;a<u;a++){var d=new of(this.player_,{track:this.track_,cue:n[a]});e.push(d)}return e},r}(ka);Ql.prototype.kind_="chapters",Ql.prototype.controlText_="Chapters",ge.registerComponent("ChaptersButton",Ql);var Yr=function(s){function r(i,e,n){var a;a=s.call(this,i,e,n)||this;var u=i.textTracks(),c=Dt(pe(a),a.handleTracksChange);return u.addEventListener("change",c),a.on("dispose",function(){u.removeEventListener("change",c)}),a}Y(r,s);var t=r.prototype;return t.handleTracksChange=function(e){for(var n=this.player().textTracks(),a=!1,u=0,c=n.length;u<c;u++){var d=n[u];if(d.kind!==this.kind_&&"showing"===d.mode){a=!0;break}}a?this.disable():this.enable()},t.buildCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildWrapperCSSClass.call(this)},r}(ka);Yr.prototype.kind_="descriptions",Yr.prototype.controlText_="Descriptions",ge.registerComponent("DescriptionsButton",Yr);var Ks=function(s){function r(i,e,n){return s.call(this,i,e,n)||this}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-subtitles-button "+s.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+s.prototype.buildWrapperCSSClass.call(this)},r}(ka);Ks.prototype.kind_="subtitles",Ks.prototype.controlText_="Subtitles",ge.registerComponent("SubtitlesButton",Ks);var Ys=function(s){function r(i,e){var n;return e.track={player:i,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1,e.name="CaptionSettingsMenuItem",(n=s.call(this,i,e)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+e.kind+" settings dialog"),n}return Y(r,s),r.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},r}(ns);ge.registerComponent("CaptionSettingsMenuItem",Ys);var Qs=function(s){function r(i,e,n){return s.call(this,i,e,n)||this}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-captions-button "+s.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-captions-button "+s.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new Ys(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),s.prototype.createItems.call(this,e)},r}(ka);Qs.prototype.kind_="captions",Qs.prototype.controlText_="Captions",ge.registerComponent("CaptionsButton",Qs);var Js=function(s){function r(){return s.apply(this,arguments)||this}return Y(r,s),r.prototype.createEl=function(e,n,a){var u=s.prototype.createEl.call(this,e,n,a),c=u.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(c.appendChild(At("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),c.appendChild(At("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),u},r}(ns);ge.registerComponent("SubsCapsMenuItem",Js);var Jn=function(s){function r(i,e){var n;return void 0===e&&(e={}),(n=s.call(this,i,e)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions"),n.menuButton_.controlText(ti(n.label_)),n}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-subs-caps-button "+s.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+s.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new Ys(this.player_,{kind:this.label_})),this.hideThreshold_+=1),s.prototype.createItems.call(this,e,Js)},r}(ka);Jn.prototype.kinds_=["captions","subtitles"],Jn.prototype.controlText_="Subtitles",ge.registerComponent("SubsCapsButton",Jn);var nt=function(s){function r(i,e){var n,a=e.track,u=i.audioTracks();e.label=a.label||a.language||"Unknown",e.selected=a.enabled,(n=s.call(this,i,e)||this).track=a,n.addClass("vjs-"+a.kind+"-menu-item");var c=function(){for(var p=arguments.length,y=new Array(p),v=0;v<p;v++)y[v]=arguments[v];n.handleTracksChange.apply(pe(n),y)};return u.addEventListener("change",c),n.on("dispose",function(){u.removeEventListener("change",c)}),n}Y(r,s);var t=r.prototype;return t.createEl=function(e,n,a){var u=s.prototype.createEl.call(this,e,n,a),c=u.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(c.appendChild(At("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),c.appendChild(At("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),u},t.handleClick=function(e){if(s.prototype.handleClick.call(this,e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var n=this.player_.audioTracks(),a=0;a<n.length;a++){var u=n[a];u!==this.track&&(u.enabled=u===this.track)}},t.handleTracksChange=function(e){this.selected(this.track.enabled)},r}(rs);ge.registerComponent("AudioTrackMenuItem",nt);var Zs=function(s){function r(i,e){return void 0===e&&(e={}),e.tracks=i.audioTracks(),s.call(this,i,e)||this}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-audio-button "+s.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-audio-button "+s.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var n=this.player_.audioTracks(),a=0;a<n.length;a++)e.push(new nt(this.player_,{track:n[a],selectable:!0,multiSelectable:!1}));return e},r}(_u);Zs.prototype.controlText_="Audio Track",ge.registerComponent("AudioTrackButton",Zs);var eo=function(s){function r(i,e){var n,a=e.rate,u=parseFloat(a,10);return e.label=a,e.selected=u===i.playbackRate(),e.selectable=!0,e.multiSelectable=!1,(n=s.call(this,i,e)||this).label=a,n.rate=u,n.on(i,"ratechange",function(c){return n.update(c)}),n}Y(r,s);var t=r.prototype;return t.handleClick=function(e){s.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function(e){this.selected(this.player().playbackRate()===this.rate)},r}(rs);eo.prototype.contentElType="button",ge.registerComponent("PlaybackRateMenuItem",eo);var Zn=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).menuButton_.el_.setAttribute("aria-describedby",n.labelElId_),n.updateVisibility(),n.updateLabel(),n.on(i,"loadstart",function(a){return n.updateVisibility(a)}),n.on(i,"ratechange",function(a){return n.updateLabel(a)}),n.on(i,"playbackrateschange",function(a){return n.handlePlaybackRateschange(a)}),n}Y(r,s);var t=r.prototype;return t.createEl=function(){var e=s.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=At("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e},t.dispose=function(){this.labelEl_=null,s.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+s.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+s.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){for(var e=this.playbackRates(),n=[],a=e.length-1;a>=0;a--)n.push(new eo(this.player(),{rate:e[a]+"x"}));return n},t.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function(e){var n=this.player().playbackRate(),a=this.playbackRates(),c=(a.indexOf(n)+1)%a.length;this.player().playbackRate(a[c])},t.handlePlaybackRateschange=function(e){this.update()},t.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},t.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},r}(Yl);Zn.prototype.controlText_="Playback Rate",ge.registerComponent("PlaybackRateMenuButton",Zn);var uf=function(s){function r(){return s.apply(this,arguments)||this}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-spacer "+s.prototype.buildCSSClass.call(this)},t.createEl=function(e,n,a){return void 0===e&&(e="div"),void 0===n&&(n={}),void 0===a&&(a={}),n.className||(n.className=this.buildCSSClass()),s.prototype.createEl.call(this,e,n,a)},r}(ge);ge.registerComponent("Spacer",uf);var Jl=function(s){function r(){return s.apply(this,arguments)||this}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-custom-control-spacer "+s.prototype.buildCSSClass.call(this)},t.createEl=function(){return s.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},r}(uf);ge.registerComponent("CustomControlSpacer",Jl);var to=function(s){function r(){return s.apply(this,arguments)||this}return Y(r,s),r.prototype.createEl=function(){return s.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},r}(ge);to.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in ue()&&to.prototype.options_.children.splice(to.prototype.options_.children.length-1,0,"pictureInPictureToggle"),ge.registerComponent("ControlBar",to);var Bi=function(s){function r(i,e){var n;return(n=s.call(this,i,e)||this).on(i,"error",function(a){return n.open(a)}),n}Y(r,s);var t=r.prototype;return t.buildCSSClass=function(){return"vjs-error-display "+s.prototype.buildCSSClass.call(this)},t.content=function(){var e=this.player().error();return e?this.localize(e.message):""},r}(Ta);Bi.prototype.options_=vt({},Ta.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),ge.registerComponent("ErrorDisplay",Bi);var Zl="vjs-text-track-settings",lf=["#000","Black"],ec=["#00F","Blue"],cf=["#0FF","Cyan"],tc=["#0F0","Green"],df=["#F0F","Magenta"],ff=["#F00","Red"],hf=["#FFF","White"],pn=["#FF0","Yellow"],Ui=["1","Opaque"],io=["0.5","Semi-Transparent"],pf=["0","Transparent"],Pn={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[lf,hf,ff,tc,ec,pn,df,cf]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Ui,io,pf]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[hf,lf,ff,tc,ec,pn,df,cf]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(r){return"1.00"===r?null:Number(r)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Ui,io]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[pf,io,Ui]}};function mf(s,r){if(r&&(s=r(s)),s&&"none"!==s)return s}Pn.windowColor.options=Pn.backgroundColor.options;var gf=function(s){function r(i,e){var n;return e.temporary=!1,(n=s.call(this,i,e)||this).updateDisplay=n.updateDisplay.bind(pe(n)),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=At("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===e.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),J(Pn,function(a){n.on(n.$(a.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}Y(r,s);var t=r.prototype;return t.dispose=function(){this.endDialog=null,s.prototype.dispose.call(this)},t.createElSelect_=function(e,n,a){var u=this;void 0===n&&(n=""),void 0===a&&(a="label");var c=Pn[e],d=c.id.replace("%s",this.id_),p=[n,d].join(" ").trim();return["<"+a+' id="'+d+'" class="'+("label"===a?"vjs-label":"")+'">',this.localize(c.label),"</"+a+">",'<select aria-labelledby="'+p+'">'].concat(c.options.map(function(y){var v=d+"-"+y[1].replace(/\W+/g,"");return['<option id="'+v+'" value="'+y[0]+'" ','aria-labelledby="'+p+" "+v+'">',u.localize(y[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return At("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return At("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var e=this.localize("restore all settings to the default values");return At("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return s.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var e=this;return function Xe(s,r,t){return void 0===t&&(t=0),oe(s).reduce(function(i,e){return r(i,s[e],e)},t)}(Pn,function(n,a,u){var c=function fm(s,r){return mf(s.options[s.options.selectedIndex].value,r)}(e.$(a.selector),a.parser);return void 0!==c&&(n[u]=c),n},{})},t.setValues=function(e){var n=this;J(Pn,function(a,u){!function ro(s,r,t){if(r)for(var i=0;i<s.options.length;i++)if(mf(s.options[i].value,t)===r){s.selectedIndex=i;break}}(n.$(a.selector),e[u],a.parser)})},t.setDefaults=function(){var e=this;J(Pn,function(n){var a=n.hasOwnProperty("default")?n.default:0;e.$(n.selector).selectedIndex=a})},t.restoreSettings=function(){var e;try{e=JSON.parse(M().localStorage.getItem(Zl))}catch(n){bt.warn(n)}e&&this.setValues(e)},t.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?M().localStorage.setItem(Zl,JSON.stringify(e)):M().localStorage.removeItem(Zl)}catch(n){bt.warn(n)}}},t.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,n=e&&e.subsCapsButton,a=e&&e.captionsButton;n?n.focus():a&&a.focus()},r}(Ta);ge.registerComponent("TextTrackSettings",gf);var vf=function(s){function r(i,e){var n,a=e.ResizeObserver||M().ResizeObserver;null===e.ResizeObserver&&(a=!1);var u=Bt({createEl:!a,reportTouchActivity:!1},e);return(n=s.call(this,i,u)||this).ResizeObserver=e.ResizeObserver||M().ResizeObserver,n.loadListener_=null,n.resizeObserver_=null,n.debouncedHandler_=function(r,t,i,e){void 0===e&&(e=M());var n,u=function(){var d=this,p=arguments,y=function(){n=null,y=null,r.apply(d,p)};e.clearTimeout(n),n=e.setTimeout(y,100)};return u.cancel=function(){e.clearTimeout(n),n=null},u}(function(){n.resizeHandler()},0,0,pe(n)),a?(n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_),n.resizeObserver_.observe(i.el())):(n.loadListener_=function(){if(n.el_&&n.el_.contentWindow){var c=n.debouncedHandler_,d=n.unloadListener_=function(){Yt(this,"resize",c),Yt(this,"unload",d),d=null};br(n.el_.contentWindow,"unload",d),br(n.el_.contentWindow,"resize",c)}},n.one("load",n.loadListener_)),n}Y(r,s);var t=r.prototype;return t.createEl=function(){return s.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},t.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},t.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,s.prototype.dispose.call(this)},r}(ge);ge.registerComponent("ResizeManager",vf);var hm={trackingThreshold:20,liveTolerance:15},pm=function(s){function r(i,e){var n,a=Bt(hm,e,{createEl:!1});return(n=s.call(this,i,a)||this).handleVisibilityChange_=function(u){return n.handleVisibilityChange(u)},n.trackLiveHandler_=function(){return n.trackLive_()},n.handlePlay_=function(u){return n.handlePlay(u)},n.handleFirstTimeupdate_=function(u){return n.handleFirstTimeupdate(u)},n.handleSeeked_=function(u){return n.handleSeeked(u)},n.seekToLiveEdge_=function(u){return n.seekToLiveEdge(u)},n.reset_(),n.on(n.player_,"durationchange",function(u){return n.handleDurationchange(u)}),n.on(n.player_,"canplay",function(){return n.toggleTracking()}),Rs&&"hidden"in ue()&&"visibilityState"in ue()&&n.on(ue(),"visibilitychange",n.handleVisibilityChange_),n}Y(r,s);var t=r.prototype;return t.handleVisibilityChange=function(){this.player_.duration()===1/0&&(ue().hidden?this.stopTracking():this.startTracking())},t.trackLive_=function(){var e=this.player_.seekable();if(e&&e.length){var n=Number(M().performance.now().toFixed(4)),a=-1===this.lastTime_?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+a;var u=this.liveCurrentTime(),c=this.player_.currentTime(),d=this.player_.paused()||this.seekedBehindLive_||Math.abs(u-c)>this.options_.liveTolerance;(!this.timeupdateSeen_||u===1/0)&&(d=!1),d!==this.behindLiveEdge_&&(this.behindLiveEdge_=d,this.trigger("liveedgechange"))}},t.handleDurationchange=function(){this.toggleTracking()},t.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},t.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},t.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},t.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},t.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},t.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},t.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},t.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},t.seekableEnd=function(){for(var e=this.player_.seekable(),n=[],a=e?e.length:0;a--;)n.push(e.end(a));return n.length?n.sort()[n.length-1]:1/0},t.seekableStart=function(){for(var e=this.player_.seekable(),n=[],a=e?e.length:0;a--;)n.push(e.start(a));return n.length?n.sort()[0]:0},t.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},t.isLive=function(){return this.isTracking()},t.atLiveEdge=function(){return!this.behindLiveEdge()},t.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},t.behindLiveEdge=function(){return this.behindLiveEdge_},t.isTracking=function(){return"number"==typeof this.trackingInterval_},t.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},t.dispose=function(){this.off(ue(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),s.prototype.dispose.call(this)},r}(ge);ge.registerComponent("LiveTracker",pm);var so,ic=function(r){var t=r.el();if(t.hasAttribute("src"))return r.triggerSourceset(t.src),!0;var i=r.$$("source"),e=[],n="";if(!i.length)return!1;for(var a=0;a<i.length;a++){var u=i[a].src;u&&-1===e.indexOf(u)&&e.push(u)}return!!e.length&&(1===e.length&&(n=e[0]),r.triggerSourceset(n),!0)},mm=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(r){var t=ue().createElement(this.nodeName.toLowerCase());t.innerHTML=r;for(var i=ue().createDocumentFragment();t.childNodes.length;)i.appendChild(t.childNodes[0]);return this.innerText="",M().Element.prototype.appendChild.call(this,i),this.innerHTML}}),rc=function(r,t){for(var i={},e=0;e<r.length&&!((i=Object.getOwnPropertyDescriptor(r[e],t))&&i.set&&i.get);e++);return i.enumerable=!0,i.configurable=!0,i},yf=function(r){var t=r.el();if(!t.resetSourceWatch_){var i={},e=function(r){return rc([r.el(),M().HTMLMediaElement.prototype,M().Element.prototype,mm],"innerHTML")}(r),n=function(u){return function(){for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];var y=u.apply(t,d);return ic(r),y}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){t[a]&&(i[a]=t[a],t[a]=n(i[a]))}),Object.defineProperty(t,"innerHTML",Bt(e,{set:n(e.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(i).forEach(function(a){t[a]=i[a]}),Object.defineProperty(t,"innerHTML",e)},r.one("sourceset",t.resetSourceWatch_)}},nc=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?jd(M().Element.prototype.getAttribute.call(this,"src")):""},set:function(r){return M().Element.prototype.setAttribute.call(this,"src",r),r}}),ao=function(r,t,i,e){void 0===e&&(e=!0);var n=function(c){return Object.defineProperty(r,t,{value:c,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var c=i();return n(c),c}};return e&&(a.set=n),Object.defineProperty(r,t,a)},Ne=function(s){function r(i,e){var n;n=s.call(this,i,e)||this;var a=i.source,u=!1;if(n.featuresVideoFrameCallback=n.featuresVideoFrameCallback&&"VIDEO"===n.el_.tagName,a&&(n.el_.currentSrc!==a.src||i.tag&&3===i.tag.initNetworkState_)?n.setSource(a):n.handleLateInit_(n.el_),i.enableSourceset&&n.setupSourcesetHandling_(),n.isScrubbing_=!1,n.el_.hasChildNodes()){for(var c=n.el_.childNodes,d=c.length,p=[];d--;){var y=c[d];"track"===y.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(y),n.remoteTextTracks().addTrack(y.track),n.textTracks().addTrack(y.track),!u&&!n.el_.hasAttribute("crossorigin")&&su(y.src)&&(u=!0)):p.push(y))}for(var b=0;b<p.length;b++)n.el_.removeChild(p[b])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&u&&bt.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),n.restoreMetadataTracksInIOSNativePlayer_(),(Cn||Ga||ks)&&!0===i.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}Y(r,s);var t=r.prototype;return t.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),r.disposeMediaElement(this.el_),this.options_=null,s.prototype.dispose.call(this)},t.setupSourcesetHandling_=function(){!function(r){if(r.featuresSourceset){var t=r.el();if(!t.resetSourceset_){var i=function(r){return rc([r.el(),M().HTMLMediaElement.prototype,nc],"src")}(r),e=t.setAttribute,n=t.load;Object.defineProperty(t,"src",Bt(i,{set:function(u){var c=i.set.call(t,u);return r.triggerSourceset(t.src),c}})),t.setAttribute=function(a,u){var c=e.call(t,a,u);return/src/i.test(a)&&r.triggerSourceset(t.src),c},t.load=function(){var a=n.call(t);return ic(r)||(r.triggerSourceset(""),yf(r)),a},t.currentSrc?r.triggerSourceset(t.currentSrc):ic(r)||yf(r),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=n,t.setAttribute=e,Object.defineProperty(t,"src",i),t.resetSourceWatch_&&t.resetSourceWatch_()}}}}(this)},t.restoreMetadataTracksInIOSNativePlayer_=function(){var n,e=this.textTracks(),a=function(){n=[];for(var d=0;d<e.length;d++){var p=e[d];"metadata"===p.kind&&n.push({track:p,storedMode:p.mode})}};a(),e.addEventListener("change",a),this.on("dispose",function(){return e.removeEventListener("change",a)});var u=function c(){for(var d=0;d<n.length;d++){var p=n[d];"disabled"===p.track.mode&&p.track.mode!==p.storedMode&&(p.track.mode=p.storedMode)}e.removeEventListener("change",c)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",a),e.removeEventListener("change",u),e.addEventListener("change",u)}),this.on("webkitendfullscreen",function(){e.removeEventListener("change",a),e.addEventListener("change",a),e.removeEventListener("change",u)})},t.overrideNative_=function(e,n){var a=this;if(n===this["featuresNative"+e+"Tracks"]){var u=e.toLowerCase();this[u+"TracksListeners_"]&&Object.keys(this[u+"TracksListeners_"]).forEach(function(c){a.el()[u+"Tracks"].removeEventListener(c,a[u+"TracksListeners_"][c])}),this["featuresNative"+e+"Tracks"]=!n,this[u+"TracksListeners_"]=null,this.proxyNativeTracksForType_(u)}},t.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},t.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},t.proxyNativeTracksForType_=function(e){var n=this,a=Er[e],u=this.el()[a.getterName],c=this[a.getterName]();if(this["featuresNative"+a.capitalName+"Tracks"]&&u&&u.addEventListener){var d={change:function(v){var b={type:"change",target:c,currentTarget:c,srcElement:c};c.trigger(b),"text"===e&&n[Ea.remoteText.getterName]().trigger(b)},addtrack:function(v){c.addTrack(v.track)},removetrack:function(v){c.removeTrack(v.track)}},p=function(){for(var v=[],b=0;b<c.length;b++){for(var D=!1,I=0;I<u.length;I++)if(u[I]===c[b]){D=!0;break}D||v.push(c[b])}for(;v.length;)c.removeTrack(v.shift())};this[a.getterName+"Listeners_"]=d,Object.keys(d).forEach(function(y){var v=d[y];u.addEventListener(y,v),n.on("dispose",function(b){return u.removeEventListener(y,v)})}),this.on("loadstart",p),this.on("dispose",function(y){return n.off("loadstart",p)})}},t.proxyNativeTracks_=function(){var e=this;Er.names.forEach(function(n){e.proxyNativeTracksForType_(n)})},t.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),r.disposeMediaElement(e),e=n}else{e=ue().createElement("video");var u=Bt({},this.options_.tag&&An(this.options_.tag));(!Cn||!0!==this.options_.nativeControlsForTouch)&&delete u.controls,wd(e,$e(u,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&hi(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var c=["loop","muted","playsinline","autoplay"],d=0;d<c.length;d++){var p=c[d],y=this.options_[p];typeof y<"u"&&(y?hi(e,p,p):zo(e,p),e[p]=y)}return e},t.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var n=!1,a=function(){n=!0};this.on("loadstart",a);var u=function(){n||this.trigger("loadstart")};return this.on("loadedmetadata",u),void this.ready(function(){this.off("loadstart",a),this.off("loadedmetadata",u),n||this.trigger("loadstart")})}var c=["loadstart"];c.push("loadedmetadata"),e.readyState>=2&&c.push("loadeddata"),e.readyState>=3&&c.push("canplay"),e.readyState>=4&&c.push("canplaythrough"),this.ready(function(){c.forEach(function(d){this.trigger(d)},this)})}},t.setScrubbing=function(e){this.isScrubbing_=e},t.scrubbing=function(){return this.isScrubbing_},t.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&fa?this.el_.fastSeek(e):this.el_.currentTime=e}catch(n){bt(n,"Video is not ready. (Video.js)")}},t.duration=function(){var e=this;return this.el_.duration===1/0&&ur&&un&&0===this.el_.currentTime?(this.on("timeupdate",function a(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",a))}),NaN):this.el_.duration||NaN},t.width=function(){return this.el_.offsetWidth},t.height=function(){return this.el_.offsetHeight},t.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var n=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},a=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",n),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",a),this.on("dispose",function(){e.off("webkitbeginfullscreen",a),e.off("webkitendfullscreen",n)})}},t.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=M().navigator&&M().navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},t.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)hn(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},0);else try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},t.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},t.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},t.requestVideoFrameCallback=function(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):s.prototype.requestVideoFrameCallback.call(this,e)},t.cancelVideoFrameCallback=function(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):s.prototype.cancelVideoFrameCallback.call(this,e)},t.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},t.reset=function(){r.resetMediaElement(this.el_)},t.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.setControls=function(e){this.el_.controls=!!e},t.addTextTrack=function(e,n,a){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,a):s.prototype.addTextTrack.call(this,e,n,a)},t.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return s.prototype.createRemoteTextTrack.call(this,e);var n=ue().createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n},t.addRemoteTextTrack=function(e,n){var a=s.prototype.addRemoteTextTrack.call(this,e,n);return this.featuresNativeTextTracks&&this.el().appendChild(a),a},t.removeRemoteTextTrack=function(e){if(s.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var n=this.$$("track"),a=n.length;a--;)(e===n[a]||e===n[a].track)&&this.el().removeChild(n[a])},t.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),M().performance&&"function"==typeof M().performance.now?e.creationTime=M().performance.now():M().performance&&M().performance.timing&&"number"==typeof M().performance.timing.navigationStart&&(e.creationTime=M().Date.now()-M().performance.timing.navigationStart),e},r}(Ut);ao(Ne,"TEST_VID",function(){if(cn()){var s=ue().createElement("video"),r=ue().createElement("track");return r.kind="captions",r.srclang="en",r.label="English",s.appendChild(r),s}}),Ne.isSupported=function(){try{Ne.TEST_VID.volume=.5}catch{return!1}return!(!Ne.TEST_VID||!Ne.TEST_VID.canPlayType)},Ne.canPlayType=function(s){return Ne.TEST_VID.canPlayType(s)},Ne.canPlaySource=function(s,r){return Ne.canPlayType(s.type)},Ne.canControlVolume=function(){try{var s=Ne.TEST_VID.volume;Ne.TEST_VID.volume=s/2+.1;var r=s!==Ne.TEST_VID.volume;return r&&qi?(M().setTimeout(function(){Ne&&Ne.prototype&&(Ne.prototype.featuresVolumeControl=s!==Ne.TEST_VID.volume)}),!1):r}catch{return!1}},Ne.canMuteVolume=function(){try{var s=Ne.TEST_VID.muted;return Ne.TEST_VID.muted=!s,Ne.TEST_VID.muted?hi(Ne.TEST_VID,"muted","muted"):zo(Ne.TEST_VID,"muted"),s!==Ne.TEST_VID.muted}catch{return!1}},Ne.canControlPlaybackRate=function(){if(ur&&un&&Ls<58)return!1;try{var s=Ne.TEST_VID.playbackRate;return Ne.TEST_VID.playbackRate=s/2+.1,s!==Ne.TEST_VID.playbackRate}catch{return!1}},Ne.canOverrideAttributes=function(){try{var s=function(){};Object.defineProperty(ue().createElement("video"),"src",{get:s,set:s}),Object.defineProperty(ue().createElement("audio"),"src",{get:s,set:s}),Object.defineProperty(ue().createElement("video"),"innerHTML",{get:s,set:s}),Object.defineProperty(ue().createElement("audio"),"innerHTML",{get:s,set:s})}catch{return!1}return!0},Ne.supportsNativeTextTracks=function(){return fa||qi&&un},Ne.supportsNativeVideoTracks=function(){return!(!Ne.TEST_VID||!Ne.TEST_VID.videoTracks)},Ne.supportsNativeAudioTracks=function(){return!(!Ne.TEST_VID||!Ne.TEST_VID.audioTracks)},Ne.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(s){var t=s[1];ao(Ne.prototype,s[0],function(){return Ne[t]()},!0)}),Ne.prototype.featuresVolumeControl=Ne.canControlVolume(),Ne.prototype.movingMediaElementInDOM=!qi,Ne.prototype.featuresFullscreenResize=!0,Ne.prototype.featuresProgressEvents=!0,Ne.prototype.featuresTimeupdateEvents=!0,Ne.prototype.featuresVideoFrameCallback=!(!Ne.TEST_VID||!Ne.TEST_VID.requestVideoFrameCallback),Ne.patchCanPlayType=function(){qa>=4&&!Ot&&!un&&(so=Ne.TEST_VID&&Ne.TEST_VID.constructor.prototype.canPlayType,Ne.TEST_VID.constructor.prototype.canPlayType=function(s){return s&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(s)?"maybe":so.call(this,s)})},Ne.unpatchCanPlayType=function(){var s=Ne.TEST_VID.constructor.prototype.canPlayType;return so&&(Ne.TEST_VID.constructor.prototype.canPlayType=so),s},Ne.patchCanPlayType(),Ne.disposeMediaElement=function(s){if(s){for(s.parentNode&&s.parentNode.removeChild(s);s.hasChildNodes();)s.removeChild(s.firstChild);s.removeAttribute("src"),"function"==typeof s.load&&function(){try{s.load()}catch{}}()}},Ne.resetMediaElement=function(s){if(s){for(var r=s.querySelectorAll("source"),t=r.length;t--;)s.removeChild(r[t]);s.removeAttribute("src"),"function"==typeof s.load&&function(){try{s.load()}catch{}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(s){Ne.prototype[s]=function(){return this.el_[s]||this.el_.hasAttribute(s)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(s){Ne.prototype["set"+ti(s)]=function(r){this.el_[s]=r,r?this.el_.setAttribute(s,s):this.el_.removeAttribute(s)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(s){Ne.prototype[s]=function(){return this.el_[s]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(s){Ne.prototype["set"+ti(s)]=function(r){this.el_[s]=r}}),["pause","load","play"].forEach(function(s){Ne.prototype[s]=function(){return this.el_[s]()}}),Ut.withSourceHandlers(Ne),Ne.nativeSourceHandler={},Ne.nativeSourceHandler.canPlayType=function(s){try{return Ne.TEST_VID.canPlayType(s)}catch{return""}},Ne.nativeSourceHandler.canHandleSource=function(s,r){if(s.type)return Ne.nativeSourceHandler.canPlayType(s.type);if(s.src){var t=xa(s.src);return Ne.nativeSourceHandler.canPlayType("video/"+t)}return""},Ne.nativeSourceHandler.handleSource=function(s,r,t){r.setSrc(s.src)},Ne.nativeSourceHandler.dispose=function(){},Ne.registerSourceHandler(Ne.nativeSourceHandler),Ut.registerTech("Html5",Ne);var oo=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],yu={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Ur=["tiny","xsmall","small","medium","large","xlarge","huge"],mn={};Ur.forEach(function(s){var r="x"===s.charAt(0)?"x-"+s.substring(1):s;mn[s]="vjs-layout-"+r});var gm={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},pi=function(s){function r(i,e,n){var a;if(i.id=i.id||e.id||"vjs_video_"+pt(),(e=$e(r.getTagSettings(i),e)).initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if("function"==typeof i.closest){var u=i.closest("[lang]");u&&u.getAttribute&&(e.language=u.getAttribute("lang"))}else for(var c=i;c&&1===c.nodeType;){if(An(c).hasOwnProperty("lang")){e.language=c.getAttribute("lang");break}c=c.parentNode}if((a=s.call(this,null,e,n)||this).boundDocumentFullscreenChange_=function(v){return a.documentFullscreenChange_(v)},a.boundFullWindowOnEscKey_=function(v){return a.fullWindowOnEscKey(v)},a.boundUpdateStyleEl_=function(v){return a.updateStyleEl_(v)},a.boundApplyInitTime_=function(v){return a.applyInitTime_(v)},a.boundUpdateCurrentBreakpoint_=function(v){return a.updateCurrentBreakpoint_(v)},a.boundHandleTechClick_=function(v){return a.handleTechClick_(v)},a.boundHandleTechDoubleClick_=function(v){return a.handleTechDoubleClick_(v)},a.boundHandleTechTouchStart_=function(v){return a.handleTechTouchStart_(v)},a.boundHandleTechTouchMove_=function(v){return a.handleTechTouchMove_(v)},a.boundHandleTechTouchEnd_=function(v){return a.handleTechTouchEnd_(v)},a.boundHandleTechTap_=function(v){return a.handleTechTap_(v)},a.isFullscreen_=!1,a.log=Is(a.id_),a.fsApi_=Wo,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=i,a.tagAttributes=i&&An(i),a.language(a.options_.language),e.languages){var d={};Object.getOwnPropertyNames(e.languages).forEach(function(v){d[v.toLowerCase()]=e.languages[v]}),a.languages_=d}else a.languages_=r.prototype.options_.languages;a.resetCache_(),a.poster_=e.poster||"",a.controls_=!!e.controls,i.controls=!1,i.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],i.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),e.plugins&&Object.keys(e.plugins).forEach(function(v){if("function"!=typeof a[v])throw new Error('plugin "'+v+'" does not exist')}),a.scrubbing_=!1,a.el_=a.createEl(),tu(pe(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(br(ue(),a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var p=Bt(a.options_);e.plugins&&Object.keys(e.plugins).forEach(function(v){a[v](e.plugins[v])}),e.debug&&a.debug(!0),a.options_.playerOptions=p,a.middleware_=[],a.playbackRates(e.playbackRates),a.initChildren(),a.isAudio("audio"===i.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),Cn&&a.addClass("vjs-touch-enabled"),qi||a.addClass("vjs-workinghover"),r.players[a.id_]=pe(a);var y="7.21.6".split(".")[0];return a.addClass("vjs-v"+y),a.userActive(!0),a.reportUserActivity(),a.one("play",function(v){return a.listenForUserActivity_(v)}),a.on("stageclick",function(v){return a.handleStageClick_(v)}),a.on("keydown",function(v){return a.handleKeyDown(v)}),a.on("languagechange",function(v){return a.handleLanguagechange(v)}),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)}),a}Y(r,s);var t=r.prototype;return t.dispose=function(){var e=this;this.trigger("dispose"),this.off("dispose"),Yt(ue(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Yt(ue(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),r.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function om(s){Ml[s.id()]=null}(this),ki.names.forEach(function(n){var u=e[ki[n].getterName]();u&&u.off&&u.off()}),s.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},t.createEl=function(){var n,e=this.tag,a=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),u="video-js"===this.tag.tagName.toLowerCase();a?n=this.el_=e.parentNode:u||(n=this.el_=s.prototype.createEl.call(this,"div"));var c=An(e);if(u){for(n=this.el_=e,e=this.tag=ue().createElement("video");n.children.length;)e.appendChild(n.firstChild);dn(n,"video-js")||Gr(n,"video-js"),n.appendChild(e),a=this.playerElIngest_=n,Object.keys(n).forEach(function(D){try{e[D]=n[D]}catch{}})}if(e.setAttribute("tabindex","-1"),c.tabindex="-1",(Rs||un&&Sd)&&(e.setAttribute("role","application"),c.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in c&&delete c.width,"height"in c&&delete c.height,Object.getOwnPropertyNames(c).forEach(function(D){u&&"class"===D||n.setAttribute(D,c[D]),u&&e.setAttribute(D,c[D])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=n.player=this,this.addClass("vjs-paused"),!0!==M().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=k("vjs-styles-dimensions");var d=$n(".vjs-styles-defaults"),p=$n("head");p.insertBefore(this.styleEl_,d?d.nextSibling:p.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var y=e.getElementsByTagName("a"),v=0;v<y.length;v++){var b=y.item(v);Gr(b,"vjs-hidden"),b.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!a&&e.parentNode.insertBefore(n,e),za(e,n),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=n,n},t.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):bt.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},t.width=function(e){return this.dimension("width",e)},t.height=function(e){return this.dimension("height",e)},t.dimension=function(e,n){var a=e+"_";if(void 0===n)return this[a]||0;if(""===n||"auto"===n)return this[a]=void 0,void this.updateStyleEl_();var u=parseFloat(n);isNaN(u)?bt.error('Improper value "'+n+'" supplied for for '+e):(this[a]=u,this.updateStyleEl_())},t.fluid=function(e){var n=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,Qi(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),function(r,t){Qi(r)?t():(r.eventedCallbacks||(r.eventedCallbacks=[]),r.eventedCallbacks.push(t))}(this,function(){n.on(["playerreset","resize"],n.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},t.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},t.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},t.updateStyleEl_=function(){if(!0!==M().VIDEOJS_NO_DYNAMIC_STYLE){var u,c,p,y=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),v=y[1]/y[0];u=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/v:this.videoWidth()||300,c=void 0!==this.height_?this.height_:u*v,p=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(p),va(this.styleEl_,"\n      ."+p+" {\n        width: "+u+"px;\n        height: "+c+"px;\n      }\n\n      ."+p+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*v+"%;\n      }\n    ")}else{var e="number"==typeof this.width_?this.width_:this.options_.width,n="number"==typeof this.height_?this.height_:this.options_.height,a=this.tech_&&this.tech_.el();a&&(e>=0&&(a.width=e),n>=0&&(a.height=n))}},t.loadTech_=function(e,n){var a=this;this.tech_&&this.unloadTech_();var u=ti(e),c=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==u&&this.tag&&(Ut.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=u,this.isReady_=!1;var d=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(d=!1);var p={source:n,autoplay:d,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+c+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};ki.names.forEach(function(v){var b=ki[v];p[b.getterName]=a[b.privateName]}),$e(p,this.options_[u]),$e(p,this.options_[c]),$e(p,this.options_[e.toLowerCase()]),this.tag&&(p.tag=this.tag),n&&n.src===this.cache_.src&&this.cache_.currentTime>0&&(p.startTime=this.cache_.currentTime);var y=Ut.getTech(e);if(!y)throw new Error("No Tech named '"+u+"' exists! '"+u+"' should be registered using videojs.registerTech()'");this.tech_=new y(p),this.tech_.ready(Dt(this,this.handleTechReady_),!0),function(r,t){r.forEach(function(i){var e=t.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach(function(n){return e.addCue(n)})}),t.textTracks()}(this.textTracksJson_||[],this.tech_),oo.forEach(function(v){a.on(a.tech_,v,function(b){return a["handleTech"+ti(v)+"_"](b)})}),Object.keys(yu).forEach(function(v){a.on(a.tech_,v,function(b){0===a.tech_.playbackRate()&&a.tech_.seeking()?a.queuedCallbacks_.push({callback:a["handleTech"+yu[v]+"_"].bind(a),event:b}):a["handleTech"+yu[v]+"_"](b)})}),this.on(this.tech_,"loadstart",function(v){return a.handleTechLoadStart_(v)}),this.on(this.tech_,"sourceset",function(v){return a.handleTechSourceset_(v)}),this.on(this.tech_,"waiting",function(v){return a.handleTechWaiting_(v)}),this.on(this.tech_,"ended",function(v){return a.handleTechEnded_(v)}),this.on(this.tech_,"seeking",function(v){return a.handleTechSeeking_(v)}),this.on(this.tech_,"play",function(v){return a.handleTechPlay_(v)}),this.on(this.tech_,"firstplay",function(v){return a.handleTechFirstPlay_(v)}),this.on(this.tech_,"pause",function(v){return a.handleTechPause_(v)}),this.on(this.tech_,"durationchange",function(v){return a.handleTechDurationChange_(v)}),this.on(this.tech_,"fullscreenchange",function(v,b){return a.handleTechFullscreenChange_(v,b)}),this.on(this.tech_,"fullscreenerror",function(v,b){return a.handleTechFullscreenError_(v,b)}),this.on(this.tech_,"enterpictureinpicture",function(v){return a.handleTechEnterPictureInPicture_(v)}),this.on(this.tech_,"leavepictureinpicture",function(v){return a.handleTechLeavePictureInPicture_(v)}),this.on(this.tech_,"error",function(v){return a.handleTechError_(v)}),this.on(this.tech_,"posterchange",function(v){return a.handleTechPosterChange_(v)}),this.on(this.tech_,"textdata",function(v){return a.handleTechTextData_(v)}),this.on(this.tech_,"ratechange",function(v){return a.handleTechRateChange_(v)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==u||!this.tag)&&za(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.unloadTech_=function(){var e=this;ki.names.forEach(function(n){var a=ki[n];e[a.privateName]=e[a.getterName]()}),this.textTracksJson_=function(r){var t=r.$$("track"),i=Array.prototype.map.call(t,function(n){return n.track});return Array.prototype.map.call(t,function(n){var a=Qa(n.track);return n.src&&(a.src=n.src),a}).concat(Array.prototype.filter.call(r.textTracks(),function(n){return-1===i.indexOf(n)}).map(Qa))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},t.tech=function(e){return void 0===e&&bt.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},t.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},t.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},t.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},t.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},t.manualAutoplay_=function(e){var n=this;if(this.tech_&&"string"==typeof e){var u,a=function(){var d=n.muted();n.muted(!0);var p=function(){n.muted(d)};n.playTerminatedQueue_.push(p);var y=n.play();if(Ya(y))return y.catch(function(v){throw p(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(v||""))})};if("any"!==e||this.muted()?u="muted"!==e||this.muted()?this.play():a():Ya(u=this.play())&&(u=u.catch(a)),Ya(u))return u.then(function(){n.trigger({type:"autoplay-success",autoplay:e})}).catch(function(){n.trigger({type:"autoplay-failure",autoplay:e})})}},t.updateSourceCaches_=function(e){void 0===e&&(e="");var n=e,a="";"string"!=typeof n&&(n=e.src,a=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],n&&!a&&(a=function(r,t){if(!t)return"";if(r.cache_.source.src===t&&r.cache_.source.type)return r.cache_.source.type;var i=r.cache_.sources.filter(function(u){return u.src===t});if(i.length)return i[0].type;for(var e=r.$$("source"),n=0;n<e.length;n++){var a=e[n];if(a.type&&a.src&&a.src===t)return a.type}return Aa(t)}(this,n)),this.cache_.source=Bt({},e,{src:n,type:a});for(var u=this.cache_.sources.filter(function(b){return b.src&&b.src===n}),c=[],d=this.$$("source"),p=[],y=0;y<d.length;y++){var v=An(d[y]);c.push(v),v.src&&v.src===n&&p.push(v.src)}p.length&&!u.length?this.cache_.sources=c:u.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=n},t.handleTechSourceset_=function(e){var n=this;if(!this.changingSrc_){var a=function(p){return n.updateSourceCaches_(p)},u=this.currentSource().src,c=e.src;u&&!/^blob:/.test(u)&&/^blob:/.test(c)&&(!this.lastSource_||this.lastSource_.tech!==c&&this.lastSource_.player!==u)&&(a=function(){}),a(c),e.src||this.tech_.any(["sourceset","loadstart"],function(d){if("sourceset"!==d.type){var p=n.techGet("currentSrc");n.lastSource_.tech=p,n.updateSourceCaches_(p)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},t.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},t.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},t.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var n=this.currentTime();this.on("timeupdate",function u(){n!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",u))})},t.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},t.handleTechFirstPlay_=function(){this.options_.starttime&&(bt.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.handleTechClick_=function(e){this.controls_&&(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?hn(this.play()):this.pause())},t.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(a){return a.contains(e.target)})||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},t.handleTechTap_=function(){this.userActive(!this.userActive())},t.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},t.handleStageClick_=function(){this.reportUserActivity()},t.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.documentFullscreenChange_=function(e){var n=e.target.player;if(!n||n===this){var a=this.el(),u=ue()[this.fsApi_.fullscreenElement]===a;!u&&a.matches?u=a.matches(":"+this.fsApi_.fullscreen):!u&&a.msMatchesSelector&&(u=a.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(u)}},t.handleTechFullscreenChange_=function(e,n){var a=this;n&&(n.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){a.removeClass("vjs-ios-native-fs")})),this.isFullscreen(n.isFullscreen))},t.handleTechFullscreenError_=function(e,n){this.trigger("fullscreenerror",n)},t.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},t.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},t.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},t.handleTechError_=function(){var e=this.tech_.error();this.error(e)},t.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},t.getCache=function(){return this.cache_},t.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},t.techCall_=function(e,n){this.ready(function(){if(e in sm)return function am(s,r,t,i){return r[t](s.reduce(Ca(t),i))}(this.middleware_,this.tech_,e,n);if(e in Xd)return uu(this.middleware_,this.tech_,e,n);try{this.tech_&&this.tech_[e](n)}catch(a){throw bt(a),a}},!0)},t.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in St)return function Nl(s,r,t){return s.reduceRight(Ca(t),r[t]())}(this.middleware_,this.tech_,e);if(e in Xd)return uu(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(n){throw void 0===this.tech_[e]?(bt("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",n),n):"TypeError"===n.name?(bt("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",n),this.tech_.isReady_=!1,n):(bt(n),n)}}},t.play=function(){var e=this,n=this.options_.Promise||M().Promise;return n?new n(function(a){e.play_(a)}):this.play_()},t.play_=function(e){var n=this;void 0===e&&(e=hn),this.playCallbacks_.push(e);var a=!(this.changingSrc_||!this.src()&&!this.currentSrc()),u=!(!fa&&!qi);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!a)return this.waitToPlay_=function(p){n.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!a&&u&&this.load());var c=this.techGet_("play");u&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===c?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(c)},t.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(n){n()})},t.runPlayCallbacks_=function(e){var n=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],n.forEach(function(a){a(e)})},t.pause=function(){this.techCall_("pause")},t.paused=function(){return!1!==this.techGet_("paused")},t.played=function(){return this.techGet_("played")||Kn(0,0)},t.scrubbing=function(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},t.currentTime=function(e){return typeof e<"u"?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},t.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},t.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},t.remainingTime=function(){return this.duration()-this.currentTime()},t.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},t.buffered=function(){var e=this.techGet_("buffered");return(!e||!e.length)&&(e=Kn(0,0)),e},t.bufferedPercent=function(){return wl(this.buffered(),this.duration())},t.bufferedEnd=function(){var e=this.buffered(),n=this.duration(),a=e.end(e.length-1);return a>n&&(a=n),a},t.volume=function(e){var n;return void 0!==e?(n=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=n,this.techCall_("setVolume",n),void(n>0&&this.lastVolume_(n))):(n=parseFloat(this.techGet_("volume")),isNaN(n)?1:n)},t.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},t.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},t.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},t.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.isFullscreen=function(e){if(void 0!==e){var n=this.isFullscreen_;return this.isFullscreen_=!!e,this.isFullscreen_!==n&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},t.requestFullscreen=function(e){var n=this.options_.Promise||M().Promise;if(n){var a=this;return new n(function(u,c){function d(){a.off("fullscreenerror",y),a.off("fullscreenchange",p)}function p(){d(),u()}function y(b,D){d(),c(D)}a.one("fullscreenchange",p),a.one("fullscreenerror",y);var v=a.requestFullscreenHelper_(e);v&&(v.then(d,d),v.then(u,c))})}return this.requestFullscreenHelper_()},t.requestFullscreenHelper_=function(e){var a,n=this;if(this.fsApi_.prefixed||(a=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(a=e)),this.fsApi_.requestFullscreen){var u=this.el_[this.fsApi_.requestFullscreen](a);return u&&u.then(function(){return n.isFullscreen(!0)},function(){return n.isFullscreen(!1)}),u}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},t.exitFullscreen=function(){var e=this.options_.Promise||M().Promise;if(e){var n=this;return new e(function(a,u){function c(){n.off("fullscreenerror",p),n.off("fullscreenchange",d)}function d(){c(),a()}function p(v,b){c(),u(b)}n.one("fullscreenchange",d),n.one("fullscreenerror",p);var y=n.exitFullscreenHelper_();y&&(y.then(c,c),y.then(a,u))})}return this.exitFullscreenHelper_()},t.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var n=ue()[this.fsApi_.exitFullscreen]();return n&&hn(n.then(function(){return e.isFullscreen(!1)})),n}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},t.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=ue().documentElement.style.overflow,br(ue(),"keydown",this.boundFullWindowOnEscKey_),ue().documentElement.style.overflow="hidden",Gr(ue().body,"vjs-full-window"),this.trigger("enterFullWindow")},t.fullWindowOnEscKey=function(e){ne().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},t.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Yt(ue(),"keydown",this.boundFullWindowOnEscKey_),ue().documentElement.style.overflow=this.docOrigOverflow,Ns(ue().body,"vjs-full-window"),this.trigger("exitFullWindow")},t.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},t.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},t.requestPictureInPicture=function(){if("pictureInPictureEnabled"in ue()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},t.exitPictureInPicture=function(){if("pictureInPictureEnabled"in ue())return ue().exitPictureInPicture()},t.handleKeyDown=function(e){var c,d,n=this.options_.userActions;n&&n.hotkeys&&(d=(c=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),c.isContentEditable||("input"===d?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(c.type):-1!==["textarea"].indexOf(d))||("function"==typeof n.hotkeys?n.hotkeys.call(this,e):this.handleHotkeys(e)))},t.handleHotkeys=function(e){var n=this.options_.userActions?this.options_.userActions.hotkeys:{},a=n.fullscreenKey,c=n.muteKey,d=void 0===c?function(I){return ne().isEventKey(I,"m")}:c,p=n.playPauseKey,y=void 0===p?function(I){return ne().isEventKey(I,"k")||ne().isEventKey(I,"Space")}:p;if((void 0===a?function(I){return ne().isEventKey(I,"f")}:a).call(this,e)){e.preventDefault(),e.stopPropagation();var v=ge.getComponent("FullscreenToggle");!1!==ue()[this.fsApi_.fullscreenEnabled]&&v.prototype.handleClick.call(this,e)}else d.call(this,e)?(e.preventDefault(),e.stopPropagation(),ge.getComponent("MuteToggle").prototype.handleClick.call(this,e)):y.call(this,e)&&(e.preventDefault(),e.stopPropagation(),ge.getComponent("PlayToggle").prototype.handleClick.call(this,e))},t.canPlayType=function(e){for(var n,a=0,u=this.options_.techOrder;a<u.length;a++){var c=u[a],d=Ut.getTech(c);if(d||(d=ge.getComponent(c)),d){if(d.isSupported()&&(n=d.canPlayType(e)))return n}else bt.error('The "'+c+'" tech is undefined. Skipped browser support check for that tech.')}return""},t.selectSource=function(e){var v,n=this,a=this.options_.techOrder.map(function(y){return[y,Ut.getTech(y)]}).filter(function(y){var v=y[0],b=y[1];return b?b.isSupported():(bt.error('The "'+v+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),u=function(v,b,D){var I;return v.some(function(P){return b.some(function(G){if(I=D(P,G))return!0})}),I},p=function(v,b){var D=v[0];if(v[1].canPlaySource(b,n.options_[D.toLowerCase()]))return{source:b,tech:D}};return(this.options_.sourceOrder?u(e,a,(v=p,function(b,D){return v(D,b)})):u(a,e,p))||!1},t.handleSrc_=function(e,n){var a=this;if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var u=Kd(e);if(u.length){if(this.changingSrc_=!0,n||(this.cache_.sources=u),this.updateSourceCaches_(u[0]),Fl(this,u[0],function(p,y){if(a.middleware_=y,n||(a.cache_.sources=u),a.updateSourceCaches_(p),a.src_(p))return u.length>1?a.handleSrc_(u.slice(1)):(a.changingSrc_=!1,a.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void a.triggerReady());!function zd(s,r){s.forEach(function(t){return t.setTech&&t.setTech(r)})}(y,a.tech_)}),this.options_.retryOnError&&u.length>1){var c=function(){a.error(null),a.handleSrc_(u.slice(1),!0)},d=function(){a.off("error",c)};this.one("error",c),this.one("playing",d),this.resetRetryOnError_=function(){a.off("error",c),a.off("playing",d)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},t.src=function(e){return this.handleSrc_(e,!1)},t.src_=function(e){var n=this,a=this.selectSource([e]);return!a||(function(r,t){return ti(r)===ti(t)}(a.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(a.tech,a.source),this.tech_.ready(function(){n.changingSrc_=!1}),!1))},t.load=function(){this.techCall_("load")},t.reset=function(){var e=this,n=this.options_.Promise||M().Promise;this.paused()||!n?this.doReset_():hn(this.play().then(function(){return e.doReset_()}))},t.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Qi(this)&&this.trigger("playerreset")},t.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},t.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar||{},n=e.durationDisplay,a=e.remainingTimeDisplay;n&&n.updateContent(),a&&a.updateContent()},t.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},t.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},t.currentSources=function(){var e=this.currentSource(),n=[];return 0!==Object.keys(e).length&&n.push(e),this.cache_.sources||n},t.currentSource=function(){return this.cache_.source||{}},t.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},t.currentType=function(){return this.currentSource()&&this.currentSource().type||""},t.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},t.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var n;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),n=!1):this.options_.autoplay=!!e,n=typeof n>"u"?this.options_.autoplay:n,this.tech_&&this.techCall_("setAutoplay",n)},t.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},t.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},t.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},t.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},t.controls=function(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},t.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},t.error=function(e){var n=this;if(void 0===e)return this.error_||null;if(En("beforeerror").forEach(function(u){var c=u(n,e);xt(c)&&!Array.isArray(c)||"string"==typeof c||"number"==typeof c||null===c?e=c:n.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&e&&4===e.code){var a=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],a),void this.one("loadstart",function(){this.off(["click","touchstart"],a)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Si(e),this.addClass("vjs-error"),bt.error("(CODE:"+this.error_.code+" "+Si.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),En("error").forEach(function(u){return u(n,n.error_)})},t.reportUserActivity=function(e){this.userActivity_=!0},t.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(n){n.stopPropagation(),n.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},t.listenForUserActivity_=function(){var e,n,a,u=Dt(this,this.reportUserActivity),p=function(D){u(),this.clearInterval(e)};this.on("mousedown",function(){u(),this.clearInterval(e),e=this.setInterval(u,250)}),this.on("mousemove",function(D){(D.screenX!==n||D.screenY!==a)&&(n=D.screenX,a=D.screenY,u())}),this.on("mouseup",p),this.on("mouseleave",p);var v,y=this.getChild("controlBar");y&&!qi&&!ur&&(y.on("mouseenter",function(b){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),y.on("mouseleave",function(b){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",u),this.on("keyup",u),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(v);var b=this.options_.inactivityTimeout;b<=0||(v=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},b))}},250)},t.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},t.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},t.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},t.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var n=this.children(),a=this.getChild("ControlBar"),u=a&&a.currentHeight();n.forEach(function(c){c!==a&&c.el_&&!c.hasClass("vjs-hidden")&&(c.hide(),e.audioOnlyCache_.hiddenChildren.push(c))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(u),this.trigger("audioonlymodechange")},t.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(e){return e.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},t.audioOnlyMode=function(e){var n=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var a=this.options_.Promise||M().Promise;if(a){if(e){var u=[];return this.isInPictureInPicture()&&u.push(this.exitPictureInPicture()),this.isFullscreen()&&u.push(this.exitFullscreen()),this.audioPosterMode()&&u.push(this.audioPosterMode(!1)),a.all(u).then(function(){return n.enableAudioOnlyUI_()})}return a.resolve().then(function(){return n.disableAudioOnlyUI_()})}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},t.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.audioPosterMode=function(e){var n=this;if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var a=this.options_.Promise||M().Promise;return a?e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(function(){n.enablePosterModeUI_()}):a.resolve().then(function(){n.enablePosterModeUI_()}):a.resolve().then(function(){n.disablePosterModeUI_()}):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},t.addTextTrack=function(e,n,a){if(this.tech_)return this.tech_.addTextTrack(e,n,a)},t.addRemoteTextTrack=function(e,n){if(this.tech_)return this.tech_.addRemoteTextTrack(e,n)},t.removeRemoteTextTrack=function(e){void 0===e&&(e={});var a=e.track;if(a||(a=e),this.tech_)return this.tech_.removeRemoteTextTrack(a)},t.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Qi(this)&&this.trigger("languagechange"))},t.languages=function(){return Bt(r.prototype.options_.languages,this.languages_)},t.toJSON=function(){var e=Bt(this.options_),n=e.tracks;e.tracks=[];for(var a=0;a<n.length;a++){var u=n[a];(u=Bt(u)).player=void 0,e.tracks[a]=u}return e},t.createModal=function(e,n){var a=this;(n=n||{}).content=e||"";var u=new Ta(this,n);return this.addChild(u),u.on("dispose",function(){a.removeChild(u)}),u.open(),u},t.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),n=this.currentWidth(),a=0;a<Ur.length;a++){var u=Ur[a];if(n<=this.breakpoints_[u]){if(e===u)return;e&&this.removeClass(mn[e]),this.addClass(mn[u]),this.breakpoint_=u;break}}},t.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},t.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=$e({},gm,e),this.updateCurrentBreakpoint_()),$e(this.breakpoints_)},t.responsive=function(e){return void 0===e?this.responsive_:(e=!!e)!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},t.currentBreakpoint=function(){return this.breakpoint_},t.currentBreakpointClass=function(){return mn[this.breakpoint_]||""},t.loadMedia=function(e,n){var a=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=Bt(e);var u=this.cache_.media,d=u.poster,p=u.src,y=u.textTracks;!u.artwork&&d&&(this.cache_.media.artwork=[{src:d,type:Aa(d)}]),p&&this.src(p),d&&this.poster(d),Array.isArray(y)&&y.forEach(function(v){return a.addRemoteTextTrack(v,!1)}),this.ready(n)}},t.getMedia=function(){if(!this.cache_.media){var e=this.poster(),u={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(c){return{kind:c.kind,label:c.label,language:c.language,src:c.src}})};return e&&(u.poster=e,u.artwork=[{src:u.poster,type:Aa(u.poster)}]),u}return Bt(this.cache_.media)},r.getTagSettings=function(e){var n={sources:[],tracks:[]},a=An(e),u=a["data-setup"];if(dn(e,"vjs-fill")&&(a.fill=!0),dn(e,"vjs-fluid")&&(a.fluid=!0),null!==u){var c=_t()(u||"{}"),d=c[0],p=c[1];d&&bt.error(d),$e(a,p)}if($e(n,a),e.hasChildNodes())for(var y=e.childNodes,v=0,b=y.length;v<b;v++){var D=y[v],I=D.nodeName.toLowerCase();"source"===I?n.sources.push(An(D)):"track"===I&&n.tracks.push(An(D))}return n},t.flexNotSupported_=function(){var e=ue().createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},t.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},t.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every(function(n){return"number"==typeof n})&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},r}(ge);ki.names.forEach(function(s){var r=ki[s];pi.prototype[r.getterName]=function(){return this.tech_?this.tech_[r.getterName]():(this[r.privateName]=this[r.privateName]||new r.ListClass,this[r.privateName])}}),pi.prototype.crossorigin=pi.prototype.crossOrigin,pi.players={};var uo=M().navigator;pi.prototype.options_={techOrder:Ut.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:uo&&(uo.languages&&uo.languages[0]||uo.userLanguage||uo.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(s){pi.prototype[s]=function(){return this.techGet_(s)}}),oo.forEach(function(s){pi.prototype["handleTech"+ti(s)+"_"]=function(){return this.trigger(s)}}),ge.registerComponent("Player",pi);var Tu="plugin",as="activePlugins_",ss={},bu=function(r){return ss.hasOwnProperty(r)},xu=function(r){return bu(r)?ss[r]:void 0},bf=function(r,t){r[as]=r[as]||{},r[as][t]=!0},Su=function(r,t,i){var e=(i?"before":"")+"pluginsetup";r.trigger(e,t),r.trigger(e+":"+t.name,t)},xf=function(r,t){return t.prototype.name=r,function(){Su(this,{name:r,plugin:t,instance:null},!0);for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];var a=_e(t,[this].concat(e));return this[r]=function(){return a},Su(this,a.getEventHash()),a}},gn=function(){function s(t){if(this.constructor===s)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),tu(this),delete this.trigger,Bd(this,this.constructor.defaultState),bf(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var r=s.prototype;return r.version=function(){return this.constructor.VERSION},r.getEventHash=function(i){return void 0===i&&(i={}),i.name=this.name,i.plugin=this.constructor,i.instance=this,i},r.trigger=function(i,e){return void 0===e&&(e={}),Ka(this.eventBusEl_,i,this.getEventHash(e))},r.handleStateChanged=function(i){},r.dispose=function(){var i=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[as][i]=!1,this.player=this.state=null,e[i]=xf(i,ss[i])},s.isBasic=function(i){var e="string"==typeof i?xu(i):i;return"function"==typeof e&&!s.prototype.isPrototypeOf(e.prototype)},s.registerPlugin=function(i,e){if("string"!=typeof i)throw new Error('Illegal plugin name, "'+i+'", must be a string, was '+typeof i+".");if(bu(i))bt.warn('A plugin named "'+i+'" already exists. You may want to avoid re-registering plugins!');else if(pi.prototype.hasOwnProperty(i))throw new Error('Illegal plugin name, "'+i+'", cannot share a name with an existing player method!');if("function"!=typeof e)throw new Error('Illegal plugin for "'+i+'", must be a function, was '+typeof e+".");return ss[i]=e,i!==Tu&&(pi.prototype[i]=s.isBasic(e)?function(r,t){var i=function(){Su(this,{name:r,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return bf(this,r),Su(this,{name:r,plugin:t,instance:n}),n};return Object.keys(t).forEach(function(e){i[e]=t[e]}),i}(i,e):xf(i,e)),e},s.deregisterPlugin=function(i){if(i===Tu)throw new Error("Cannot de-register base plugin.");bu(i)&&(delete ss[i],delete pi.prototype[i])},s.getPlugins=function(i){var e;return void 0===i&&(i=Object.keys(ss)),i.forEach(function(n){var a=xu(n);a&&((e=e||{})[n]=a)}),e},s.getPluginVersion=function(i){var e=xu(i);return e&&e.VERSION||""},s}();gn.getPlugin=xu,gn.BASE_PLUGIN_NAME=Tu,gn.registerPlugin(Tu,gn),pi.prototype.usingPlugin=function(s){return!!this[as]&&!0===this[as][s]},pi.prototype.hasPlugin=function(s){return!!bu(s)};var ac=!1,sc=function(r){return 0===r.indexOf("#")?r.slice(1):r};function z(s,r,t){var i=z.getPlayer(s);if(i)return r&&bt.warn('Player "'+s+'" is already initialised. Options will not be applied.'),t&&i.ready(t),i;var e="string"==typeof s?$n("#"+sc(s)):s;if(!Nr(e))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!e.ownerDocument.defaultView||!e.ownerDocument.body.contains(e))&&bt.warn("The element supplied is not included in the DOM"),!0===(r=r||{}).restoreEl&&(r.restoreEl=(e.parentNode&&e.parentNode.hasAttribute("data-vjs-player")?e.parentNode:e).cloneNode(!0)),En("beforesetup").forEach(function(a){var u=a(e,Bt(r));xt(u)&&!Array.isArray(u)?r=Bt(r,u):bt.error("please return an object in beforesetup hooks")});var n=ge.getComponent("Player");return i=new n(e,r,t),En("setup").forEach(function(a){return a(i)}),i}if(z.hooks_=qr,z.hooks=En,z.hook=function(r,t){En(r,t)},z.hookOnce=function(r,t){En(r,[].concat(t).map(function(i){return function n(){return ws(r,n),i.apply(void 0,arguments)}}))},z.removeHook=ws,!0!==M().VIDEOJS_NO_DYNAMIC_STYLE&&cn()){var Eu=$n(".vjs-styles-defaults");if(!Eu){Eu=k("vjs-styles-defaults");var oc=$n("head");oc&&oc.insertBefore(Eu,oc.firstChild),va(Eu,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}ga(1,z),z.VERSION="7.21.6",z.options=pi.prototype.options_,z.getPlayers=function(){return pi.players},z.getPlayer=function(s){var t,r=pi.players;if("string"==typeof s){var i=sc(s),e=r[i];if(e)return e;t=$n("#"+i)}else t=s;if(Nr(t)){var a=t.player,u=t.playerId;if(a||r[u])return a||r[u]}},z.getAllPlayers=function(){return Object.keys(pi.players).map(function(s){return pi.players[s]}).filter(Boolean)},z.players=pi.players,z.getComponent=ge.getComponent,z.registerComponent=function(s,r){Ut.isTech(r)&&bt.warn("The "+s+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),ge.registerComponent.call(ge,s,r)},z.getTech=Ut.getTech,z.registerTech=Ut.registerTech,z.use=function nm(s,r){Yn[s]=Yn[s]||[],Yn[s].push(r)},Object.defineProperty(z,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(z.middleware,"TERMINATOR",{value:Ws,writeable:!1,enumerable:!0}),z.browser=Ed,z.TOUCH_ENABLED=Cn,z.extend=function(r,t){void 0===t&&(t={}),ac||(bt.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),ac=!0);var i=function(){r.apply(this,arguments)},e={};for(var n in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),e=t):"function"==typeof t&&(i=t),function Le(s,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),r&&Je(s,r)}(i,r),r&&(i.super_=r),e)e.hasOwnProperty(n)&&(i.prototype[n]=e[n]);return i},z.mergeOptions=Bt,z.bind=Dt,z.registerPlugin=gn.registerPlugin,z.deregisterPlugin=gn.deregisterPlugin,z.plugin=function(s,r){return bt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),gn.registerPlugin(s,r)},z.getPlugins=gn.getPlugins,z.getPlugin=gn.getPlugin,z.getPluginVersion=gn.getPluginVersion,z.addLanguage=function(s,r){var t;return s=(""+s).toLowerCase(),(z.options.languages=Bt(z.options.languages,((t={})[s]=r,t)))[s]},z.log=bt,z.createLogger=Is,z.createTimeRange=z.createTimeRanges=Kn,z.formatTime=es,z.setFormatTime=function cm(s){zs=s},z.resetFormatTime=function dm(){zs=ql},z.parseUrl=Pl,z.isCrossOrigin=su,z.EventTarget=Ii,z.on=br,z.one=Zo,z.off=Yt,z.trigger=Ka,z.xhr=N(),z.TextTrack=js,z.AudioTrack=Wd,z.VideoTrack=qd,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(s){z[s]=function(){return bt.warn("videojs."+s+"() is deprecated; use videojs.dom."+s+"() instead"),Pd[s].apply(null,arguments)}}),z.computedStyle=Pt,z.dom=Pd,z.url=im,z.defineLazyProperty=ao,z.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Vr=be,Cu=function(r,t,i){return r&&i&&i.responseURL&&t!==i.responseURL?i.responseURL:t},Qr=function(r){return z.log.debug?z.log.debug.bind(z,"VHS:",r+" >"):function(){}},ea=1/30,vn=.1,Ef=function(r,t){var e,i=[];if(r&&r.length)for(e=0;e<r.length;e++)t(r.start(e),r.end(e))&&i.push([r.start(e),r.end(e)]);return z.createTimeRanges(i)},os=function(r,t){return Ef(r,function(i,e){return i-vn<=t&&e+vn>=t})},er=function(r,t){return Ef(r,function(i){return i-ea>=t})},Cf=function(r){var t=[];if(!r||!r.length)return"";for(var i=0;i<r.length;i++)t.push(r.start(i)+" => "+r.end(i));return t.join(", ")},Oa=function(r){for(var t=[],i=0;i<r.length;i++)t.push({start:r.start(i),end:r.end(i)});return t},wf=function(r){if(r&&r.length&&r.end)return r.end(r.length-1)},uc=function(r,t){var i=0;if(!r||!r.length)return i;for(var e=0;e<r.length;e++){var n=r.start(e),a=r.end(e);if(!(t>a)){if(t>n&&t<=a){i+=a-t;continue}i+=a-n}}return i},Au=z.createTimeRange,lc=function(r,t){if(!t.preload)return t.duration;var i=0;return(t.parts||[]).forEach(function(e){i+=e.duration}),(t.preloadHints||[]).forEach(function(e){"PART"===e.type&&(i+=r.partTargetDuration)}),i},cc=function(r){return(r.segments||[]).reduce(function(t,i,e){return i.parts?i.parts.forEach(function(n,a){t.push({duration:n.duration,segmentIndex:e,partIndex:a,part:n,segment:i})}):t.push({duration:i.duration,segmentIndex:e,partIndex:null,segment:i,part:null}),t},[])},Df=function(r){var t=r.segments&&r.segments.length&&r.segments[r.segments.length-1];return t&&t.parts||[]},If=function(r){var t=r.preloadSegment;if(t){var i=t.parts;return(t.preloadHints||[]).reduce(function(a,u){return a+("PART"===u.type?1:0)},0)+(i&&i.length?i.length:0)}},Pf=function(r,t){if(t.endList)return 0;if(r&&r.suggestedPresentationDelay)return r.suggestedPresentationDelay;var i=Df(t).length>0;return i&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:i&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},kf=function(r,t,i){if(typeof t>"u"&&(t=r.mediaSequence+r.segments.length),t<r.mediaSequence)return 0;var e=function(r,t){var i=0,e=t-r.mediaSequence,n=r.segments[e];if(n){if(typeof n.start<"u")return{result:n.start,precise:!0};if(typeof n.end<"u")return{result:n.end-n.duration,precise:!0}}for(;e--;){if(typeof(n=r.segments[e]).end<"u")return{result:i+n.end,precise:!0};if(i+=lc(r,n),typeof n.start<"u")return{result:i+n.start,precise:!0}}return{result:i,precise:!1}}(r,t);if(e.precise)return e.result;var n=function(r,t){for(var e,i=0,n=t-r.mediaSequence;n<r.segments.length;n++){if(typeof(e=r.segments[n]).start<"u")return{result:e.start-i,precise:!0};if(i+=lc(r,e),typeof e.end<"u")return{result:e.end-i,precise:!0}}return{result:-1,precise:!1}}(r,t);return n.precise?n.result:e.result+i},Of=function(r,t,i){if(!r)return 0;if("number"!=typeof i&&(i=0),typeof t>"u"){if(r.totalDuration)return r.totalDuration;if(!r.endList)return M()[1/0]}return kf(r,t,i)},lo=function(r){var t=r.defaultDuration,i=r.durationList,e=r.startIndex,n=r.endIndex,a=0;if(e>n){var u=[n,e];e=u[0],n=u[1]}if(e<0){for(var c=e;c<Math.min(0,n);c++)a+=t;e=0}for(var d=e;d<n;d++)a+=i[d].duration;return a},Lf=function(r,t,i,e){if(!r||!r.segments)return null;if(r.endList)return Of(r);if(null===t)return null;var n=kf(r,r.mediaSequence+r.segments.length,t=t||0);return i&&(n-=e="number"==typeof e?e:Pf(null,r)),Math.max(0,n)},Rf=function(r){return r.excludeUntil&&r.excludeUntil>Date.now()},dc=function(r){return r.excludeUntil&&r.excludeUntil===1/0},wu=function(r){var t=Rf(r);return!r.disabled&&!t},Mf=function(r,t){return t.attributes&&t.attributes[r]},co=function(r,t){if(1===r.playlists.length)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===r.playlists.filter(function(e){return!!wu(e)&&(e.attributes.BANDWIDTH||0)<i}).length},Du=function(r,t){return!(!r&&!t||!r&&t||r&&!t||!(r===t||r.id&&t.id&&r.id===t.id||r.resolvedUri&&t.resolvedUri&&r.resolvedUri===t.resolvedUri||r.uri&&t.uri&&r.uri===t.uri))},Ff=function(r,t){var i=r&&r.mediaGroups&&r.mediaGroups.AUDIO||{},e=!1;for(var n in i){for(var a in i[n])if(e=t(i[n][a]))break;if(e)break}return!!e},fo=function(r){if(!r||!r.playlists||!r.playlists.length)return Ff(r,function(a){return a.playlists&&a.playlists.length||a.uri});for(var i=function(u){var c=r.playlists[u],d=c.attributes&&c.attributes.CODECS;return d&&d.split(",").every(function(y){return vi(y)})||Ff(r,function(y){return Du(c,y)})?"continue":{v:!1}},e=0;e<r.playlists.length;e++){var n=i(e);if("continue"!==n&&"object"==typeof n)return n.v}return!0},dr={liveEdgeDelay:Pf,duration:Of,seekable:function(r,t,i){var n=t||0,a=Lf(r,t,!0,i);return null===a?Au():Au(n,a)},getMediaInfoForTime:function(r){for(var t=r.playlist,i=r.currentTime,e=r.startingSegmentIndex,n=r.startingPartIndex,a=r.startTime,u=r.experimentalExactManifestTimings,c=i-a,d=cc(t),p=0,y=0;y<d.length;y++){var v=d[y];if(e===v.segmentIndex&&("number"!=typeof n||"number"!=typeof v.partIndex||n===v.partIndex)){p=y;break}}if(c<0){if(p>0)for(var b=p-1;b>=0;b--){var D=d[b];if(c+=D.duration,u){if(c<0)continue}else if(c+ea<=0)continue;return{partIndex:D.partIndex,segmentIndex:D.segmentIndex,startTime:a-lo({defaultDuration:t.targetDuration,durationList:d,startIndex:p,endIndex:b})}}return{partIndex:d[0]&&d[0].partIndex||null,segmentIndex:d[0]&&d[0].segmentIndex||0,startTime:i}}if(p<0){for(var I=p;I<0;I++)if((c-=t.targetDuration)<0)return{partIndex:d[0]&&d[0].partIndex||null,segmentIndex:d[0]&&d[0].segmentIndex||0,startTime:i};p=0}for(var P=p;P<d.length;P++){var G=d[P];if(c-=G.duration,u){if(c>0)continue}else if(c-ea>=0)continue;return{partIndex:G.partIndex,segmentIndex:G.segmentIndex,startTime:a+lo({defaultDuration:t.targetDuration,durationList:d,startIndex:p,endIndex:P})}}return{segmentIndex:d[d.length-1].segmentIndex,partIndex:d[d.length-1].partIndex,startTime:i}},isEnabled:wu,isDisabled:function(r){return r.disabled},isBlacklisted:Rf,isIncompatible:dc,playlistEnd:Lf,isAes:function(r){for(var t=0;t<r.segments.length;t++)if(r.segments[t].key)return!0;return!1},hasAttribute:Mf,estimateSegmentRequestTime:function(r,t,i,e){return void 0===e&&(e=0),Mf("BANDWIDTH",i)?(r*i.attributes.BANDWIDTH-8*e)/t:NaN},isLowestEnabledRendition:co,isAudioOnly:fo,playlistMatch:Du,segmentDurationWithParts:lc},Nf=z.log,fc=function(r,t){return r+"-"+t},Dm=function(r,t,i){return"placeholder-uri-"+r+"-"+t+"-"+i},us=function(r,t){r.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(i){if(r.mediaGroups[i])for(var e in r.mediaGroups[i])for(var n in r.mediaGroups[i][e])t(r.mediaGroups[i][e][n],i,e,n)})},hc=function(r){var t=r.playlist,i=r.uri;t.id=r.id,t.playlistErrors_=0,i&&(t.uri=i),t.attributes=t.attributes||{}},Bf=function(r,t,i){void 0===i&&(i=Dm),r.uri=t;for(var e=0;e<r.playlists.length;e++)r.playlists[e].uri||(r.playlists[e].uri="placeholder-uri-"+e);var a=fo(r);us(r,function(u,c,d,p){if(!u.playlists||!u.playlists.length){if(a&&"AUDIO"===c&&!u.uri)for(var y=0;y<r.playlists.length;y++){var v=r.playlists[y];if(v.attributes&&v.attributes.AUDIO&&v.attributes.AUDIO===d)return}u.playlists=[vt({},u)]}u.playlists.forEach(function(b,D){var I=i(c,d,p,b),P=fc(D,I);b.uri?b.resolvedUri=b.resolvedUri||Vr(r.uri,b.uri):(b.uri=0===D?I:P,b.resolvedUri=b.uri),b.id=b.id||P,b.attributes=b.attributes||{},r.playlists[b.id]=b,r.playlists[b.uri]=b})}),function(r){for(var t=r.playlists.length;t--;){var i=r.playlists[t];hc({playlist:i,id:fc(t,i.uri)}),i.resolvedUri=Vr(r.uri,i.uri),r.playlists[i.id]=i,r.playlists[i.uri]=i,i.attributes.BANDWIDTH||Nf.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(r),function(r){us(r,function(t){t.uri&&(t.resolvedUri=Vr(r.uri,t.uri))})}(r)},Pu=z.mergeOptions,Rm=function(r,t){if(!r)return t;var i=Pu(r,t);if(r.preloadHints&&!t.preloadHints&&delete i.preloadHints,r.parts&&!t.parts)delete i.parts;else if(r.parts&&t.parts)for(var e=0;e<t.parts.length;e++)r.parts&&r.parts[e]&&(i.parts[e]=Pu(r.parts[e],t.parts[e]));return!r.skipped&&t.skipped&&(i.skipped=!1),r.preload&&!t.preload&&(i.preload=!1),i},Uf=function(r,t){!r.resolvedUri&&r.uri&&(r.resolvedUri=Vr(t,r.uri)),r.key&&!r.key.resolvedUri&&(r.key.resolvedUri=Vr(t,r.key.uri)),r.map&&!r.map.resolvedUri&&(r.map.resolvedUri=Vr(t,r.map.uri)),r.map&&r.map.key&&!r.map.key.resolvedUri&&(r.map.key.resolvedUri=Vr(t,r.map.key.uri)),r.parts&&r.parts.length&&r.parts.forEach(function(i){i.resolvedUri||(i.resolvedUri=Vr(t,i.uri))}),r.preloadHints&&r.preloadHints.length&&r.preloadHints.forEach(function(i){i.resolvedUri||(i.resolvedUri=Vr(t,i.uri))})},Vf=function(r){var t=r.segments||[],i=r.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints)for(var e=0;e<i.preloadHints.length;e++)if("MAP"===i.preloadHints[e].type)return t;i.duration=r.targetDuration,i.preload=!0,t.push(i)}return t},Hf=function(r,t){return r===t||r.segments&&t.segments&&r.segments.length===t.segments.length&&r.endList===t.endList&&r.mediaSequence===t.mediaSequence&&r.preloadSegment===t.preloadSegment},pc=function(r,t,i){void 0===i&&(i=Hf);var e=Pu(r,{}),n=e.playlists[t.id];if(!n||i(n,t))return null;t.segments=Vf(t);var a=Pu(n,t);if(a.preloadSegment&&!t.preloadSegment&&delete a.preloadSegment,n.segments){if(t.skip){t.segments=t.segments||[];for(var u=0;u<t.skip.skippedSegments;u++)t.segments.unshift({skipped:!0})}a.segments=function(r,t,i){var e=r.slice(),n=t.slice();i=i||0;for(var u,a=[],c=0;c<n.length;c++){var d=e[c+i],p=n[c];d?(u=d.map||u,a.push(Rm(d,p))):(u&&!p.map&&(p.map=u),a.push(p))}return a}(n.segments,t.segments,t.mediaSequence-n.mediaSequence)}a.segments.forEach(function(d){Uf(d,a.resolvedUri)});for(var c=0;c<e.playlists.length;c++)e.playlists[c].id===t.id&&(e.playlists[c]=a);return e.playlists[t.id]=a,e.playlists[t.uri]=a,us(r,function(d,p,y,v){if(d.playlists)for(var b=0;b<d.playlists.length;b++)t.id===d.playlists[b].id&&(d.playlists[b]=a)}),e},mc=function(r,t){var i=r.segments||[],e=i[i.length-1],n=e&&e.parts&&e.parts[e.parts.length-1],a=n&&n.duration||e&&e.duration;return t&&a?1e3*a:500*(r.partTargetDuration||r.targetDuration||10)},ls=function(s){function r(i,e,n){var a;if(void 0===n&&(n={}),a=s.call(this)||this,!i)throw new Error("A non-empty playlist URL or object is required");a.logger_=Qr("PlaylistLoader");var c=n.withCredentials,d=void 0!==c&&c,p=n.handleManifestRedirects,y=void 0!==p&&p;a.src=i,a.vhs_=e,a.withCredentials=d,a.handleManifestRedirects=y;var v=e.options_;return a.customTagParsers=v&&v.customTagParsers||[],a.customTagMappers=v&&v.customTagMappers||[],a.experimentalLLHLS=v&&v.experimentalLLHLS||!1,z.browser.IE_VERSION&&(a.experimentalLLHLS=!1),a.state="HAVE_NOTHING",a.handleMediaupdatetimeout_=a.handleMediaupdatetimeout_.bind(pe(a)),a.on("mediaupdatetimeout",a.handleMediaupdatetimeout_),a}Y(r,s);var t=r.prototype;return t.handleMediaupdatetimeout_=function(){var e=this;if("HAVE_METADATA"===this.state){var n=this.media(),a=Vr(this.master.uri,n.uri);this.experimentalLLHLS&&(a=function(r,t){if(t.endList||!t.serverControl)return r;var i={};if(t.serverControl.canBlockReload){var e=t.preloadSegment,n=t.mediaSequence+t.segments.length;if(e){var a=e.parts||[],u=If(t)-1;u>-1&&u!==a.length-1&&(i._HLS_part=u),(u>-1||a.length)&&n--}i._HLS_msn=n}if(t.serverControl&&t.serverControl.canSkipUntil&&(i._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){var c=new(M().URL)(r);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(d){i.hasOwnProperty(d)&&c.searchParams.set(d,i[d])}),r=c.toString()}return r}(a,n)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:a,withCredentials:this.withCredentials},function(u,c){if(e.request){if(u)return e.playlistRequestError(e.request,e.media(),"HAVE_METADATA");e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}})}},t.playlistRequestError=function(e,n,a){var u=n.uri,c=n.id;this.request=null,a&&(this.state=a),this.error={playlist:this.master.playlists[c],status:e.status,message:"HLS playlist request error at URL: "+u+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},t.parseManifest_=function(e){var n=this,a=e.url;return function(r){var t=r.onwarn,i=r.oninfo,e=r.manifestString,n=r.customTagParsers,a=void 0===n?[]:n,u=r.customTagMappers,c=void 0===u?[]:u,d=r.experimentalLLHLS,p=new na;t&&p.on("warn",t),i&&p.on("info",i),a.forEach(function(I){return p.addParser(I)}),c.forEach(function(I){return p.addTagMapper(I)}),p.push(e),p.end();var y=p.manifest;if(d||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(I){y.hasOwnProperty(I)&&delete y[I]}),y.segments&&y.segments.forEach(function(I){["parts","preloadHints"].forEach(function(P){I.hasOwnProperty(P)&&delete I[P]})})),!y.targetDuration){var v=10;y.segments&&y.segments.length&&(v=y.segments.reduce(function(I,P){return Math.max(I,P.duration)},0)),t&&t("manifest has no targetDuration defaulting to "+v),y.targetDuration=v}var b=Df(y);if(b.length&&!y.partTargetDuration){var D=b.reduce(function(I,P){return Math.max(I,P.duration)},0);t&&(t("manifest has no partTargetDuration defaulting to "+D),Nf.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),y.partTargetDuration=D}return y}({onwarn:function(d){return n.logger_("m3u8-parser warn for "+a+": "+d.message)},oninfo:function(d){return n.logger_("m3u8-parser info for "+a+": "+d.message)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},t.haveMetadata=function(e){var n=e.playlistString,a=e.playlistObject,u=e.url,c=e.id;this.request=null,this.state="HAVE_METADATA";var d=a||this.parseManifest_({url:u,manifestString:n});d.lastRequest=Date.now(),hc({playlist:d,uri:u,id:c});var p=pc(this.master,d);this.targetDuration=d.partTargetDuration||d.targetDuration,this.pendingMedia_=null,p?(this.master=p,this.media_=this.master.playlists[c]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(mc(this.media(),!!p)),this.trigger("loadedplaylist")},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),M().clearTimeout(this.mediaUpdateTimeout),M().clearTimeout(this.finalRenditionTimeout),this.off()},t.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},t.media=function(e,n){var a=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(M().clearTimeout(this.finalRenditionTimeout),n){var u=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=M().setTimeout(this.media.bind(this,e,!1),u)}else{var c=this.state,d=!this.media_||e.id!==this.media_.id,p=this.master.playlists[e.id];if(p&&p.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(d&&(this.trigger("mediachanging"),this.trigger("HAVE_MASTER"===c?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(mc(e,!0)),d){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},function(y,v){if(a.request){if(e.lastRequest=Date.now(),e.resolvedUri=Cu(a.handleManifestRedirects,e.resolvedUri,v),y)return a.playlistRequestError(a.request,e,c);a.haveMetadata({playlistString:v.responseText,url:e.uri,id:e.id}),a.trigger("HAVE_MASTER"===c?"loadedmetadata":"mediachange")}})}}},t.pause=function(){this.mediaUpdateTimeout&&(M().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},t.load=function(e){var n=this;this.mediaUpdateTimeout&&(M().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var a=this.media();if(e){var u=a?(a.partTargetDuration||a.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=M().setTimeout(function(){n.mediaUpdateTimeout=null,n.load()},u)}else this.started?this.trigger(a&&!a.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()},t.updateMediaUpdateTimeout_=function(e){var n=this;this.mediaUpdateTimeout&&(M().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=M().setTimeout(function(){n.mediaUpdateTimeout=null,n.trigger("mediaupdatetimeout"),n.updateMediaUpdateTimeout_(e)},e))},t.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=M().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){e.setupInitialPlaylist(e.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(n,a){if(e.request){if(e.request=null,n)return e.error={status:a.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:a.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=Cu(e.handleManifestRedirects,e.src,a);var u=e.parseManifest_({manifestString:a.responseText,url:e.src});e.setupInitialPlaylist(u)}})},t.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},t.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,Bf(this.master,this.srcUri()),e.playlists.forEach(function(a){a.segments=Vf(a),a.segments.forEach(function(u){Uf(u,a.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var n=this.srcUri()||M().location.href;this.master=function(r,t){var i=fc(0,t),e={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:M().location.href,resolvedUri:M().location.href,playlists:[{uri:t,id:i,resolvedUri:t,attributes:{}}]};return e.playlists[i]=e.playlists[0],e.playlists[t]=e.playlists[0],e}(0,n),this.haveMetadata({playlistObject:e,url:n,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},r}(z.EventTarget),Fm=z.xhr,Nm=z.mergeOptions,gc=function(r,t,i,e){var n="arraybuffer"===r.responseType?r.response:r.responseText;!t&&n&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=n.byteLength||n.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),i.headers&&(r.responseHeaders=i.headers),t&&"ETIMEDOUT"===t.code&&(r.timedout=!0),!t&&!r.aborted&&200!==i.statusCode&&206!==i.statusCode&&0!==i.statusCode&&(t=new Error("XHR Failed with a response of: "+(r&&(n||r.responseText)))),e(t,r)},vc=function(){var r=function t(i,e){i=Nm({timeout:45e3},i);var n=t.beforeRequest||z.Vhs.xhr.beforeRequest;if(n&&"function"==typeof n){var a=n(i);a&&(i=a)}var c=(!0===z.Vhs.xhr.original?Fm:z.Vhs.xhr)(i,function(p,y){return gc(c,p,y,e)}),d=c.abort;return c.abort=function(){return c.aborted=!0,d.apply(c,arguments)},c.uri=i.uri,c.requestTime=Date.now(),c};return r.original=!0,r},_c=function(r){var t={};return r.byterange&&(t.Range=function(r){return"bytes="+r.offset+"-"+("bigint"==typeof r.offset||"bigint"==typeof r.length?M().BigInt(r.offset)+M().BigInt(r.length)-M().BigInt(1):r.offset+r.length-1)}(r.byterange)),t},Bm=function(r,t){return r.start(t)+"-"+r.end(t)},Um=function(r,t){var i=r.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},Vm=function(r){return r>=32&&r<126?String.fromCharCode(r):"."},ho=function(r){var t={};return Object.keys(r).forEach(function(i){var e=r[i];t[i]=Vn(e)?{bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:e}),t},ku=function(r){var t=r.byterange||{length:1/0,offset:0};return[t.length,t.offset,r.resolvedUri].join(",")},Wf=function(r){return r.resolvedUri},qf=function(r){for(var t=Array.prototype.slice.call(r),i=16,e="",u=0;u<t.length/i;u++)e+=t.slice(u*i,u*i+i).map(Um).join("")+" "+t.slice(u*i,u*i+i).map(Vm).join("")+"\n";return e},Wm=Object.freeze({__proto__:null,createTransferableMessage:ho,initSegmentId:ku,segmentKeyId:Wf,hexDump:qf,tagDump:function(r){return qf(r.bytes)},textRanges:function(r){var i,t="";for(i=0;i<r.length;i++)t+=Bm(r,i)+" ";return t}}),Xf=function s(r){var t=r.programTime,i=r.playlist,e=r.retryCount,n=void 0===e?2:e,a=r.seekTo,u=r.pauseAfterSeek,c=void 0===u||u,d=r.tech,p=r.callback;if(!p)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!i||!a)return p({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!d.hasStarted_)return p({message:"player must be playing a live stream to start buffering"});if(!function(r){if(!r.segments||0===r.segments.length)return!1;for(var t=0;t<r.segments.length;t++)if(!r.segments[t].dateTimeObject)return!1;return!0}(i))return p({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var y=function(r,t){var i;try{i=new Date(r)}catch{return null}if(!t||!t.segments||0===t.segments.length)return null;var e=t.segments[0];if(i<e.dateTimeObject)return null;for(var n=0;n<t.segments.length-1&&(e=t.segments[n],!(i<t.segments[n+1].dateTimeObject));n++);var u=t.segments[t.segments.length-1],c=u.dateTimeObject,d=u.videoTimingInfo?function(r){return r.transmuxedPresentationEnd-r.transmuxedPresentationStart-r.transmuxerPrependedSeconds}(u.videoTimingInfo):u.duration+.25*u.duration;return i>new Date(c.getTime()+1e3*d)?null:(i>c&&(e=u),{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:dr.duration(t,t.mediaSequence+t.segments.indexOf(e)),type:e.videoTimingInfo?"accurate":"estimate"})}(t,i);if(!y)return p({message:t+" was not found in the stream"});var v=y.segment,b=function(r,t){var i,e;try{i=new Date(r),e=new Date(t)}catch{}var n=i.getTime();return(e.getTime()-n)/1e3}(v.dateTimeObject,t);if("estimate"===y.type)return 0===n?p({message:t+" is not buffered yet. Try again"}):(a(y.estimatedStart+b),void d.one("seeked",function(){s({programTime:t,playlist:i,retryCount:n-1,seekTo:a,pauseAfterSeek:c,tech:d,callback:p})}));var D=v.start+b;d.one("seeked",function(){return p(null,d.currentTime())}),c&&d.pause(),a(D)},po=function(r,t){if(4===r.readyState)return t()},yc=z.mergeOptions,Tc=function(r,t){if(!Hf(r,t)||r.sidx&&t.sidx&&(r.sidx.offset!==t.sidx.offset||r.sidx.length!==t.sidx.length))return!1;if(!r.sidx&&t.sidx||r.sidx&&!t.sidx||r.segments&&!t.segments||!r.segments&&t.segments)return!1;if(!r.segments&&!t.segments)return!0;for(var i=0;i<r.segments.length;i++){var e=r.segments[i],n=t.segments[i];if(e.uri!==n.uri)return!1;if(e.byterange||n.byterange){var a=e.byterange,u=n.byterange;if(a&&!u||!a&&u||a.offset!==u.offset||a.length!==u.length)return!1}}return!0},Km=function(r,t,i,e){return"placeholder-uri-"+r+"-"+t+"-"+(e.attributes.NAME||i)},Ru=function(r,t){return(!r.map&&!t.map||!(!r.map||!t.map||r.map.byterange.offset!==t.map.byterange.offset||r.map.byterange.length!==t.map.byterange.length))&&r.uri===t.uri&&r.byterange.offset===t.byterange.offset&&r.byterange.length===t.byterange.length},Yf=function(r,t){var i={};for(var e in r){var a=r[e].sidx;if(a){var u=Ss(a);if(!t[u])break;Ru(t[u].sidxInfo,a)&&(i[u]=t[u])}}return i},mo=function(s){function r(i,e,n,a){var u;void 0===n&&(n={}),(u=s.call(this)||this).masterPlaylistLoader_=a||pe(u),a||(u.isMaster_=!0);var d=n.withCredentials,p=void 0!==d&&d,y=n.handleManifestRedirects,v=void 0!==y&&y;if(u.vhs_=e,u.withCredentials=p,u.handleManifestRedirects=v,!i)throw new Error("A non-empty playlist URL or object is required");return u.on("minimumUpdatePeriod",function(){u.refreshXml_()}),u.on("mediaupdatetimeout",function(){u.refreshMedia_(u.media().id)}),u.state="HAVE_NOTHING",u.loadedPlaylists_={},u.logger_=Qr("DashPlaylistLoader"),u.isMaster_?(u.masterPlaylistLoader_.srcUrl=i,u.masterPlaylistLoader_.sidxMapping_={}):u.childPlaylist_=i,u}Y(r,s);var t=r.prototype;return t.requestErrored_=function(e,n,a){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2}:e,a&&(this.state=a),this.trigger("error"),!0):void 0)},t.addSidxSegments_=function(e,n,a){var u=this,c=e.sidx&&Ss(e.sidx);if(e.sidx&&c&&!this.masterPlaylistLoader_.sidxMapping_[c]){var d=Cu(this.handleManifestRedirects,e.sidx.resolvedUri),p=function(v,b){if(!u.requestErrored_(v,b,n)){var I,D=u.masterPlaylistLoader_.sidxMapping_;try{I=ol()(Qe(b.response).subarray(8))}catch(P){return void u.requestErrored_(P,b,n)}return D[c]={sidxInfo:e.sidx,sidx:I},ua(e,I,e.sidx.resolvedUri),a(!0)}};this.request=function(r,t,i){var n,e=[],a=!1,u=function(v,b,D,I){return b.abort(),a=!0,i(v,b,D,I)},c=function(v,b){if(!a){if(v)return u(v,b,"",e);var D=b.responseText.substring(e&&e.byteLength||0,b.responseText.length);if(e=function(){for(var r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];if((t=t.filter(function(u){return u&&(u.byteLength||u.length)&&"string"!=typeof u})).length<=1)return Qe(t[0]);var e=t.reduce(function(u,c,d){return u+(c.byteLength||c.length)},0),n=new Uint8Array(e),a=0;return t.forEach(function(u){u=Qe(u),n.set(u,a),a+=u.byteLength}),n}(e,bn(D,!0)),n=n||Ha(e),e.length<10||n&&e.length<n+2)return po(b,function(){return u(v,b,"",e)});var I=gl(e);return"ts"===I&&e.length<188||!I&&e.length<376?po(b,function(){return u(v,b,"",e)}):u(null,b,I,e)}},p=t({uri:r,beforeSend:function(v){v.overrideMimeType("text/plain; charset=x-user-defined"),v.addEventListener("progress",function(b){return gc(v,null,{statusCode:v.status},c)})}},function(y,v){return gc(p,y,v,c)});return p}(d,this.vhs_.xhr,function(y,v,b,D){if(y)return p(y,v);if(!b||"mp4"!==b)return p({status:v.status,message:"Unsupported "+(b||"unknown")+" container type for sidx segment at URL: "+d,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},v);var I=e.sidx.byterange,P=I.offset,G=I.length;if(D.length>=G+P)return p(y,{response:D.subarray(P,P+G),status:v.status,uri:v.uri});u.request=u.vhs_.xhr({uri:d,responseType:"arraybuffer",headers:_c({byterange:e.sidx.byterange})},p)})}else this.mediaRequest_=M().setTimeout(function(){return a(!1)},0)},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},M().clearTimeout(this.minimumUpdatePeriodTimeout_),M().clearTimeout(this.mediaRequest_),M().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},t.hasPendingRequest=function(){return this.request||this.mediaRequest_},t.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},t.media=function(e){var n=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var a=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var u=!this.media_||e.id!==this.media_.id;if(u&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(u&&(this.trigger("mediachanging"),this.trigger("mediachange")));u&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,a,function(c){n.haveMetadata({startingState:a,playlist:e})}))},t.haveMetadata=function(e){var n=e.startingState,a=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[a.id]=a,this.mediaRequest_=null,this.refreshMedia_(a.id),this.trigger("HAVE_MASTER"===n?"loadedmetadata":"mediachange")},t.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),M().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(M().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},t.load=function(e){var n=this;M().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var a=this.media();if(e){var u=a?a.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=M().setTimeout(function(){return n.load()},u)}else this.started?a&&!a.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},t.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_(function(n,a){e.haveMaster_(),!e.hasPendingRequest()&&!e.media_&&e.media(e.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=M().setTimeout(function(){return e.haveMaster_()},0)},t.requestMaster_=function(e){var n=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(a,u){if(!n.requestErrored_(a,u)){var c=u.responseText!==n.masterPlaylistLoader_.masterXml_;return n.masterPlaylistLoader_.masterXml_=u.responseText,n.masterLoaded_=u.responseHeaders&&u.responseHeaders.date?Date.parse(u.responseHeaders.date):Date.now(),n.masterPlaylistLoader_.srcUrl=Cu(n.handleManifestRedirects,n.masterPlaylistLoader_.srcUrl,u),c?(n.handleMaster_(),void n.syncClientServerClock_(function(){return e(u,c)})):e(u,c)}"HAVE_NOTHING"===n.state&&(n.started=!1)})},t.syncClientServerClock_=function(e){var n=this,a=function(r){return function(r){var t=fi(r,"UTCTiming")[0];if(!t)return null;var i=ji(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return i}(sl(r))}(this.masterPlaylistLoader_.masterXml_);return null===a?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===a.method?(this.masterPlaylistLoader_.clientOffset_=a.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:Vr(this.masterPlaylistLoader_.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},function(u,c){if(n.request){if(u)return n.masterPlaylistLoader_.clientOffset_=n.masterLoaded_-Date.now(),e();var d;d="HEAD"===a.method?c.responseHeaders&&c.responseHeaders.date?Date.parse(c.responseHeaders.date):n.masterLoaded_:Date.parse(c.responseText),n.masterPlaylistLoader_.clientOffset_=d-Date.now(),e()}}))},t.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},t.handleMaster_=function(){this.mediaRequest_=null;var e=this.masterPlaylistLoader_.master,n=function(r){var i=r.srcUrl,u=function(r,t){void 0===t&&(t={});var i=function(r,t){void 0===t&&(t={});var i=t,e=i.manifestUri,n=void 0===e?"":e,a=i.NOW,u=void 0===a?Date.now():a,c=i.clientOffset,d=void 0===c?0:c,p=fi(r,"Period");if(!p.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var y=fi(r,"Location"),v=ji(r),b=Uo([n],fi(r,"BaseURL"));v.type=v.type||"static",v.sourceDuration=v.mediaPresentationDuration||0,v.NOW=u,v.clientOffset=d,y.length&&(v.locations=y.map(al));var D=[];return p.forEach(function(I,P){var G=ji(I),ie=D[P-1];G.start=function(r){var t=r.attributes,i=r.priorPeriodAttributes;return"number"==typeof t.start?t.start:i&&"number"==typeof i.start&&"number"==typeof i.duration?i.start+i.duration:i||"static"!==r.mpdType?null:0}({attributes:G,priorPeriodAttributes:ie?ie.attributes:null,mpdType:v.type}),D.push({node:I,attributes:G})}),{locations:v.locations,representationInfo:yi(D.map(Cp(v,b)))}}(sl(r),t),e=function(r){return r.map(hd)}(i.representationInfo);return od({dashPlaylists:e,locations:i.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})}(r.masterXml,{manifestUri:i,clientOffset:r.clientOffset,sidxMapping:r.sidxMapping,previousManifest:r.previousManifest});return Bf(u,i,Km),u}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(n=function(r,t,i){for(var e=!0,n=yc(r,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),a=0;a<t.playlists.length;a++){var u=t.playlists[a];if(u.sidx){var c=Ss(u.sidx);i&&i[c]&&i[c].sidx&&ua(u,i[c].sidx,u.sidx.resolvedUri)}var d=pc(n,u,Tc);d&&(n=d,e=!1)}return us(t,function(p,y,v,b){if(p.playlists&&p.playlists.length){var D=p.playlists[0].id,I=pc(n,p.playlists[0],Tc);I&&(b in(n=I).mediaGroups[y][v]||(n.mediaGroups[y][v][b]=p),n.mediaGroups[y][v][b].playlists[0]=n.playlists[D],e=!1)}}),function(r,t){us(r,function(i,e,n,a){a in t.mediaGroups[e][n]||delete r.mediaGroups[e][n][a]})}(n,t),t.minimumUpdatePeriod!==r.minimumUpdatePeriod&&(e=!1),e?null:n}(e,n,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=n||e;var a=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return a&&a!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=a),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),!!n},t.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(M().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var n=e.master&&e.master.minimumUpdatePeriod;0===n&&(e.media()?n=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof n||n<=0?n<0&&this.logger_("found invalid minimumUpdatePeriod of "+n+", not setting a timeout"):this.createMUPTimeout_(n)},t.createMUPTimeout_=function(e){var n=this.masterPlaylistLoader_;n.minimumUpdatePeriodTimeout_=M().setTimeout(function(){n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(e)},e)},t.refreshXml_=function(){var e=this;this.requestMaster_(function(n,a){a&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=function(r,t){var e=Yf(r.playlists,t);return us(r,function(n,a,u,c){n.playlists&&n.playlists.length&&(e=yc(e,Yf(n.playlists,t)))}),e}(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.sidxMapping_),e.addSidxSegments_(e.media(),e.state,function(u){e.refreshMedia_(e.media().id)}))})},t.refreshMedia_=function(e){var n=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var a=this.masterPlaylistLoader_.master.playlists,u=!this.media_||this.media_!==a[e];u?this.media_=a[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function d(){n.media().endList||(n.mediaUpdateTimeout=M().setTimeout(function(){n.trigger("mediaupdatetimeout"),d()},mc(n.media(),!!u)))}(),this.trigger("loadedplaylist")},r}(z.EventTarget),Ei={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Qf=function(r){return r.on=r.addEventListener,r.off=r.removeEventListener,r},Jf=function(r){return function(){var t=function(r){try{return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))}catch{var t=new BlobBuilder;return t.append(r),URL.createObjectURL(t.getBlob())}}(r),i=Qf(new Worker(t));i.objURL=t;var e=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(t),e.call(this)},i}},Zf=function(r){return"var browserWorkerPolyFill = "+Qf.toString()+";\nbrowserWorkerPolyFill(self);\n"+r},eh=function(r){return r.toString().replace(/^function.+?{/,"").slice(0,-1)},tg=Zf(eh(function(){var s=function(){this.init=function(){var h={};this.on=function(g,m){h[g]||(h[g]=[]),h[g]=h[g].concat(m)},this.off=function(g,m){var _;return!!h[g]&&(_=h[g].indexOf(m),h[g]=h[g].slice(),h[g].splice(_,1),_>-1)},this.trigger=function(g){var m,_,x,E;if(m=h[g])if(2===arguments.length)for(x=m.length,_=0;_<x;++_)m[_].call(this,arguments[1]);else{for(E=[],_=arguments.length,_=1;_<arguments.length;++_)E.push(arguments[_]);for(x=m.length,_=0;_<x;++_)m[_].apply(this,E)}},this.dispose=function(){h={}}}};s.prototype.pipe=function(A){return this.on("data",function(h){A.push(h)}),this.on("done",function(h){A.flush(h)}),this.on("partialdone",function(h){A.partialFlush(h)}),this.on("endedtimeline",function(h){A.endTimeline(h)}),this.on("reset",function(h){A.reset(h)}),A},s.prototype.push=function(A){this.trigger("data",A)},s.prototype.flush=function(A){this.trigger("done",A)},s.prototype.partialFlush=function(A){this.trigger("partialdone",A)},s.prototype.endTimeline=function(A){this.trigger("endedtimeline",A)},s.prototype.reset=function(A){this.trigger("reset",A)};var a,u,c,d,p,y,v,b,D,I,P,G,ie,ye,Z,ee,fe,re,ae,me,le,tt,Ve,dt,Jt,ni,Ai,Ri,li,mr,jt,Wh,yn,Ma,fs,Do,A,h,r=s,t=Math.pow(2,32),e={getUint64:function(h){var m,g=new DataView(h.buffer,h.byteOffset,h.byteLength);return g.getBigUint64?(m=g.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(m):m:g.getUint32(0)*t+g.getUint32(4)},MAX_UINT32:t},n=e.MAX_UINT32;(function(){var A;if(Ve={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(A in Ve)Ve.hasOwnProperty(A)&&(Ve[A]=[A.charCodeAt(0),A.charCodeAt(1),A.charCodeAt(2),A.charCodeAt(3)]);dt=new Uint8Array([105,115,111,109]),ni=new Uint8Array([97,118,99,49]),Jt=new Uint8Array([0,0,0,1]),Ai=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Ri=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),li={video:Ai,audio:Ri},Wh=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),jt=new Uint8Array([0,0,0,0,0,0,0,0]),yn=new Uint8Array([0,0,0,0,0,0,0,0]),Ma=yn,fs=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Do=yn,mr=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),a=function(h){var _,x,g=[],m=0;for(_=1;_<arguments.length;_++)g.push(arguments[_]);for(_=g.length;_--;)m+=g[_].byteLength;for(x=new Uint8Array(m+8),new DataView(x.buffer,x.byteOffset,x.byteLength).setUint32(0,x.byteLength),x.set(h,4),_=0,m=8;_<g.length;_++)x.set(g[_],m),m+=g[_].byteLength;return x},u=function(){return a(Ve.dinf,a(Ve.dref,Wh))},c=function(h){return a(Ve.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,h.audioobjecttype<<3|h.samplingfrequencyindex>>>1,h.samplingfrequencyindex<<7|h.channelcount<<3,6,1,2]))},d=function(){return a(Ve.ftyp,dt,Jt,dt,ni)},ee=function(h){return a(Ve.hdlr,li[h])},p=function(h){return a(Ve.mdat,h)},Z=function(h){var g=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,h.duration>>>24&255,h.duration>>>16&255,h.duration>>>8&255,255&h.duration,85,196,0,0]);return h.samplerate&&(g[12]=h.samplerate>>>24&255,g[13]=h.samplerate>>>16&255,g[14]=h.samplerate>>>8&255,g[15]=255&h.samplerate),a(Ve.mdhd,g)},ye=function(h){return a(Ve.mdia,Z(h),ee(h.type),v(h))},y=function(h){return a(Ve.mfhd,new Uint8Array([0,0,0,0,(4278190080&h)>>24,(16711680&h)>>16,(65280&h)>>8,255&h]))},v=function(h){return a(Ve.minf,"video"===h.type?a(Ve.vmhd,mr):a(Ve.smhd,jt),u(),re(h))},b=function(h,g){for(var m=[],_=g.length;_--;)m[_]=me(g[_]);return a.apply(null,[Ve.moof,y(h)].concat(m))},D=function(h){for(var g=h.length,m=[];g--;)m[g]=G(h[g]);return a.apply(null,[Ve.moov,P(4294967295)].concat(m).concat(I(h)))},I=function(h){for(var g=h.length,m=[];g--;)m[g]=le(h[g]);return a.apply(null,[Ve.mvex].concat(m))},P=function(h){var g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&h)>>24,(16711680&h)>>16,(65280&h)>>8,255&h,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a(Ve.mvhd,g)},fe=function(h){var _,x,g=h.samples||[],m=new Uint8Array(4+g.length);for(x=0;x<g.length;x++)m[x+4]=(_=g[x].flags).dependsOn<<4|_.isDependedOn<<2|_.hasRedundancy;return a(Ve.sdtp,m)},re=function(h){return a(Ve.stbl,ae(h),a(Ve.stts,Do),a(Ve.stsc,Ma),a(Ve.stsz,fs),a(Ve.stco,yn))},ae=function(m){return a(Ve.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===m.type?A(m):h(m))},A=function(m){var B,W,_=m.sps||[],x=m.pps||[],E=[],F=[];for(B=0;B<_.length;B++)E.push((65280&_[B].byteLength)>>>8),E.push(255&_[B].byteLength),E=E.concat(Array.prototype.slice.call(_[B]));for(B=0;B<x.length;B++)F.push((65280&x[B].byteLength)>>>8),F.push(255&x[B].byteLength),F=F.concat(Array.prototype.slice.call(x[B]));if(W=[Ve.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&m.width)>>8,255&m.width,(65280&m.height)>>8,255&m.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a(Ve.avcC,new Uint8Array([1,m.profileIdc,m.profileCompatibility,m.levelIdc,255].concat([_.length],E,[x.length],F))),a(Ve.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],m.sarRatio){var H=m.sarRatio[0],X=m.sarRatio[1];W.push(a(Ve.pasp,new Uint8Array([(4278190080&H)>>24,(16711680&H)>>16,(65280&H)>>8,255&H,(4278190080&X)>>24,(16711680&X)>>16,(65280&X)>>8,255&X])))}return a.apply(null,W)},h=function(m){return a(Ve.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&m.channelcount)>>8,255&m.channelcount,(65280&m.samplesize)>>8,255&m.samplesize,0,0,0,0,(65280&m.samplerate)>>8,255&m.samplerate,0,0]),c(m))},ie=function(h){var g=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&h.id)>>24,(16711680&h.id)>>16,(65280&h.id)>>8,255&h.id,0,0,0,0,(4278190080&h.duration)>>24,(16711680&h.duration)>>16,(65280&h.duration)>>8,255&h.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&h.width)>>8,255&h.width,0,0,(65280&h.height)>>8,255&h.height,0,0]);return a(Ve.tkhd,g)},me=function(h){var g,m,_,x,F,B;return g=a(Ve.tfhd,new Uint8Array([0,0,0,58,(4278190080&h.id)>>24,(16711680&h.id)>>16,(65280&h.id)>>8,255&h.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),F=Math.floor(h.baseMediaDecodeTime/n),B=Math.floor(h.baseMediaDecodeTime%n),m=a(Ve.tfdt,new Uint8Array([1,0,0,0,F>>>24&255,F>>>16&255,F>>>8&255,255&F,B>>>24&255,B>>>16&255,B>>>8&255,255&B])),"audio"===h.type?(_=tt(h,92),a(Ve.traf,g,m,_)):(x=fe(h),_=tt(h,x.length+92),a(Ve.traf,g,m,_,x))},G=function(h){return h.duration=h.duration||4294967295,a(Ve.trak,ie(h),ye(h))},le=function(h){var g=new Uint8Array([0,0,0,0,(4278190080&h.id)>>24,(16711680&h.id)>>16,(65280&h.id)>>8,255&h.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==h.type&&(g[g.length-1]=0),a(Ve.trex,g)},function(){var A,h,g;g=function(_,x){var E=0,F=0,B=0,W=0;return _.length&&(void 0!==_[0].duration&&(E=1),void 0!==_[0].size&&(F=2),void 0!==_[0].flags&&(B=4),void 0!==_[0].compositionTimeOffset&&(W=8)),[0,0,E|F|B|W,1,(4278190080&_.length)>>>24,(16711680&_.length)>>>16,(65280&_.length)>>>8,255&_.length,(4278190080&x)>>>24,(16711680&x)>>>16,(65280&x)>>>8,255&x]},h=function(_,x){var E,F,B,W,H,X;for(B=g(W=_.samples||[],x+=20+16*W.length),(F=new Uint8Array(B.length+16*W.length)).set(B),E=B.length,X=0;X<W.length;X++)F[E++]=(4278190080&(H=W[X]).duration)>>>24,F[E++]=(16711680&H.duration)>>>16,F[E++]=(65280&H.duration)>>>8,F[E++]=255&H.duration,F[E++]=(4278190080&H.size)>>>24,F[E++]=(16711680&H.size)>>>16,F[E++]=(65280&H.size)>>>8,F[E++]=255&H.size,F[E++]=H.flags.isLeading<<2|H.flags.dependsOn,F[E++]=H.flags.isDependedOn<<6|H.flags.hasRedundancy<<4|H.flags.paddingValue<<1|H.flags.isNonSyncSample,F[E++]=61440&H.flags.degradationPriority,F[E++]=15&H.flags.degradationPriority,F[E++]=(4278190080&H.compositionTimeOffset)>>>24,F[E++]=(16711680&H.compositionTimeOffset)>>>16,F[E++]=(65280&H.compositionTimeOffset)>>>8,F[E++]=255&H.compositionTimeOffset;return a(Ve.trun,F)},A=function(_,x){var E,F,B,W,H,X;for(B=g(W=_.samples||[],x+=20+8*W.length),(E=new Uint8Array(B.length+8*W.length)).set(B),F=B.length,X=0;X<W.length;X++)E[F++]=(4278190080&(H=W[X]).duration)>>>24,E[F++]=(16711680&H.duration)>>>16,E[F++]=(65280&H.duration)>>>8,E[F++]=255&H.duration,E[F++]=(4278190080&H.size)>>>24,E[F++]=(16711680&H.size)>>>16,E[F++]=(65280&H.size)>>>8,E[F++]=255&H.size;return a(Ve.trun,E)},tt=function(_,x){return"audio"===_.type?A(_,x):h(_,x)}}();var Rv,Fv,Nv,qh,Bv,b0,x0,S0,ia_mdat=p,ia_moof=b,T0=function(h,g){var m={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return m.dataOffset=g,m.compositionTimeOffset=h.pts-h.dts,m.duration=h.duration,m.size=4*h.length,m.size+=h.byteLength,h.keyFrame&&(m.flags.dependsOn=2,m.flags.isNonSyncSample=0),m},hs=[33,16,5,32,164,27],Lv=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Wt=function(h){for(var g=[];h--;)g.push(0);return g};Fv=function(h){return 9e4*h},Nv=function(h,g){return h*g},qh=function(h){return h/9e4},Bv=function(h,g){return h/g},b0=function(h,g){return Fv(Bv(h,g))},x0=function(h,g){return Nv(qh(h),g)},S0=function(h,g,m){return qh(m?h:h-g)};var Rt_secondsToVideoTs=Fv,Rt_videoTsToSeconds=qh,Rt_audioTsToVideoTs=b0,Rt_videoTsToAudioTs=x0,Rt_metadataTsToSeconds=S0,Gh_prefixWithSilence=function(h,g,m,_){var x,H,X,se,E=0,F=0,B=0,W=0;if(g.length&&(x=Rt_audioTsToVideoTs(h.baseMediaDecodeTime,h.samplerate),E=Math.ceil(9e4/(h.samplerate/1024)),m&&_&&(F=x-Math.max(m,_),W=(B=Math.floor(F/E))*E),!(B<1||W>45e3))){for((H=function(){if(!Rv){var h={96e3:[hs,[227,64],Wt(154),[56]],88200:[hs,[231],Wt(170),[56]],64e3:[hs,[248,192],Wt(240),[56]],48e3:[hs,[255,192],Wt(268),[55,148,128],Wt(54),[112]],44100:[hs,[255,192],Wt(268),[55,163,128],Wt(84),[112]],32e3:[hs,[255,192],Wt(268),[55,234],Wt(226),[112]],24e3:[hs,[255,192],Wt(268),[55,255,128],Wt(268),[111,112],Wt(126),[224]],16e3:[hs,[255,192],Wt(268),[55,255,128],Wt(268),[111,255],Wt(269),[223,108],Wt(195),[1,192]],12e3:[Lv,Wt(268),[3,127,248],Wt(268),[6,255,240],Wt(268),[13,255,224],Wt(268),[27,253,128],Wt(259),[56]],11025:[Lv,Wt(268),[3,127,248],Wt(268),[6,255,240],Wt(268),[13,255,224],Wt(268),[27,255,192],Wt(268),[55,175,128],Wt(108),[112]],8e3:[Lv,Wt(268),[3,121,16],Wt(47),[7]]};Rv=function(h){return Object.keys(h).reduce(function(g,m){return g[m]=new Uint8Array(h[m].reduce(function(_,x){return _.concat(x)},[])),g},{})}(h)}return Rv}()[h.samplerate])||(H=g[0].data),X=0;X<B;X++)g.splice(0,0,{data:H,dts:(se=g[0]).dts-E,pts:se.pts-E});return h.baseMediaDecodeTime-=Math.floor(Rt_videoTsToAudioTs(W,h.samplerate)),W}},Nn_clearDtsInfo=function(h){delete h.minSegmentDts,delete h.maxSegmentDts,delete h.minSegmentPts,delete h.maxSegmentPts},Nn_calculateTrackBaseMediaDecodeTime=function(h,g){var m,x=h.minSegmentDts;return g||(x-=h.timelineStartInfo.dts),m=h.timelineStartInfo.baseMediaDecodeTime,m+=x,m=Math.max(0,m),"audio"===h.type&&(m*=h.samplerate/9e4,m=Math.floor(m)),m},Nn_collectDtsInfo=function(h,g){"number"==typeof g.pts&&(void 0===h.timelineStartInfo.pts&&(h.timelineStartInfo.pts=g.pts),h.minSegmentPts=void 0===h.minSegmentPts?g.pts:Math.min(h.minSegmentPts,g.pts),h.maxSegmentPts=void 0===h.maxSegmentPts?g.pts:Math.max(h.maxSegmentPts,g.pts)),"number"==typeof g.dts&&(void 0===h.timelineStartInfo.dts&&(h.timelineStartInfo.dts=g.dts),h.minSegmentDts=void 0===h.minSegmentDts?g.dts:Math.min(h.minSegmentDts,g.dts),h.maxSegmentDts=void 0===h.maxSegmentDts?g.dts:Math.max(h.maxSegmentDts,g.dts))},en=function A(h){h=h||{},A.prototype.init.call(this),this.parse708captions_="boolean"!=typeof h.parse708captions||h.parse708captions,this.captionPackets_=[],this.ccStreams_=[new mi(0,0),new mi(0,1),new mi(1,0),new mi(1,1)],this.parse708captions_&&(this.cc708Stream_=new Zt({captionServices:h.captionServices})),this.reset(),this.ccStreams_.forEach(function(g){g.on("data",this.trigger.bind(this,"data")),g.on("partialdone",this.trigger.bind(this,"partialdone")),g.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(en.prototype=new r).push=function(A){var h,g,m;if("sei_rbsp"===A.nalUnitType&&(h=function(h){for(var g=0,m={payloadType:-1,payloadSize:0},_=0,x=0;g<h.byteLength&&128!==h[g];){for(;255===h[g];)_+=255,g++;for(_+=h[g++];255===h[g];)x+=255,g++;if(x+=h[g++],!m.payload&&4===_){if("GA94"===String.fromCharCode(h[g+3],h[g+4],h[g+5],h[g+6])){m.payloadType=_,m.payloadSize=x,m.payload=h.subarray(g,g+x);break}m.payload=void 0}g+=x,_=0,x=0}return m}(A.escapedRBSP)).payload&&4===h.payloadType&&(g=function(h){return 181!==h.payload[0]||49!=(h.payload[1]<<8|h.payload[2])||"GA94"!==String.fromCharCode(h.payload[3],h.payload[4],h.payload[5],h.payload[6])||3!==h.payload[7]?null:h.payload.subarray(8,h.payload.length-1)}(h))){if(A.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(A.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));m=function(h,g){var _,x,E,F,m=[];if(!(64&g[0]))return m;for(x=31&g[0],_=0;_<x;_++)F={type:3&g[2+(E=3*_)],pts:h},4&g[E+2]&&(F.ccData=g[E+3]<<8|g[E+4],m.push(F));return m}(A.pts,g),this.captionPackets_=this.captionPackets_.concat(m),this.latestDts_!==A.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=A.dts}},en.prototype.flushCCStreams=function(A){this.ccStreams_.forEach(function(h){return"flush"===A?h.flush():h.partialFlush()},this)},en.prototype.flushStream=function(A){this.captionPackets_.length?(this.captionPackets_.forEach(function(h,g){h.presortIndex=g}),this.captionPackets_.sort(function(h,g){return h.pts===g.pts?h.presortIndex-g.presortIndex:h.pts-g.pts}),this.captionPackets_.forEach(function(h){h.type<2?this.dispatchCea608Packet(h):this.dispatchCea708Packet(h)},this),this.captionPackets_.length=0,this.flushCCStreams(A)):this.flushCCStreams(A)},en.prototype.flush=function(){return this.flushStream("flush")},en.prototype.partialFlush=function(){return this.flushStream("partialFlush")},en.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(A){A.reset()})},en.prototype.dispatchCea608Packet=function(A){this.setsTextOrXDSActive(A)?this.activeCea608Channel_[A.type]=null:this.setsChannel1Active(A)?this.activeCea608Channel_[A.type]=0:this.setsChannel2Active(A)&&(this.activeCea608Channel_[A.type]=1),null!==this.activeCea608Channel_[A.type]&&this.ccStreams_[(A.type<<1)+this.activeCea608Channel_[A.type]].push(A)},en.prototype.setsChannel1Active=function(A){return 4096==(30720&A.ccData)},en.prototype.setsChannel2Active=function(A){return 6144==(30720&A.ccData)},en.prototype.setsTextOrXDSActive=function(A){return 256==(28928&A.ccData)||4138==(30974&A.ccData)||6186==(30974&A.ccData)},en.prototype.dispatchCea708Packet=function(A){this.parse708captions_&&this.cc708Stream_.push(A)};var mT={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},zh=function(h){return 32<=h&&h<=127||160<=h&&h<=255},Fa=function(h){this.windowNum=h,this.reset()};Fa.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Fa.prototype.getText=function(){return this.rows.join("\n")},Fa.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Fa.prototype.newLine=function(A){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(A),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Fa.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Fa.prototype.addText=function(A){this.rows[this.rowIdx]+=A},Fa.prototype.backspace=function(){if(!this.isEmpty()){var A=this.rows[this.rowIdx];this.rows[this.rowIdx]=A.substr(0,A.length-1)}};var Xh=function(h,g,m){this.serviceNum=h,this.text="",this.currentWindow=new Fa(-1),this.windows=[],this.stream=m,"string"==typeof g&&this.createTextDecoder(g)};Xh.prototype.init=function(A,h){this.startPts=A;for(var g=0;g<8;g++)this.windows[g]=new Fa(g),"function"==typeof h&&(this.windows[g].beforeRowOverflow=h)},Xh.prototype.setCurrentWindow=function(A){this.currentWindow=this.windows[A]},Xh.prototype.createTextDecoder=function(A){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(A)}catch(h){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+A+" encoding. "+h})}};var Zt=function A(h){h=h||{},A.prototype.init.call(this);var x,g=this,m=h.captionServices||{},_={};Object.keys(m).forEach(function(E){x=m[E],/^SERVICE/.test(E)&&(_[E]=x.encoding)}),this.serviceEncodings=_,this.current708Packet=null,this.services={},this.push=function(E){3===E.type?(g.new708Packet(),g.add708Bytes(E)):(null===g.current708Packet&&g.new708Packet(),g.add708Bytes(E))}};Zt.prototype=new r,Zt.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Zt.prototype.add708Bytes=function(A){var h=A.ccData,g=h>>>8,m=255&h;this.current708Packet.ptsVals.push(A.pts),this.current708Packet.data.push(g),this.current708Packet.data.push(m)},Zt.prototype.push708Packet=function(){var A=this.current708Packet,h=A.data,g=null,m=null,_=0,x=h[_++];for(A.seq=x>>6,A.sizeCode=63&x;_<h.length;_++)m=31&(x=h[_++]),7==(g=x>>5)&&m>0&&(g=x=h[_++]),this.pushServiceBlock(g,_,m),m>0&&(_+=m-1)},Zt.prototype.pushServiceBlock=function(A,h,g){var m,_=h,x=this.current708Packet.data,E=this.services[A];for(E||(E=this.initService(A,_));_<h+g&&_<x.length;_++)zh(m=x[_])?_=this.handleText(_,E):24===m?_=this.multiByteCharacter(_,E):16===m?_=this.extendedCommands(_,E):128<=m&&m<=135?_=this.setCurrentWindow(_,E):152<=m&&m<=159?_=this.defineWindow(_,E):136===m?_=this.clearWindows(_,E):140===m?_=this.deleteWindows(_,E):137===m?_=this.displayWindows(_,E):138===m?_=this.hideWindows(_,E):139===m?_=this.toggleWindows(_,E):151===m?_=this.setWindowAttributes(_,E):144===m?_=this.setPenAttributes(_,E):145===m?_=this.setPenColor(_,E):146===m?_=this.setPenLocation(_,E):143===m?E=this.reset(_,E):8===m?E.currentWindow.backspace():12===m?E.currentWindow.clearText():13===m?E.currentWindow.pendingNewLine=!0:14===m?E.currentWindow.clearText():141===m&&_++},Zt.prototype.extendedCommands=function(A,h){var m=this.current708Packet.data[++A];return zh(m)&&(A=this.handleText(A,h,{isExtended:!0})),A},Zt.prototype.getPts=function(A){return this.current708Packet.ptsVals[Math.floor(A/2)]},Zt.prototype.initService=function(A,h){var m,_,g=this;return(m="SERVICE"+A)in this.serviceEncodings&&(_=this.serviceEncodings[m]),this.services[A]=new Xh(A,_,g),this.services[A].init(this.getPts(h),function(x){g.flushDisplayed(x,g.services[A])}),this.services[A]},Zt.prototype.handleText=function(A,h,g){var H,X,m=g&&g.isExtended,x=this.current708Packet.data,E=m?4096:0,F=x[A],W=h.currentWindow;return h.textDecoder_&&!m?(g&&g.isMultiByte?(X=[F,x[A+1]],A++):X=[F],H=h.textDecoder_.decode(new Uint8Array(X))):H=function(h){var g=mT[h]||h;return 4096&h&&h===g?"":String.fromCharCode(g)}(E|F),W.pendingNewLine&&!W.isEmpty()&&W.newLine(this.getPts(A)),W.pendingNewLine=!1,W.addText(H),A},Zt.prototype.multiByteCharacter=function(A,h){var g=this.current708Packet.data,_=g[A+2];return zh(g[A+1])&&zh(_)&&(A=this.handleText(++A,h,{isMultiByte:!0})),A},Zt.prototype.setCurrentWindow=function(A,h){return h.setCurrentWindow(7&this.current708Packet.data[A]),A},Zt.prototype.defineWindow=function(A,h){var g=this.current708Packet.data,m=g[A];h.setCurrentWindow(7&m);var x=h.currentWindow;return m=g[++A],x.visible=(32&m)>>5,x.rowLock=(16&m)>>4,x.columnLock=(8&m)>>3,x.priority=7&m,m=g[++A],x.relativePositioning=(128&m)>>7,x.anchorVertical=127&m,m=g[++A],x.anchorHorizontal=m,m=g[++A],x.anchorPoint=(240&m)>>4,x.rowCount=15&m,m=g[++A],x.columnCount=63&m,m=g[++A],x.windowStyle=(56&m)>>3,x.penStyle=7&m,x.virtualRowCount=x.rowCount+1,A},Zt.prototype.setWindowAttributes=function(A,h){var g=this.current708Packet.data,m=g[A],_=h.currentWindow.winAttr;return m=g[++A],_.fillOpacity=(192&m)>>6,_.fillRed=(48&m)>>4,_.fillGreen=(12&m)>>2,_.fillBlue=3&m,m=g[++A],_.borderType=(192&m)>>6,_.borderRed=(48&m)>>4,_.borderGreen=(12&m)>>2,_.borderBlue=3&m,m=g[++A],_.borderType+=(128&m)>>5,_.wordWrap=(64&m)>>6,_.printDirection=(48&m)>>4,_.scrollDirection=(12&m)>>2,_.justify=3&m,m=g[++A],_.effectSpeed=(240&m)>>4,_.effectDirection=(12&m)>>2,_.displayEffect=3&m,A},Zt.prototype.flushDisplayed=function(A,h){for(var g=[],m=0;m<8;m++)h.windows[m].visible&&!h.windows[m].isEmpty()&&g.push(h.windows[m].getText());h.endPts=A,h.text=g.join("\n\n"),this.pushCaption(h),h.startPts=A},Zt.prototype.pushCaption=function(A){""!==A.text&&(this.trigger("data",{startPts:A.startPts,endPts:A.endPts,text:A.text,stream:"cc708_"+A.serviceNum}),A.text="",A.startPts=A.endPts)},Zt.prototype.displayWindows=function(A,h){var m=this.current708Packet.data[++A],_=this.getPts(A);this.flushDisplayed(_,h);for(var x=0;x<8;x++)m&1<<x&&(h.windows[x].visible=1);return A},Zt.prototype.hideWindows=function(A,h){var m=this.current708Packet.data[++A],_=this.getPts(A);this.flushDisplayed(_,h);for(var x=0;x<8;x++)m&1<<x&&(h.windows[x].visible=0);return A},Zt.prototype.toggleWindows=function(A,h){var m=this.current708Packet.data[++A],_=this.getPts(A);this.flushDisplayed(_,h);for(var x=0;x<8;x++)m&1<<x&&(h.windows[x].visible^=1);return A},Zt.prototype.clearWindows=function(A,h){var m=this.current708Packet.data[++A],_=this.getPts(A);this.flushDisplayed(_,h);for(var x=0;x<8;x++)m&1<<x&&h.windows[x].clearText();return A},Zt.prototype.deleteWindows=function(A,h){var m=this.current708Packet.data[++A],_=this.getPts(A);this.flushDisplayed(_,h);for(var x=0;x<8;x++)m&1<<x&&h.windows[x].reset();return A},Zt.prototype.setPenAttributes=function(A,h){var g=this.current708Packet.data,m=g[A],_=h.currentWindow.penAttr;return m=g[++A],_.textTag=(240&m)>>4,_.offset=(12&m)>>2,_.penSize=3&m,m=g[++A],_.italics=(128&m)>>7,_.underline=(64&m)>>6,_.edgeType=(56&m)>>3,_.fontStyle=7&m,A},Zt.prototype.setPenColor=function(A,h){var g=this.current708Packet.data,m=g[A],_=h.currentWindow.penColor;return m=g[++A],_.fgOpacity=(192&m)>>6,_.fgRed=(48&m)>>4,_.fgGreen=(12&m)>>2,_.fgBlue=3&m,m=g[++A],_.bgOpacity=(192&m)>>6,_.bgRed=(48&m)>>4,_.bgGreen=(12&m)>>2,_.bgBlue=3&m,m=g[++A],_.edgeRed=(48&m)>>4,_.edgeGreen=(12&m)>>2,_.edgeBlue=3&m,A},Zt.prototype.setPenLocation=function(A,h){var g=this.current708Packet.data,m=g[A],_=h.currentWindow.penLoc;return h.currentWindow.pendingNewLine=!0,m=g[++A],_.row=15&m,m=g[++A],_.column=63&m,A},Zt.prototype.reset=function(A,h){var g=this.getPts(A);return this.flushDisplayed(g,h),this.initService(h.serviceNum,A)};var vT={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},$h=function(h){return null===h?"":(h=vT[h]||h,String.fromCharCode(h))},_T=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Io=function(){for(var h=[],g=15;g--;)h.push("");return h},mi=function A(h,g){A.prototype.init.call(this),this.field_=h||0,this.dataChannel_=g||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(m){var _,x,E,F,B;if((_=32639&m.ccData)!==this.lastControlCode_){if(4096==(61440&_)?this.lastControlCode_=_:_!==this.PADDING_&&(this.lastControlCode_=null),E=_>>>8,F=255&_,_!==this.PADDING_)if(_===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(_===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(m.pts),this.flushDisplayed(m.pts),x=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=x,this.startPts_=m.pts;else if(_===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(m.pts);else if(_===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(m.pts);else if(_===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(m.pts);else if(_===this.CARRIAGE_RETURN_)this.clearFormatting(m.pts),this.flushDisplayed(m.pts),this.shiftRowsUp_(),this.startPts_=m.pts;else if(_===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(_===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(m.pts),this.displayed_=Io();else if(_===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Io();else if(_===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(m.pts),this.displayed_=Io()),this.mode_="paintOn",this.startPts_=m.pts;else if(this.isSpecialCharacter(E,F))B=$h((E=(3&E)<<8)|F),this[this.mode_](m.pts,B),this.column_++;else if(this.isExtCharacter(E,F))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),B=$h((E=(3&E)<<8)|F),this[this.mode_](m.pts,B),this.column_++;else if(this.isMidRowCode(E,F))this.clearFormatting(m.pts),this[this.mode_](m.pts," "),this.column_++,!(14&~F)&&this.addFormatting(m.pts,["i"]),!(1&~F)&&this.addFormatting(m.pts,["u"]);else if(this.isOffsetControlCode(E,F))this.column_+=3&F;else if(this.isPAC(E,F)){var W=_T.indexOf(7968&_);"rollUp"===this.mode_&&(W-this.rollUpRows_+1<0&&(W=this.rollUpRows_-1),this.setRollUp(m.pts,W)),W!==this.row_&&(this.clearFormatting(m.pts),this.row_=W),1&F&&-1===this.formatting_.indexOf("u")&&this.addFormatting(m.pts,["u"]),!(16&~_)&&(this.column_=4*((14&_)>>1)),this.isColorPAC(F)&&!(14&~F)&&this.addFormatting(m.pts,["i"])}else this.isNormalChar(E)&&(0===F&&(F=null),B=$h(E),B+=$h(F),this[this.mode_](m.pts,B),this.column_+=B.length)}else this.lastControlCode_=null}};mi.prototype=new r,mi.prototype.flushDisplayed=function(A){var h=this.displayed_.map(function(g,m){try{return g.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+m+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");h.length&&this.trigger("data",{startPts:this.startPts_,endPts:A,text:h,stream:this.name_})},mi.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Io(),this.nonDisplayed_=Io(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},mi.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},mi.prototype.isSpecialCharacter=function(A,h){return A===this.EXT_&&h>=48&&h<=63},mi.prototype.isExtCharacter=function(A,h){return(A===this.EXT_+1||A===this.EXT_+2)&&h>=32&&h<=63},mi.prototype.isMidRowCode=function(A,h){return A===this.EXT_&&h>=32&&h<=47},mi.prototype.isOffsetControlCode=function(A,h){return A===this.OFFSET_&&h>=33&&h<=35},mi.prototype.isPAC=function(A,h){return A>=this.BASE_&&A<this.BASE_+8&&h>=64&&h<=127},mi.prototype.isColorPAC=function(A){return A>=64&&A<=79||A>=96&&A<=127},mi.prototype.isNormalChar=function(A){return A>=32&&A<=127},mi.prototype.setRollUp=function(A,h){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(A),this.nonDisplayed_=Io(),this.displayed_=Io()),void 0!==h&&h!==this.row_)for(var g=0;g<this.rollUpRows_;g++)this.displayed_[h-g]=this.displayed_[this.row_-g],this.displayed_[this.row_-g]="";void 0===h&&(h=this.row_),this.topRow_=h-this.rollUpRows_+1},mi.prototype.addFormatting=function(A,h){this.formatting_=this.formatting_.concat(h);var g=h.reduce(function(m,_){return m+"<"+_+">"},"");this[this.mode_](A,g)},mi.prototype.clearFormatting=function(A){if(this.formatting_.length){var h=this.formatting_.reverse().reduce(function(g,m){return g+"</"+m+">"},"");this.formatting_=[],this[this.mode_](A,h)}},mi.prototype.popOn=function(A,h){var g=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=g+=h},mi.prototype.rollUp=function(A,h){var g=this.displayed_[this.row_];this.displayed_[this.row_]=g+=h},mi.prototype.shiftRowsUp_=function(){var A;for(A=0;A<this.topRow_;A++)this.displayed_[A]="";for(A=this.row_+1;A<15;A++)this.displayed_[A]="";for(A=this.topRow_;A<this.row_;A++)this.displayed_[A]=this.displayed_[A+1];this.displayed_[this.row_]=""},mi.prototype.paintOn=function(A,h){var g=this.displayed_[this.row_];this.displayed_[this.row_]=g+=h};var Yh={CaptionStream:en,Cea608Stream:mi,Cea708Stream:Zt},nr={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Uv=function(h,g){var m=1;for(h>g&&(m=-1);Math.abs(g-h)>4294967296;)h+=8589934592*m;return h},A0=function A(h){var g,m;A.prototype.init.call(this),this.type_=h||"shared",this.push=function(_){"shared"!==this.type_&&_.type!==this.type_||(void 0===m&&(m=_.dts),_.dts=Uv(_.dts,m),_.pts=Uv(_.pts,m),g=_.dts,this.trigger("data",_))},this.flush=function(){m=g,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){m=void 0,g=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};A0.prototype=new r;var Zh,w0_TimestampRolloverStream=A0,w0_handleRollover=Uv,D0=function(h,g,m){var _,x="";for(_=g;_<m;_++)x+="%"+("00"+h[_].toString(16)).slice(-2);return x},Qh=function(h,g,m){return decodeURIComponent(D0(h,g,m))},bT=function(h,g,m){return unescape(D0(h,g,m))},Jh=function(h){return h[0]<<21|h[1]<<14|h[2]<<7|h[3]},I0={TXXX:function(h){var g;if(3===h.data[0]){for(g=1;g<h.data.length;g++)if(0===h.data[g]){h.description=Qh(h.data,1,g),h.value=Qh(h.data,g+1,h.data.length).replace(/\0*$/,"");break}h.data=h.value}},WXXX:function(h){var g;if(3===h.data[0])for(g=1;g<h.data.length;g++)if(0===h.data[g]){h.description=Qh(h.data,1,g),h.url=Qh(h.data,g+1,h.data.length);break}},PRIV:function(h){var g;for(g=0;g<h.data.length;g++)if(0===h.data[g]){h.owner=bT(h.data,0,g);break}h.privateData=h.data.subarray(g+1),h.data=h.privateData}};Zh=function(h){var E,g={descriptor:h&&h.descriptor},m=0,_=[],x=0;if(Zh.prototype.init.call(this),this.dispatchType=nr.METADATA_STREAM_TYPE.toString(16),g.descriptor)for(E=0;E<g.descriptor.length;E++)this.dispatchType+=("00"+g.descriptor[E].toString(16)).slice(-2);this.push=function(F){var B,W,H,X,se;if("timed-metadata"===F.type){if(F.dataAlignmentIndicator&&(x=0,_.length=0),0===_.length&&(F.data.length<10||73!==F.data[0]||68!==F.data[1]||51!==F.data[2]))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(_.push(F),x+=F.data.byteLength,1===_.length&&(m=Jh(F.data.subarray(6,10)),m+=10),!(x<m)){for(B={data:new Uint8Array(m),frames:[],pts:_[0].pts,dts:_[0].dts},se=0;se<m;)B.data.set(_[0].data.subarray(0,m-se),se),se+=_[0].data.byteLength,x-=_[0].data.byteLength,_.shift();W=10,64&B.data[5]&&(W+=4,W+=Jh(B.data.subarray(10,14)),m-=Jh(B.data.subarray(16,20)));do{if((H=Jh(B.data.subarray(W+4,W+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((X={id:String.fromCharCode(B.data[W],B.data[W+1],B.data[W+2],B.data[W+3]),data:B.data.subarray(W+10,W+H+10)}).key=X.id,I0[X.id]&&(I0[X.id](X),"com.apple.streaming.transportStreamTimestamp"===X.owner)){var ze=X.data,Pe=(1&ze[3])<<30|ze[4]<<22|ze[5]<<14|ze[6]<<6|ze[7]>>>2;Pe*=4,X.timeStamp=Pe+=3&ze[7],void 0===B.pts&&void 0===B.dts&&(B.pts=X.timeStamp,B.dts=X.timeStamp),this.trigger("timestamp",X)}B.frames.push(X),W+=10,W+=H}while(W<m);this.trigger("data",B)}}}},Zh.prototype=new r;var ep,Wc,tp,xT=Zh,ST=w0_TimestampRolloverStream;ep=function(){var h=new Uint8Array(188),g=0;ep.prototype.init.call(this),this.push=function(m){var E,_=0,x=188;for(g?((E=new Uint8Array(m.byteLength+g)).set(h.subarray(0,g)),E.set(m,g),g=0):E=m;x<E.byteLength;)71!==E[_]||71!==E[x]?(_++,x++):(this.trigger("data",E.subarray(_,x)),_+=188,x+=188);_<E.byteLength&&(h.set(E.subarray(_),0),g=E.byteLength-_)},this.flush=function(){188===g&&71===h[0]&&(this.trigger("data",h),g=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){g=0,this.trigger("reset")}},ep.prototype=new r,Wc=function(){var h,g,m,_;Wc.prototype.init.call(this),_=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,h=function(E,F){var B=0;F.payloadUnitStartIndicator&&(B+=E[B]+1),"pat"===F.type?g(E.subarray(B),F):m(E.subarray(B),F)},g=function(E,F){F.section_number=E[7],F.last_section_number=E[8],_.pmtPid=(31&E[10])<<8|E[11],F.pmtPid=_.pmtPid},m=function(E,F){var W,X;if(1&E[5]){for(_.programMapTable={video:null,audio:null,"timed-metadata":{}},W=3+((15&E[1])<<8|E[2])-4,X=12+((15&E[10])<<8|E[11]);X<W;){var se=E[X],Me=(31&E[X+1])<<8|E[X+2];se===nr.H264_STREAM_TYPE&&null===_.programMapTable.video?_.programMapTable.video=Me:se===nr.ADTS_STREAM_TYPE&&null===_.programMapTable.audio?_.programMapTable.audio=Me:se===nr.METADATA_STREAM_TYPE&&(_.programMapTable["timed-metadata"][Me]=se),X+=5+((15&E[X+3])<<8|E[X+4])}F.programMapTable=_.programMapTable}},this.push=function(x){var E={},F=4;if(E.payloadUnitStartIndicator=!!(64&x[1]),E.pid=31&x[1],E.pid<<=8,E.pid|=x[2],(48&x[3])>>>4>1&&(F+=x[F]+1),0===E.pid)E.type="pat",h(x.subarray(F),E),this.trigger("data",E);else if(E.pid===this.pmtPid)for(E.type="pmt",h(x.subarray(F),E),this.trigger("data",E);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([x,F,E]):this.processPes_(x,F,E)},this.processPes_=function(x,E,F){F.streamType=F.pid===this.programMapTable.video?nr.H264_STREAM_TYPE:F.pid===this.programMapTable.audio?nr.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][F.pid],F.type="pes",F.data=x.subarray(E),this.trigger("data",F)}},Wc.prototype=new r,Wc.STREAM_TYPES={h264:27,adts:15},tp=function(){var E,h=this,g=!1,m={data:[],size:0},_={data:[],size:0},x={data:[],size:0},B=function(H,X,se){var kr,Me=new Uint8Array(H.size),ze={type:X},Pe=0,lt=0,Hi=!1;if(H.data.length&&!(H.size<9)){for(ze.trackId=H.data[0].pid,Pe=0;Pe<H.data.length;Pe++)Me.set((kr=H.data[Pe]).data,lt),lt+=kr.data.byteLength;(function(H,X){var se,Me=H[0]<<16|H[1]<<8|H[2];X.data=new Uint8Array,1===Me&&(X.packetLength=6+(H[4]<<8|H[5]),X.dataAlignmentIndicator=!!(4&H[6]),192&(se=H[7])&&(X.pts=(14&H[9])<<27|(255&H[10])<<20|(254&H[11])<<12|(255&H[12])<<5|(254&H[13])>>>3,X.pts*=4,X.pts+=(6&H[13])>>>1,X.dts=X.pts,64&se&&(X.dts=(14&H[14])<<27|(255&H[15])<<20|(254&H[16])<<12|(255&H[17])<<5|(254&H[18])>>>3,X.dts*=4,X.dts+=(6&H[18])>>>1)),X.data=H.subarray(9+H[8]))})(Me,ze),Hi="video"===X||ze.packetLength<=H.size,(se||Hi)&&(H.size=0,H.data.length=0),Hi&&h.trigger("data",ze)}};tp.prototype.init.call(this),this.push=function(W){({pat:function(){},pes:function(){var X,se;switch(W.streamType){case nr.H264_STREAM_TYPE:X=m,se="video";break;case nr.ADTS_STREAM_TYPE:X=_,se="audio";break;case nr.METADATA_STREAM_TYPE:X=x,se="timed-metadata";break;default:return}W.payloadUnitStartIndicator&&B(X,se,!0),X.data.push(W),X.size+=W.data.byteLength},pmt:function(){var X={type:"metadata",tracks:[]};null!==(E=W.programMapTable).video&&X.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.video,codec:"avc",type:"video"}),null!==E.audio&&X.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.audio,codec:"adts",type:"audio"}),g=!0,h.trigger("data",X)}})[W.type]()},this.reset=function(){m.size=0,m.data.length=0,_.size=0,_.data.length=0,this.trigger("reset")},this.flushStreams_=function(){B(m,"video"),B(_,"audio"),B(x,"timed-metadata")},this.flush=function(){if(!g&&E){var W={type:"metadata",tracks:[]};null!==E.video&&W.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.video,codec:"avc",type:"video"}),null!==E.audio&&W.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.audio,codec:"adts",type:"audio"}),h.trigger("data",W)}g=!1,this.flushStreams_(),this.trigger("done")}},tp.prototype=new r;var P0={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:ep,TransportParseStream:Wc,ElementaryStream:tp,TimestampRolloverStream:ST,CaptionStream:Yh.CaptionStream,Cea608Stream:Yh.Cea608Stream,Cea708Stream:Yh.Cea708Stream,MetadataStream:xT};for(var Hv in nr)nr.hasOwnProperty(Hv)&&(P0[Hv]=nr[Hv]);var ip,Na=P0,k0=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ip=function(h){var g,m=0;ip.prototype.init.call(this),this.skipWarn_=function(_,x){this.trigger("log",{level:"warn",message:"adts skiping bytes "+_+" to "+x+" in frame "+m+" outside syncword"})},this.push=function(_){var E,F,B,W,H,x=0;if(h||(m=0),"audio"===_.type){g&&g.length?(B=g,(g=new Uint8Array(B.byteLength+_.data.byteLength)).set(B),g.set(_.data,B.byteLength)):g=_.data;for(var X;x+7<g.length;)if(255===g[x]&&240==(246&g[x+1])){if("number"==typeof X&&(this.skipWarn_(X,x),X=null),F=2*(1&~g[x+1]),H=9e4*(W=1024*(1+(3&g[x+6])))/k0[(60&g[x+2])>>>2],g.byteLength-x<(E=(3&g[x+3])<<11|g[x+4]<<3|(224&g[x+5])>>5))break;this.trigger("data",{pts:_.pts+m*H,dts:_.dts+m*H,sampleCount:W,audioobjecttype:1+(g[x+2]>>>6&3),channelcount:(1&g[x+2])<<2|(192&g[x+3])>>>6,samplerate:k0[(60&g[x+2])>>>2],samplingfrequencyindex:(60&g[x+2])>>>2,samplesize:16,data:g.subarray(x+7+F,x+E)}),m++,x+=E}else"number"!=typeof X&&(X=x),x++;"number"==typeof X&&(this.skipWarn_(X,x),X=null),g=g.subarray(x)}},this.flush=function(){m=0,this.trigger("done")},this.reset=function(){g=void 0,this.trigger("reset")},this.endTimeline=function(){g=void 0,this.trigger("endedtimeline")}},ip.prototype=new r;var L0,O0=ip;L0=function(h){var g=h.byteLength,m=0,_=0;this.length=function(){return 8*g},this.bitsAvailable=function(){return 8*g+_},this.loadWord=function(){var x=h.byteLength-g,E=new Uint8Array(4),F=Math.min(4,g);if(0===F)throw new Error("no bytes available");E.set(h.subarray(x,x+F)),m=new DataView(E.buffer).getUint32(0),_=8*F,g-=F},this.skipBits=function(x){var E;_>x?(m<<=x,_-=x):(x-=_,x-=8*(E=Math.floor(x/8)),g-=E,this.loadWord(),m<<=x,_-=x)},this.readBits=function(x){var E=Math.min(_,x),F=m>>>32-E;return(_-=E)>0?m<<=E:g>0&&this.loadWord(),(E=x-E)>0?F<<E|this.readBits(E):F},this.skipLeadingZeros=function(){var x;for(x=0;x<_;++x)if(m&2147483648>>>x)return m<<=x,_-=x,x;return this.loadWord(),x+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var x=this.skipLeadingZeros();return this.readBits(x+1)-1},this.readExpGolomb=function(){var x=this.readUnsignedExpGolomb();return 1&x?1+x>>>1:-1*(x>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var rp,qc,R0,CT=L0;qc=function(){var g,m,h=0;qc.prototype.init.call(this),this.push=function(_){var x;m?((x=new Uint8Array(m.byteLength+_.data.byteLength)).set(m),x.set(_.data,m.byteLength),m=x):m=_.data;for(var E=m.byteLength;h<E-3;h++)if(1===m[h+2]){g=h+5;break}for(;g<E;)switch(m[g]){case 0:if(0!==m[g-1]){g+=2;break}if(0!==m[g-2]){g++;break}h+3!==g-2&&this.trigger("data",m.subarray(h+3,g-2));do{g++}while(1!==m[g]&&g<E);h=g-2,g+=3;break;case 1:if(0!==m[g-1]||0!==m[g-2]){g+=3;break}this.trigger("data",m.subarray(h+3,g-2)),h=g-2,g+=3;break;default:g+=3}m=m.subarray(h),g-=h,h=0},this.reset=function(){m=null,h=0,this.trigger("reset")},this.flush=function(){m&&m.byteLength>3&&this.trigger("data",m.subarray(h+3)),m=null,h=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},qc.prototype=new r,R0={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},rp=function(){var g,m,_,x,E,F,B,h=new qc;rp.prototype.init.call(this),g=this,this.push=function(W){"video"===W.type&&(m=W.trackId,_=W.pts,x=W.dts,h.push(W))},h.on("data",function(W){var H={trackId:m,pts:_,dts:x,data:W,nalUnitTypeCode:31&W[0]};switch(H.nalUnitTypeCode){case 5:H.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:H.nalUnitType="sei_rbsp",H.escapedRBSP=E(W.subarray(1));break;case 7:H.nalUnitType="seq_parameter_set_rbsp",H.escapedRBSP=E(W.subarray(1)),H.config=F(H.escapedRBSP);break;case 8:H.nalUnitType="pic_parameter_set_rbsp";break;case 9:H.nalUnitType="access_unit_delimiter_rbsp"}g.trigger("data",H)}),h.on("done",function(){g.trigger("done")}),h.on("partialdone",function(){g.trigger("partialdone")}),h.on("reset",function(){g.trigger("reset")}),h.on("endedtimeline",function(){g.trigger("endedtimeline")}),this.flush=function(){h.flush()},this.partialFlush=function(){h.partialFlush()},this.reset=function(){h.reset()},this.endTimeline=function(){h.endTimeline()},B=function(H,X){var ze,se=8,Me=8;for(ze=0;ze<H;ze++)0!==Me&&(Me=(se+X.readExpGolomb()+256)%256),se=0===Me?se:Me},E=function(H){for(var ze,Pe,X=H.byteLength,se=[],Me=1;Me<X-2;)0===H[Me]&&0===H[Me+1]&&3===H[Me+2]?(se.push(Me+2),Me+=2):Me++;if(0===se.length)return H;ze=X-se.length,Pe=new Uint8Array(ze);var lt=0;for(Me=0;Me<ze;lt++,Me++)lt===se[0]&&(lt++,se.shift()),Pe[Me]=H[lt];return Pe},F=function(H){var Pe,lt,Hi,kr,Lo,Xv,Z0,e_,t_,$v,i_,Ro,X=0,se=0,Me=0,ze=0,wi=[1,1];if(lt=(Pe=new CT(H)).readUnsignedByte(),kr=Pe.readUnsignedByte(),Hi=Pe.readUnsignedByte(),Pe.skipUnsignedExpGolomb(),R0[lt]&&(3===(Lo=Pe.readUnsignedExpGolomb())&&Pe.skipBits(1),Pe.skipUnsignedExpGolomb(),Pe.skipUnsignedExpGolomb(),Pe.skipBits(1),Pe.readBoolean()))for(i_=3!==Lo?8:12,Ro=0;Ro<i_;Ro++)Pe.readBoolean()&&B(Ro<6?16:64,Pe);if(Pe.skipUnsignedExpGolomb(),0===(Xv=Pe.readUnsignedExpGolomb()))Pe.readUnsignedExpGolomb();else if(1===Xv)for(Pe.skipBits(1),Pe.skipExpGolomb(),Pe.skipExpGolomb(),Z0=Pe.readUnsignedExpGolomb(),Ro=0;Ro<Z0;Ro++)Pe.skipExpGolomb();if(Pe.skipUnsignedExpGolomb(),Pe.skipBits(1),e_=Pe.readUnsignedExpGolomb(),t_=Pe.readUnsignedExpGolomb(),0===($v=Pe.readBits(1))&&Pe.skipBits(1),Pe.skipBits(1),Pe.readBoolean()&&(X=Pe.readUnsignedExpGolomb(),se=Pe.readUnsignedExpGolomb(),Me=Pe.readUnsignedExpGolomb(),ze=Pe.readUnsignedExpGolomb()),Pe.readBoolean()&&Pe.readBoolean())switch(Pe.readUnsignedByte()){case 1:wi=[1,1];break;case 2:wi=[12,11];break;case 3:wi=[10,11];break;case 4:wi=[16,11];break;case 5:wi=[40,33];break;case 6:wi=[24,11];break;case 7:wi=[20,11];break;case 8:wi=[32,11];break;case 9:wi=[80,33];break;case 10:wi=[18,11];break;case 11:wi=[15,11];break;case 12:wi=[64,33];break;case 13:wi=[160,99];break;case 14:wi=[4,3];break;case 15:wi=[3,2];break;case 16:wi=[2,1];break;case 255:wi=[Pe.readUnsignedByte()<<8|Pe.readUnsignedByte(),Pe.readUnsignedByte()<<8|Pe.readUnsignedByte()]}return{profileIdc:lt,levelIdc:Hi,profileCompatibility:kr,width:16*(e_+1)-2*X-2*se,height:(2-$v)*(t_+1)*16-2*Me-2*ze,sarRatio:wi}}},rp.prototype=new r;var ap,AT={H264Stream:rp,NalByteStream:qc},wT=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],M0=function(h,g){var m=h[g+6]<<21|h[g+7]<<14|h[g+8]<<7|h[g+9];return m=m>=0?m:0,(16&h[g+5])>>4?m+20:m+10},DT=function A(h,g){return h.length-g<10||73!==h[g]||68!==h[g+1]||51!==h[g+2]?g:A(h,g+=M0(h,g))},F0=function(h){return h[0]<<21|h[1]<<14|h[2]<<7|h[3]},kT=function(h,g,m){return unescape(function(h,g,m){var _,x="";for(_=g;_<m;_++)x+="%"+("00"+h[_].toString(16)).slice(-2);return x}(h,g,m))},np={isLikelyAacData:function(h){var g=DT(h,0);return h.length>=g+2&&!(255&~h[g])&&!(240&~h[g+1])&&16==(22&h[g+1])},parseId3TagSize:M0,parseAdtsSize:function(h,g){return 6144&h[g+3]|h[g+4]<<3|(224&h[g+5])>>5},parseType:function(h,g){return 73===h[g]&&68===h[g+1]&&51===h[g+2]?"timed-metadata":!0&h[g]&&!(240&~h[g+1])?"audio":null},parseSampleRate:function(h){for(var g=0;g+5<h.length;){if(255===h[g]&&240==(246&h[g+1]))return wT[(60&h[g+2])>>>2];g++}return null},parseAacTimestamp:function(h){var g,m,_;g=10,64&h[5]&&(g+=4,g+=F0(h.subarray(10,14)));do{if((m=F0(h.subarray(g+4,g+8)))<1)return null;if("PRIV"===String.fromCharCode(h[g],h[g+1],h[g+2],h[g+3])){_=h.subarray(g+10,g+m+10);for(var E=0;E<_.byteLength;E++)if(0===_[E]){if("com.apple.streaming.transportStreamTimestamp"===kT(_,0,E)){var B=_.subarray(E+1),W=(1&B[3])<<30|B[4]<<22|B[5]<<14|B[6]<<6|B[7]>>>2;return(W*=4)+(3&B[7])}break}}g+=10,g+=m}while(g<h.byteLength);return null}};ap=function(){var h=new Uint8Array,g=0;ap.prototype.init.call(this),this.setTimestamp=function(m){g=m},this.push=function(m){var F,B,W,_=0,x=0;for(h.length?(W=h.length,(h=new Uint8Array(m.byteLength+W)).set(h.subarray(0,W)),h.set(m,W)):h=m;h.length-x>=3;)if(73!==h[x]||68!==h[x+1]||51!==h[x+2])if(255&~h[x]||240&~h[x+1])x++;else{if(h.length-x<7||x+(_=np.parseAdtsSize(h,x))>h.length)break;B={type:"audio",data:h.subarray(x,x+_),pts:g,dts:g},this.trigger("data",B),x+=_}else{if(h.length-x<10||x+(_=np.parseId3TagSize(h,x))>h.length)break;F={type:"timed-metadata",data:h.subarray(x,x+_)},this.trigger("data",F),x+=_}h=h.length-x>0?h.subarray(x):new Uint8Array},this.reset=function(){h=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){h=new Uint8Array,this.trigger("endedtimeline")}},ap.prototype=new r;var Gc,Qu,sp,Po,FT=ap,jv=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Wv=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],UT=AT.H264Stream,VT=np.isLikelyAacData,jT=function(h,g){g.stream=h,this.trigger("log",g)},N0=function(h,g){for(var m=Object.keys(g),_=0;_<m.length;_++){var x=m[_];"headOfPipeline"===x||!g[x].on||g[x].on("log",jT.bind(h,x))}},B0=function(h,g){var m;if(h.length!==g.length)return!1;for(m=0;m<h.length;m++)if(h[m]!==g[m])return!1;return!0},qv=function(h,g,m,_,x,E){return{start:{dts:h,pts:h+(m-g)},end:{dts:h+(_-g),pts:h+(x-m)},prependedContentDuration:E,baseMediaDecodeTime:h}};Qu=function(h,g){var _,m=[],x=0,E=0,F=1/0;_=(g=g||{}).firstSequenceNumber||0,Qu.prototype.init.call(this),this.push=function(B){Nn_collectDtsInfo(h,B),h&&jv.forEach(function(W){h[W]=B[W]}),m.push(B)},this.setEarliestDts=function(B){x=B},this.setVideoBaseMediaDecodeTime=function(B){F=B},this.setAudioAppendStart=function(B){E=B},this.flush=function(){var B,W,H,X,se,Me,ze;0!==m.length?(B=function(h,g,m){return g.minSegmentDts>=m?h:(g.minSegmentDts=1/0,h.filter(function(_){return _.dts>=m&&(g.minSegmentDts=Math.min(g.minSegmentDts,_.dts),g.minSegmentPts=g.minSegmentDts,!0)}))}(m,h,x),h.baseMediaDecodeTime=Nn_calculateTrackBaseMediaDecodeTime(h,g.keepOriginalTimestamps),ze=Gh_prefixWithSilence(h,B,E,F),h.samples=function(h){var g,_=[];for(g=0;g<h.length;g++)_.push({size:h[g].data.byteLength,duration:1024});return _}(B),H=ia_mdat(function(h){var g,m,_=0,x=new Uint8Array(function(h){var g,_=0;for(g=0;g<h.length;g++)_+=h[g].data.byteLength;return _}(h));for(g=0;g<h.length;g++)x.set((m=h[g]).data,_),_+=m.data.byteLength;return x}(B)),m=[],W=ia_moof(_,[h]),X=new Uint8Array(W.byteLength+H.byteLength),_++,X.set(W),X.set(H,W.byteLength),Nn_clearDtsInfo(h),se=Math.ceil(9216e4/h.samplerate),B.length&&(Me=B.length*se,this.trigger("segmentTimingInfo",qv(Rt_audioTsToVideoTs(h.baseMediaDecodeTime,h.samplerate),B[0].dts,B[0].pts,B[0].dts+Me,B[0].pts+Me,ze||0)),this.trigger("timingInfo",{start:B[0].pts,end:B[0].pts+Me})),this.trigger("data",{track:h,boxes:X}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Nn_clearDtsInfo(h),m=[],this.trigger("reset")}},Qu.prototype=new r,Gc=function(h,g){var m,E,F,_=[],x=[];m=(g=g||{}).firstSequenceNumber||0,Gc.prototype.init.call(this),delete h.minPTS,this.gopCache_=[],this.push=function(B){Nn_collectDtsInfo(h,B),"seq_parameter_set_rbsp"===B.nalUnitType&&!E&&(E=B.config,h.sps=[B.data],Wv.forEach(function(W){h[W]=E[W]},this)),"pic_parameter_set_rbsp"===B.nalUnitType&&!F&&(F=B.data,h.pps=[B.data]),_.push(B)},this.flush=function(){for(var B,W,H,X,se,Me,Pe,lt,ze=0;_.length&&"access_unit_delimiter_rbsp"!==_[0].nalUnitType;)_.shift();if(0===_.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(B=function(h){var g,m,_=[],x=[];for(x.byteLength=0,x.nalCount=0,x.duration=0,_.byteLength=0,g=0;g<h.length;g++)"access_unit_delimiter_rbsp"===(m=h[g]).nalUnitType?(_.length&&(_.duration=m.dts-_.dts,x.byteLength+=_.byteLength,x.nalCount+=_.length,x.duration+=_.duration,x.push(_)),(_=[m]).byteLength=m.data.byteLength,_.pts=m.pts,_.dts=m.dts):("slice_layer_without_partitioning_rbsp_idr"===m.nalUnitType&&(_.keyFrame=!0),_.duration=m.dts-_.dts,_.byteLength+=m.data.byteLength,_.push(m));return x.length&&(!_.duration||_.duration<=0)&&(_.duration=x[x.length-1].duration),x.byteLength+=_.byteLength,x.nalCount+=_.length,x.duration+=_.duration,x.push(_),x}(_),(H=function(h){var g,m,_=[],x=[];for(_.byteLength=0,_.nalCount=0,_.duration=0,_.pts=h[0].pts,_.dts=h[0].dts,x.byteLength=0,x.nalCount=0,x.duration=0,x.pts=h[0].pts,x.dts=h[0].dts,g=0;g<h.length;g++)(m=h[g]).keyFrame?(_.length&&(x.push(_),x.byteLength+=_.byteLength,x.nalCount+=_.nalCount,x.duration+=_.duration),(_=[m]).nalCount=m.length,_.byteLength=m.byteLength,_.pts=m.pts,_.dts=m.dts,_.duration=m.duration):(_.duration+=m.duration,_.nalCount+=m.length,_.byteLength+=m.byteLength,_.push(m));return x.length&&_.duration<=0&&(_.duration=x[x.length-1].duration),x.byteLength+=_.byteLength,x.nalCount+=_.nalCount,x.duration+=_.duration,x.push(_),x}(B))[0][0].keyFrame||((W=this.getGopForFusion_(_[0],h))?(ze=W.duration,H.unshift(W),H.byteLength+=W.byteLength,H.nalCount+=W.nalCount,H.pts=W.pts,H.dts=W.dts,H.duration+=W.duration):H=function(h){var g;return!h[0][0].keyFrame&&h.length>1&&(g=h.shift(),h.byteLength-=g.byteLength,h.nalCount-=g.nalCount,h[0][0].dts=g.dts,h[0][0].pts=g.pts,h[0][0].duration+=g.duration),h}(H)),x.length){var Hi;if(!(Hi=g.alignGopsAtEnd?this.alignGopsAtEnd_(H):this.alignGopsAtStart_(H)))return this.gopCache_.unshift({gop:H.pop(),pps:h.pps,sps:h.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),_=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Nn_clearDtsInfo(h),H=Hi}Nn_collectDtsInfo(h,H),h.samples=function(h,g){var m,_,x,E,B=g||0,W=[];for(m=0;m<h.length;m++)for(E=h[m],_=0;_<E.length;_++)B+=(x=T0(E[_],B)).size,W.push(x);return W}(H),se=ia_mdat(function(h){var g,m,_,x,E,F,B=0,se=new Uint8Array(h.byteLength+4*h.nalCount),Me=new DataView(se.buffer);for(g=0;g<h.length;g++)for(x=h[g],m=0;m<x.length;m++)for(E=x[m],_=0;_<E.length;_++)Me.setUint32(B,(F=E[_]).data.byteLength),se.set(F.data,B+=4),B+=F.data.byteLength;return se}(H)),h.baseMediaDecodeTime=Nn_calculateTrackBaseMediaDecodeTime(h,g.keepOriginalTimestamps),this.trigger("processedGopsInfo",H.map(function(kr){return{pts:kr.pts,dts:kr.dts,byteLength:kr.byteLength}})),this.trigger("segmentTimingInfo",qv(h.baseMediaDecodeTime,(Pe=H[0]).dts,Pe.pts,(lt=H[H.length-1]).dts+lt.duration,lt.pts+lt.duration,ze)),this.trigger("timingInfo",{start:H[0].pts,end:H[H.length-1].pts+H[H.length-1].duration}),this.gopCache_.unshift({gop:H.pop(),pps:h.pps,sps:h.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),_=[],this.trigger("baseMediaDecodeTime",h.baseMediaDecodeTime),this.trigger("timelineStartInfo",h.timelineStartInfo),X=ia_moof(m,[h]),Me=new Uint8Array(X.byteLength+se.byteLength),m++,Me.set(X),Me.set(se,X.byteLength),this.trigger("data",{track:h,boxes:Me}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),_=[],this.gopCache_.length=0,x.length=0,this.trigger("reset")},this.resetStream_=function(){Nn_clearDtsInfo(h),E=void 0,F=void 0},this.getGopForFusion_=function(B){var se,Me,ze,Pe,lt,X=1/0;for(lt=0;lt<this.gopCache_.length;lt++)ze=(Pe=this.gopCache_[lt]).gop,h.pps&&B0(h.pps[0],Pe.pps[0])&&h.sps&&B0(h.sps[0],Pe.sps[0])&&(ze.dts<h.timelineStartInfo.dts||(se=B.dts-ze.dts-ze.duration)>=-1e4&&se<=45e3&&(!Me||X>se)&&(Me=Pe,X=se));return Me?Me.gop:null},this.alignGopsAtStart_=function(B){var W,H,X,se,Me,ze,Pe,lt;for(Me=B.byteLength,ze=B.nalCount,Pe=B.duration,W=H=0;W<x.length&&H<B.length&&(X=x[W]).pts!==(se=B[H]).pts;)se.pts>X.pts?W++:(H++,Me-=se.byteLength,ze-=se.nalCount,Pe-=se.duration);return 0===H?B:H===B.length?null:((lt=B.slice(H)).byteLength=Me,lt.duration=Pe,lt.nalCount=ze,lt.pts=lt[0].pts,lt.dts=lt[0].dts,lt)},this.alignGopsAtEnd_=function(B){var W,H,X,se,Me,ze,Pe;for(W=x.length-1,H=B.length-1,Me=null,ze=!1;W>=0&&H>=0;){if((X=x[W]).pts===(se=B[H]).pts){ze=!0;break}X.pts>se.pts?W--:(W===x.length-1&&(Me=H),H--)}if(!ze&&null===Me)return null;if(0===(Pe=ze?H:Me))return B;var lt=B.slice(Pe),Hi=lt.reduce(function(kr,Lo){return kr.byteLength+=Lo.byteLength,kr.duration+=Lo.duration,kr.nalCount+=Lo.nalCount,kr},{byteLength:0,duration:0,nalCount:0});return lt.byteLength=Hi.byteLength,lt.duration=Hi.duration,lt.nalCount=Hi.nalCount,lt.pts=lt[0].pts,lt.dts=lt[0].dts,lt},this.alignGopsWith=function(B){x=B}},Gc.prototype=new r,Po=function(h,g){this.numberOfTracks=0,this.metadataStream=g,this.remuxTracks=!(typeof(h=h||{}).remux<"u"&&!h.remux),this.keepOriginalTimestamps="boolean"==typeof h.keepOriginalTimestamps&&h.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Po.prototype.init.call(this),this.push=function(m){return m.text?this.pendingCaptions.push(m):m.frames?this.pendingMetadata.push(m):(this.pendingTracks.push(m.track),this.pendingBytes+=m.boxes.byteLength,"video"===m.track.type&&(this.videoTrack=m.track,this.pendingBoxes.push(m.boxes)),void("audio"===m.track.type&&(this.audioTrack=m.track,this.pendingBoxes.unshift(m.boxes))))}},Po.prototype=new r,Po.prototype.flush=function(A){var m,_,x,F,h=0,g={captions:[],captionStreams:{},metadata:[],info:{}},E=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==A&&"AudioSegmentStream"!==A)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(E=this.videoTrack.timelineStartInfo.pts,Wv.forEach(function(B){g.info[B]=this.videoTrack[B]},this)):this.audioTrack&&(E=this.audioTrack.timelineStartInfo.pts,jv.forEach(function(B){g.info[B]=this.audioTrack[B]},this)),this.videoTrack||this.audioTrack){for(g.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,x=function(h){var _,g=d(),m=D(h);return(_=new Uint8Array(g.byteLength+m.byteLength)).set(g),_.set(m,g.byteLength),_}(this.pendingTracks),g.initSegment=new Uint8Array(x.byteLength),g.initSegment.set(x),g.data=new Uint8Array(this.pendingBytes),F=0;F<this.pendingBoxes.length;F++)g.data.set(this.pendingBoxes[F],h),h+=this.pendingBoxes[F].byteLength;for(F=0;F<this.pendingCaptions.length;F++)(m=this.pendingCaptions[F]).startTime=Rt_metadataTsToSeconds(m.startPts,E,this.keepOriginalTimestamps),m.endTime=Rt_metadataTsToSeconds(m.endPts,E,this.keepOriginalTimestamps),g.captionStreams[m.stream]=!0,g.captions.push(m);for(F=0;F<this.pendingMetadata.length;F++)(_=this.pendingMetadata[F]).cueTime=Rt_metadataTsToSeconds(_.pts,E,this.keepOriginalTimestamps),g.metadata.push(_);for(g.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",g),F=0;F<g.captions.length;F++)this.trigger("caption",m=g.captions[F]);for(F=0;F<g.metadata.length;F++)this.trigger("id3Frame",_=g.metadata[F])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Po.prototype.setRemux=function(A){this.remuxTracks=A},sp=function(h){var _,x,g=this,m=!0;sp.prototype.init.call(this),this.baseMediaDecodeTime=(h=h||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var E={};this.transmuxPipeline_=E,E.type="aac",E.metadataStream=new Na.MetadataStream,E.aacStream=new FT,E.audioTimestampRolloverStream=new Na.TimestampRolloverStream("audio"),E.timedMetadataTimestampRolloverStream=new Na.TimestampRolloverStream("timed-metadata"),E.adtsStream=new O0,E.coalesceStream=new Po(h,E.metadataStream),E.headOfPipeline=E.aacStream,E.aacStream.pipe(E.audioTimestampRolloverStream).pipe(E.adtsStream),E.aacStream.pipe(E.timedMetadataTimestampRolloverStream).pipe(E.metadataStream).pipe(E.coalesceStream),E.metadataStream.on("timestamp",function(F){E.aacStream.setTimestamp(F.timeStamp)}),E.aacStream.on("data",function(F){"timed-metadata"!==F.type&&"audio"!==F.type||E.audioSegmentStream||(x=x||{timelineStartInfo:{baseMediaDecodeTime:g.baseMediaDecodeTime},codec:"adts",type:"audio"},E.coalesceStream.numberOfTracks++,E.audioSegmentStream=new Qu(x,h),E.audioSegmentStream.on("log",g.getLogTrigger_("audioSegmentStream")),E.audioSegmentStream.on("timingInfo",g.trigger.bind(g,"audioTimingInfo")),E.adtsStream.pipe(E.audioSegmentStream).pipe(E.coalesceStream),g.trigger("trackinfo",{hasAudio:!!x,hasVideo:!!_}))}),E.coalesceStream.on("data",this.trigger.bind(this,"data")),E.coalesceStream.on("done",this.trigger.bind(this,"done")),N0(this,E)},this.setupTsPipeline=function(){var E={};this.transmuxPipeline_=E,E.type="ts",E.metadataStream=new Na.MetadataStream,E.packetStream=new Na.TransportPacketStream,E.parseStream=new Na.TransportParseStream,E.elementaryStream=new Na.ElementaryStream,E.timestampRolloverStream=new Na.TimestampRolloverStream,E.adtsStream=new O0,E.h264Stream=new UT,E.captionStream=new Na.CaptionStream(h),E.coalesceStream=new Po(h,E.metadataStream),E.headOfPipeline=E.packetStream,E.packetStream.pipe(E.parseStream).pipe(E.elementaryStream).pipe(E.timestampRolloverStream),E.timestampRolloverStream.pipe(E.h264Stream),E.timestampRolloverStream.pipe(E.adtsStream),E.timestampRolloverStream.pipe(E.metadataStream).pipe(E.coalesceStream),E.h264Stream.pipe(E.captionStream).pipe(E.coalesceStream),E.elementaryStream.on("data",function(F){var B;if("metadata"===F.type){for(B=F.tracks.length;B--;)_||"video"!==F.tracks[B].type?!x&&"audio"===F.tracks[B].type&&((x=F.tracks[B]).timelineStartInfo.baseMediaDecodeTime=g.baseMediaDecodeTime):(_=F.tracks[B]).timelineStartInfo.baseMediaDecodeTime=g.baseMediaDecodeTime;_&&!E.videoSegmentStream&&(E.coalesceStream.numberOfTracks++,E.videoSegmentStream=new Gc(_,h),E.videoSegmentStream.on("log",g.getLogTrigger_("videoSegmentStream")),E.videoSegmentStream.on("timelineStartInfo",function(W){x&&!h.keepOriginalTimestamps&&(x.timelineStartInfo=W,E.audioSegmentStream.setEarliestDts(W.dts-g.baseMediaDecodeTime))}),E.videoSegmentStream.on("processedGopsInfo",g.trigger.bind(g,"gopInfo")),E.videoSegmentStream.on("segmentTimingInfo",g.trigger.bind(g,"videoSegmentTimingInfo")),E.videoSegmentStream.on("baseMediaDecodeTime",function(W){x&&E.audioSegmentStream.setVideoBaseMediaDecodeTime(W)}),E.videoSegmentStream.on("timingInfo",g.trigger.bind(g,"videoTimingInfo")),E.h264Stream.pipe(E.videoSegmentStream).pipe(E.coalesceStream)),x&&!E.audioSegmentStream&&(E.coalesceStream.numberOfTracks++,E.audioSegmentStream=new Qu(x,h),E.audioSegmentStream.on("log",g.getLogTrigger_("audioSegmentStream")),E.audioSegmentStream.on("timingInfo",g.trigger.bind(g,"audioTimingInfo")),E.audioSegmentStream.on("segmentTimingInfo",g.trigger.bind(g,"audioSegmentTimingInfo")),E.adtsStream.pipe(E.audioSegmentStream).pipe(E.coalesceStream)),g.trigger("trackinfo",{hasAudio:!!x,hasVideo:!!_})}}),E.coalesceStream.on("data",this.trigger.bind(this,"data")),E.coalesceStream.on("id3Frame",function(F){F.dispatchType=E.metadataStream.dispatchType,g.trigger("id3Frame",F)}),E.coalesceStream.on("caption",this.trigger.bind(this,"caption")),E.coalesceStream.on("done",this.trigger.bind(this,"done")),N0(this,E)},this.setBaseMediaDecodeTime=function(E){var F=this.transmuxPipeline_;h.keepOriginalTimestamps||(this.baseMediaDecodeTime=E),x&&(x.timelineStartInfo.dts=void 0,x.timelineStartInfo.pts=void 0,Nn_clearDtsInfo(x),F.audioTimestampRolloverStream&&F.audioTimestampRolloverStream.discontinuity()),_&&(F.videoSegmentStream&&(F.videoSegmentStream.gopCache_=[]),_.timelineStartInfo.dts=void 0,_.timelineStartInfo.pts=void 0,Nn_clearDtsInfo(_),F.captionStream.reset()),F.timestampRolloverStream&&F.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(E){x&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(E)},this.setRemux=function(E){var F=this.transmuxPipeline_;h.remux=E,F&&F.coalesceStream&&F.coalesceStream.setRemux(E)},this.alignGopsWith=function(E){_&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(E)},this.getLogTrigger_=function(E){var F=this;return function(B){B.stream=E,F.trigger("log",B)}},this.push=function(E){if(m){var F=VT(E);F&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!F&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),m=!1}this.transmuxPipeline_.headOfPipeline.push(E)},this.flush=function(){m=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},sp.prototype=new r;var G0,$0,Gv,WT={Transmuxer:sp,VideoSegmentStream:Gc,AudioSegmentStream:Qu,AUDIO_PROPERTIES:jv,VIDEO_PROPERTIES:Wv,generateSegmentTimingInfo:qv},op_toUnsigned=function(h){return h>>>0},ko=function(h){var g="";return g+=String.fromCharCode(h[0]),g+=String.fromCharCode(h[1]),(g+=String.fromCharCode(h[2]))+String.fromCharCode(h[3])},XT=op_toUnsigned,ai=function A(h,g){var _,x,E,F,B,m=[];if(!g.length)return null;for(_=0;_<h.byteLength;)x=XT(h[_]<<24|h[_+1]<<16|h[_+2]<<8|h[_+3]),E=ko(h.subarray(_+4,_+8)),F=x>1?_+x:h.byteLength,E===g[0]&&(1===g.length?m.push(h.subarray(_+8,F)):(B=A(h.subarray(_+8,F),g.slice(1))).length&&(m=m.concat(B))),_=F;return m},KT=op_toUnsigned,YT=e.getUint64,V0=function(h){return{isLeading:(12&h[0])>>>2,dependsOn:3&h[0],isDependedOn:(192&h[1])>>>6,hasRedundancy:(48&h[1])>>>4,paddingValue:(14&h[1])>>>1,isNonSyncSample:1&h[1],degradationPriority:h[2]<<8|h[3]}},W0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xc=typeof window<"u"?window:typeof W0<"u"?W0:typeof self<"u"?self:{},tb=function(h){for(var x,E,g=h.byteLength,m=[],_=1;_<g-2;)0===h[_]&&0===h[_+1]&&3===h[_+2]?(m.push(_+2),_+=2):_++;if(0===m.length)return h;x=g-m.length,E=new Uint8Array(x);var F=0;for(_=0;_<x;F++,_++)F===m[0]&&(F++,m.shift()),E[_]=h[F];return E},ib=Yh.CaptionStream,rb=function(h,g){for(var m=h,_=0;_<g.length;_++){var x=g[_];if(m<x.size)return x;m-=x.size}return null},sb=function(h,g){var m=ai(h,["moof","traf"]),_=ai(h,["mdat"]),x={},E=[];return _.forEach(function(F,B){E.push({mdat:F,traf:m[B]})}),E.forEach(function(F){var lt,Hi,B=F.mdat,W=F.traf,X=function(h){var X,g=new DataView(h.buffer,h.byteOffset,h.byteLength),m={version:h[0],flags:new Uint8Array(h.subarray(1,4)),trackId:g.getUint32(4)},_=1&m.flags[2],x=2&m.flags[2],E=8&m.flags[2],F=16&m.flags[2],B=32&m.flags[2],W=65536&m.flags[0],H=131072&m.flags[0];return X=8,_&&(X+=4,m.baseDataOffset=g.getUint32(12),X+=4),x&&(m.sampleDescriptionIndex=g.getUint32(X),X+=4),E&&(m.defaultSampleDuration=g.getUint32(X),X+=4),F&&(m.defaultSampleSize=g.getUint32(X),X+=4),B&&(m.defaultSampleFlags=g.getUint32(X)),W&&(m.durationIsEmpty=!0),!_&&H&&(m.baseDataOffsetIsMoof=!0),m}(ai(W,["tfhd"])[0]),se=X.trackId,Me=ai(W,["tfdt"]),ze=Me.length>0?function(h){var g={version:h[0],flags:new Uint8Array(h.subarray(1,4))};return g.baseMediaDecodeTime=1===g.version?YT(h.subarray(4)):KT(h[4]<<24|h[5]<<16|h[6]<<8|h[7]),g}(Me[0]).baseMediaDecodeTime:0,Pe=ai(W,["trun"]);g===se&&Pe.length>0&&(lt=function(h,g,m){var _=g,x=m.defaultSampleDuration||0,E=m.defaultSampleSize||0,F=m.trackId,B=[];return h.forEach(function(W){var X=function(h){var se,g={version:h[0],flags:new Uint8Array(h.subarray(1,4)),samples:[]},m=new DataView(h.buffer,h.byteOffset,h.byteLength),_=1&g.flags[2],x=4&g.flags[2],E=1&g.flags[1],F=2&g.flags[1],B=4&g.flags[1],W=8&g.flags[1],H=m.getUint32(4),X=8;for(_&&(g.dataOffset=m.getInt32(X),X+=4),x&&H&&(se={flags:V0(h.subarray(X,X+4))},X+=4,E&&(se.duration=m.getUint32(X),X+=4),F&&(se.size=m.getUint32(X),X+=4),W&&(se.compositionTimeOffset=1===g.version?m.getInt32(X):m.getUint32(X),X+=4),g.samples.push(se),H--);H--;)se={},E&&(se.duration=m.getUint32(X),X+=4),F&&(se.size=m.getUint32(X),X+=4),B&&(se.flags=V0(h.subarray(X,X+4)),X+=4),W&&(se.compositionTimeOffset=1===g.version?m.getInt32(X):m.getUint32(X),X+=4),g.samples.push(se);return g}(W).samples;X.forEach(function(se){void 0===se.duration&&(se.duration=x),void 0===se.size&&(se.size=E),se.trackId=F,se.dts=_,void 0===se.compositionTimeOffset&&(se.compositionTimeOffset=0),"bigint"==typeof _?(se.pts=_+Xc.BigInt(se.compositionTimeOffset),_+=Xc.BigInt(se.duration)):(se.pts=_+se.compositionTimeOffset,_+=se.duration)}),B=B.concat(X)}),B}(Pe,ze,X),Hi=function(h,g,m){var E,F,B,W,_=new DataView(h.buffer,h.byteOffset,h.byteLength),x={logs:[],seiNals:[]};for(F=0;F+4<h.length;F+=B)if(B=_.getUint32(F),F+=4,!(B<=0))switch(31&h[F]){case 6:var H=h.subarray(F+1,F+1+B),X=rb(F,g);if(E={nalUnitType:"sei_rbsp",size:B,data:H,escapedRBSP:tb(H),trackId:m},X)E.pts=X.pts,E.dts=X.dts,W=X;else{if(!W){x.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+F+" for trackId "+m+". See mux.js#223."});break}E.pts=W.pts,E.dts=W.dts}x.seiNals.push(E)}return x}(B,lt,se),x[se]||(x[se]={seiNals:[],logs:[]}),x[se].seiNals=x[se].seiNals.concat(Hi.seiNals),x[se].logs=x[se].logs.concat(Hi.logs))}),x},lb=function(){var g,m,_,x,E,F,h=!1;this.isInitialized=function(){return h},this.init=function(B){g=new ib,h=!0,F=!!B&&B.isPartial,g.on("data",function(W){W.startTime=W.startPts/x,W.endTime=W.endPts/x,E.captions.push(W),E.captionStreams[W.stream]=!0}),g.on("log",function(W){E.logs.push(W)})},this.isNewInit=function(B,W){return!(B&&0===B.length||W&&"object"==typeof W&&0===Object.keys(W).length||_===B[0]&&x===W[_])},this.parse=function(B,W,H){var X;if(!this.isInitialized())return null;if(!W||!H)return null;if(this.isNewInit(W,H))x=H[_=W[0]];else if(null===_||!x)return m.push(B),null;for(;m.length>0;){var se=m.shift();this.parse(se,W,H)}return X=function(h,g,m){if(null===g)return null;var x=sb(h,g)[g]||{};return{seiNals:x.seiNals,logs:x.logs,timescale:m}}(B,_,x),X&&X.logs&&(E.logs=E.logs.concat(X.logs)),null!==X&&X.seiNals?(this.pushNals(X.seiNals),this.flushStream(),E):E.logs.length?{logs:E.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(B){if(!this.isInitialized()||!B||0===B.length)return null;B.forEach(function(W){g.push(W)})},this.flushStream=function(){if(!this.isInitialized())return null;F?g.partialFlush():g.flush()},this.clearParsedCaptions=function(){E.captions=[],E.captionStreams={},E.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;g.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){m=[],_=null,x=null,E?this.clearParsedCaptions():E={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},up=op_toUnsigned,$c=function(h){return("00"+h.toString(16)).slice(-2)},cb=e.getUint64;G0=function(h,g){var _=ai(g,["moof","traf"]).reduce(function(x,E){var se,Me,F=ai(E,["tfhd"])[0],B=up(F[4]<<24|F[5]<<16|F[6]<<8|F[7]),W=h[B]||9e4,H=ai(E,["tfdt"])[0],X=new DataView(H.buffer,H.byteOffset,H.byteLength);return"bigint"==typeof(se=1===H[0]?cb(H.subarray(4,12)):X.getUint32(4))?Me=se/Xc.BigInt(W):"number"==typeof se&&!isNaN(se)&&(Me=se/W),Me<Number.MAX_SAFE_INTEGER&&(Me=Number(Me)),Me<x&&(x=Me),x},1/0);return"bigint"==typeof _||isFinite(_)?_:0},Gv=function(h){var m=0===h[0]?12:20;return up(h[m]<<24|h[m+1]<<16|h[m+2]<<8|h[m+3])},$0=function(h){var g=ai(h,["moov","trak"]),m=[];return g.forEach(function(_){var F,B,x={},E=ai(_,["tkhd"])[0];E&&(B=(F=new DataView(E.buffer,E.byteOffset,E.byteLength)).getUint8(0),x.id=F.getUint32(0===B?12:20));var W=ai(_,["mdia","hdlr"])[0];if(W){var H=ko(W.subarray(8,12));x.type="vide"===H?"video":"soun"===H?"audio":H}var X=ai(_,["mdia","minf","stbl","stsd"])[0];if(X){var se=X.subarray(8);x.codec=ko(se.subarray(4,8));var ze,Me=ai(se,[x.codec])[0];Me&&(/^[asm]vc[1-9]$/i.test(x.codec)?(ze=Me.subarray(78),"avcC"===ko(ze.subarray(4,8))&&ze.length>11?(x.codec+=".",x.codec+=$c(ze[9]),x.codec+=$c(ze[10]),x.codec+=$c(ze[11])):x.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(x.codec)?(ze=Me.subarray(28),"esds"===ko(ze.subarray(4,8))&&ze.length>20&&0!==ze[19]?(x.codec+="."+$c(ze[19]),x.codec+="."+$c(ze[20]>>>2&63).replace(/^0/,"")):x.codec="mp4a.40.2"):x.codec=x.codec.toLowerCase())}var lt=ai(_,["mdia","mdhd"])[0];lt&&(x.timescale=Gv(lt)),m.push(x)}),m};var K0_startTime=G0,K0_tracks=$0,Y0=function(h){var g=31&h[1];return(g<<=8)|h[2]},lp=function(h){return!!(64&h[1])},cp=function(h){var g=0;return(48&h[3])>>>4>1&&(g+=h[4]+1),g},zv=function(h){switch(h){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},vb={parseType:function(h,g){var m=Y0(h);return 0===m?"pat":m===g?"pmt":g?"pes":null},parsePat:function(h){var g=lp(h),m=4+cp(h);return g&&(m+=h[m]+1),(31&h[m+10])<<8|h[m+11]},parsePmt:function(h){var g={},m=lp(h),_=4+cp(h);if(m&&(_+=h[_]+1),1&h[_+5]){var E;E=3+((15&h[_+1])<<8|h[_+2])-4;for(var B=12+((15&h[_+10])<<8|h[_+11]);B<E;){var W=_+B;g[(31&h[W+1])<<8|h[W+2]]=h[W],B+=5+((15&h[W+3])<<8|h[W+4])}return g}},parsePayloadUnitStartIndicator:lp,parsePesType:function(h,g){switch(g[Y0(h)]){case nr.H264_STREAM_TYPE:return"video";case nr.ADTS_STREAM_TYPE:return"audio";case nr.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(h){if(!lp(h))return null;var m=4+cp(h);if(m>=h.byteLength)return null;var x,_=null;return 192&(x=h[m+7])&&((_={}).pts=(14&h[m+9])<<27|(255&h[m+10])<<20|(254&h[m+11])<<12|(255&h[m+12])<<5|(254&h[m+13])>>>3,_.pts*=4,_.pts+=(6&h[m+13])>>>1,_.dts=_.pts,64&x&&(_.dts=(14&h[m+14])<<27|(255&h[m+15])<<20|(254&h[m+16])<<12|(255&h[m+17])<<5|(254&h[m+18])>>>3,_.dts*=4,_.dts+=(6&h[m+18])>>>1)),_},videoPacketContainsKeyFrame:function(h){for(var g=4+cp(h),m=h.subarray(g),_=0,x=0,E=!1;x<m.byteLength-3;x++)if(1===m[x+2]){_=x+5;break}for(;_<m.byteLength;)switch(m[_]){case 0:if(0!==m[_-1]){_+=2;break}if(0!==m[_-2]){_++;break}x+3!==_-2&&"slice_layer_without_partitioning_rbsp_idr"===zv(31&m[x+3])&&(E=!0);do{_++}while(1!==m[_]&&_<m.length);x=_-2,_+=3;break;case 1:if(0!==m[_-1]||0!==m[_-2]){_+=3;break}"slice_layer_without_partitioning_rbsp_idr"===zv(31&m[x+3])&&(E=!0),x=_-2,_+=3;break;default:_+=3}return m=m.subarray(x),_-=x,x=0,m&&m.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===zv(31&m[x+3])&&(E=!0),E}},Ju=w0_handleRollover,qt={};qt.ts=vb,qt.aac=np;var Oo=9e4,Pr=188,Q0=function(h,g,m){for(var E,B,W,H,_=0,x=Pr,X=!1;x<=h.byteLength;)if(71!==h[_]||71!==h[x]&&x!==h.byteLength)_++,x++;else{if("pes"===(E=h.subarray(_,x),qt.ts.parseType(E,g.pid))&&(B=qt.ts.parsePesType(E,g.table),W=qt.ts.parsePayloadUnitStartIndicator(E),"audio"===B&&W&&(H=qt.ts.parsePesTime(E))&&(H.type="audio",m.audio.push(H),X=!0)),X)break;_+=Pr,x+=Pr}for(_=(x=h.byteLength)-Pr,X=!1;_>=0;)if(71!==h[_]||71!==h[x]&&x!==h.byteLength)_--,x--;else{if("pes"===(E=h.subarray(_,x),qt.ts.parseType(E,g.pid))&&(B=qt.ts.parsePesType(E,g.table),W=qt.ts.parsePayloadUnitStartIndicator(E),"audio"===B&&W&&(H=qt.ts.parsePesTime(E))&&(H.type="audio",m.audio.push(H),X=!0)),X)break;_-=Pr,x-=Pr}},yb=function(h,g,m){for(var E,B,W,H,X,se,Me,_=0,x=Pr,ze=!1,Pe={data:[],size:0};x<h.byteLength;)if(71!==h[_]||71!==h[x])_++,x++;else{if("pes"===(E=h.subarray(_,x),qt.ts.parseType(E,g.pid))&&(B=qt.ts.parsePesType(E,g.table),W=qt.ts.parsePayloadUnitStartIndicator(E),"video"===B&&(W&&!ze&&(H=qt.ts.parsePesTime(E))&&(H.type="video",m.video.push(H),ze=!0),!m.firstKeyFrame))){if(W&&0!==Pe.size){for(X=new Uint8Array(Pe.size),se=0;Pe.data.length;)Me=Pe.data.shift(),X.set(Me,se),se+=Me.byteLength;if(qt.ts.videoPacketContainsKeyFrame(X)){var lt=qt.ts.parsePesTime(X);lt?(m.firstKeyFrame=lt,m.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Pe.size=0}Pe.data.push(E),Pe.size+=E.byteLength}if(ze&&m.firstKeyFrame)break;_+=Pr,x+=Pr}for(_=(x=h.byteLength)-Pr,ze=!1;_>=0;)if(71!==h[_]||71!==h[x])_--,x--;else{if("pes"===(E=h.subarray(_,x),qt.ts.parseType(E,g.pid))&&(B=qt.ts.parsePesType(E,g.table),W=qt.ts.parsePayloadUnitStartIndicator(E),"video"===B&&W&&(H=qt.ts.parsePesTime(E))&&(H.type="video",m.video.push(H),ze=!0)),ze)break;_-=Pr,x-=Pr}},Eb_inspect=function(h,g){var _;return _=qt.aac.isLikelyAacData(h)?function(h){for(var B,g=!1,m=0,_=null,x=null,E=0,F=0;h.length-F>=3;){switch(qt.aac.parseType(h,F)){case"timed-metadata":if(h.length-F<10){g=!0;break}if((E=qt.aac.parseId3TagSize(h,F))>h.length){g=!0;break}null===x&&(B=h.subarray(F,F+E),x=qt.aac.parseAacTimestamp(B)),F+=E;break;case"audio":if(h.length-F<7){g=!0;break}if((E=qt.aac.parseAdtsSize(h,F))>h.length){g=!0;break}null===_&&(B=h.subarray(F,F+E),_=qt.aac.parseSampleRate(B)),m++,F+=E;break;default:F++}if(g)return null}if(null===_||null===x)return null;var H=Oo/_;return{audio:[{type:"audio",dts:x,pts:x},{type:"audio",dts:x+1024*m*H,pts:x+1024*m*H}]}}(h):function(h){var g={pid:null,table:null},m={};for(var _ in function(h,g){for(var x,m=0,_=Pr;_<h.byteLength;)if(71!==h[m]||71!==h[_])m++,_++;else{switch(x=h.subarray(m,_),qt.ts.parseType(x,g.pid)){case"pat":g.pid=qt.ts.parsePat(x);break;case"pmt":var F=qt.ts.parsePmt(x);g.table=g.table||{},Object.keys(F).forEach(function(B){g.table[B]=F[B]})}m+=Pr,_+=Pr}}(h,g),g.table)if(g.table.hasOwnProperty(_))switch(g.table[_]){case nr.H264_STREAM_TYPE:m.video=[],yb(h,g,m),0===m.video.length&&delete m.video;break;case nr.ADTS_STREAM_TYPE:m.audio=[],Q0(h,g,m),0===m.audio.length&&delete m.audio}return m}(h),_&&(_.audio||_.video)?(function(h,g){if(h.audio&&h.audio.length){var m=g;(typeof m>"u"||isNaN(m))&&(m=h.audio[0].dts),h.audio.forEach(function(E){E.dts=Ju(E.dts,m),E.pts=Ju(E.pts,m),E.dtsTime=E.dts/Oo,E.ptsTime=E.pts/Oo})}if(h.video&&h.video.length){var _=g;if((typeof _>"u"||isNaN(_))&&(_=h.video[0].dts),h.video.forEach(function(E){E.dts=Ju(E.dts,_),E.pts=Ju(E.pts,_),E.dtsTime=E.dts/Oo,E.ptsTime=E.pts/Oo}),h.firstKeyFrame){var x=h.firstKeyFrame;x.dts=Ju(x.dts,_),x.pts=Ju(x.pts,_),x.dtsTime=x.dts/Oo,x.ptsTime=x.pts/Oo}}}(_,g),_):null},J0=function(){function A(g,m){this.options=m||{},this.self=g,this.init()}var h=A.prototype;return h.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new WT.Transmuxer(this.options),function(h,g){g.on("data",function(m){var _=m.initSegment;m.initSegment={data:_.buffer,byteOffset:_.byteOffset,byteLength:_.byteLength};var x=m.data;m.data=x.buffer,h.postMessage({action:"data",segment:m,byteOffset:x.byteOffset,byteLength:x.byteLength},[m.data])}),g.on("done",function(m){h.postMessage({action:"done"})}),g.on("gopInfo",function(m){h.postMessage({action:"gopInfo",gopInfo:m})}),g.on("videoSegmentTimingInfo",function(m){var _={start:{decode:Rt_videoTsToSeconds(m.start.dts),presentation:Rt_videoTsToSeconds(m.start.pts)},end:{decode:Rt_videoTsToSeconds(m.end.dts),presentation:Rt_videoTsToSeconds(m.end.pts)},baseMediaDecodeTime:Rt_videoTsToSeconds(m.baseMediaDecodeTime)};m.prependedContentDuration&&(_.prependedContentDuration=Rt_videoTsToSeconds(m.prependedContentDuration)),h.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:_})}),g.on("audioSegmentTimingInfo",function(m){var _={start:{decode:Rt_videoTsToSeconds(m.start.dts),presentation:Rt_videoTsToSeconds(m.start.pts)},end:{decode:Rt_videoTsToSeconds(m.end.dts),presentation:Rt_videoTsToSeconds(m.end.pts)},baseMediaDecodeTime:Rt_videoTsToSeconds(m.baseMediaDecodeTime)};m.prependedContentDuration&&(_.prependedContentDuration=Rt_videoTsToSeconds(m.prependedContentDuration)),h.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:_})}),g.on("id3Frame",function(m){h.postMessage({action:"id3Frame",id3Frame:m})}),g.on("caption",function(m){h.postMessage({action:"caption",caption:m})}),g.on("trackinfo",function(m){h.postMessage({action:"trackinfo",trackInfo:m})}),g.on("audioTimingInfo",function(m){h.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Rt_videoTsToSeconds(m.start),end:Rt_videoTsToSeconds(m.end)}})}),g.on("videoTimingInfo",function(m){h.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Rt_videoTsToSeconds(m.start),end:Rt_videoTsToSeconds(m.end)}})}),g.on("log",function(m){h.postMessage({action:"log",log:m})})}(this.self,this.transmuxer)},h.pushMp4Captions=function(m){this.captionParser||(this.captionParser=new lb,this.captionParser.init());var _=new Uint8Array(m.data,m.byteOffset,m.byteLength),x=this.captionParser.parse(_,m.trackIds,m.timescales);this.self.postMessage({action:"mp4Captions",captions:x&&x.captions||[],logs:x&&x.logs||[],data:_.buffer},[_.buffer])},h.probeMp4StartTime=function(m){var x=m.data,E=K0_startTime(m.timescales,x);this.self.postMessage({action:"probeMp4StartTime",startTime:E,data:x},[x.buffer])},h.probeMp4Tracks=function(m){var _=m.data,x=K0_tracks(_);this.self.postMessage({action:"probeMp4Tracks",tracks:x,data:_},[_.buffer])},h.probeTs=function(m){var _=m.data,x=m.baseStartTime,E="number"!=typeof x||isNaN(x)?void 0:9e4*x,F=Eb_inspect(_,E),B=null;F&&((B={hasVideo:F.video&&2===F.video.length||!1,hasAudio:F.audio&&2===F.audio.length||!1}).hasVideo&&(B.videoStart=F.video[0].ptsTime),B.hasAudio&&(B.audioStart=F.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:B,data:_},[_.buffer])},h.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},h.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},h.push=function(m){var _=new Uint8Array(m.data,m.byteOffset,m.byteLength);this.transmuxer.push(_)},h.reset=function(){this.transmuxer.reset()},h.setTimestampOffset=function(m){this.transmuxer.setBaseMediaDecodeTime(Math.round(Rt_secondsToVideoTs(m.timestampOffset||0)))},h.setAudioAppendStart=function(m){this.transmuxer.setAudioAppendStart(Math.ceil(Rt_secondsToVideoTs(m.appendStart)))},h.setRemux=function(m){this.transmuxer.setRemux(m.remux)},h.flush=function(m){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},h.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},h.alignGopsWith=function(m){this.transmuxer.alignGopsWith(m.gopsToAlignWith.slice())},A}();self.onmessage=function(A){"init"===A.data.action&&A.data.options?this.messageHandlers=new J0(self,A.data.options):(this.messageHandlers||(this.messageHandlers=new J0(self)),A.data&&A.data.action&&"init"!==A.data.action&&this.messageHandlers[A.data.action]&&this.messageHandlers[A.data.action](A.data))}})),ig=Jf(tg),th=function(r){var t=r.transmuxer,i=r.bytes,e=r.audioAppendStart,n=r.gopsToAlignWith,a=r.remux,u=r.onData,c=r.onTrackInfo,d=r.onAudioTimingInfo,p=r.onVideoTimingInfo,y=r.onVideoSegmentTimingInfo,v=r.onAudioSegmentTimingInfo,b=r.onId3,D=r.onCaptions,I=r.onDone,P=r.onEndedTimeline,G=r.onTransmuxerLog,ie=r.isEndOfTimeline,ye={buffer:[]},Z=ie;if(t.onmessage=function(me){t.currentTransmux===r&&("data"===me.data.action&&function(r,t,i){var e=r.data.segment,n=e.type,a=e.initSegment,p=e.videoFrameDtsTime,y=e.videoFramePtsTime;t.buffer.push({captions:e.captions,captionStreams:e.captionStreams,metadata:e.metadata});var v=r.data.segment.boxes||{data:r.data.segment.data},b={type:n,data:new Uint8Array(v.data,v.data.byteOffset,v.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};typeof p<"u"&&(b.videoFrameDtsTime=p),typeof y<"u"&&(b.videoFramePtsTime=y),i(b)}(me,ye,u),"trackinfo"===me.data.action&&c(me.data.trackInfo),"gopInfo"===me.data.action&&function(r,t){t.gopInfo=r.data.gopInfo}(me,ye),"audioTimingInfo"===me.data.action&&d(me.data.audioTimingInfo),"videoTimingInfo"===me.data.action&&p(me.data.videoTimingInfo),"videoSegmentTimingInfo"===me.data.action&&y(me.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===me.data.action&&v(me.data.audioSegmentTimingInfo),"id3Frame"===me.data.action&&b([me.data.id3Frame],me.data.id3Frame.dispatchType),"caption"===me.data.action&&D(me.data.caption),"endedtimeline"===me.data.action&&(Z=!1,P()),"log"===me.data.action&&G(me.data.log),"transmuxed"===me.data.type&&(Z||(t.onmessage=null,function(r){var t=r.transmuxedData,i=r.callback;t.buffer=[],i(t)}({transmuxedData:ye,callback:I}),Hr(t))))},e&&t.postMessage({action:"setAudioAppendStart",appendStart:e}),Array.isArray(n)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),typeof a<"u"&&t.postMessage({action:"setRemux",remux:a}),i.byteLength){var fe=i instanceof ArrayBuffer?i:i.buffer,re=i instanceof ArrayBuffer?0:i.byteOffset;t.postMessage({action:"push",data:fe,byteOffset:re,byteLength:i.byteLength},[fe])}ie&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},Hr=function(r){r.currentTransmux=null,r.transmuxQueue.length&&(r.currentTransmux=r.transmuxQueue.shift(),"function"==typeof r.currentTransmux?r.currentTransmux():th(r.currentTransmux))},ih=function(r,t){r.postMessage({action:t}),Hr(r)},ii_reset=function(r){!function(r,t){if(!t.currentTransmux)return t.currentTransmux=r,void ih(t,r);t.transmuxQueue.push(ih.bind(null,t,r))}("reset",r)},Mu=function(r){var t=r.transmuxer,i=r.endAction||r.action,e=r.callback,n=vt({},r,{endAction:null,transmuxer:null,callback:null});if(t.addEventListener("message",function d(p){p.data.action===i&&(t.removeEventListener("message",d),p.data.data&&(p.data.data=new Uint8Array(p.data.data,r.byteOffset||0,r.byteLength||p.data.data.byteLength),r.data&&(r.data=p.data.data)),e(p.data))}),r.data){var u=r.data instanceof ArrayBuffer;n.byteOffset=u?0:r.data.byteOffset,n.byteLength=r.data.byteLength,t.postMessage(n,[u?r.data:r.data.buffer])}else t.postMessage(n)},bc=function(r){r.forEach(function(t){t.abort()})},xc=function(r,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:-101,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:-102,xhr:t}:r?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t}:null},ah=function(r,t,i){return function(e,n){var a=n.response,u=xc(e,n);if(u)return i(u,r);if(16!==a.byteLength)return i({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:2,xhr:n},r);for(var c=new DataView(a),d=new Uint32Array([c.getUint32(0),c.getUint32(4),c.getUint32(8),c.getUint32(12)]),p=0;p<t.length;p++)t[p].bytes=d;return i(null,r)}},Fu=function(r,t){var i=gl(r.map.bytes);if("mp4"!==i)return t({internal:!0,message:"Found unsupported "+(i||"unknown")+" container for initialization segment at URL: "+(r.map.resolvedUri||r.map.uri),code:2});Mu({action:"probeMp4Tracks",data:r.map.bytes,transmuxer:r.transmuxer,callback:function(a){var u=a.tracks;return r.map.bytes=a.data,u.forEach(function(d){r.map.tracks=r.map.tracks||{},!r.map.tracks[d.type]&&(r.map.tracks[d.type]=d,"number"==typeof d.id&&d.timescale&&(r.map.timescales=r.map.timescales||{},r.map.timescales[d.id]=d.timescale))}),t(null)}})},sh=function(r){var t=r.segment,i=r.bytes,e=r.trackInfoFn,n=r.timingInfoFn,a=r.videoSegmentTimingInfoFn,u=r.audioSegmentTimingInfoFn,c=r.id3Fn,d=r.captionsFn,p=r.isEndOfTimeline,y=r.endedTimelineFn,v=r.dataFn,b=r.doneFn,D=r.onTransmuxerLog,I=t.map&&t.map.tracks||{},P=!(!I.audio||!I.video),G=n.bind(null,t,"audio","start"),ie=n.bind(null,t,"audio","end"),ye=n.bind(null,t,"video","start"),Z=n.bind(null,t,"video","end");Mu({action:"probeTs",transmuxer:t.transmuxer,data:i,baseStartTime:t.baseStartTime,callback:function(re){t.bytes=i=re.data;var ae=re.result;ae&&(e(t,{hasAudio:ae.hasAudio,hasVideo:ae.hasVideo,isMuxed:P}),e=null,ae.hasAudio&&!P&&G(ae.audioStart),ae.hasVideo&&ye(ae.videoStart),G=null,ye=null),function(r){if(!r.transmuxer.currentTransmux)return r.transmuxer.currentTransmux=r,void th(r);r.transmuxer.transmuxQueue.push(r)}({bytes:i,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:P,onData:function(ae){ae.type="combined"===ae.type?"video":ae.type,v(t,ae)},onTrackInfo:function(ae){e&&(P&&(ae.isMuxed=!0),e(t,ae))},onAudioTimingInfo:function(ae){G&&typeof ae.start<"u"&&(G(ae.start),G=null),ie&&typeof ae.end<"u"&&ie(ae.end)},onVideoTimingInfo:function(ae){ye&&typeof ae.start<"u"&&(ye(ae.start),ye=null),Z&&typeof ae.end<"u"&&Z(ae.end)},onVideoSegmentTimingInfo:function(ae){a(ae)},onAudioSegmentTimingInfo:function(ae){u(ae)},onId3:function(ae,me){c(t,ae,me)},onCaptions:function(ae){d(t,[ae])},isEndOfTimeline:p,onEndedTimeline:function(){y()},onTransmuxerLog:D,onDone:function(ae){b&&(ae.type="combined"===ae.type?"video":ae.type,b(null,t,ae))}})}})},go=function(r){var t=r.segment,i=r.bytes,e=r.trackInfoFn,n=r.timingInfoFn,a=r.videoSegmentTimingInfoFn,u=r.audioSegmentTimingInfoFn,c=r.id3Fn,d=r.captionsFn,p=r.isEndOfTimeline,y=r.endedTimelineFn,v=r.dataFn,b=r.doneFn,D=r.onTransmuxerLog,I=new Uint8Array(i);if(function(r){return Ni(r,["moof"]).length>0}(I)){t.isFmp4=!0;var P=t.map.tracks,G={isFmp4:!0,hasVideo:!!P.video,hasAudio:!!P.audio};P.audio&&P.audio.codec&&"enca"!==P.audio.codec&&(G.audioCodec=P.audio.codec),P.video&&P.video.codec&&"encv"!==P.video.codec&&(G.videoCodec=P.video.codec),P.video&&P.audio&&(G.isMuxed=!0),e(t,G);var ie=function(Z){v(t,{data:I,type:G.hasAudio&&!G.isMuxed?"audio":"video"}),Z&&Z.length&&d(t,Z),b(null,t,{})};Mu({action:"probeMp4StartTime",timescales:t.map.timescales,data:I,transmuxer:t.transmuxer,callback:function(Z){var ee=Z.data,fe=Z.startTime;i=ee.buffer,t.bytes=I=ee,G.hasAudio&&!G.isMuxed&&n(t,"audio","start",fe),G.hasVideo&&n(t,"video","start",fe),P.video&&ee.byteLength&&t.transmuxer?Mu({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:I,timescales:t.map.timescales,trackIds:[P.video.id],callback:function(ae){i=ae.data.buffer,t.bytes=I=ae.data,ae.logs.forEach(function(me){D(z.mergeOptions(me,{stream:"mp4CaptionParser"}))}),ie(ae.captions)}}):ie()}})}else{if(t.transmuxer)return typeof t.container>"u"&&(t.container=gl(I)),"ts"!==t.container&&"aac"!==t.container?(e(t,{hasAudio:!1,hasVideo:!1}),void b(null,t,{})):void sh({segment:t,bytes:i,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:y,dataFn:v,doneFn:b,onTransmuxerLog:D});b(null,t,{})}},Qt=function(r,t){var c,i=r.id,e=r.key,n=r.encryptedBytes,a=r.decryptionWorker;a.addEventListener("message",function d(p){if(p.data.source===i){a.removeEventListener("message",d);var y=p.data.decrypted;t(new Uint8Array(y.bytes,y.byteOffset,y.byteLength))}}),c=e.bytes.slice?e.bytes.slice():new Uint32Array(Array.prototype.slice.call(e.bytes)),a.postMessage(ho({source:i,encrypted:n,key:c,iv:e.iv}),[n.buffer,c.buffer])},dg=function(r){var t=r.xhr,i=r.xhrOptions,n=r.segment,a=r.abortFn,u=r.progressFn,c=r.trackInfoFn,d=r.timingInfoFn,p=r.videoSegmentTimingInfoFn,y=r.audioSegmentTimingInfoFn,v=r.id3Fn,b=r.captionsFn,D=r.isEndOfTimeline,I=r.endedTimelineFn,P=r.dataFn,ye=[],Z=function(r){var t=r.activeXhrs,i=r.decryptionWorker,e=r.trackInfoFn,n=r.timingInfoFn,a=r.videoSegmentTimingInfoFn,u=r.audioSegmentTimingInfoFn,c=r.id3Fn,d=r.captionsFn,p=r.isEndOfTimeline,y=r.endedTimelineFn,v=r.dataFn,b=r.doneFn,D=r.onTransmuxerLog,I=0,P=!1;return function(G,ie){if(!P){if(G)return P=!0,bc(t),b(G,ie);if((I+=1)===t.length){var ye=function(){if(ie.encryptedBytes)return function(r){var i=r.segment,e=r.trackInfoFn,n=r.timingInfoFn,a=r.videoSegmentTimingInfoFn,u=r.audioSegmentTimingInfoFn,c=r.id3Fn,d=r.captionsFn,p=r.isEndOfTimeline,y=r.endedTimelineFn,v=r.dataFn,b=r.doneFn,D=r.onTransmuxerLog;Qt({id:i.requestId,key:i.key,encryptedBytes:i.encryptedBytes,decryptionWorker:r.decryptionWorker},function(I){i.bytes=I,go({segment:i,bytes:i.bytes,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:y,dataFn:v,doneFn:b,onTransmuxerLog:D})})}({decryptionWorker:i,segment:ie,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:y,dataFn:v,doneFn:b,onTransmuxerLog:D});go({segment:ie,bytes:ie.bytes,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:y,dataFn:v,doneFn:b,onTransmuxerLog:D})};if(ie.endOfAllRequests=Date.now(),ie.map&&ie.map.encryptedBytes&&!ie.map.bytes)return Qt({decryptionWorker:i,id:ie.requestId+"-init",encryptedBytes:ie.map.encryptedBytes,key:ie.map.key},function(Z){ie.map.bytes=Z,Fu(ie,function(ee){if(ee)return bc(t),b(ee,ie);ye()})});ye()}}}}({activeXhrs:ye,decryptionWorker:r.decryptionWorker,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:p,audioSegmentTimingInfoFn:y,id3Fn:v,captionsFn:b,isEndOfTimeline:D,endedTimelineFn:I,dataFn:P,doneFn:r.doneFn,onTransmuxerLog:r.onTransmuxerLog});if(n.key&&!n.key.bytes){var ee=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&ee.push(n.map.key);var ae=t(z.mergeOptions(i,{uri:n.key.resolvedUri,responseType:"arraybuffer"}),ah(n,ee,Z));ye.push(ae)}if(n.map&&!n.map.bytes){if(n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri)){var Ve=t(z.mergeOptions(i,{uri:n.map.key.resolvedUri,responseType:"arraybuffer"}),ah(n,[n.map.key],Z));ye.push(Ve)}var dt=z.mergeOptions(i,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:_c(n.map)}),Jt=function(r){var t=r.segment,i=r.finishProcessingFn;return function(e,n){var a=xc(e,n);if(a)return i(a,t);var u=new Uint8Array(n.response);if(t.map.key)return t.map.encryptedBytes=u,i(null,t);t.map.bytes=u,Fu(t,function(c){if(c)return c.xhr=n,c.status=n.status,i(c,t);i(null,t)})}}({segment:n,finishProcessingFn:Z}),ni=t(dt,Jt);ye.push(ni)}var Ai=z.mergeOptions(i,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:_c(n)}),li=t(Ai,function(r){var t=r.segment,i=r.finishProcessingFn,e=r.responseType;return function(n,a){var u=xc(n,a);if(u)return i(u,t);var c="arraybuffer"!==e&&a.responseText?function(r){for(var t=new Uint8Array(new ArrayBuffer(r.length)),i=0;i<r.length;i++)t[i]=r.charCodeAt(i);return t.buffer}(a.responseText.substring(t.lastReachedChar||0)):a.response;return t.stats=function(r){return{bandwidth:r.bandwidth,bytesReceived:r.bytesReceived||0,roundTripTime:r.roundTripTime||0}}(a),t.key?t.encryptedBytes=new Uint8Array(c):t.bytes=new Uint8Array(c),i(null,t)}}({segment:n,finishProcessingFn:Z,responseType:Ai.responseType}));li.addEventListener("progress",function(r){var t=r.segment,i=r.progressFn;return function(e){if(!e.target.aborted)return t.stats=z.mergeOptions(t.stats,function(r){var t=r.target,e={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return e.bytesReceived=r.loaded,e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3),e}(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),i(e,t)}}({segment:n,progressFn:u,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:p,audioSegmentTimingInfoFn:y,id3Fn:v,captionsFn:b,isEndOfTimeline:D,endedTimelineFn:I,dataFn:P})),ye.push(li);var mr={};return ye.forEach(function(jt){jt.addEventListener("loadend",function(r){var t=r.loadendState,i=r.abortFn;return function(e){e.target.aborted&&i&&!t.calledAbortFn&&(i(),t.calledAbortFn=!0)}}({loadendState:mr,abortFn:a}))}),function(){return bc(ye)}},fg=Qr("CodecUtils"),uh=function(r,t){var i=t.attributes||{};return r&&r.mediaGroups&&r.mediaGroups.AUDIO&&i.AUDIO&&r.mediaGroups.AUDIO[i.AUDIO]},ta=function(r){var t={};return r.forEach(function(i){var e=i.mediaType,n=i.type,a=i.details;t[e]=t[e]||[],t[e].push(wt(""+n+a))}),Object.keys(t).forEach(function(i){if(t[i].length>1)return fg("multiple "+i+" codecs found as attributes: "+t[i].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[i]=null);t[i]=t[i][0]}),t},Nu=function(r){var t=0;return r.audio&&t++,r.video&&t++,t},vo=function(r,t){var i=t.attributes||{},e=ta(function(r){var t=r.attributes||{};if(t.CODECS)return oi(t.CODECS)}(t)||[]);if(uh(r,t)&&!e.audio&&!function(r,t){if(!uh(r,t))return!0;var e=r.mediaGroups.AUDIO[(t.attributes||{}).AUDIO];for(var n in e)if(!e[n].uri&&!e[n].playlists)return!0;return!1}(r,t)){var n=ta(function(r,t){if(!r.mediaGroups.AUDIO||!t)return null;var i=r.mediaGroups.AUDIO[t];if(!i)return null;for(var e in i){var n=i[e];if(n.default&&n.playlists)return oi(n.playlists[0].attributes.CODECS)}return null}(r,i.AUDIO)||[]);n.audio&&(e.audio=n.audio)}return e},_o=Qr("PlaylistSelector"),yo=function(r){if(r&&r.playlist){var t=r.playlist;return JSON.stringify({id:t.id,bandwidth:r.bandwidth,width:r.width,height:r.height,codecs:t.attributes&&t.attributes.CODECS||""})}},Gi=function(r,t){if(!r)return"";var i=M().getComputedStyle(r);return i?i[t]:""},Jr=function(r,t){var i=r.slice();r.sort(function(e,n){var a=t(e,n);return 0===a?i.indexOf(e)-i.indexOf(n):a})},Sc=function(r,t){var i,e;return r.attributes.BANDWIDTH&&(i=r.attributes.BANDWIDTH),i=i||M().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(e=t.attributes.BANDWIDTH),i-(e||M().Number.MAX_VALUE)},ch=function(r,t,i,e,n,a){if(r){var u={bandwidth:t,width:i,height:e,limitRenditionByPlayerDimensions:n},c=r.playlists;dr.isAudioOnly(r)&&(c=a.getAudioTrackPlaylists_(),u.audioOnly=!0);var d=c.map(function(le){var Ve=le.attributes&&le.attributes.RESOLUTION&&le.attributes.RESOLUTION.width,dt=le.attributes&&le.attributes.RESOLUTION&&le.attributes.RESOLUTION.height;return{bandwidth:le.attributes&&le.attributes.BANDWIDTH||M().Number.MAX_VALUE,width:Ve,height:dt,playlist:le}});Jr(d,function(le,tt){return le.bandwidth-tt.bandwidth});var p=(d=d.filter(function(le){return!dr.isIncompatible(le.playlist)})).filter(function(le){return dr.isEnabled(le.playlist)});p.length||(p=d.filter(function(le){return!dr.isDisabled(le.playlist)}));var y=p.filter(function(le){return le.bandwidth*Ei.BANDWIDTH_VARIANCE<t}),v=y[y.length-1],b=y.filter(function(le){return le.bandwidth===v.bandwidth})[0];if(!1===n){var D=b||p[0]||d[0];if(D&&D.playlist){var I="sortedPlaylistReps";return b&&(I="bandwidthBestRep"),p[0]&&(I="enabledPlaylistReps"),_o("choosing "+yo(D)+" using "+I+" with options",u),D.playlist}return _o("could not choose a playlist with options",u),null}var P=y.filter(function(le){return le.width&&le.height});Jr(P,function(le,tt){return le.width-tt.width});var G=P.filter(function(le){return le.width===i&&le.height===e});v=G[G.length-1];var ye,Z,ee,fe,ie=G.filter(function(le){return le.bandwidth===v.bandwidth})[0];if(ie||(Z=(ye=P.filter(function(le){return le.width>i||le.height>e})).filter(function(le){return le.width===ye[0].width&&le.height===ye[0].height}),v=Z[Z.length-1],ee=Z.filter(function(le){return le.bandwidth===v.bandwidth})[0]),a.experimentalLeastPixelDiffSelector){var re=P.map(function(le){return le.pixelDiff=Math.abs(le.width-i)+Math.abs(le.height-e),le});Jr(re,function(le,tt){return le.pixelDiff===tt.pixelDiff?tt.bandwidth-le.bandwidth:le.pixelDiff-tt.pixelDiff}),fe=re[0]}var ae=fe||ee||ie||b||p[0]||d[0];if(ae&&ae.playlist){var me="sortedPlaylistReps";return fe?me="leastPixelDiffRep":ee?me="resolutionPlusOneRep":ie?me="resolutionBestRep":b?me="bandwidthBestRep":p[0]&&(me="enabledPlaylistReps"),_o("choosing "+yo(ae)+" using "+me+" with options",u),ae.playlist}return _o("could not choose a playlist with options",u),null}},dh=function(){var r=this.useDevicePixelRatio&&M().devicePixelRatio||1;return ch(this.playlists.master,this.systemBandwidth,parseInt(Gi(this.tech_.el(),"width"),10)*r,parseInt(Gi(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},To=function(r,t,i){var e,n;if(i&&i.cues)for(e=i.cues.length;e--;)(n=i.cues[e]).startTime>=r&&n.endTime<=t&&i.removeCue(n)},vh=function(r){return"number"==typeof r&&isFinite(r)},Uu=1/60,cs=function(r){var t=r.startOfSegment,i=r.duration,e=r.segment,n=r.part,a=r.playlist,u=a.mediaSequence,c=a.id,d=a.segments,y=r.mediaIndex,v=r.partIndex,b=r.timeline,D=(void 0===d?[]:d).length-1,I="mediaIndex/partIndex increment";r.getMediaInfoForTime?I="getMediaInfoForTime ("+r.getMediaInfoForTime+")":r.isSyncRequest&&(I="getSyncSegmentCandidate (isSyncRequest)"),r.independent&&(I+=" with independent "+r.independent);var P="number"==typeof v,G=r.segment.uri?"segment":"pre-segment",ie=P?If({preloadSegment:e})-1:0;return G+" ["+(u+y)+"/"+(u+D)+"]"+(P?" part ["+v+"/"+ie+"]":"")+" segment start/end ["+e.start+" => "+e.end+"]"+(P?" part start/end ["+n.start+" => "+n.end+"]":"")+" startOfSegment ["+t+"] duration ["+i+"] timeline ["+b+"] selected by ["+I+"] playlist ["+c+"]"},_h=function(r){return r+"TimingInfo"},yh=function(r){var t=r.timelineChangeController,e=r.segmentTimeline,n=r.loaderType,a=r.audioDisabled;if(r.currentTimeline===e)return!1;if("audio"===n){var u=t.lastTimelineChange({type:"main"});return!u||u.to!==e}if("main"===n&&a){var c=t.pendingTimelineChange({type:"audio"});return!(c&&c.to===e)}return!1},Th=function(r){var t=r.segmentDuration,i=r.maxDuration;return!!t&&Math.round(t)>i+ea},Ac=function(s){function r(i,e){var n;if(n=s.call(this)||this,!i)throw new TypeError("Initialization settings are required");if("function"!=typeof i.currentTime)throw new TypeError("No currentTime getter specified");if(!i.mediaSource)throw new TypeError("No MediaSource specified");return n.bandwidth=i.bandwidth,n.throughput={rate:0,count:0},n.roundTrip=NaN,n.resetStats_(),n.mediaIndex=null,n.partIndex=null,n.hasPlayed_=i.hasPlayed,n.currentTime_=i.currentTime,n.seekable_=i.seekable,n.seeking_=i.seeking,n.duration_=i.duration,n.mediaSource_=i.mediaSource,n.vhs_=i.vhs,n.loaderType_=i.loaderType,n.currentMediaInfo_=void 0,n.startingMediaInfo_=void 0,n.segmentMetadataTrack_=i.segmentMetadataTrack,n.goalBufferLength_=i.goalBufferLength,n.sourceType_=i.sourceType,n.sourceUpdater_=i.sourceUpdater,n.inbandTextTracks_=i.inbandTextTracks,n.state_="INIT",n.timelineChangeController_=i.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!0,n.parse708captions_=i.parse708captions,n.useDtsForTimestampOffset_=i.useDtsForTimestampOffset,n.captionServices_=i.captionServices,n.experimentalExactManifestTimings=i.experimentalExactManifestTimings,n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.xhrOptions_=null,n.pendingSegments_=[],n.audioDisabled_=!1,n.isPendingTimestampOffset_=!1,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=z.browser.IE_VERSION>=11,n.appendInitSegment_={audio:!0,video:!0},n.playlistOfLastInitSegment_={audio:null,video:null},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={id3:[],caption:[]},n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=null,n.activeInitSegmentId_=null,n.initSegments_={},n.cacheEncryptionKeys_=i.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=i.decrypter,n.syncController_=i.syncController,n.syncPoint_={segmentIndex:0,time:0},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=function(){return n.trigger("syncinfoupdate")},n.syncController_.on("syncinfoupdate",n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener("sourceopen",function(){n.isEndOfStream_()||(n.ended_=!1)}),n.fetchAtBuffer_=!1,n.logger_=Qr("SegmentLoader["+n.loaderType_+"]"),Object.defineProperty(pe(n),"state",{get:function(){return this.state_},set:function(u){u!==this.state_&&(this.logger_(this.state_+" -> "+u),this.state_=u,this.trigger("statechange"))}}),n.sourceUpdater_.on("ready",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),"main"===n.loaderType_&&n.timelineChangeController_.on("pendingtimelinechange",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),"audio"===n.loaderType_&&n.timelineChangeController_.on("timelinechange",function(){n.hasEnoughInfoToLoad_()&&n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n}Y(r,s);var t=r.prototype;return t.createTransmuxer_=function(){return function(r){var t=new ig;t.currentTransmux=null,t.transmuxQueue=[];var i=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,i.call(t)},t.postMessage({action:"init",options:r}),t}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},t.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},t.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&M().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},t.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},t.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},t.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,M().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},t.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},t.error=function(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},t.endOfStream=function(){this.ended_=!0,this.transmuxer_&&ii_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},t.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return z.createTimeRanges();if("main"===this.loaderType_){var a=e.hasVideo;if(a&&e.hasAudio&&!this.audioDisabled_&&!e.isMuxed)return this.sourceUpdater_.buffered();if(a)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},t.initSegmentForMap=function(e,n){if(void 0===n&&(n=!1),!e)return null;var a=ku(e),u=this.initSegments_[a];return n&&!u&&e.bytes&&(this.initSegments_[a]=u={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),u||e},t.segmentKey=function(e,n){if(void 0===n&&(n=!1),!e)return null;var a=Wf(e),u=this.keyCache_[a];this.cacheEncryptionKeys_&&n&&!u&&e.bytes&&(this.keyCache_[a]=u={resolvedUri:e.resolvedUri,bytes:e.bytes});var c={resolvedUri:(u||e).resolvedUri};return u&&(c.bytes=u.bytes),c},t.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},t.load=function(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.playlist=function(e,n){if(void 0===n&&(n={}),e){var a=this.playlist_,u=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var c=null;if(a&&(a.id?c=a.id:a.uri&&(c=a.uri)),this.logger_("playlist update ["+c+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!a||a.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var d=e.mediaSequence-a.mediaSequence;if(this.logger_("live window shift ["+d+"]"),null!==this.mediaIndex)if(this.mediaIndex-=d,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var p=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!p.parts||!p.parts.length||!p.parts[this.partIndex])){var y=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=y}}u&&(u.mediaIndex-=d,u.mediaIndex<0?(u.mediaIndex=null,u.partIndex=null):(u.mediaIndex>=0&&(u.segment=e.segments[u.mediaIndex]),u.partIndex>=0&&u.segment.parts&&(u.part=u.segment.parts[u.partIndex]))),this.syncController_.saveExpiredSegmentInfo(a,e)}},t.pause=function(){this.checkBufferTimeout_&&(M().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},t.paused=function(){return null===this.checkBufferTimeout_},t.resetEverything=function(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},t.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},t.resyncLoader=function(){this.transmuxer_&&ii_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},t.remove=function(e,n,a,u){if(void 0===a&&(a=function(){}),void 0===u&&(u=!1),n===1/0&&(n=this.duration_()),n<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var c=1,d=function(){0==--c&&a()};for(var p in(u||!this.audioDisabled_)&&(c++,this.sourceUpdater_.removeAudio(e,n,d)),(u||"main"===this.loaderType_)&&(this.gopBuffer_=function(r,t,i,e){for(var n=Math.ceil((t-e)*jo.ONE_SECOND_IN_TS),a=Math.ceil((i-e)*jo.ONE_SECOND_IN_TS),u=r.slice(),c=r.length;c--&&!(r[c].pts<=a););if(-1===c)return u;for(var d=c+1;d--&&!(r[d].pts<=n););return d=Math.max(d,0),u.splice(d,c-d+1),u}(this.gopBuffer_,e,n,this.timeMapping_),c++,this.sourceUpdater_.removeVideo(e,n,d)),this.inbandTextTracks_)To(e,n,this.inbandTextTracks_[p]);To(e,n,this.segmentMetadataTrack_),d()}else this.logger_("skipping remove because no source updater or starting media info")},t.monitorBuffer_=function(){this.checkBufferTimeout_&&M().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=M().setTimeout(this.monitorBufferTick_.bind(this),1)},t.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&M().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=M().setTimeout(this.monitorBufferTick_.bind(this),500)},t.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},t.isEndOfStream_=function(e,n,a){if(void 0===e&&(e=this.mediaIndex),void 0===n&&(n=this.playlist_),void 0===a&&(a=this.partIndex),!n||!this.mediaSource_)return!1;var u="number"==typeof e&&n.segments[e];return n.endList&&"open"===this.mediaSource_.readyState&&e+1===n.segments.length&&(!u||!u.parts||a+1===u.parts.length)},t.chooseNextRequest_=function(){var e=this.buffered_(),n=wf(e)||0,a=uc(e,this.currentTime_()),u=!this.hasPlayed_()&&a>=1,c=a>=this.goalBufferLength_(),d=this.playlist_.segments;if(!d.length||u||c)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var p={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(p.isSyncRequest)p.mediaIndex=function(r,t,i){t=t||[];for(var e=[],n=0,a=0;a<t.length;a++){var u=t[a];if(r===u.timeline&&(e.push(a),(n+=u.duration)>i))return a}return 0===e.length?0:e[e.length-1]}(this.currentTimeline_,d,n);else if(null!==this.mediaIndex){var y=d[this.mediaIndex],v="number"==typeof this.partIndex?this.partIndex:-1;p.startOfSegment=y.end?y.end:n,y.parts&&y.parts[v+1]?(p.mediaIndex=this.mediaIndex,p.partIndex=v+1):p.mediaIndex=this.mediaIndex+1}else{var b=dr.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?n:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),D=b.segmentIndex,I=b.startTime,P=b.partIndex;p.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+n:"currentTime "+this.currentTime_(),p.mediaIndex=D,p.startOfSegment=I,p.partIndex=P}var G=d[p.mediaIndex],ie=G&&"number"==typeof p.partIndex&&G.parts&&G.parts[p.partIndex];if(!G||"number"==typeof p.partIndex&&!ie)return null;if("number"!=typeof p.partIndex&&G.parts&&(p.partIndex=0,ie=G.parts[0]),!a&&ie&&!ie.independent)if(0===p.partIndex){var ye=d[p.mediaIndex-1],Z=ye.parts&&ye.parts.length&&ye.parts[ye.parts.length-1];Z&&Z.independent&&(p.mediaIndex-=1,p.partIndex=ye.parts.length-1,p.independent="previous segment")}else G.parts[p.partIndex-1].independent&&(p.partIndex-=1,p.independent="previous part");return p.mediaIndex>=d.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(p)},t.generateSegmentInfo_=function(e){var n=e.independent,a=e.playlist,u=e.mediaIndex,c=e.startOfSegment,d=e.isSyncRequest,p=e.partIndex,y=e.forceTimestampOffset,v=e.getMediaInfoForTime,b=a.segments[u],D="number"==typeof p&&b.parts[p],I={requestId:"segment-loader-"+Math.random(),uri:D&&D.resolvedUri||b.resolvedUri,mediaIndex:u,partIndex:D?p:null,isSyncRequest:d,startOfSegment:c,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:b.timeline,duration:D&&D.duration||b.duration,segment:b,part:D,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:v,independent:n},P=typeof y<"u"?y:this.isPendingTimestampOffset_;I.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:b.timeline,currentTimeline:this.currentTimeline_,startOfSegment:c,buffered:this.buffered_(),overrideCheck:P});var G=wf(this.sourceUpdater_.audioBuffered());return"number"==typeof G&&(I.audioAppendStart=G-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(I.gopsToAlignWith=function(r,t,i){if(typeof t>"u"||null===t||!r.length)return[];var n,e=Math.ceil((t-i+3)*jo.ONE_SECOND_IN_TS);for(n=0;n<r.length&&!(r[n].pts>e);n++);return r.slice(n)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),I},t.timestampOffsetForSegment_=function(e){return function(r){var t=r.segmentTimeline,i=r.currentTimeline,e=r.startOfSegment,n=r.buffered;return r.overrideCheck||t!==i?t<i?e:n.length?n.end(n.length-1):e:null}(e)},t.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var n=this.currentTime_(),a=e.bandwidth,u=this.pendingSegment_.duration,c=dr.estimateSegmentRequestTime(u,a,this.playlist_,e.bytesReceived),d=function(r,t,i){return void 0===i&&(i=1),((r.length?r.end(r.length-1):0)-t)/i}(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(!(c<=d)){var p=function(r){var i=r.currentTime,e=r.bandwidth,n=r.duration,a=r.segmentDuration,u=r.timeUntilRebuffer,c=r.currentTimeline,d=r.syncController,p=r.master.playlists.filter(function(I){return!dr.isIncompatible(I)}),y=p.filter(dr.isEnabled);y.length||(y=p.filter(function(I){return!dr.isDisabled(I)}));var b=y.filter(dr.hasAttribute.bind(null,"BANDWIDTH")).map(function(I){var G=d.getSyncPoint(I,n,c,i)?1:2;return{playlist:I,rebufferingImpact:dr.estimateSegmentRequestTime(a,e,I)*G-u}}),D=b.filter(function(I){return I.rebufferingImpact<=0});return Jr(D,function(I,P){return Sc(P.playlist,I.playlist)}),D.length?D[0]:(Jr(b,function(I,P){return I.rebufferingImpact-P.rebufferingImpact}),b[0]||null)}({master:this.vhs_.playlists.master,currentTime:n,bandwidth:a,duration:this.duration_(),segmentDuration:u,timeUntilRebuffer:d,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(p){var b=.5;d<=ea&&(b=1),p.playlist&&p.playlist.uri!==this.playlist_.uri&&!(c-d-p.rebufferingImpact<b)&&(this.bandwidth=p.playlist.attributes.BANDWIDTH*Ei.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},t.handleAbort_=function(e){this.logger_("Aborting "+cs(e)),this.mediaRequestsAborted+=1},t.handleProgress_=function(e,n){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&this.trigger("progress")},t.handleTrackInfo_=function(e,n){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(n)||(function(r,t){if(!r&&!t||!r&&t||r&&!t)return!1;if(r===t)return!0;var i=Object.keys(r).sort(),e=Object.keys(t).sort();if(i.length!==e.length)return!1;for(var n=0;n<i.length;n++){var a=i[n];if(a!==e[n]||r[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,n=n||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},t.handleTimingInfo_=function(e,n,a,u){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var c=this.pendingSegment_,d=_h(n);c[d]=c[d]||{},c[d][a]=u,this.logger_("timinginfo: "+n+" - "+a+" - "+u),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},t.handleCaptions_=function(e,n){var a=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(0===n.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,n));var c=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),d={};n.forEach(function(p){d[p.stream]=d[p.stream]||{startTime:1/0,captions:[],endTime:0};var y=d[p.stream];y.startTime=Math.min(y.startTime,p.startTime+c),y.endTime=Math.max(y.endTime,p.endTime+c),y.captions.push(p)}),Object.keys(d).forEach(function(p){var y=d[p],v=y.startTime,b=y.endTime,D=y.captions,I=a.inbandTextTracks_;a.logger_("adding cues from "+v+" -> "+b+" for "+p),function(r,t,i){if(!r[i]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var e=i;/^cc708_/.test(i)&&(e="SERVICE"+i.split("_")[1]);var n=t.textTracks().getTrackById(e);if(n)r[i]=n;else{var u=i,c=i,d=!1,p=(t.options_.vhs&&t.options_.vhs.captionServices||{})[e];p&&(u=p.label,c=p.language,d=p.default),r[i]=t.addRemoteTextTrack({kind:"captions",id:e,default:d,label:u,language:c},!1).track}}}(I,a.vhs_.tech_,p),To(v,b,I[p]),function(r){var t=r.inbandTextTracks,i=r.captionArray,e=r.timestampOffset;if(i){var n=M().WebKitDataCue||M().VTTCue;i.forEach(function(a){t[a.stream].addCue(new n(a.startTime+e,a.endTime+e,a.text))})}}({captionArray:D,inbandTextTracks:I,timestampOffset:c})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},t.handleId3_=function(e,n,a){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,n,a));var c=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();(function(r,t,i){r.metadataTrack_||(r.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,r.metadataTrack_.inBandMetadataTrackDispatchType=t)})(this.inbandTextTracks_,a,this.vhs_.tech_),function(r){var t=r.inbandTextTracks,i=r.metadataArray,e=r.timestampOffset,n=r.videoDuration;if(i){var a=M().WebKitDataCue||M().VTTCue,u=t.metadataTrack_;if(u&&(i.forEach(function(b){var D=b.cueTime+e;"number"!=typeof D||M().isNaN(D)||D<0||!(D<1/0)||b.frames.forEach(function(I){var P=new a(D,D,I.value||I.url||I.data||"");P.frame=I,P.value=I,function(r){Object.defineProperties(r.frame,{id:{get:function(){return z.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),r.value.key}},value:{get:function(){return z.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),r.value.data}},privateData:{get:function(){return z.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),r.value.data}}})}(P),u.addCue(P)})}),u.cues&&u.cues.length)){for(var c=u.cues,d=[],p=0;p<c.length;p++)c[p]&&d.push(c[p]);var y=d.reduce(function(b,D){var I=b[D.startTime]||[];return I.push(D),b[D.startTime]=I,b},{}),v=Object.keys(y).sort(function(b,D){return Number(b)-Number(D)});v.forEach(function(b,D){var I=y[b],P=Number(v[D+1])||n;I.forEach(function(G){G.endTime=P})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:c,videoDuration:this.duration_()})}},t.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},t.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(n){return n()})},t.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(n){return n()})},t.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&yh({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},t.getCurrentMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},t.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},t.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},t.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,n=this.getCurrentMediaInfo_();return!(!e||!n||n.hasVideo&&!e.videoTimingInfo||n.hasAudio&&!this.audioDisabled_&&!n.isMuxed&&!e.audioTimingInfo||yh({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},t.handleData_=function(e,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,e,n));var a=this.pendingSegment_;if(this.setTimeMapping_(a.timeline),this.updateMediaSecondsLoaded_(a.part||a.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),a.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),a.isFmp4=e.isFmp4,a.timingInfo=a.timingInfo||{},a.isFmp4)this.trigger("fmp4"),a.timingInfo.start=a[_h(n.type)].start;else{var d,u=this.getCurrentMediaInfo_(),c="main"===this.loaderType_&&u&&u.hasVideo;c&&(d=a.videoTimingInfo.start),a.timingInfo.start=this.trueSegmentStart_({currentStart:a.timingInfo.start,playlist:a.playlist,mediaIndex:a.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:c,firstVideoFrameTimeForData:d,videoTimingInfo:a.videoTimingInfo,audioTimingInfo:a.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(a,n.type),this.updateSourceBufferTimestampOffset_(a),a.isSyncRequest){this.updateTimingInfoEnd_(a),this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:"main"===this.loaderType_});var p=this.chooseNextRequest_();if(p.mediaIndex!==a.mediaIndex||p.partIndex!==a.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}a.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(a,n)}}},t.updateAppendInitSegmentStatus=function(e,n){"main"===this.loaderType_&&"number"==typeof e.timestampOffset&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==e.playlist&&(this.appendInitSegment_[n]=!0)},t.getInitSegmentAndUpdateState_=function(e){var n=e.type,a=e.initSegment,u=e.map,c=e.playlist;if(u){var d=ku(u);if(this.activeInitSegmentId_===d)return null;a=this.initSegmentForMap(u,!0).bytes,this.activeInitSegmentId_=d}return a&&this.appendInitSegment_[n]?(this.playlistOfLastInitSegment_[n]=c,this.appendInitSegment_[n]=!1,this.activeInitSegmentId_=null,a):null},t.handleQuotaExceededError_=function(e,n){var a=this,u=e.segmentInfo,c=e.type,d=e.bytes,p=this.sourceUpdater_.audioBuffered(),y=this.sourceUpdater_.videoBuffered();p.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Oa(p).join(", ")),y.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Oa(y).join(", "));var v=p.length?p.start(0):0,b=p.length?p.end(p.length-1):0,D=y.length?y.start(0):0,I=y.length?y.end(y.length-1):0;if(b-v<=1&&I-D<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+d.byteLength+", audio buffer: "+Oa(p).join(", ")+", video buffer: "+Oa(y).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:u,type:c,bytes:d}));var G=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+G),this.remove(0,G,function(){a.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=M().setTimeout(function(){a.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),a.quotaExceededErrorRetryTimeout_=null,a.processCallQueue_()},1e3)},!0)},t.handleAppendError_=function(e,n){var a=e.segmentInfo,u=e.type,c=e.bytes;if(n){if(22===n.code)return void this.handleQuotaExceededError_({segmentInfo:a,type:u,bytes:c});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error(u+" append of "+c.length+"b failed for segment #"+a.mediaIndex+" in playlist "+a.playlist.id),this.trigger("appenderror")}},t.appendToSourceBuffer_=function(e){var n=e.segmentInfo,a=e.type,u=e.initSegment,c=e.data,d=e.bytes;if(!d){var p=[c],y=c.byteLength;u&&(p.unshift(u),y+=u.byteLength),d=function(r){var i,t=0;return r.bytes&&(i=new Uint8Array(r.bytes),r.segments.forEach(function(e){i.set(e,t),t+=e.byteLength})),i}({bytes:y,segments:p})}this.sourceUpdater_.appendBuffer({segmentInfo:n,type:a,bytes:d},this.handleAppendError_.bind(this,{segmentInfo:n,type:a,bytes:d}))},t.handleSegmentTimingInfo_=function(e,n,a){if(this.pendingSegment_&&n===this.pendingSegment_.requestId){var u=this.pendingSegment_.segment,c=e+"TimingInfo";u[c]||(u[c]={}),u[c].transmuxerPrependedSeconds=a.prependedContentDuration||0,u[c].transmuxedPresentationStart=a.start.presentation,u[c].transmuxedDecodeStart=a.start.decode,u[c].transmuxedPresentationEnd=a.end.presentation,u[c].transmuxedDecodeEnd=a.end.decode,u[c].baseMediaDecodeTime=a.baseMediaDecodeTime}},t.appendData_=function(e,n){var a=n.type,u=n.data;if(u&&u.byteLength&&("audio"!==a||!this.audioDisabled_)){var c=this.getInitSegmentAndUpdateState_({type:a,initSegment:n.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:a,initSegment:c,data:u})}},t.loadSegment_=function(e){var n=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push(function(){var a=vt({},e,{forceTimestampOffset:!0});vt(e,n.generateSegmentInfo_(a)),n.isPendingTimestampOffset_=!1,n.updateTransmuxerAndRequestSegment_(e)})},t.updateTransmuxerAndRequestSegment_=function(e){var n=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var a=this.createSimplifiedSegmentObj_(e),p=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)||null!==this.mediaIndex&&e.timeline!==this.currentTimeline_&&e.timeline>0;this.logger_("Requesting "+cs(e)),a.map&&!a.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=dg({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:a,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:p,endedTimelineFn:function(){n.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(v){var b=v.message,D=v.level,I=v.stream;n.logger_(cs(e)+" logged from transmuxer stream "+I+" as a "+D+": "+b)}})},t.trimBackBuffer_=function(e){var n=function(r,t,i){var e=t-Ei.BACK_BUFFER_LENGTH;return r.length&&(e=Math.max(e,r.start(0))),Math.min(t-i,e)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)},t.createSimplifiedSegmentObj_=function(e){var n=e.segment,a=e.part,u={resolvedUri:a?a.resolvedUri:n.resolvedUri,byterange:a?a.byterange:n.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},c=e.playlist.segments[e.mediaIndex-1];if(c&&c.timeline===n.timeline&&(c.videoTimingInfo?u.baseStartTime=c.videoTimingInfo.transmuxedDecodeEnd:c.audioTimingInfo&&(u.baseStartTime=c.audioTimingInfo.transmuxedDecodeEnd)),n.key){var d=n.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);u.key=this.segmentKey(n.key),u.key.iv=d}return n.map&&(u.map=this.initSegmentForMap(n.map)),u},t.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},t.saveBandwidthRelatedStats_=function(e,n){this.pendingSegment_.byteLength=n.bytesReceived,e<Uu?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record "+Uu):(this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime)},t.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},t.segmentRequestFinished_=function(e,n,a){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,n,a));else if(this.saveTransferStats_(n.stats),this.pendingSegment_&&n.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",-102===e.code)return;return this.pause(),-101===e.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var u=this.pendingSegment_;this.saveBandwidthRelatedStats_(u.duration,n.stats),u.endOfAllRequests=n.endOfAllRequests,a.gopInfo&&(this.gopBuffer_=function(r,t,i){if(!t.length)return r;if(i)return t.slice();for(var e=t[0].pts,n=0;n<r.length&&!(r[n].pts>=e);n++);return r.slice(0,n).concat(t)}(this.gopBuffer_,a.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(u)}},t.setTimeMapping_=function(e){var n=this.syncController_.mappingForTimeline(e);null!==n&&(this.timeMapping_=n)},t.updateMediaSecondsLoaded_=function(e){this.mediaSecondsLoaded+="number"==typeof e.start&&"number"==typeof e.end?e.end-e.start:e.duration},t.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},t.trueSegmentStart_=function(e){var n=e.currentStart,u=e.mediaIndex,c=e.firstVideoFrameTimeForData;if(typeof n<"u")return n;if(!e.useVideoTimingInfo)return e.audioTimingInfo.start;var b=e.playlist.segments[u-1];return 0===u||!b||typeof b.start>"u"||b.end!==c+e.currentVideoTimestampOffset?c:e.videoTimingInfo.start},t.waitForAppendsToComplete_=function(e){var n=this.getCurrentMediaInfo_(e);if(!n)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var d="main"===this.loaderType_&&n.hasVideo,p=!this.audioDisabled_&&n.hasAudio&&!n.isMuxed;if(e.waitingOnAppends=0,!e.hasAppendedData_)return!e.timingInfo&&"number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);d&&e.waitingOnAppends++,p&&e.waitingOnAppends++,d&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),p&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},t.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},t.checkForIllegalMediaSwitch=function(e){var n=function(r,t,i){return"main"===r&&t&&i?i.hasAudio||i.hasVideo?t.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!n&&(this.error({message:n,blacklistDuration:1/0}),this.trigger("error"),!0)},t.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var n=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),n=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}},t.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var n=e.videoTimingInfo,a=e.audioTimingInfo,u=e.timingInfo;return this.useDtsForTimestampOffset_?n&&"number"==typeof n.transmuxedDecodeStart?n.transmuxedDecodeStart:a&&"number"==typeof a.transmuxedDecodeStart?a.transmuxedDecodeStart:u.start:u.start},t.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var n=this.getMediaInfo_(),u="main"===this.loaderType_&&n&&n.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;u&&(e.timingInfo.end="number"==typeof u.end?u.end:u.start+e.duration)},t.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var n=function(r,t){if("hls"!==t)return null;var i=function(r){var t=0;return["video","audio"].forEach(function(i){var e=r[i+"TimingInfo"];if(e){var u,n=e.start,a=e.end;"bigint"==typeof n||"bigint"==typeof a?u=M().BigInt(a)-M().BigInt(n):"number"==typeof n&&"number"==typeof a&&(u=a-n),typeof u<"u"&&u>t&&(t=u)}}),"bigint"==typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t}({audioTimingInfo:r.audioTimingInfo,videoTimingInfo:r.videoTimingInfo});if(!i)return null;var e=r.playlist.targetDuration,n=Th({segmentDuration:i,maxDuration:2*e}),a=Th({segmentDuration:i,maxDuration:e});return n||a?{severity:n?"warn":"info",message:"Segment with index "+r.mediaIndex+" from playlist "+r.playlist.id+" has a duration of "+i+" when the reported duration is "+r.duration+" and the target duration is "+e+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"}:null}(e,this.sourceType_);if(n&&("warn"===n.severity?z.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended "+cs(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var a=e.segment,u=e.part,c=a.end&&this.currentTime_()-a.end>3*e.playlist.targetDuration,d=u&&u.end&&this.currentTime_()-u.end>3*e.playlist.partTargetDuration;if(c||d)return this.logger_("bad "+(c?"segment":"part")+" "+cs(e)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+cs(e))},t.recordThroughput_=function(e){if(e.duration<Uu)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record "+Uu);else{var n=this.throughput.rate,a=Date.now()-e.endOfAllRequests+1,u=Math.floor(e.byteLength/a*8*1e3);this.throughput.rate+=(u-n)/++this.throughput.count}},t.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var n=e.segment,a=n.start,u=n.end;if(vh(a)&&vh(u)){To(a,u,this.segmentMetadataTrack_);var c=M().WebKitDataCue||M().VTTCue,d={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:a,end:u},y=new c(a,u,JSON.stringify(d));y.value=d,this.segmentMetadataTrack_.addCue(y)}}},r}(z.EventTarget);function Xt(){}var Ln,tr=function(r){return"string"!=typeof r?r:r.replace(/./,function(t){return t.toUpperCase()})},Cg=["video","audio"],wc=function(r,t){var i=t[r+"Buffer"];return i&&i.updating||t.queuePending[r]},Vu=function s(r,t){if(0!==t.queue.length){var i=0,e=t.queue[i];if("mediaSource"===e.type)return void(!t.updating()&&"closed"!==t.mediaSource.readyState&&(t.queue.shift(),e.action(t),e.doneFn&&e.doneFn(),s("audio",t),s("video",t)));if("mediaSource"!==r&&t.ready()&&"closed"!==t.mediaSource.readyState&&!wc(r,t)){if(e.type!==r){if(i=function(r,t){for(var i=0;i<t.length;i++){var e=t[i];if("mediaSource"===e.type)return null;if(e.type===r)return i}return null}(r,t.queue),null===i)return;e=t.queue[i]}if(t.queue.splice(i,1),t.queuePending[r]=e,e.action(r,t),!e.doneFn)return t.queuePending[r]=null,void s(r,t)}}},bh=function(r,t){var i=t[r+"Buffer"],e=tr(r);i&&(i.removeEventListener("updateend",t["on"+e+"UpdateEnd_"]),i.removeEventListener("error",t["on"+e+"Error_"]),t.codecs[r]=null,t[r+"Buffer"]=null)},_n=function(r,t){return r&&t&&-1!==Array.prototype.indexOf.call(r.sourceBuffers,t)},wr_appendBuffer=function(r,t,i){return function(e,n){var a=n[e+"Buffer"];if(_n(n.mediaSource,a)){n.logger_("Appending segment "+t.mediaIndex+"'s "+r.length+" bytes to "+e+"Buffer");try{a.appendBuffer(r)}catch(u){n.logger_("Error with code "+u.code+" "+(22===u.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+t.mediaIndex+" to "+e+"Buffer"),n.queuePending[e]=null,i(u)}}}},wr_remove=function(r,t){return function(i,e){var n=e[i+"Buffer"];if(_n(e.mediaSource,n)){e.logger_("Removing "+r+" to "+t+" from "+i+"Buffer");try{n.remove(r,t)}catch{e.logger_("Remove "+r+" to "+t+" from "+i+"Buffer failed")}}}},wr_timestampOffset=function(r){return function(t,i){var e=i[t+"Buffer"];_n(i.mediaSource,e)&&(i.logger_("Setting "+t+"timestampOffset to "+r),e.timestampOffset=r)}},wr_callback=function(r){return function(t,i){r()}},wr_endOfStream=function(r){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(r||"")+")");try{t.mediaSource.endOfStream(r)}catch(i){z.log.warn("Failed to call media source endOfStream",i)}}}},wr_duration=function(r){return function(t){t.logger_("Setting mediaSource duration to "+r);try{t.mediaSource.duration=r}catch(i){z.log.warn("Failed to set media source duration",i)}}},wr_addSourceBuffer=function(r,t){return function(i){var e=tr(r),n=_i(t);i.logger_("Adding "+r+"Buffer with codec "+t+" to mediaSource");var a=i.mediaSource.addSourceBuffer(n);a.addEventListener("updateend",i["on"+e+"UpdateEnd_"]),a.addEventListener("error",i["on"+e+"Error_"]),i.codecs[r]=t,i[r+"Buffer"]=a}},wr_removeSourceBuffer=function(r){return function(t){var i=t[r+"Buffer"];if(bh(r,t),_n(t.mediaSource,i)){t.logger_("Removing "+r+"Buffer with codec "+t.codecs[r]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(i)}catch(e){z.log.warn("Failed to removeSourceBuffer "+r+"Buffer",e)}}}},wr_changeType=function(r){return function(t,i){var e=i[t+"Buffer"],n=_i(r);if(_n(i.mediaSource,e)&&i.codecs[t]!==r){i.logger_("changing "+t+"Buffer codec from "+i.codecs[t]+" to "+r);try{e.changeType(n),i.codecs[t]=r}catch(a){z.log.warn("Failed to changeType on "+t+"Buffer",a)}}}},hr=function(r){var t=r.type,i=r.sourceUpdater;i.queue.push({type:t,action:r.action,doneFn:r.doneFn,name:r.name}),Vu(t,i)},xh=function(r,t){return function(i){if(t.queuePending[r]){var e=t.queuePending[r].doneFn;t.queuePending[r]=null,e&&e(t[r+"Error_"])}Vu(r,t)}},Sh=function(s){function r(i){var e;return(e=s.call(this)||this).mediaSource=i,e.sourceopenListener_=function(){return Vu("mediaSource",pe(e))},e.mediaSource.addEventListener("sourceopen",e.sourceopenListener_),e.logger_=Qr("SourceUpdater"),e.audioTimestampOffset_=0,e.videoTimestampOffset_=0,e.queue=[],e.queuePending={audio:null,video:null},e.delayedAudioAppendQueue_=[],e.videoAppendQueued_=!1,e.codecs={},e.onVideoUpdateEnd_=xh("video",pe(e)),e.onAudioUpdateEnd_=xh("audio",pe(e)),e.onVideoError_=function(n){e.videoError_=n},e.onAudioError_=function(n){e.audioError_=n},e.createdSourceBuffers_=!1,e.initializedEme_=!1,e.triggeredReady_=!1,e}Y(r,s);var t=r.prototype;return t.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},t.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},t.hasInitializedAnyEme=function(){return this.initializedEme_},t.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},t.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},t.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},t.addSourceBuffer=function(e,n){hr({type:"mediaSource",sourceUpdater:this,action:wr_addSourceBuffer(e,n),name:"addSourceBuffer"})},t.abort=function(e){hr({type:e,sourceUpdater:this,action:function(r,t){if("open"===t.mediaSource.readyState){var i=t[r+"Buffer"];if(_n(t.mediaSource,i)){t.logger_("calling abort on "+r+"Buffer");try{i.abort()}catch(e){z.log.warn("Failed to abort on "+r+"Buffer",e)}}}},name:"abort"})},t.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?hr({type:"mediaSource",sourceUpdater:this,action:wr_removeSourceBuffer(e),name:"removeSourceBuffer"}):z.log.error("removeSourceBuffer is not supported!")},t.canRemoveSourceBuffer=function(){return!z.browser.IE_VERSION&&!z.browser.IS_FIREFOX&&M().MediaSource&&M().MediaSource.prototype&&"function"==typeof M().MediaSource.prototype.removeSourceBuffer},r.canChangeType=function(){return M().SourceBuffer&&M().SourceBuffer.prototype&&"function"==typeof M().SourceBuffer.prototype.changeType},t.canChangeType=function(){return this.constructor.canChangeType()},t.changeType=function(e,n){this.canChangeType()?hr({type:e,sourceUpdater:this,action:wr_changeType(n),name:"changeType"}):z.log.error("changeType is not supported!")},t.addOrChangeSourceBuffers=function(e){var n=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(function(a){var u=e[a];if(!n.hasCreatedSourceBuffers())return n.addSourceBuffer(a,u);n.canChangeType()&&n.changeType(a,u)})},t.appendBuffer=function(e,n){var a=this,u=e.segmentInfo,c=e.type,d=e.bytes;if(this.processedAppend_=!0,"audio"===c&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,n]),void this.logger_("delayed audio append of "+d.length+" until video append");if(hr({type:c,sourceUpdater:this,action:wr_appendBuffer(d,u||{mediaIndex:-1},n),doneFn:n,name:"appendBuffer"}),"video"===c){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var y=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+y.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,y.forEach(function(v){a.appendBuffer.apply(a,v)})}},t.audioBuffered=function(){return _n(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:z.createTimeRange()},t.videoBuffered=function(){return _n(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:z.createTimeRange()},t.buffered=function(){var e=_n(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=_n(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!e?this.audioBuffered():e&&!n?this.videoBuffered():function(r,t){var i=null,e=null,n=0,a=[],u=[];if(!(r&&r.length&&t&&t.length))return z.createTimeRange();for(var c=r.length;c--;)a.push({time:r.start(c),type:"start"}),a.push({time:r.end(c),type:"end"});for(c=t.length;c--;)a.push({time:t.start(c),type:"start"}),a.push({time:t.end(c),type:"end"});for(a.sort(function(d,p){return d.time-p.time}),c=0;c<a.length;c++)"start"===a[c].type?2==++n&&(i=a[c].time):"end"===a[c].type&&1==--n&&(e=a[c].time),null!==i&&null!==e&&(u.push([i,e]),i=null,e=null);return z.createTimeRanges(u)}(this.audioBuffered(),this.videoBuffered())},t.setDuration=function(e,n){void 0===n&&(n=Xt),hr({type:"mediaSource",sourceUpdater:this,action:wr_duration(e),name:"duration",doneFn:n})},t.endOfStream=function(e,n){void 0===e&&(e=null),void 0===n&&(n=Xt),"string"!=typeof e&&(e=void 0),hr({type:"mediaSource",sourceUpdater:this,action:wr_endOfStream(e),name:"endOfStream",doneFn:n})},t.removeAudio=function(e,n,a){void 0===a&&(a=Xt),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?hr({type:"audio",sourceUpdater:this,action:wr_remove(e,n),doneFn:a,name:"remove"}):a()},t.removeVideo=function(e,n,a){void 0===a&&(a=Xt),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?hr({type:"video",sourceUpdater:this,action:wr_remove(e,n),doneFn:a,name:"remove"}):a()},t.updating=function(){return!(!wc("audio",this)&&!wc("video",this))},t.audioTimestampOffset=function(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(hr({type:"audio",sourceUpdater:this,action:wr_timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},t.videoTimestampOffset=function(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(hr({type:"video",sourceUpdater:this,action:wr_timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},t.audioQueueCallback=function(e){this.audioBuffer&&hr({type:"audio",sourceUpdater:this,action:wr_callback(e),name:"callback"})},t.videoQueueCallback=function(e){this.videoBuffer&&hr({type:"video",sourceUpdater:this,action:wr_callback(e),name:"callback"})},t.dispose=function(){var e=this;this.trigger("dispose"),Cg.forEach(function(n){e.abort(n),e.canRemoveSourceBuffer()?e.removeSourceBuffer(n):e[n+"QueueCallback"](function(){return bh(n,e)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},r}(z.EventTarget),Eh=function(r){return decodeURIComponent(escape(String.fromCharCode.apply(null,r)))},Dc=new Uint8Array("\n\n".split("").map(function(s){return s.charCodeAt(0)})),Ch=function(s){function r(){return s.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return Y(r,s),r}(_l(Error)),wg=function(s){function r(i,e){var n;return void 0===e&&(e={}),(n=s.call(this,i,e)||this).mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=i.featuresNativeTextTracks,n.loadVttJs=i.loadVttJs,n.shouldSaveSegmentTimingInfo_=!1,n}Y(r,s);var t=r.prototype;return t.createTransmuxer_=function(){return null},t.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return z.createTimeRanges();var e=this.subtitlesTrack_.cues;return z.createTimeRanges([[e[0].startTime,e[e.length-1].startTime]])},t.initSegmentForMap=function(e,n){if(void 0===n&&(n=!1),!e)return null;var a=ku(e),u=this.initSegments_[a];if(n&&!u&&e.bytes){var d=new Uint8Array(Dc.byteLength+e.bytes.byteLength);d.set(e.bytes),d.set(Dc,e.bytes.byteLength),this.initSegments_[a]=u={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:d}}return u||e},t.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.track=function(e){return typeof e>"u"||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},t.remove=function(e,n){To(e,n,this.subtitlesTrack_)},t.fillBuffer_=function(){var e=this,n=this.chooseNextRequest_();if(n){if(null===this.syncController_.timestampOffsetForTimeline(n.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(n)}},t.timestampOffsetForSegment_=function(){return null},t.chooseNextRequest_=function(){return this.skipEmptySegments_(s.prototype.chooseNextRequest_.call(this))},t.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},t.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},t.segmentRequestFinished_=function(e,n,a){var u=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(n.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return-101===e.code&&this.handleTimeout_(),-102===e.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var c=this.pendingSegment_;this.saveBandwidthRelatedStats_(c.duration,n.stats),n.key&&this.segmentKey(n.key,!0),this.state="APPENDING",this.trigger("appending");var d=c.segment;if(d.map&&(d.map.bytes=n.map.bytes),c.bytes=n.bytes,"function"!=typeof M().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then(function(){return u.segmentRequestFinished_(e,n,a)},function(){return u.stopForError({message:"Error loading vtt.js"})});d.requested=!0;try{this.parseVTTCues_(c)}catch(p){return void this.stopForError({message:p.message})}if(this.updateTimeMapping_(c,this.syncController_.timelines[c.timeline],this.playlist_),c.timingInfo=c.cues.length?{start:c.cues[0].startTime,end:c.cues[c.cues.length-1].endTime}:{start:c.startOfSegment,end:c.startOfSegment+c.duration},c.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");c.byteLength=c.bytes.byteLength,this.mediaSecondsLoaded+=d.duration,c.cues.forEach(function(p){u.subtitlesTrack_.addCue(u.featuresNativeTextTracks_?new(M().VTTCue)(p.startTime,p.endTime,p.text):p)}),function(r){var t=r.cues;if(t)for(var i=0;i<t.length;i++){for(var e=[],n=0,a=0;a<t.length;a++)t[i].startTime===t[a].startTime&&t[i].endTime===t[a].endTime&&t[i].text===t[a].text&&++n>1&&e.push(t[a]);e.length&&e.forEach(function(u){return r.removeCue(u)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},t.handleData_=function(){},t.updateTimingInfoEnd_=function(){},t.parseVTTCues_=function(e){var n,a=!1;if("function"!=typeof M().WebVTT)throw new Ch;"function"==typeof M().TextDecoder?n=new(M().TextDecoder)("utf8"):(n=M().WebVTT.StringDecoder(),a=!0);var u=new(M().WebVTT.Parser)(M(),M().vttjs,n);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},u.oncue=e.cues.push.bind(e.cues),u.ontimestampmap=function(p){e.timestampmap=p},u.onparsingerror=function(p){z.log.warn("Error encountered when parsing cues: "+p.message)},e.segment.map){var c=e.segment.map.bytes;a&&(c=Eh(c)),u.parse(c)}var d=e.bytes;a&&(d=Eh(d)),u.parse(d),u.flush()},t.updateTimeMapping_=function(e,n,a){var u=e.segment;if(n){if(!e.cues.length)return void(u.empty=!0);var c=e.timestampmap,d=c.MPEGTS/jo.ONE_SECOND_IN_TS-c.LOCAL+n.mapping;e.cues.forEach(function(v){v.startTime+=d,v.endTime+=d}),a.syncInfo||(a.syncInfo={mediaSequence:a.mediaSequence+e.mediaIndex,time:Math.min(e.cues[0].startTime,e.cues[e.cues.length-1].startTime-u.duration)})}},r}(Ac),Dg=function(r,t){for(var i=r.cues,e=0;e<i.length;e++){var n=i[e];if(t>=n.adStartTime&&t<=n.adEndTime)return n}return null},Ra=[{name:"VOD",run:function(r,t,i,e,n){return i!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(r,t,i,e,n){if(!Object.keys(r.timelineToDatetimeMappings).length)return null;var a=null,u=null,c=cc(t);n=n||0;for(var d=0;d<c.length;d++){var y=c[t.endList||0===n?d:c.length-(d+1)],v=y.segment,b=r.timelineToDatetimeMappings[v.timeline];if(b&&v.dateTimeObject){var I=v.dateTimeObject.getTime()/1e3+b;if(v.parts&&"number"==typeof y.partIndex)for(var P=0;P<y.partIndex;P++)I+=v.parts[P].duration;var G=Math.abs(n-I);if(null!==u&&(0===G||u<G))break;u=G,a={time:I,segmentIndex:y.segmentIndex,partIndex:y.partIndex}}}return a}},{name:"Segment",run:function(r,t,i,e,n){var a=null,u=null;n=n||0;for(var c=cc(t),d=0;d<c.length;d++){var y=c[t.endList||0===n?d:c.length-(d+1)],v=y.segment,b=y.part&&y.part.start||v&&v.start;if(v.timeline===e&&typeof b<"u"){var D=Math.abs(n-b);if(null!==u&&u<D)break;(!a||null===u||u>=D)&&(u=D,a={time:b,segmentIndex:y.segmentIndex,partIndex:y.partIndex})}}return a}},{name:"Discontinuity",run:function(r,t,i,e,n){var a=null;if(n=n||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var u=null,c=0;c<t.discontinuityStarts.length;c++){var d=t.discontinuityStarts[c],y=r.discontinuities[t.discontinuitySequence+c+1];if(y){var v=Math.abs(n-y.time);if(null!==u&&u<v)break;(!a||null===u||u>=v)&&(u=v,a={time:y.time,segmentIndex:d,partIndex:null})}}return a}},{name:"Playlist",run:function(r,t,i,e,n){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],kg=function(s){function r(i){var e;return(e=s.call(this)||this).timelines=[],e.discontinuities=[],e.timelineToDatetimeMappings={},e.logger_=Qr("SyncController"),e}Y(r,s);var t=r.prototype;return t.getSyncPoint=function(e,n,a,u){var c=this.runStrategies_(e,n,a,u);return c.length?this.selectSyncPoint_(c,{key:"time",value:u}):null},t.getExpiredTime=function(e,n){if(!e||!e.segments)return null;var a=this.runStrategies_(e,n,e.discontinuitySequence,0);if(!a.length)return null;var u=this.selectSyncPoint_(a,{key:"segmentIndex",value:0});return u.segmentIndex>0&&(u.time*=-1),Math.abs(u.time+lo({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:u.segmentIndex,endIndex:0}))},t.runStrategies_=function(e,n,a,u){for(var c=[],d=0;d<Ra.length;d++){var p=Ra[d],y=p.run(this,e,n,a,u);y&&(y.strategy=p.name,c.push({strategy:p.name,syncPoint:y}))}return c},t.selectSyncPoint_=function(e,n){for(var a=e[0].syncPoint,u=Math.abs(e[0].syncPoint[n.key]-n.value),c=e[0].strategy,d=1;d<e.length;d++){var p=Math.abs(e[d].syncPoint[n.key]-n.value);p<u&&(u=p,a=e[d].syncPoint,c=e[d].strategy)}return this.logger_("syncPoint for ["+n.key+": "+n.value+"] chosen with strategy ["+c+"]: [time:"+a.time+", segmentIndex:"+a.segmentIndex+("number"==typeof a.partIndex?",partIndex:"+a.partIndex:"")+"]"),a},t.saveExpiredSegmentInfo=function(e,n){var a=n.mediaSequence-e.mediaSequence;if(a>86400)z.log.warn("Not saving expired segment info. Media sequence gap "+a+" is too large.");else for(var u=a-1;u>=0;u--){var c=e.segments[u];if(c&&typeof c.start<"u"){n.syncInfo={mediaSequence:e.mediaSequence+u,time:c.start},this.logger_("playlist refresh sync: [time:"+n.syncInfo.time+", mediaSequence: "+n.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},t.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var n=e.segments[0],a=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-a}},t.saveSegmentTimingInfo=function(e){var n=e.segmentInfo,a=e.shouldSaveTimelineMapping,u=this.calculateSegmentTimeMapping_(n,n.timingInfo,a),c=n.segment;u&&(this.saveDiscontinuitySyncInfo_(n),n.playlist.syncInfo||(n.playlist.syncInfo={mediaSequence:n.playlist.mediaSequence+n.mediaIndex,time:c.start}));var d=c.dateTimeObject;c.discontinuity&&a&&d&&(this.timelineToDatetimeMappings[c.timeline]=-d.getTime()/1e3)},t.timestampOffsetForTimeline=function(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time},t.mappingForTimeline=function(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping},t.calculateSegmentTimeMapping_=function(e,n,a){var p,y,u=e.segment,c=e.part,d=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)d={time:e.startOfSegment,mapping:e.startOfSegment-n.start},a&&(this.timelines[e.timeline]=d,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+d.time+"] [mapping: "+d.mapping+"]")),p=e.startOfSegment,y=n.end+d.mapping;else{if(!d)return!1;p=n.start+d.mapping,y=n.end+d.mapping}return c&&(c.start=p,c.end=y),(!u.start||p<u.start)&&(u.start=p),u.end=y,!0},t.saveDiscontinuitySyncInfo_=function(e){var n=e.playlist,a=e.segment;if(a.discontinuity)this.discontinuities[a.timeline]={time:a.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(var u=0;u<n.discontinuityStarts.length;u++){var c=n.discontinuityStarts[u],d=n.discontinuitySequence+u+1,p=c-e.mediaIndex,y=Math.abs(p);if(!this.discontinuities[d]||this.discontinuities[d].accuracy>y){var v;v=p<0?a.start-lo({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex,endIndex:c}):a.end+lo({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex+1,endIndex:c}),this.discontinuities[d]={time:v,accuracy:y}}}},t.dispose=function(){this.trigger("dispose"),this.off()},r}(z.EventTarget),Og=function(s){function r(){var i;return(i=s.call(this)||this).pendingTimelineChanges_={},i.lastTimelineChanges_={},i}Y(r,s);var t=r.prototype;return t.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},t.pendingTimelineChange=function(e){var n=e.type,a=e.from,u=e.to;return"number"==typeof a&&"number"==typeof u&&(this.pendingTimelineChanges_[n]={type:n,from:a,to:u},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[n]},t.lastTimelineChange=function(e){var n=e.type,a=e.from,u=e.to;return"number"==typeof a&&"number"==typeof u&&(this.lastTimelineChanges_[n]={type:n,from:a,to:u},delete this.pendingTimelineChanges_[n],this.trigger("timelinechange")),this.lastTimelineChanges_[n]},t.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},r}(z.EventTarget),Lg=Zf(eh(function(){var s=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function r(Z,ee,fe){return Z(fe={path:ee,exports:{},require:function(ae,me){return function t(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},fe.exports),fe.exports}var i=r(function(Z){function ee(re,ae){for(var me=0;me<ae.length;me++){var le=ae[me];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(re,le.key,le)}}Z.exports=function fe(re,ae,me){return ae&&ee(re.prototype,ae),me&&ee(re,me),re},Z.exports.default=Z.exports,Z.exports.__esModule=!0}),e=r(function(Z){function ee(fe,re){return Z.exports=ee=Object.setPrototypeOf||function(me,le){return me.__proto__=le,me},Z.exports.default=Z.exports,Z.exports.__esModule=!0,ee(fe,re)}Z.exports=ee,Z.exports.default=Z.exports,Z.exports.__esModule=!0}),n=r(function(Z){Z.exports=function ee(fe,re){fe.prototype=Object.create(re.prototype),fe.prototype.constructor=fe,e(fe,re)},Z.exports.default=Z.exports,Z.exports.__esModule=!0}),a=function(){function Z(){this.listeners={}}var ee=Z.prototype;return ee.on=function(re,ae){this.listeners[re]||(this.listeners[re]=[]),this.listeners[re].push(ae)},ee.off=function(re,ae){if(!this.listeners[re])return!1;var me=this.listeners[re].indexOf(ae);return this.listeners[re]=this.listeners[re].slice(0),this.listeners[re].splice(me,1),me>-1},ee.trigger=function(re){var ae=this.listeners[re];if(ae)if(2===arguments.length)for(var me=ae.length,le=0;le<me;++le)ae[le].call(this,arguments[1]);else for(var tt=Array.prototype.slice.call(arguments,1),Ve=ae.length,dt=0;dt<Ve;++dt)ae[dt].apply(this,tt)},ee.dispose=function(){this.listeners={}},ee.pipe=function(re){this.on("data",function(ae){re.push(ae)})},Z}(),d=null,p=function(){function Z(fe){d||(d=function(){var le,tt,Ve,ni,Ai,li,mr,jt,ee=[[[],[],[],[],[]],[[],[],[],[],[]]],fe=ee[0],re=ee[1],ae=fe[4],me=re[4],dt=[],Jt=[];for(le=0;le<256;le++)Jt[(dt[le]=le<<1^283*(le>>7))^le]=le;for(tt=Ve=0;!ae[tt];tt^=ni||1,Ve=Jt[Ve]||1)for(ae[tt]=li=(li=Ve^Ve<<1^Ve<<2^Ve<<3^Ve<<4)>>8^255&li^99,me[li]=tt,jt=16843009*dt[Ai=dt[ni=dt[tt]]]^65537*Ai^257*ni^16843008*tt,mr=257*dt[li]^16843008*li,le=0;le<4;le++)fe[le][tt]=mr=mr<<24^mr>>>8,re[le][li]=jt=jt<<24^jt>>>8;for(le=0;le<5;le++)fe[le]=fe[le].slice(0),re[le]=re[le].slice(0);return ee}()),this._tables=[[d[0][0].slice(),d[0][1].slice(),d[0][2].slice(),d[0][3].slice(),d[0][4].slice()],[d[1][0].slice(),d[1][1].slice(),d[1][2].slice(),d[1][3].slice(),d[1][4].slice()]];var re,ae,me,le=this._tables[0][4],tt=this._tables[1],Ve=fe.length,dt=1;if(4!==Ve&&6!==Ve&&8!==Ve)throw new Error("Invalid aes key size");var Jt=fe.slice(0),ni=[];for(this._key=[Jt,ni],re=Ve;re<4*Ve+28;re++)me=Jt[re-1],(re%Ve==0||8===Ve&&re%Ve==4)&&(me=le[me>>>24]<<24^le[me>>16&255]<<16^le[me>>8&255]<<8^le[255&me],re%Ve==0&&(me=me<<8^me>>>24^dt<<24,dt=dt<<1^283*(dt>>7))),Jt[re]=Jt[re-Ve]^me;for(ae=0;re;ae++,re--)me=Jt[3&ae?re:re-4],ni[ae]=re<=4||ae<4?me:tt[0][le[me>>>24]]^tt[1][le[me>>16&255]]^tt[2][le[me>>8&255]]^tt[3][le[255&me]]}return Z.prototype.decrypt=function(re,ae,me,le,tt,Ve){var li,mr,jt,yn,dt=this._key[1],Jt=re^dt[0],ni=le^dt[1],Ai=me^dt[2],Ri=ae^dt[3],Wh=dt.length/4-2,Ma=4,fs=this._tables[1],Do=fs[0],ia=fs[1],Xu=fs[2],$u=fs[3],Ku=fs[4];for(yn=0;yn<Wh;yn++)li=Do[Jt>>>24]^ia[ni>>16&255]^Xu[Ai>>8&255]^$u[255&Ri]^dt[Ma],mr=Do[ni>>>24]^ia[Ai>>16&255]^Xu[Ri>>8&255]^$u[255&Jt]^dt[Ma+1],jt=Do[Ai>>>24]^ia[Ri>>16&255]^Xu[Jt>>8&255]^$u[255&ni]^dt[Ma+2],Ri=Do[Ri>>>24]^ia[Jt>>16&255]^Xu[ni>>8&255]^$u[255&Ai]^dt[Ma+3],Ma+=4,Jt=li,ni=mr,Ai=jt;for(yn=0;yn<4;yn++)tt[(3&-yn)+Ve]=Ku[Jt>>>24]<<24^Ku[ni>>16&255]<<16^Ku[Ai>>8&255]<<8^Ku[255&Ri]^dt[Ma++],li=Jt,Jt=ni,ni=Ai,Ai=Ri,Ri=li},Z}(),y=function(Z){function ee(){var re;return(re=Z.call(this,a)||this).jobs=[],re.delay=1,re.timeout_=null,re}n(ee,Z);var fe=ee.prototype;return fe.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},fe.push=function(ae){this.jobs.push(ae),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},ee}(a),v=function(ee){return ee<<24|(65280&ee)<<8|(16711680&ee)>>8|ee>>>24},D=function(){function Z(fe,re,ae,me){var le=Z.STEP,tt=new Int32Array(fe.buffer),Ve=new Uint8Array(fe.byteLength),dt=0;for(this.asyncStream_=new y,this.asyncStream_.push(this.decryptChunk_(tt.subarray(dt,dt+le),re,ae,Ve)),dt=le;dt<tt.length;dt+=le)ae=new Uint32Array([v(tt[dt-4]),v(tt[dt-3]),v(tt[dt-2]),v(tt[dt-1])]),this.asyncStream_.push(this.decryptChunk_(tt.subarray(dt,dt+le),re,ae,Ve));this.asyncStream_.push(function(){me(null,function u(Z){return Z.subarray(0,Z.byteLength-Z[Z.byteLength-1])}(Ve))})}return Z.prototype.decryptChunk_=function(re,ae,me,le){return function(){var tt=function(ee,fe,re){var Ve,dt,Jt,ni,Ai,Ri,li,mr,jt,ae=new Int32Array(ee.buffer,ee.byteOffset,ee.byteLength>>2),me=new p(Array.prototype.slice.call(fe)),le=new Uint8Array(ee.byteLength),tt=new Int32Array(le.buffer);for(Ve=re[0],dt=re[1],Jt=re[2],ni=re[3],jt=0;jt<ae.length;jt+=4)Ai=v(ae[jt]),Ri=v(ae[jt+1]),li=v(ae[jt+2]),mr=v(ae[jt+3]),me.decrypt(Ai,Ri,li,mr,tt,jt),tt[jt]=v(tt[jt]^Ve),tt[jt+1]=v(tt[jt+1]^dt),tt[jt+2]=v(tt[jt+2]^Jt),tt[jt+3]=v(tt[jt+3]^ni),Ve=Ai,dt=Ri,Jt=li,ni=mr;return le}(re,ae,me);le.set(tt,re.byteOffset)}},i(Z,null,[{key:"STEP",get:function(){return 32e3}}]),Z}(),ie=(typeof window<"u"?window:typeof s<"u"?s:typeof self<"u"?self:{}).BigInt||Number;ie("0x1"),ie("0x100"),ie("0x10000"),ie("0x1000000"),ie("0x100000000"),ie("0x10000000000"),ie("0x1000000000000"),ie("0x100000000000000"),ie("0x10000000000000000");self.onmessage=function(Z){var ee=Z.data,fe=new Uint8Array(ee.encrypted.bytes,ee.encrypted.byteOffset,ee.encrypted.byteLength),re=new Uint32Array(ee.key.bytes,ee.key.byteOffset,ee.key.byteLength/4),ae=new Uint32Array(ee.iv.bytes,ee.iv.byteOffset,ee.iv.byteLength/4);new D(fe,re,ae,function(me,le){self.postMessage(function(ee){var fe={};return Object.keys(ee).forEach(function(re){var ae=ee[re];fe[re]=function(ee){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(ee):ee&&ee.buffer instanceof ArrayBuffer}(ae)?{bytes:ae.buffer,byteOffset:ae.byteOffset,byteLength:ae.byteLength}:ae}),fe}({source:ee.source,decrypted:le}),[le.buffer])})}})),Rg=Jf(Lg),Mg=function(r){var t=r.default?"main":"alternative";return r.characteristics&&r.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},xo=function(r,t){r.abort(),r.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},Hu=function(r,t){t.activePlaylistLoader=r,r.load()},ju={AUDIO:function(r,t){return function(){var e=t.mediaTypes[r],n=t.blacklistCurrentPlaylist;xo(t.segmentLoaders[r],e);var a=e.activeTrack(),u=e.activeGroup(),c=(u.filter(function(y){return y.default})[0]||u[0]).id,d=e.tracks[c];if(a!==d){for(var p in z.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),e.tracks)e.tracks[p].enabled=e.tracks[p]===d;e.onTrackChanged()}else n({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(r,t){return function(){var i=t.segmentLoaders[r],e=t.mediaTypes[r];z.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),xo(i,e);var n=e.activeTrack();n&&(n.mode="disabled"),e.onTrackChanged()}}},Ah={AUDIO:function(r,t,i){if(t){var e=i.tech,n=i.requestOptions,a=i.segmentLoaders[r];t.on("loadedmetadata",function(){var u=t.media();a.playlist(u,n),(!e.paused()||u.endList&&"none"!==e.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),n),e.paused()||a.load()}),t.on("error",ju[r](r,i))}},SUBTITLES:function(r,t,i){var e=i.tech,n=i.requestOptions,a=i.segmentLoaders[r],u=i.mediaTypes[r];t.on("loadedmetadata",function(){var c=t.media();a.playlist(c,n),a.track(u.activeTrack()),(!e.paused()||c.endList&&"none"!==e.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),n),e.paused()||a.load()}),t.on("error",ju[r](r,i))}},Ug={AUDIO:function(r,t){var i=t.vhs,e=t.sourceType,n=t.segmentLoaders[r],a=t.requestOptions,u=t.master.mediaGroups,c=t.mediaTypes[r],d=c.groups,p=c.tracks,y=c.logger_,v=t.masterPlaylistLoader,b=fo(v.master);for(var D in(!u[r]||0===Object.keys(u[r]).length)&&(u[r]={main:{default:{default:!0}}},b&&(u[r].main.default.playlists=v.master.playlists)),u[r])for(var I in d[D]||(d[D]=[]),u[r][D]){var P=u[r][D][I],G=void 0;if(b?(y("AUDIO group '"+D+"' label '"+I+"' is a master playlist"),P.isMasterPlaylist=!0,G=null):G="vhs-json"===e&&P.playlists?new ls(P.playlists[0],i,a):P.resolvedUri?new ls(P.resolvedUri,i,a):P.playlists&&"dash"===e?new mo(P.playlists[0],i,a,v):null,P=z.mergeOptions({id:I,playlistLoader:G},P),Ah[r](r,P.playlistLoader,t),d[D].push(P),typeof p[I]>"u"){var ie=new z.AudioTrack({id:I,kind:Mg(P),enabled:!1,language:P.language,default:P.default,label:I});p[I]=ie}}n.on("error",ju[r](r,t))},SUBTITLES:function(r,t){var i=t.tech,e=t.vhs,n=t.sourceType,a=t.segmentLoaders[r],u=t.requestOptions,c=t.master.mediaGroups,d=t.mediaTypes[r],p=d.groups,y=d.tracks,v=t.masterPlaylistLoader;for(var b in c[r])for(var D in p[b]||(p[b]=[]),c[r][b])if(!c[r][b][D].forced){var I=c[r][b][D],P=void 0;if("hls"===n)P=new ls(I.resolvedUri,e,u);else if("dash"===n){if(!I.playlists.filter(function(ye){return ye.excludeUntil!==1/0}).length)return;P=new mo(I.playlists[0],e,u,v)}else"vhs-json"===n&&(P=new ls(I.playlists?I.playlists[0]:I.resolvedUri,e,u));if(I=z.mergeOptions({id:D,playlistLoader:P},I),Ah[r](r,I.playlistLoader,t),p[b].push(I),typeof y[D]>"u"){var ie=i.addRemoteTextTrack({id:D,kind:"subtitles",default:I.default&&I.autoselect,language:I.language,label:D},!1).track;y[D]=ie}}a.on("error",ju[r](r,t))},"CLOSED-CAPTIONS":function(r,t){var i=t.tech,e=t.master.mediaGroups,n=t.mediaTypes[r],a=n.groups,u=n.tracks;for(var c in e[r])for(var d in a[c]||(a[c]=[]),e[r][c]){var p=e[r][c][d];if(/^(?:CC|SERVICE)/.test(p.instreamId)){var y=i.options_.vhs&&i.options_.vhs.captionServices||{},v={label:d,language:p.language,instreamId:p.instreamId,default:p.default&&p.autoselect};if(y[v.instreamId]&&(v=z.mergeOptions(v,y[v.instreamId])),void 0===v.default&&delete v.default,a[c].push(z.mergeOptions({id:d},p)),typeof u[d]>"u"){var b=i.addRemoteTextTrack({id:v.instreamId,kind:"captions",default:v.default,language:v.language,label:v.label},!1).track;u[d]=b}}}}},Vg=function s(r,t){for(var i=0;i<r.length;i++)if(Du(t,r[i])||r[i].playlists&&s(r[i].playlists,t))return!0;return!1},jg={AUDIO:function(r,t){return function(){var i=t.mediaTypes[r].tracks;for(var e in i)if(i[e].enabled)return i[e];return null}},SUBTITLES:function(r,t){return function(){var i=t.mediaTypes[r].tracks;for(var e in i)if("showing"===i[e].mode||"hidden"===i[e].mode)return i[e];return null}}},Xg=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],$g=function(r){return this.audioSegmentLoader_[r]+this.mainSegmentLoader_[r]},Yg=function(s){function r(i){var e;e=s.call(this)||this;var n=i.src,a=i.handleManifestRedirects,u=i.withCredentials,c=i.tech,d=i.bandwidth,p=i.externVhs,y=i.useCueTags,v=i.blacklistDuration,b=i.enableLowInitialPlaylist,D=i.sourceType,I=i.cacheEncryptionKeys,P=i.experimentalBufferBasedABR,G=i.experimentalLeastPixelDiffSelector,ie=i.captionServices;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");var ye=i.maxPlaylistRetries;(null===ye||typeof ye>"u")&&(ye=1/0),Ln=p,e.experimentalBufferBasedABR=!!P,e.experimentalLeastPixelDiffSelector=!!G,e.withCredentials=u,e.tech_=c,e.vhs_=c.vhs,e.sourceType_=D,e.useCueTags_=y,e.blacklistDuration=v,e.maxPlaylistRetries=ye,e.enableLowInitialPlaylist=b,e.useCueTags_&&(e.cueTagsTrack_=e.tech_.addTextTrack("metadata","ad-cues"),e.cueTagsTrack_.inBandMetadataTrackDispatchType=""),e.requestOptions_={withCredentials:u,handleManifestRedirects:a,maxPlaylistRetries:ye,timeout:null},e.on("error",e.pauseLoading),e.mediaTypes_=function(){var r={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){r[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Xt,activeTrack:Xt,getActiveGroup:Xt,onGroupChanged:Xt,onTrackChanged:Xt,lastTrack_:null,logger_:Qr("MediaGroups["+t+"]")}}),r}(),e.mediaSource=new(M().MediaSource),e.handleDurationChange_=e.handleDurationChange_.bind(pe(e)),e.handleSourceOpen_=e.handleSourceOpen_.bind(pe(e)),e.handleSourceEnded_=e.handleSourceEnded_.bind(pe(e)),e.mediaSource.addEventListener("durationchange",e.handleDurationChange_),e.mediaSource.addEventListener("sourceopen",e.handleSourceOpen_),e.mediaSource.addEventListener("sourceended",e.handleSourceEnded_),e.seekable_=z.createTimeRanges(),e.hasPlayed_=!1,e.syncController_=new kg(i),e.segmentMetadataTrack_=c.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,e.decrypter_=new Rg,e.sourceUpdater_=new Sh(e.mediaSource),e.inbandTextTracks_={},e.timelineChangeController_=new Og;var Z={vhs:e.vhs_,parse708captions:i.parse708captions,useDtsForTimestampOffset:i.useDtsForTimestampOffset,captionServices:ie,mediaSource:e.mediaSource,currentTime:e.tech_.currentTime.bind(e.tech_),seekable:function(){return e.seekable()},seeking:function(){return e.tech_.seeking()},duration:function(){return e.duration()},hasPlayed:function(){return e.hasPlayed_},goalBufferLength:function(){return e.goalBufferLength()},bandwidth:d,syncController:e.syncController_,decrypter:e.decrypter_,sourceType:e.sourceType_,inbandTextTracks:e.inbandTextTracks_,cacheEncryptionKeys:I,sourceUpdater:e.sourceUpdater_,timelineChangeController:e.timelineChangeController_,experimentalExactManifestTimings:i.experimentalExactManifestTimings};e.masterPlaylistLoader_="dash"===e.sourceType_?new mo(n,e.vhs_,e.requestOptions_):new ls(n,e.vhs_,e.requestOptions_),e.setupMasterPlaylistLoaderListeners_(),e.mainSegmentLoader_=new Ac(z.mergeOptions(Z,{segmentMetadataTrack:e.segmentMetadataTrack_,loaderType:"main"}),i),e.audioSegmentLoader_=new Ac(z.mergeOptions(Z,{loaderType:"audio"}),i),e.subtitleSegmentLoader_=new wg(z.mergeOptions(Z,{loaderType:"vtt",featuresNativeTextTracks:e.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(re,ae){function me(){c.off("vttjserror",le),re()}function le(){c.off("vttjsloaded",me),ae()}c.one("vttjsloaded",me),c.one("vttjserror",le),c.addWebVttScript_()})}}),i),e.setupSegmentLoaderListeners_(),e.experimentalBufferBasedABR&&(e.masterPlaylistLoader_.one("loadedplaylist",function(){return e.startABRTimer_()}),e.tech_.on("pause",function(){return e.stopABRTimer_()}),e.tech_.on("play",function(){return e.startABRTimer_()})),Xg.forEach(function(fe){e[fe+"_"]=$g.bind(pe(e),fe)}),e.logger_=Qr("MPC"),e.triggeredFmp4Usage=!1,"none"===e.tech_.preload()?(e.loadOnPlay_=function(){e.loadOnPlay_=null,e.masterPlaylistLoader_.load()},e.tech_.one("play",e.loadOnPlay_)):e.masterPlaylistLoader_.load(),e.timeToLoadedData__=-1,e.mainAppendsToLoadedData__=-1,e.audioAppendsToLoadedData__=-1;var ee="none"===e.tech_.preload()?"play":"loadstart";return e.tech_.one(ee,function(){var fe=Date.now();e.tech_.one("loadeddata",function(){e.timeToLoadedData__=Date.now()-fe,e.mainAppendsToLoadedData__=e.mainSegmentLoader_.mediaAppends,e.audioAppendsToLoadedData__=e.audioSegmentLoader_.mediaAppends})}),e}Y(r,s);var t=r.prototype;return t.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},t.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},t.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return-1===e||-1===n?-1:e+n},t.timeToLoadedData_=function(){return this.timeToLoadedData__},t.checkABR_=function(e){void 0===e&&(e="abr");var n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,e)},t.switchMedia_=function(e,n,a){var u=this.media(),c=u&&(u.id||u.uri),d=e.id||e.uri;c&&c!==d&&(this.logger_("switch media "+c+" -> "+d+" from "+n),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+n})),this.masterPlaylistLoader_.media(e,a)},t.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=M().setInterval(function(){return e.checkABR_()},250)},t.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(M().clearInterval(this.abrTimer_),this.abrTimer_=null)},t.getAudioTrackPlaylists_=function(){var e=this.master(),n=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return n;var c,a=e.mediaGroups.AUDIO,u=Object.keys(a);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)c=this.mediaTypes_.AUDIO.activeTrack();else{var d=a.main||u.length&&a[u[0]];for(var p in d)if(d[p].default){c={label:p};break}}if(!c)return n;var y=[];for(var v in a)if(a[v][c.label]){var b=a[v][c.label];if(b.playlists&&b.playlists.length)y.push.apply(y,b.playlists);else if(b.uri)y.push(b);else if(e.playlists.length)for(var D=0;D<e.playlists.length;D++){var I=e.playlists[D];I.attributes&&I.attributes.AUDIO&&I.attributes.AUDIO===v&&y.push(I)}}return y.length?y:n},t.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var n=e.masterPlaylistLoader_.media(),a=1.5*n.targetDuration*1e3;e.requestOptions_.timeout=co(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?0:a,n.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(n,e.requestOptions_),e.mainSegmentLoader_.load()),function(r){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(D){Ug[D](D,r)});var t=r.mediaTypes,i=r.masterPlaylistLoader,e=r.tech,n=r.vhs,a=r.segmentLoaders,u=a.AUDIO,c=a.main;["AUDIO","SUBTITLES"].forEach(function(D){t[D].activeGroup=function(r,t){return function(i){var n=t.mediaTypes[r].groups,a=t.masterPlaylistLoader.media();if(!a)return null;var u=null;a.attributes[r]&&(u=n[a.attributes[r]]);var c=Object.keys(n);if(!u)if("AUDIO"===r&&c.length>1&&fo(t.master))for(var d=0;d<c.length;d++){var p=n[c[d]];if(Vg(p,a)){u=p;break}}else n.main?u=n.main:1===c.length&&(u=n[c[0]]);return typeof i>"u"?u:null!==i&&u&&u.filter(function(y){return y.id===i.id})[0]||null}}(D,r),t[D].activeTrack=jg[D](D,r),t[D].onGroupChanged=function(r,t){return function(){var i=t.segmentLoaders,e=i[r],n=i.main,a=t.mediaTypes[r],u=a.activeTrack(),c=a.getActiveGroup(),d=a.activePlaylistLoader,p=a.lastGroup_;if((!c||!p||c.id!==p.id)&&(a.lastGroup_=c,a.lastTrack_=u,xo(e,a),c&&!c.isMasterPlaylist)){if(!c.playlistLoader)return void(d&&n.resetEverything());e.resyncLoader(),Hu(c.playlistLoader,a)}}}(D,r),t[D].onGroupChanging=function(r,t){return function(){var i=t.segmentLoaders[r];t.mediaTypes[r].lastGroup_=null,i.abort(),i.pause()}}(D,r),t[D].onTrackChanged=function(r,t){return function(){var i=t.masterPlaylistLoader,e=t.segmentLoaders,n=e[r],a=e.main,u=t.mediaTypes[r],c=u.activeTrack(),d=u.getActiveGroup(),p=u.activePlaylistLoader,y=u.lastTrack_;if((!y||!c||y.id!==c.id)&&(u.lastGroup_=d,u.lastTrack_=c,xo(n,u),d)){if(d.isMasterPlaylist){if(!c||!y||c.id===y.id)return;var v=t.vhs.masterPlaylistController_,b=v.selectPlaylist();if(v.media()===b)return;return u.logger_("track change. Switching master audio from "+y.id+" to "+c.id),i.pause(),a.resetEverything(),void v.fastQualityChange_(b)}if("AUDIO"===r){if(!d.playlistLoader)return a.setAudio(!0),void a.resetEverything();n.setAudio(!0),a.setAudio(!1)}if(p===d.playlistLoader)return void Hu(d.playlistLoader,u);n.track&&n.track(c),n.resetEverything(),Hu(d.playlistLoader,u)}}}(D,r),t[D].getActiveGroup=function(r,t){var i=t.mediaTypes;return function(){var e=i[r].activeTrack();return e?i[r].activeGroup(e):null}}(D,r)});var d=t.AUDIO.activeGroup();if(d){var p=(d.filter(function(D){return D.default})[0]||d[0]).id;t.AUDIO.tracks[p].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(c.setAudio(!1),u.setAudio(!0)):c.setAudio(!0)}i.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(D){return t[D].onGroupChanged()})}),i.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(D){return t[D].onGroupChanging()})});var v=function(){t.AUDIO.onTrackChanged(),e.trigger({type:"usage",name:"vhs-audio-change"}),e.trigger({type:"usage",name:"hls-audio-change"})};for(var b in e.audioTracks().addEventListener("change",v),e.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),n.on("dispose",function(){e.audioTracks().removeEventListener("change",v),e.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),e.clearTracks("audio"),t.AUDIO.tracks)e.audioTracks().addTrack(t.AUDIO.tracks[b])}({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),n),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var n=e.masterPlaylistLoader_.media();if(!n){var a;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(a=e.selectInitialPlaylist()),a||(a=e.selectPlaylist()),!a||!e.shouldSwitchToMedia_(a))return;if(e.initialMedia_=a,e.switchMedia_(e.initialMedia_,"initial"),"vhs-json"!==e.sourceType_||!e.initialMedia_.segments)return;n=e.initialMedia_}e.handleUpdatedMediaPlaylist(n)}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var n=e.masterPlaylistLoader_.media(),a=1.5*n.targetDuration*1e3;e.requestOptions_.timeout=co(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?0:a,e.masterPlaylistLoader_.load(),e.mainSegmentLoader_.playlist(n,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var n=e.masterPlaylistLoader_.media();"playlist-unchanged"!==n.lastExcludeReason_&&e.stuckAtPlaylistEnd_(n)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},t.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},t.triggerPresenceUsage_=function(e,n){var a=e.mediaGroups||{},u=!0,c=Object.keys(a.AUDIO);for(var d in a.AUDIO)for(var p in a.AUDIO[d])a.AUDIO[d][p].uri||(u=!1);u&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(a.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Ln.Playlist.isAes(n)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),c.length&&Object.keys(a.AUDIO[c[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},t.shouldSwitchToMedia_=function(e){var n=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,a=this.tech_.currentTime(),u=this.bufferLowWaterLine(),c=this.bufferHighWaterLine();return function(r){var t=r.currentPlaylist,i=r.buffered,e=r.currentTime,n=r.nextPlaylist,a=r.bufferLowWaterLine,u=r.bufferHighWaterLine,c=r.duration,d=r.experimentalBufferBasedABR,p=r.log;if(!n)return z.log.warn("We received no playlist to switch to. Please check your stream."),!1;var y="allowing switch "+(t&&t.id||"null")+" -> "+n.id;if(!t)return p(y+" as current playlist is not set"),!0;if(n.id===t.id)return!1;var v=!!os(i,e).length;if(!t.endList)return v||"number"!=typeof t.partTargetDuration?(p(y+" as current playlist is live"),!0):(p("not "+y+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var b=uc(i,e),D=d?Ei.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ei.MAX_BUFFER_LOW_WATER_LINE;if(c<D)return p(y+" as duration < max low water line ("+c+" < "+D+")"),!0;var I=n.attributes.BANDWIDTH,P=t.attributes.BANDWIDTH;if(I<P&&(!d||b<u)){var G=y+" as next bandwidth < current bandwidth ("+I+" < "+P+")";return d&&(G+=" and forwardBuffer < bufferHighWaterLine ("+b+" < "+u+")"),p(G),!0}if((!d||I>P)&&b>=a){var ie=y+" as forwardBuffer >= bufferLowWaterLine ("+b+" >= "+a+")";return d&&(ie+=" and next bandwidth > current bandwidth ("+I+" > "+P+")"),p(ie),!0}return p("not "+y+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:a,currentPlaylist:n,nextPlaylist:e,bufferLowWaterLine:u,bufferHighWaterLine:c,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},t.setupSegmentLoaderListeners_=function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){e.checkABR_("bandwidthupdate"),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){e.experimentalBufferBasedABR&&e.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){e.logger_("main segment loader ended"),e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(a){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var n=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var u=e.getCodecsOrExclude_();u&&e.sourceUpdater_.addOrChangeSourceBuffers(u)};this.mainSegmentLoader_.on("trackinfo",n),this.audioSegmentLoader_.on("trackinfo",n),this.mainSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()})},t.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},t.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},t.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},t.fastQualityChange_=function(e){var n=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){n.tech_.setCurrentTime(z.browser.IE_VERSION||z.browser.IS_EDGE?n.tech_.currentTime()+.04:n.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},t.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}},t.setupFirstPlay=function(){var e=this,n=this.masterPlaylistLoader_.media();if(!n||this.tech_.paused()||this.hasPlayed_)return!1;if(!n.endList){var a=this.seekable();if(!a.length)return!1;if(z.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(a.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(a.end(0))}return this.hasPlayed_=!0,this.load(),!0},t.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();typeof e<"u"&&"function"==typeof e.then&&e.then(null,function(n){})}this.trigger("sourceopen")},t.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var n=this.duration();e[e.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}}},t.handleDurationChange_=function(){this.tech_.trigger("durationchange")},t.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var n=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!n||n.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},t.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var a=this.syncController_.getExpiredTime(e,this.duration());if(null===a)return!1;var u=Ln.Playlist.playlistEnd(e,a),c=this.tech_.currentTime(),d=this.tech_.buffered();if(!d.length)return u-c<=vn;var p=d.end(d.length-1);return p-c<=vn&&u-p<=vn},t.blacklistCurrentPlaylist=function(e,n){void 0===e&&(e={});var a=e.playlist||this.masterPlaylistLoader_.media();if(n=n||e.blacklistDuration||this.blacklistDuration,!a)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));a.playlistErrors_++;var y,u=this.masterPlaylistLoader_.master.playlists,c=u.filter(wu),d=1===c.length&&c[0]===a;if(1===u.length&&n!==1/0)return z.log.warn("Problem encountered with playlist "+a.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(d);if(d){var p=!1;u.forEach(function(G){if(G!==a){var ie=G.excludeUntil;typeof ie<"u"&&ie!==1/0&&(p=!0,delete G.excludeUntil)}}),p&&(z.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}y=a.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*n,a.excludeUntil=y,e.reason&&(a.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var v=this.selectPlaylist();if(!v)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(e.internal?this.logger_:z.log.warn)((e.internal?"Internal problem":"Problem")+" encountered with playlist "+a.id+"."+(e.message?" "+e.message:"")+" Switching to playlist "+v.id+"."),v.attributes.AUDIO!==a.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),v.attributes.SUBTITLES!==a.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var I=v.targetDuration/2*1e3||5e3,P="number"==typeof v.lastRequest&&Date.now()-v.lastRequest<=I;return this.switchMedia_(v,"exclude",d||P)},t.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},t.delegateLoaders_=function(e,n){var a=this,u=[],c="all"===e;(c||"main"===e)&&u.push(this.masterPlaylistLoader_);var d=[];(c||"audio"===e)&&d.push("AUDIO"),(c||"subtitle"===e)&&(d.push("CLOSED-CAPTIONS"),d.push("SUBTITLES")),d.forEach(function(p){var y=a.mediaTypes_[p]&&a.mediaTypes_[p].activePlaylistLoader;y&&u.push(y)}),["main","audio","subtitle"].forEach(function(p){var y=a[p+"SegmentLoader_"];y&&(e===p||"all"===e)&&u.push(y)}),u.forEach(function(p){return n.forEach(function(y){"function"==typeof p[y]&&p[y]()})})},t.setCurrentTime=function(e){var n=os(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?n&&n.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},t.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Ln.Playlist.duration(e):1/0:0},t.seekable=function(){return this.seekable_},t.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var a=this.syncController_.getExpiredTime(n,this.duration());if(null!==a){var d,p,u=this.masterPlaylistLoader_.master,c=Ln.Playlist.seekable(n,a,Ln.Playlist.liveEdgeDelay(u,n));0===c.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(a=this.syncController_.getExpiredTime(n,this.duration()))||0===(e=Ln.Playlist.seekable(n,a,Ln.Playlist.liveEdgeDelay(u,n))).length)||(this.seekable_&&this.seekable_.length&&(d=this.seekable_.end(0),p=this.seekable_.start(0)),this.seekable_=e?e.start(0)>c.end(0)||c.start(0)>e.end(0)?c:z.createTimeRanges([[e.start(0)>c.start(0)?e.start(0):c.start(0),e.end(0)<c.end(0)?e.end(0):c.end(0)]]):c,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==d||this.seekable_.start(0)!==p)&&(this.logger_("seekable updated ["+Cf(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")))}}}},t.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1))}else{var a=this.tech_.buffered(),u=Ln.Playlist.duration(this.masterPlaylistLoader_.media());a.length>0&&(u=Math.max(u,a.end(a.length-1))),this.mediaSource.duration!==u&&this.sourceUpdater_.setDuration(u)}},t.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(n){var a=e.mediaTypes_[n].groups;for(var u in a)a[u].forEach(function(c){c.playlistLoader&&c.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},t.master=function(){return this.masterPlaylistLoader_.master},t.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},t.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),a=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!n||!a)},t.getCodecsOrExclude_=function(){var e=this,n={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},a=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();n.video=n.main;var u=vo(this.master(),a),c={},d=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(n.main.hasVideo&&(c.video=u.video||n.main.videoCodec||"avc1.4d400d"),n.main.isMuxed&&(c.video+=","+(u.audio||n.main.audioCodec||rn)),(n.main.hasAudio&&!n.main.isMuxed||n.audio.hasAudio||d)&&(c.audio=u.audio||n.main.audioCodec||n.audio.audioCodec||rn,n.audio.isFmp4=n.main.hasAudio&&!n.main.isMuxed?n.main.isFmp4:n.audio.isFmp4),c.audio||c.video){var v,y={};if(["video","audio"].forEach(function(P){if(c.hasOwnProperty(P)&&!function(G,ie){return G?Bn(ie):tn(ie)}(n[P].isFmp4,c[P])){var G=n[P].isFmp4?"browser":"muxer";y[G]=y[G]||[],y[G].push(c[P]),"audio"===P&&(v=G)}}),d&&v&&a.attributes.AUDIO){var b=a.attributes.AUDIO;this.master().playlists.forEach(function(P){(P.attributes&&P.attributes.AUDIO)===b&&P!==a&&(P.excludeUntil=1/0)}),this.logger_("excluding audio group "+b+" as "+v+' does not support codec(s): "'+c.audio+'"')}if(!Object.keys(y).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var I=[];if(["video","audio"].forEach(function(P){var G=(oi(e.sourceUpdater_.codecs[P]||"")[0]||{}).type,ie=(oi(c[P]||"")[0]||{}).type;G&&ie&&G.toLowerCase()!==ie.toLowerCase()&&I.push('"'+e.sourceUpdater_.codecs[P]+'" -> "'+c[P]+'"')}),I.length)return void this.blacklistCurrentPlaylist({playlist:a,message:"Codec switching not supported: "+I.join(", ")+".",blacklistDuration:1/0,internal:!0})}return c}var D=Object.keys(y).reduce(function(P,G){return P&&(P+=", "),P+(G+' does not support codec(s): "')+y[G].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:a,internal:!0,message:D,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:a,message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},t.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var n=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}}},t.excludeUnsupportedVariants_=function(){var e=this,n=this.master().playlists,a=[];Object.keys(n).forEach(function(u){var c=n[u];if(-1===a.indexOf(c.id)){a.push(c.id);var d=vo(e.master,c),p=[];d.audio&&!tn(d.audio)&&!Bn(d.audio)&&p.push("audio codec "+d.audio),d.video&&!tn(d.video)&&!Bn(d.video)&&p.push("video codec "+d.video),d.text&&"stpp.ttml.im1t"===d.text&&p.push("text codec "+d.text),p.length&&(c.excludeUntil=1/0,e.logger_("excluding "+c.id+" for unsupported: "+p.join(", ")))}})},t.excludeIncompatibleVariants_=function(e){var n=this,a=[],u=this.master().playlists,c=ta(oi(e)),d=Nu(c),p=c.video&&oi(c.video)[0]||null,y=c.audio&&oi(c.audio)[0]||null;Object.keys(u).forEach(function(v){var b=u[v];if(-1===a.indexOf(b.id)&&b.excludeUntil!==1/0){a.push(b.id);var D=[],I=vo(n.masterPlaylistLoader_.master,b),P=Nu(I);if(I.audio||I.video){if(P!==d&&D.push('codec count "'+P+'" !== "'+d+'"'),!n.sourceUpdater_.canChangeType()){var G=I.video&&oi(I.video)[0]||null,ie=I.audio&&oi(I.audio)[0]||null;G&&p&&G.type.toLowerCase()!==p.type.toLowerCase()&&D.push('video codec "'+G.type+'" !== "'+p.type+'"'),ie&&y&&ie.type.toLowerCase()!==y.type.toLowerCase()&&D.push('audio codec "'+ie.type+'" !== "'+y.type+'"')}D.length&&(b.excludeUntil=1/0,n.logger_("blacklisting "+b.id+": "+D.join(" && ")))}}})},t.updateAdCues_=function(e){var n=0,a=this.seekable();a.length&&(n=a.start(0)),function(r,t,i){if(void 0===i&&(i=0),r.segments)for(var n,e=i,a=0;a<r.segments.length;a++){var u=r.segments[a];if(n||(n=Dg(t,e+u.duration/2)),n){if("cueIn"in u){n.endTime=e,n.adEndTime=e,e+=u.duration,n=null;continue}if(e<n.endTime){e+=u.duration;continue}n.endTime+=u.duration}else if("cueOut"in u&&((n=new(M().VTTCue)(e,e+u.duration,u.cueOut)).adStartTime=e,n.adEndTime=e+parseFloat(u.cueOut),t.addCue(n)),"cueOutCont"in u){var c=u.cueOutCont.split("/").map(parseFloat),d=c[0],p=c[1];(n=new(M().VTTCue)(e,e+u.duration,"")).adStartTime=e-d,n.adEndTime=n.adStartTime+p,t.addCue(n)}e+=u.duration}}(e,this.cueTagsTrack_,n)},t.goalBufferLength=function(){var e=this.tech_.currentTime(),n=Ei.GOAL_BUFFER_LENGTH,a=Ei.GOAL_BUFFER_LENGTH_RATE,u=Math.max(n,Ei.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+e*a,u)},t.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),n=Ei.BUFFER_LOW_WATER_LINE,a=Ei.BUFFER_LOW_WATER_LINE_RATE,u=Math.max(n,Ei.MAX_BUFFER_LOW_WATER_LINE),c=Math.max(n,Ei.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+e*a,this.experimentalBufferBasedABR?c:u)},t.bufferHighWaterLine=function(){return Ei.BUFFER_HIGH_WATER_LINE},r}(z.EventTarget),Jg=function(r,t,i){var e=r.masterPlaylistController_,u=e[(r.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(e);if(t.attributes){var c=t.attributes.RESOLUTION;this.width=c&&c.width,this.height=c&&c.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=vo(e.master(),t),this.playlist=t,this.id=i,this.enabled=function(r,t,i){return function(e){var n=r.master.playlists[t],a=dc(n),u=wu(n);return typeof e>"u"?u:(e?delete n.disabled:n.disabled=!0,e!==u&&!a&&(i(),r.trigger(e?"renditionenabled":"renditiondisabled")),e)}}(r.playlists,t.id,u)},wh=["seeking","seeked","pause","playing","error"],ev=function(){function s(t){var i=this;this.masterPlaylistController_=t.masterPlaylistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Qr("PlaybackWatcher"),this.logger_("initialize");var e=function(){return i.monitorCurrentTime_()},n=function(){return i.monitorCurrentTime_()},a=function(){return i.techWaiting_()},u=function(){return i.cancelTimer_()},c=this.masterPlaylistController_,d=["main","subtitle","audio"],p={};d.forEach(function(v){p[v]={reset:function(){return i.resetSegmentDownloads_(v)},updateend:function(){return i.checkSegmentDownloads_(v)}},c[v+"SegmentLoader_"].on("appendsdone",p[v].updateend),c[v+"SegmentLoader_"].on("playlistupdate",p[v].reset),i.tech_.on(["seeked","seeking"],p[v].reset)});var y=function(b){["main","audio"].forEach(function(D){c[D+"SegmentLoader_"][b]("appended",i.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){i.fixesBadSeeks_()&&(i.consecutiveUpdates=0,i.lastRecordedTime=i.tech_.currentTime(),y("off"))},this.clearSeekingAppendCheck_=function(){return y("off")},this.watchForBadSeeking_=function(){i.clearSeekingAppendCheck_(),y("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",a),this.tech_.on(wh,u),this.tech_.on("canplay",n),this.tech_.one("play",e),this.dispose=function(){i.clearSeekingAppendCheck_(),i.logger_("dispose"),i.tech_.off("waiting",a),i.tech_.off(wh,u),i.tech_.off("canplay",n),i.tech_.off("play",e),i.tech_.off("seeking",i.watchForBadSeeking_),i.tech_.off("seeked",i.clearSeekingAppendCheck_),d.forEach(function(v){c[v+"SegmentLoader_"].off("appendsdone",p[v].updateend),c[v+"SegmentLoader_"].off("playlistupdate",p[v].reset),i.tech_.off(["seeked","seeking"],p[v].reset)}),i.checkCurrentTimeTimeout_&&M().clearTimeout(i.checkCurrentTimeTimeout_),i.cancelTimer_()}}var r=s.prototype;return r.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&M().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=M().setTimeout(this.monitorCurrentTime_.bind(this),250)},r.resetSegmentDownloads_=function(i){var e=this.masterPlaylistController_[i+"SegmentLoader_"];this[i+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+i+" loader"),this[i+"StalledDownloads_"]=0,this[i+"Buffered_"]=e.buffered_()},r.checkSegmentDownloads_=function(i){var e=this.masterPlaylistController_,n=e[i+"SegmentLoader_"],a=n.buffered_(),u=function(r,t){if(r===t)return!1;if(!r&&t||!t&&r||r.length!==t.length)return!0;for(var i=0;i<r.length;i++)if(r.start(i)!==t.start(i)||r.end(i)!==t.end(i))return!0;return!1}(this[i+"Buffered_"],a);this[i+"Buffered_"]=a,u?this.resetSegmentDownloads_(i):(this[i+"StalledDownloads_"]++,this.logger_("found #"+this[i+"StalledDownloads_"]+" "+i+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:Oa(a)}),!(this[i+"StalledDownloads_"]<10)&&(this.logger_(i+" loader stalled download exclusion"),this.resetSegmentDownloads_(i),this.tech_.trigger({type:"usage",name:"vhs-"+i+"-download-exclusion"}),"subtitle"!==i&&e.blacklistCurrentPlaylist({message:"Excessive "+i+" segment downloading detected."},1/0)))},r.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var i=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===i&&(!e.length||i+vn>=e.end(e.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&i===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):i===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=i)}},r.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},r.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var u,e=this.seekable(),n=this.tech_.currentTime();if(this.afterSeekableWindow_(e,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(u=e.end(e.length-1)),this.beforeSeekableWindow_(e,n)){var d=e.start(0);u=d+(d===e.end(0)?0:vn)}if(typeof u<"u")return this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+Cf(e)+". Seeking to "+u+"."),this.tech_.setCurrentTime(u),!0;for(var p=this.masterPlaylistController_.sourceUpdater_,y=this.tech_.buffered(),v=p.audioBuffer?p.audioBuffered():null,b=p.videoBuffer?p.videoBuffered():null,D=this.media(),I=D.partTargetDuration?D.partTargetDuration:2*(D.targetDuration-ea),P=[v,b],G=0;G<P.length;G++)if(P[G]&&uc(P[G],n)<I)return!1;var ye=er(y,n);return 0!==ye.length&&(u=ye.start(0)+vn,this.logger_("Buffered region starts ("+ye.start(0)+")  just beyond seek point ("+n+"). Seeking to "+u+"."),this.tech_.setCurrentTime(u),!0)},r.waiting_=function(){if(!this.techWaiting_()){var i=this.tech_.currentTime(),e=this.tech_.buffered(),n=os(e,i);if(n.length&&i+3<=n.end(0))return this.cancelTimer_(),this.tech_.setCurrentTime(i),this.logger_("Stopped at "+i+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})}},r.techWaiting_=function(){var i=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(i,e)){var n=i.end(i.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var a=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,u=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:a.audioBuffered(),videoBuffered:a.videoBuffered(),currentTime:e}))return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var d=er(u,e);if(d.length>0){var p=d.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+p+", seeking to "+d.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*p,e),!0}return!1},r.afterSeekableWindow_=function(i,e,n,a){if(void 0===a&&(a=!1),!i.length)return!1;var u=i.end(i.length-1)+vn;return!n.endList&&a&&(u=i.end(i.length-1)+3*n.targetDuration),e>u},r.beforeSeekableWindow_=function(i,e){return!!(i.length&&i.start(0)>0&&e<i.start(0)-this.liveRangeSafeTimeDelta)},r.videoUnderflow_=function(i){var e=i.videoBuffered,n=i.audioBuffered,a=i.currentTime;if(e){var u;if(e.length&&n.length){var c=os(e,a-3),d=os(e,a),p=os(n,a);p.length&&!d.length&&c.length&&(u={start:c.end(0),end:p.end(0)})}else er(e,a).length||(u=this.gapFromVideoUnderflow_(e,a));return!!u&&(this.logger_("Encountered a gap in video from "+u.start+" to "+u.end+". Seeking to current time "+a),!0)}},r.skipTheGap_=function(i){var e=this.tech_.buffered(),n=this.tech_.currentTime(),a=er(e,n);this.cancelTimer_(),0!==a.length&&n===i&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",i,"nextRange start:",a.start(0)),this.tech_.setCurrentTime(a.start(0)+ea),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},r.gapFromVideoUnderflow_=function(i,e){for(var n=function(r){if(r.length<2)return z.createTimeRanges();for(var t=[],i=1;i<r.length;i++){var e=r.end(i-1),n=r.start(i);t.push([e,n])}return z.createTimeRanges(t)}(i),a=0;a<n.length;a++){var u=n.start(a),c=n.end(a);if(e-u<4&&e-u>2)return{start:u,end:c}}return null},s}(),tv={errorInterval:30,getSource:function(r){return r(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},iv=function s(r,t){var i=0,e=0,n=z.mergeOptions(tv,t);r.ready(function(){r.trigger({type:"usage",name:"vhs-error-reload-initialized"}),r.trigger({type:"usage",name:"hls-error-reload-initialized"})});var a=function(){e&&r.currentTime(e)},u=function(v){null!=v&&(e=r.duration()!==1/0&&r.currentTime()||0,r.one("loadedmetadata",a),r.src(v),r.trigger({type:"usage",name:"vhs-error-reload"}),r.trigger({type:"usage",name:"hls-error-reload"}),r.play())},c=function(){return Date.now()-i<1e3*n.errorInterval?(r.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void r.trigger({type:"usage",name:"hls-error-reload-canceled"})):n.getSource&&"function"==typeof n.getSource?(i=Date.now(),n.getSource.call(r,u)):void z.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},d=function y(){r.off("loadedmetadata",a),r.off("error",c),r.off("dispose",y)};r.on("error",c),r.on("dispose",d),r.reloadSourceOnError=function(v){d(),s(r,v)}},Ci={PlaylistLoader:ls,Playlist:dr,utils:Wm,STANDARD_PLAYLIST_SELECTOR:dh,INITIAL_PLAYLIST_SELECTOR:function(){var r=this,t=this.playlists.master.playlists.filter(dr.isEnabled);return Jr(t,function(e,n){return Sc(e,n)}),t.filter(function(e){return!!vo(r.playlists.master,e).video})[0]||null},lastBandwidthSelector:dh,movingAverageBandwidthSelector:function(r){var t=-1,i=-1;if(r<0||r>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var e=this.useDevicePixelRatio&&M().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(t=r*this.systemBandwidth+(1-r)*t,i=this.systemBandwidth),ch(this.playlists.master,t,parseInt(Gi(this.tech_.el(),"width"),10)*e,parseInt(Gi(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:Sc,comparePlaylistResolution:function(r,t){var i,e;return r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(i=r.attributes.RESOLUTION.width),i=i||M().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(e=t.attributes.RESOLUTION.width),i===(e=e||M().Number.MAX_VALUE)&&r.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?r.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-e},xhr:vc()};Object.keys(Ei).forEach(function(s){Object.defineProperty(Ci,s,{get:function(){return z.log.warn("using Vhs."+s+" is UNSAFE be sure you know what you are doing"),Ei[s]},set:function(t){z.log.warn("using Vhs."+s+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?z.log.warn("value of Vhs."+s+" must be greater than or equal to 0"):Ei[s]=t}})});var Ih="videojs-vhs",Ph=function(r,t){for(var i=t.media(),e=-1,n=0;n<r.length;n++)if(r[n].id===i.id){e=n;break}r.selectedIndex_=e,r.trigger({selectedIndex:e,type:"change"})};Ci.canPlaySource=function(){return z.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var kh=function(){if(!M().localStorage)return null;var r=M().localStorage.getItem(Ih);if(!r)return null;try{return JSON.parse(r)}catch{return null}};Ci.supportsNativeHls=function(){if(!ue()||!ue().createElement)return!1;var s=ue().createElement("video");return!!z.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(s.canPlayType(t))})}(),Ci.supportsNativeDash=!!(ue()&&ue().createElement&&z.getTech("Html5").isSupported())&&/maybe|probably/i.test(ue().createElement("video").canPlayType("application/dash+xml")),Ci.supportsTypeNatively=function(s){return"hls"===s?Ci.supportsNativeHls:"dash"===s&&Ci.supportsNativeDash},Ci.isSupported=function(){return z.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var So=function(s){function r(i,e,n){var a;if(a=s.call(this,e,z.mergeOptions(n.hls,n.vhs))||this,n.hls&&Object.keys(n.hls).length&&z.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof n.initialBandwidth&&(a.options_.bandwidth=n.initialBandwidth),a.logger_=Qr("VhsHandler"),e.options_&&e.options_.playerId){var u=z(e.options_.playerId);u.hasOwnProperty("hls")||Object.defineProperty(u,"hls",{get:function(){return z.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"hls-player-access"}),pe(a)},configurable:!0}),u.hasOwnProperty("vhs")||Object.defineProperty(u,"vhs",{get:function(){return z.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"vhs-player-access"}),pe(a)},configurable:!0}),u.hasOwnProperty("dash")||Object.defineProperty(u,"dash",{get:function(){return z.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),pe(a)},configurable:!0}),a.player_=u}if(a.tech_=e,a.source_=i,a.stats={},a.ignoreNextSeekingEvent_=!1,a.setOptions_(),a.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return a.on(ue(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(c){var d=ue().fullscreenElement||ue().webkitFullscreenElement||ue().mozFullScreenElement||ue().msFullscreenElement;d&&d.contains(a.tech_.el())?a.masterPlaylistController_.fastQualityChange_():a.masterPlaylistController_.checkABR_()}),a.on(a.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),a.on(a.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),a.on(a.tech_,"play",a.play),a}Y(r,s);var t=r.prototype;return t.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var n=kh();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Ei.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ei.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(a){typeof e.source_[a]<"u"&&(e.options_[a]=e.source_[a])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},t.src=function(e,n){var a=this;if(e){this.setOptions_(),this.options_.src=function(r){return 0===r.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(r.substring(r.indexOf(",")+1)):r}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ci,this.options_.sourceType=Tn(n),this.options_.seekTo=function(d){a.tech_.setCurrentTime(d)},this.options_.smoothQualityChange&&z.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Yg(this.options_);var u=z.mergeOptions({liveRangeSafeTimeDelta:vn},this.options_,{seekable:function(){return a.seekable()},media:function(){return a.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new ev(u),this.masterPlaylistController_.on("error",function(){var d=z.players[a.tech_.options_.playerId],p=a.masterPlaylistController_.error;"object"!=typeof p||p.code?"string"==typeof p&&(p={message:p,code:3}):p.code=3,d.error(p)});var c=this.options_.experimentalBufferBasedABR?Ci.movingAverageBandwidthSelector(.55):Ci.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):c.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Ci.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(p){this.masterPlaylistController_.selectPlaylist=p.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(p){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=p,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var p=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,y=M().navigator.connection||M().navigator.mozConnection||M().navigator.webkitConnection,v=1e7;if(this.options_.useNetworkInformationApi&&y){var b=1e3*y.downlink*1e3;p=b>=v&&p>=v?Math.max(p,b):b}return p},set:function(p){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=p,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set:function(){z.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return a.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return a.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return a.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return a.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return a.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return a.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return a.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return a.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return a.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return a.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return a.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return a.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return a.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Oa(a.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return a.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return a.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return a.tech_.name_},enumerable:!0},duration:{get:function(){return a.tech_.duration()},enumerable:!0},master:{get:function(){return a.playlists.master},enumerable:!0},playerDimensions:{get:function(){return a.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Oa(a.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return a.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){a.options_.useBandwidthFromLocalStorage&&function(r){if(!M().localStorage)return!1;var t=kh();t=t?z.mergeOptions(t,r):r;try{M().localStorage.setItem(Ih,JSON.stringify(t))}catch{return!1}}({bandwidth:a.bandwidth,throughput:Math.round(a.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(r){r.representations=function(){var t=r.masterPlaylistController_.master(),i=fo(t)?r.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return i?i.filter(function(e){return!dc(e)}).map(function(e,n){return new Jg(r,e,e.id)}):[]}}(a)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){a.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=M().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},t.createKeySessions_=function(){var e=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(r){var t=r.player,i=r.sourceKeySystems,e=r.audioMedia,n=r.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var u=function(r,t){return r.reduce(function(i,e){if(!e.contentProtection)return i;var n=t.reduce(function(a,u){var c=e.contentProtection[u];return c&&c.pssh&&(a[u]={pssh:c.pssh}),a},{});return Object.keys(n).length&&i.push(n),i},[])}(e?n.concat([e]):n,Object.keys(i)),c=[],d=[];return u.forEach(function(p){d.push(new Promise(function(y,v){t.tech_.one("keysessioncreated",y)})),c.push(new Promise(function(y,v){t.eme.initializeMediaKeys({keySystems:p},function(b){b?v(b):y()})}))}),Promise.race([Promise.all(c),Promise.race(d)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:n&&n.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(a){e.logger_("error while creating EME key session",a),e.player_.error({message:"Failed to initialize media keys for EME",code:3})})},t.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},t.setupEme_=function(){var e=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=function(r){var t=r.player,a=function(r,t,i){if(!r)return r;var e={};t&&t.attributes&&t.attributes.CODECS&&(e=ta(oi(t.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(e.audio=i.attributes.CODECS);var n=_i(e.video),a=_i(e.audio),u={};for(var c in r)u[c]={},a&&(u[c].audioContentType=a),n&&(u[c].videoContentType=n),t.contentProtection&&t.contentProtection[c]&&t.contentProtection[c].pssh&&(u[c].pssh=t.contentProtection[c].pssh),"string"==typeof r[c]&&(u[c].url=r[c]);return z.mergeOptions(r,u)}(r.sourceKeySystems,r.media,r.audioMedia);return!(!a||(t.currentSource().keySystems=a,a&&!t.eme&&(z.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))}({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:n&&n.media()});this.player_.tech_.on("keystatuschange",function(u){if("output-restricted"===u.status){var c=e.masterPlaylistController_.master();if(c&&c.playlists){var p,d=[];c.playlists.forEach(function(y){y&&y.attributes&&y.attributes.RESOLUTION&&y.attributes.RESOLUTION.height>=720&&(!y.excludeUntil||y.excludeUntil<1/0)&&(y.excludeUntil=1/0,d.push(y))}),d.length&&((p=z.log).warn.apply(p,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(d)),e.masterPlaylistController_.fastQualityChange_())}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==z.browser.IE_VERSION&&a?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},t.setupQualityLevels_=function(){var e=this,n=z.players[this.tech_.options_.playerId];!n||!n.qualityLevels||this.qualityLevels_||(this.qualityLevels_=n.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(r,t){t.representations().forEach(function(i){r.addQualityLevel(i)}),Ph(r,t.playlists)}(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){Ph(e.qualityLevels_,e.playlists)}))},r.version=function(){return{"@videojs/http-streaming":"2.16.3","mux.js":"6.0.1","mpd-parser":"0.22.1","m3u8-parser":"4.8.0","aes-decrypter":"3.1.3"}},t.version=function(){return this.constructor.version()},t.canChangeType=function(){return Sh.canChangeType()},t.play=function(){this.masterPlaylistController_.play()},t.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},t.duration=function(){return this.masterPlaylistController_.duration()},t.seekable=function(){return this.masterPlaylistController_.seekable()},t.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&M().URL.revokeObjectURL&&(M().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),s.prototype.dispose.call(this)},t.convertToProgramTime=function(e,n){return function(r){var t=r.playlist,i=r.time,e=void 0===i?void 0:i,n=r.callback;if(!n)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===e)return n({message:"getProgramTime: playlist and time must be provided"});var a=function(r,t){if(!t||!t.segments||0===t.segments.length)return null;for(var e,i=0,n=0;n<t.segments.length&&!(r<=(i=(e=t.segments[n]).videoTimingInfo?e.videoTimingInfo.transmuxedPresentationEnd:i+e.duration));n++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<r)return null;if(r>i){if(r>i+.25*a.duration)return null;e=a}return{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:i-e.duration,type:e.videoTimingInfo?"accurate":"estimate"}}(e,t);if(!a)return n({message:"valid programTime was not found"});if("estimate"===a.type)return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var u={mediaSeconds:e},c=function(r,t){if(!t.dateTimeObject)return null;var a=r-(t.videoTimingInfo.transmuxedPresentationStart+t.videoTimingInfo.transmuxerPrependedSeconds);return new Date(t.dateTimeObject.getTime()+1e3*a)}(e,a.segment);return c&&(u.programDateTime=c.toISOString()),n(null,u)}({playlist:this.masterPlaylistController_.media(),time:e,callback:n})},t.seekToProgramTime=function(e,n,a,u){return void 0===a&&(a=!0),void 0===u&&(u=2),Xf({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:u,pauseAfterSeek:a,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})},r}(z.getComponent("Component")),Eo={name:"videojs-http-streaming",VERSION:"2.16.3",canHandleSource:function(r,t){void 0===t&&(t={});var i=z.mergeOptions(z.options,t);return Eo.canPlayType(r.type,i)},handleSource:function(r,t,i){void 0===i&&(i={});var e=z.mergeOptions(z.options,i);return t.vhs=new So(r,t,e),z.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return z.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=vc(),t.vhs.src(r.src,r.type),t.vhs},canPlayType:function(r,t){var i=Tn(r);if(!i)return"";var e=Eo.getOverrideNative(t);return!Ci.supportsTypeNatively(i)||e?"maybe":""},getOverrideNative:function(r){void 0===r&&(r={});var i=r.vhs,n=r.hls,c=(void 0===i?{}:i).overrideNative,p=(void 0===n?{}:n).overrideNative;return void 0!==p&&p||(void 0===c?!(z.browser.IS_ANY_SAFARI||z.browser.IS_IOS):c)}};Bn("avc1.4d400d,mp4a.40.2")&&z.getTech("Html5").registerSourceHandler(Eo,0),z.VhsHandler=So,Object.defineProperty(z,"HlsHandler",{get:function(){return z.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),So},configurable:!0}),z.VhsSourceHandler=Eo,Object.defineProperty(z,"HlsSourceHandler",{get:function(){return z.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Eo},configurable:!0}),z.Vhs=Ci,Object.defineProperty(z,"Hls",{get:function(){return z.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Ci},configurable:!0}),z.use||(z.registerComponent("Hls",Ci),z.registerComponent("Vhs",Ci)),z.options.vhs=z.options.vhs||{},z.options.hls=z.options.hls||{},z.getPlugin&&z.getPlugin("reloadSourceOnError")||(z.registerPlugin||z.plugin)("reloadSourceOnError",function(r){iv(this,r)});const Rn=z;var Lh=function(r,t){r=r.filter(function(a,u,c){return c.indexOf(a)===u});var i=!1,e={},n=[];r.forEach(function(a){var u=Rn.xhr(a,function(c,d){if(!i){if(n.splice(n.indexOf(u),1),c||!d||200!==d.statusCode&&206!==d.statusCode&&0!==d.statusCode)return t({message:c?c.message:"Request failed",request:u}),i=!0,void n.forEach(function(y){return y.abort()});e[a]=u.responseText,Object.keys(e).length===r.length&&t(null,e)}});n.push(u)})},Rh=function(r){return!!r&&"object"==typeof r},Dr=function s(){for(var r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];return t.reduce(function(e,n){return Object.keys(n).forEach(function(a){e[a]=Array.isArray(e[a])&&Array.isArray(n[a])?e[a].concat(n[a]):Rh(e[a])&&Rh(n[a])?s(e[a],n[a]):n[a]}),e},{})},Wu=function(r){return r.reduce(function(t,i){return t.concat(i)},[])},Mh=function(r){if(!r.length)return[];for(var t=[],i=0;i<r.length;i++)t.push(r[i]);return t};typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"&&self;var Fh=function mv(s,r){return s(r={exports:{}},r.exports),r.exports}(function(s,r){var i,e,n,a,u;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,e=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s.exports=u={buildAbsoluteURL:function(c,d,p){if(p=p||{},c=c.trim(),!(d=d.trim())){if(!p.alwaysNormalize)return c;var y=u.parseURL(c);if(!y)throw new Error("Error trying to parse base URL.");return y.path=u.normalizePath(y.path),u.buildURLFromParts(y)}var v=u.parseURL(d);if(!v)throw new Error("Error trying to parse relative URL.");if(v.scheme)return p.alwaysNormalize?(v.path=u.normalizePath(v.path),u.buildURLFromParts(v)):d;var b=u.parseURL(c);if(!b)throw new Error("Error trying to parse base URL.");if(!b.netLoc&&b.path&&"/"!==b.path[0]){var D=e.exec(b.path);b.netLoc=D[1],b.path=D[2]}b.netLoc&&!b.path&&(b.path="/");var I={scheme:b.scheme,netLoc:v.netLoc,path:null,params:v.params,query:v.query,fragment:v.fragment};if(!v.netLoc&&(I.netLoc=b.netLoc,"/"!==v.path[0]))if(v.path){var P=b.path,G=P.substring(0,P.lastIndexOf("/")+1)+v.path;I.path=u.normalizePath(G)}else I.path=b.path,v.params||(I.params=b.params,v.query||(I.query=b.query));return null===I.path&&(I.path=p.alwaysNormalize?u.normalizePath(v.path):v.path),u.buildURLFromParts(I)},parseURL:function(c){var d=i.exec(c);return d?{scheme:d[1]||"",netLoc:d[2]||"",path:d[3]||"",params:d[4]||"",query:d[5]||"",fragment:d[6]||""}:null},normalizePath:function(c){for(c=c.split("").reverse().join("").replace(n,"");c.length!==(c=c.replace(a,"")).length;);return c.split("").reverse().join("")},buildURLFromParts:function(c){return c.scheme+c.netLoc+c.path+c.params+c.query+c.fragment}}}),Mc=function(r,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(r)||(r=Fh.buildAbsoluteURL(M().location.href,r)),Fh.buildAbsoluteURL(r,t))},Ao=function(r){var t=r.baseUrl,e=r.source,n=void 0===e?"":e,a=r.range,u=void 0===a?"":a,c=r.indexRange,d=void 0===c?"":c,p={uri:n,resolvedUri:Mc((void 0===t?"":t)||"",n)};if(u||d){var v=(u||d).split("-"),b=parseInt(v[0],10),D=parseInt(v[1],10);p.byterange={length:D-b+1,offset:b}}return p},gv=function(r){return r.offset+"-"+(r.offset+r.length-1)},vv={static:function(r){var i=r.timescale;return{start:0,end:Math.ceil(r.sourceDuration/(r.duration/(void 0===i?1:i)))}},dynamic:function(r){var n=r.timescale,a=void 0===n?1:n,u=r.duration,c=r.start,p=r.minimumUpdatePeriod,v=r.timeShiftBufferDepth,b=void 0===v?1/0:v,D=(r.NOW+r.clientOffset)/1e3,I=r.availabilityStartTime+(void 0===c?0:c),ie=Math.ceil((D+(void 0===p?0:p)-I)*a/u),ye=Math.floor((D-I-b)*a/u),Z=Math.floor((D-I)*a/u);return{start:Math.max(0,ye),end:Math.min(ie,Z)}}},Fc=function(r){var t=r.type,i=void 0===t?"static":t,e=r.duration,n=r.timescale,a=void 0===n?1:n,u=r.sourceDuration,c=vv[i](r),y=function(r,t){for(var i=[],e=r;e<t;e++)i.push(e);return i}(c.start,c.end).map(function(r){return function(t,i){var e=r.duration,n=r.timescale,c=r.startNumber;return{number:(void 0===c?1:c)+t,duration:e/(void 0===n?1:n),timeline:r.periodIndex,time:i*e}}}(r));if("static"===i){var v=y.length-1;y[v].duration=u-e/a*v}return y},Nh=function(r){var t=r.baseUrl,i=r.initialization,e=void 0===i?{}:i,n=r.sourceDuration,a=r.timescale,u=void 0===a?1:a,c=r.indexRange,d=void 0===c?"":c,p=r.duration;if(!t)throw new Error("NO_BASE_URL");var y=Ao({baseUrl:t,source:e.sourceURL,range:e.range}),v=Ao({baseUrl:t,source:t,indexRange:d});if(v.map=y,p){var b=Fc(r);b.length&&(v.duration=b[0].duration,v.timeline=b[0].timeline)}else n&&(v.duration=n/u,v.timeline=0);return v.number=0,[v]},yv=function(r,t,i){for(var e=r.sidx.map?r.sidx.map:null,n=r.sidx.duration,a=r.timeline||0,u=r.sidx.byterange,c=u.offset+u.length,d=t.timescale,p=t.references.filter(function(ee){return 1!==ee.referenceType}),y=[],v=c+t.firstOffset,b=0;b<p.length;b++){var D=t.references[b],I=D.referencedSize,Z=Nh({baseUrl:i,timescale:d,timeline:a,periodIndex:a,duration:D.subsegmentDuration,sourceDuration:n,indexRange:v+"-"+(v+I-1)})[0];e&&(Z.map=e),y.push(Z),v+=I}return r.segments=y,r},Bh=function(r){return function(r){return Object.keys(r).map(function(t){return r[t]})}(r.reduce(function(i,e){var a,n=e.attributes.id+(e.attributes.lang||"");return i[n]?(e.segments[0]&&(e.segments[0].discontinuity=!0),(a=i[n].segments).push.apply(a,e.segments),e.attributes.contentProtection&&(i[n].attributes.contentProtection=e.attributes.contentProtection)):i[n]=e,i},{})).map(function(i){return i.discontinuityStarts=function(r,t){return r.reduce(function(i,e,n){return e.discontinuity&&i.push(n),i},[])}(i.segments),i})},Nc=function(r,t){if(void 0===t&&(t={}),!Object.keys(t).length)return r;for(var i in r){var e=r[i];if(e.sidx){var n=e.sidx.uri+"-"+gv(e.sidx.byterange),a=t[n]&&t[n].sidx;e.sidx&&a&&yv(e,a,e.sidx.resolvedUri)}}return r},Tv=function(r){var t,i=r.attributes,e=r.segments,n=r.sidx,a={attributes:(t={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:e,mediaSequence:e.length?e[0].number:1};return i.contentProtection&&(a.contentProtection=i.contentProtection),n&&(a.sidx=n),a},bv=function(r){var t,i=r.attributes,e=r.segments;return typeof e>"u"&&(e=[{uri:i.baseUrl,timeline:i.periodIndex,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration),{attributes:(t={NAME:i.id,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:i.baseUrl||"",targetDuration:i.duration,segments:e,mediaSequence:e.length?e[0].number:1}},o=function(r){var t,i=r.attributes,e=r.segments,n=r.sidx,a={attributes:(t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:e,mediaSequence:e.length?e[0].number:1};return i.contentProtection&&(a.contentProtection=i.contentProtection),n&&(a.sidx=n),a},f=function(r,t,i){var u=r.timescale,d=r.start,y=r.minimumUpdatePeriod;return Math.ceil((((r.NOW+r.clientOffset)/1e3+(void 0===y?0:y)-(r.availabilityStartTime+(void 0===d?0:d)))*(void 0===u?1:u)-t)/i)},T=function(r,t){for(var i=r.type,e=void 0===i?"static":i,n=r.minimumUpdatePeriod,a=void 0===n?0:n,u=r.media,c=void 0===u?"":u,d=r.sourceDuration,p=r.timescale,y=void 0===p?1:p,v=r.startNumber,b=void 0===v?1:v,D=r.periodIndex,I=[],P=-1,G=0;G<t.length;G++){var ie=t[G],ye=ie.d,Z=ie.r||0,ee=ie.t||0;P<0&&(P=ee),ee&&ee>P&&(P=ee);var fe=void 0;if(Z<0){var re=G+1;fe=re===t.length?"dynamic"===e&&a>0&&c.indexOf("$Number$")>0?f(r,P,ye):(d*y-P)/ye:(t[re].t-P)/ye}else fe=Z+1;for(var ae=b+I.length+fe,me=b+I.length;me<ae;)I.push({number:me,duration:ye/y,time:P,timeline:D}),P+=ye,me++}return I},C=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,V=function(r,t){return r.replace(C,function(r){return function(t,i,e,n){if("$$"===t)return"$";if(typeof r[i]>"u")return t;var a=""+r[i];return"RepresentationID"===i||(n=e?parseInt(n,10):1,a.length>=n)?a:""+new Array(n-a.length+1).join("0")+a}}(t))},K=function(r,t){var i={RepresentationID:r.id,Bandwidth:r.bandwidth||0},e=r.initialization,n=void 0===e?{sourceURL:"",range:""}:e,a=Ao({baseUrl:r.baseUrl,source:V(n.sourceURL,i),range:n.range}),u=function(r,t){return r.duration||t?r.duration?Fc(r):T(r,t):[{number:r.startNumber||1,duration:r.sourceDuration,time:0,timeline:r.periodIndex}]}(r,t);return u.map(function(c){i.Number=c.number,i.Time=c.time;var d=V(r.media||"",i);return{uri:d,timeline:c.timeline,duration:c.duration,resolvedUri:Mc(r.baseUrl||"",d),map:a,number:c.number}})},de=function(r,t){var i=r.duration,e=r.segmentUrls,n=void 0===e?[]:e;if(!i&&!t||i&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");var u,a=n.map(function(d){return function(r,t){var i=r.baseUrl,e=r.initialization,n=void 0===e?{}:e,a=Ao({baseUrl:i,source:n.sourceURL,range:n.range}),u=Ao({baseUrl:i,source:t.media,range:t.mediaRange});return u.map=a,u}(r,d)});return i&&(u=Fc(r)),t&&(u=T(r,t)),u.map(function(d,p){if(a[p]){var y=a[p];return y.timeline=d.timeline,y.duration=d.duration,y.number=d.number,y}}).filter(function(d){return d})},ve=function(r){var e,n,t=r.attributes,i=r.segmentInfo;i.template?(n=K,e=Dr(t,i.template)):i.base?(n=Nh,e=Dr(t,i.base)):i.list&&(n=de,e=Dr(t,i.list));var a={attributes:t};if(!n)return a;var u=n(e,i.timeline);if(e.duration){var p=e.timescale;e.duration=e.duration/(void 0===p?1:p)}else e.duration=u.length?u.reduce(function(v,b){return Math.max(v,Math.ceil(b.duration))},0):0;return a.attributes=e,a.segments=u,i.base&&e.indexRange&&(a.sidx=u[0],a.segments=[]),a},Be=function(r,t){return Mh(r.childNodes).filter(function(i){return i.tagName===t})},st=function(r){return r.textContent.trim()},mt=function(r){var c=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(r);if(!c)return 0;var d=c.slice(1),y=d[1],v=d[2],b=d[3],D=d[4],I=d[5];return 31536e3*parseFloat(d[0]||0)+2592e3*parseFloat(y||0)+86400*parseFloat(v||0)+3600*parseFloat(b||0)+60*parseFloat(D||0)+parseFloat(I||0)},Et={mediaPresentationDuration:function(r){return mt(r)},availabilityStartTime:function(r){return function(r){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(r)&&(r+="Z"),Date.parse(r)}(r)/1e3},minimumUpdatePeriod:function(r){return mt(r)},timeShiftBufferDepth:function(r){return mt(r)},start:function(r){return mt(r)},width:function(r){return parseInt(r,10)},height:function(r){return parseInt(r,10)},bandwidth:function(r){return parseInt(r,10)},startNumber:function(r){return parseInt(r,10)},timescale:function(r){return parseInt(r,10)},duration:function(r){var t=parseInt(r,10);return isNaN(t)?mt(r):t},d:function(r){return parseInt(r,10)},t:function(r){return parseInt(r,10)},r:function(r){return parseInt(r,10)},DEFAULT:function(r){return r}},ct=function(r){return r&&r.attributes?Mh(r.attributes).reduce(function(t,i){return t[i.name]=(Et[i.name]||Et.DEFAULT)(i.value),t},{}):{}},ir={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},zi=function(r,t){return t.length?Wu(r.map(function(i){return t.map(function(e){return Mc(i,st(e))})})):r},ri=function(r){var t=Be(r,"SegmentTemplate")[0],i=Be(r,"SegmentList")[0],e=i&&Be(i,"SegmentURL").map(function(v){return Dr({tag:"SegmentURL"},ct(v))}),n=Be(r,"SegmentBase")[0],a=i||t,u=a&&Be(a,"SegmentTimeline")[0],c=i||n||t,d=c&&Be(c,"Initialization")[0],p=t&&ct(t);p&&d?p.initialization=d&&ct(d):p&&p.initialization&&(p.initialization={sourceURL:p.initialization});var y={template:p,timeline:u&&Be(u,"S").map(function(v){return ct(v)}),list:i&&Dr(ct(i),{segmentUrls:e,initialization:ct(d)}),base:n&&Dr(ct(n),{initialization:ct(d)})};return Object.keys(y).forEach(function(v){y[v]||delete y[v]}),y},Uh=function(r,t,i){return function(e){var n=ct(e),a=zi(t,Be(e,"BaseURL")),u=Be(e,"Role")[0],c={role:ct(u)},d=Dr(r,n,c),p=function(r){return r.reduce(function(t,i){var e=ct(i),n=ir[e.schemeIdUri];if(n){t[n]={attributes:e};var a=Be(i,"cenc:pssh")[0];if(a){var u=st(a),c=u&&function Ir(s){for(var r=M().atob(s),t=new Uint8Array(r.length),i=0;i<r.length;i++)t[i]=r.charCodeAt(i);return t}(u);t[n].pssh=c}}return t},{})}(Be(e,"ContentProtection"));Object.keys(p).length&&(d=Dr(d,{contentProtection:p}));var y=ri(e),v=Be(e,"Representation"),b=Dr(i,y);return Wu(v.map(function(r,t,i){return function(e){var n=Be(e,"BaseURL"),a=zi(t,n),u=Dr(r,ct(e)),c=ri(e);return a.map(function(d){return{segmentInfo:Dr(i,c),attributes:Dr(u,{baseUrl:d})}})}}(d,a,b)))}},o_=function(r,t){return void 0===t&&(t={}),function(r,t){var i;if(void 0===t&&(t={}),!r.length)return{};var e=r[0].attributes,n=e.sourceDuration,a=e.minimumUpdatePeriod,u=void 0===a?0:a,y=Bh(r.filter(function(P){var G=P.attributes;return"video/mp4"===G.mimeType||"video"===G.contentType})).map(o),v=Bh(r.filter(function(P){var G=P.attributes;return"audio/mp4"===G.mimeType||"audio"===G.contentType})),b=r.filter(function(P){var G=P.attributes;return"text/vtt"===G.mimeType||"text"===G.contentType}),D={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(i={AUDIO:{},VIDEO:{}},i["CLOSED-CAPTIONS"]={},i.SUBTITLES={},i),uri:"",duration:n,playlists:Nc(y,t),minimumUpdatePeriod:1e3*u};return v.length&&(D.mediaGroups.AUDIO.audio=function(r,t){void 0===t&&(t={});var i,e=r.reduce(function(a,u){var c=u.attributes.role&&u.attributes.role.value||"",d=u.attributes.lang||"",p="main";return d&&(p=u.attributes.lang+(c?" ("+c+")":"")),a[p]&&a[p].playlists[0].attributes.BANDWIDTH>u.attributes.bandwidth||(a[p]={language:d,autoselect:!0,default:"main"===c,playlists:Nc([Tv(u)],t),uri:""},typeof i>"u"&&"main"===c&&((i=u).default=!0)),a},{});return i||(e[Object.keys(e)[0]].default=!0),e}(v,t)),b.length&&(D.mediaGroups.SUBTITLES.subs=function(r,t){return void 0===t&&(t={}),r.reduce(function(i,e){var n=e.attributes.lang||"text";return i[n]||(i[n]={language:n,default:!1,autoselect:!1,playlists:Nc([bv(e)],t),uri:""}),i},{})}(b,t)),D}(function(r){return r.map(ve)}(function(r,t){void 0===t&&(t={});var i=t,e=i.manifestUri,n=void 0===e?"":e,a=i.NOW,u=void 0===a?Date.now():a,c=i.clientOffset,d=void 0===c?0:c,p=Be(r,"Period");if(!p.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var y=ct(r),v=zi([n],Be(r,"BaseURL"));return y.sourceDuration=y.mediaPresentationDuration||0,y.NOW=u,y.clientOffset=d,Wu(p.map(function(r,t){return function(i,e){var n=zi(t,Be(i,"BaseURL")),a=ct(i),u=parseInt(a.id,10),c=M().isNaN(u)?e:u,d=Dr(r,{periodIndex:c}),p=Be(i,"AdaptationSet"),y=ri(i);return Wu(p.map(Uh(d,n,y)))}}(y,v)))}(function(r){if(""===r)throw new Error("DASH_EMPTY_MANIFEST");var i=(new(M().DOMParser)).parseFromString(r,"application/xml"),e=i&&"MPD"===i.documentElement.tagName?i.documentElement:null;if(!e||e&&e.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return e}(r),t)),t.sidxMapping)};function Ev(){return Ev=Object.assign||function(s){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},Ev.apply(this,arguments)}function Cv(s,r){s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.__proto__=r}var Av=function(){function s(){this.listeners={}}var r=s.prototype;return r.on=function(i,e){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(e)},r.off=function(i,e){if(!this.listeners[i])return!1;var n=this.listeners[i].indexOf(e);return this.listeners[i].splice(n,1),n>-1},r.trigger=function(i){var n,a,u,e=this.listeners[i];if(e)if(2===arguments.length)for(a=e.length,n=0;n<a;++n)e[n].call(this,arguments[1]);else for(u=Array.prototype.slice.call(arguments,1),a=e.length,n=0;n<a;++n)e[n].apply(this,u)},r.dispose=function(){this.listeners={}},r.pipe=function(i){this.on("data",function(e){i.push(e)})},s}(),l_=function(s){function r(){var i;return(i=s.call(this)||this).buffer="",i}return Cv(r,s),r.prototype.push=function(e){var n;for(this.buffer+=e,n=this.buffer.indexOf("\n");n>-1;n=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,n)),this.buffer=this.buffer.substring(n+1)},r}(Av),Bc=function(r){for(var n,t=r.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},e=t.length;e--;)""!==t[e]&&((n=/([^=]*)=(.*)/.exec(t[e]).slice(1))[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),i[n[0]]=n[1]);return i},d_=function(s){function r(){var i;return(i=s.call(this)||this).customParsers=[],i.tagMappers=[],i}Cv(r,s);var t=r.prototype;return t.push=function(e){var a,u,n=this;if(0!==(e=e.trim()).length){if("#"!==e[0])return void this.trigger("data",{type:"uri",uri:e});this.tagMappers.reduce(function(d,p){var y=p(e);return y===e?d:d.concat([y])},[e]).forEach(function(d){for(var p=0;p<n.customParsers.length;p++)if(n.customParsers[p].call(n,d))return;if(0===d.indexOf("#EXT"))if(d=d.replace("\r",""),a=/^#EXTM3U/.exec(d))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(a=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(d))return u={type:"tag",tagType:"inf"},a[1]&&(u.duration=parseFloat(a[1])),a[2]&&(u.title=a[2]),void n.trigger("data",u);if(a=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(d))return u={type:"tag",tagType:"targetduration"},a[1]&&(u.duration=parseInt(a[1],10)),void n.trigger("data",u);if(a=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(d))return u={type:"tag",tagType:"totalduration"},a[1]&&(u.duration=parseInt(a[1],10)),void n.trigger("data",u);if(a=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(d))return u={type:"tag",tagType:"version"},a[1]&&(u.version=parseInt(a[1],10)),void n.trigger("data",u);if(a=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(d))return u={type:"tag",tagType:"media-sequence"},a[1]&&(u.number=parseInt(a[1],10)),void n.trigger("data",u);if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(d))return u={type:"tag",tagType:"discontinuity-sequence"},a[1]&&(u.number=parseInt(a[1],10)),void n.trigger("data",u);if(a=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(d))return u={type:"tag",tagType:"playlist-type"},a[1]&&(u.playlistType=a[1]),void n.trigger("data",u);if(a=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(d))return u={type:"tag",tagType:"byterange"},a[1]&&(u.length=parseInt(a[1],10)),a[2]&&(u.offset=parseInt(a[2],10)),void n.trigger("data",u);if(a=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(d))return u={type:"tag",tagType:"allow-cache"},a[1]&&(u.allowed=!/NO/.test(a[1])),void n.trigger("data",u);if(a=/^#EXT-X-MAP:?(.*)$/.exec(d)){if(u={type:"tag",tagType:"map"},a[1]){var y=Bc(a[1]);if(y.URI&&(u.uri=y.URI),y.BYTERANGE){var v=y.BYTERANGE.split("@"),b=v[0],D=v[1];u.byterange={},b&&(u.byterange.length=parseInt(b,10)),D&&(u.byterange.offset=parseInt(D,10))}}n.trigger("data",u)}else if(a=/^#EXT-X-STREAM-INF:?(.*)$/.exec(d)){if(u={type:"tag",tagType:"stream-inf"},a[1]){if(u.attributes=Bc(a[1]),u.attributes.RESOLUTION){var I=u.attributes.RESOLUTION.split("x"),P={};I[0]&&(P.width=parseInt(I[0],10)),I[1]&&(P.height=parseInt(I[1],10)),u.attributes.RESOLUTION=P}u.attributes.BANDWIDTH&&(u.attributes.BANDWIDTH=parseInt(u.attributes.BANDWIDTH,10)),u.attributes["PROGRAM-ID"]&&(u.attributes["PROGRAM-ID"]=parseInt(u.attributes["PROGRAM-ID"],10))}n.trigger("data",u)}else{if(a=/^#EXT-X-MEDIA:?(.*)$/.exec(d))return u={type:"tag",tagType:"media"},a[1]&&(u.attributes=Bc(a[1])),void n.trigger("data",u);if(a=/^#EXT-X-ENDLIST/.exec(d))n.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(a=/^#EXT-X-DISCONTINUITY/.exec(d)))return(a=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(d))?(u={type:"tag",tagType:"program-date-time"},a[1]&&(u.dateTimeString=a[1],u.dateTimeObject=new Date(a[1])),void n.trigger("data",u)):(a=/^#EXT-X-KEY:?(.*)$/.exec(d))?(u={type:"tag",tagType:"key"},a[1]&&(u.attributes=Bc(a[1]),u.attributes.IV&&("0x"===u.attributes.IV.substring(0,2).toLowerCase()&&(u.attributes.IV=u.attributes.IV.substring(2)),u.attributes.IV=u.attributes.IV.match(/.{8}/g),u.attributes.IV[0]=parseInt(u.attributes.IV[0],16),u.attributes.IV[1]=parseInt(u.attributes.IV[1],16),u.attributes.IV[2]=parseInt(u.attributes.IV[2],16),u.attributes.IV[3]=parseInt(u.attributes.IV[3],16),u.attributes.IV=new Uint32Array(u.attributes.IV))),void n.trigger("data",u)):(a=/^#EXT-X-START:?(.*)$/.exec(d))?(u={type:"tag",tagType:"start"},a[1]&&(u.attributes=Bc(a[1]),u.attributes["TIME-OFFSET"]=parseFloat(u.attributes["TIME-OFFSET"]),u.attributes.PRECISE=/YES/.test(u.attributes.PRECISE)),void n.trigger("data",u)):(a=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(d))?((u={type:"tag",tagType:"cue-out-cont"}).data=a[1]?a[1]:"",void n.trigger("data",u)):(a=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(d))?((u={type:"tag",tagType:"cue-out"}).data=a[1]?a[1]:"",void n.trigger("data",u)):(a=/^#EXT-X-CUE-IN:?(.*)?$/.exec(d))?((u={type:"tag",tagType:"cue-in"}).data=a[1]?a[1]:"",void n.trigger("data",u)):void n.trigger("data",{type:"tag",data:d.slice(4)});n.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else n.trigger("data",{type:"comment",text:d.slice(1)})})}},t.addParser=function(e){var n=this,a=e.expression,u=e.customType,c=e.dataParser,d=e.segment;"function"!=typeof c&&(c=function(y){return y}),this.customParsers.push(function(p){if(a.exec(p))return n.trigger("data",{type:"custom",data:c(p),customType:u,segment:d}),!0})},t.addTagMapper=function(e){var n=e.expression,a=e.map;this.tagMappers.push(function(d){return n.test(d)?a(d):d})},r}(Av);function f_(s){for(var r=M().atob(s||""),t=new Uint8Array(r.length),i=0;i<r.length;i++)t[i]=r.charCodeAt(i);return t}var h_=function(s){function r(){var i;(i=s.call(this)||this).lineStream=new l_,i.parseStream=new d_,i.lineStream.pipe(i.parseStream);var u,c,e=function u_(s){if(void 0===s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(i),n=[],a={},d=function(){},p={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},v=0;return i.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},i.parseStream.on("data",function(b){var D,I;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=b.allowed,"allowed"in b||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var ie={};"length"in b&&(a.byterange=ie,ie.length=b.length,"offset"in b||(this.trigger("info",{message:"defaulting offset to zero"}),b.offset=0)),"offset"in b&&(a.byterange=ie,ie.offset=b.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),b.duration>0&&(a.duration=b.duration),0===b.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key:function(){if(b.attributes)if("NONE"!==b.attributes.METHOD)if(b.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===b.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(b.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===b.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==b.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):b.attributes.KEYID&&"0x"===b.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:b.attributes.KEYFORMAT,keyId:b.attributes.KEYID.substring(2)},pssh:f_(b.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));b.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),c={method:b.attributes.METHOD||"AES-128",uri:b.attributes.URI},typeof b.attributes.IV<"u"&&(c.iv=b.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else c=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(b.number)?this.manifest.mediaSequence=b.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+b.number})},"discontinuity-sequence":function(){isFinite(b.number)?(this.manifest.discontinuitySequence=b.number,v=b.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+b.number})},"playlist-type":function(){/VOD|EVENT/.test(b.playlistType)?this.manifest.playlistType=b.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+b.playlist})},map:function(){u={},b.uri&&(u.uri=b.uri),b.byterange&&(u.byterange=b.byterange)},"stream-inf":function(){this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||p,b.attributes?(a.attributes||(a.attributes={}),Ev(a.attributes,b.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||p,b.attributes&&b.attributes.TYPE&&b.attributes["GROUP-ID"]&&b.attributes.NAME){var ie=this.manifest.mediaGroups[b.attributes.TYPE];ie[b.attributes["GROUP-ID"]]=ie[b.attributes["GROUP-ID"]]||{},D=ie[b.attributes["GROUP-ID"]],(I={default:/yes/i.test(b.attributes.DEFAULT)}).autoselect=!!I.default||/yes/i.test(b.attributes.AUTOSELECT),b.attributes.LANGUAGE&&(I.language=b.attributes.LANGUAGE),b.attributes.URI&&(I.uri=b.attributes.URI),b.attributes["INSTREAM-ID"]&&(I.instreamId=b.attributes["INSTREAM-ID"]),b.attributes.CHARACTERISTICS&&(I.characteristics=b.attributes.CHARACTERISTICS),b.attributes.FORCED&&(I.forced=/yes/i.test(b.attributes.FORCED)),D[b.attributes.NAME]=I}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){v+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=b.dateTimeString,this.manifest.dateTimeObject=b.dateTimeObject),a.dateTimeString=b.dateTimeString,a.dateTimeObject=b.dateTimeObject},targetduration:function(){!isFinite(b.duration)||b.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+b.duration}):this.manifest.targetDuration=b.duration},totalduration:function(){!isFinite(b.duration)||b.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+b.duration}):this.manifest.totalDuration=b.duration},start:function(){b.attributes&&!isNaN(b.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:b.attributes["TIME-OFFSET"],precise:b.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){a.cueOut=b.data},"cue-out-cont":function(){a.cueOutCont=b.data},"cue-in":function(){a.cueIn=b.data}}[b.tagType]||d).call(e)},uri:function(){a.uri=b.uri,n.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),c&&(a.key=c),a.timeline=v,u&&(a.map=u),a={}},comment:function(){},custom:function(){b.segment?(a.custom=a.custom||{},a.custom[b.customType]=b.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[b.customType]=b.data)}})[b.type].call(e)}),i}Cv(r,s);var t=r.prototype;return t.push=function(e){this.lineStream.push(e)},t.end=function(){this.lineStream.push("\n")},t.addParser=function(e){this.parseStream.addParser(e)},t.addTagMapper=function(e){this.parseStream.addTagMapper(e)},r}(Av);function wv(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Vh(s,r){return s(r={exports:{}},r.exports),r.exports}typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"&&self;var Qv=Vh(function(s,r){Object.defineProperty(r,"__esModule",{value:!0});var t=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,i=/^application\/dash\+xml/i;r.simpleTypeFromSourceType=function(a){return t.test(a)?"hls":i.test(a)?"dash":"application/vnd.videojs.vhs+json"===a?"vhs-json":null}});wv(Qv);var m_=Qv.simpleTypeFromSourceType,Jv=Vh(function(s,r){Object.defineProperty(r,"__esModule",{value:!0}),r.forEachMediaGroup=function(e,n,a){n.forEach(function(u){for(var c in e.mediaGroups[u])for(var d in e.mediaGroups[u][c])a(e.mediaGroups[u][c][d],u,c,d)})}});wv(Jv);var g_=Jv.forEachMediaGroup,v_=Vh(function(s,r){var i,e,n,a,u;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,e=/^([^\/?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s.exports=u={buildAbsoluteURL:function(c,d,p){if(p=p||{},c=c.trim(),!(d=d.trim())){if(!p.alwaysNormalize)return c;var y=u.parseURL(c);if(!y)throw new Error("Error trying to parse base URL.");return y.path=u.normalizePath(y.path),u.buildURLFromParts(y)}var v=u.parseURL(d);if(!v)throw new Error("Error trying to parse relative URL.");if(v.scheme)return p.alwaysNormalize?(v.path=u.normalizePath(v.path),u.buildURLFromParts(v)):d;var b=u.parseURL(c);if(!b)throw new Error("Error trying to parse base URL.");if(!b.netLoc&&b.path&&"/"!==b.path[0]){var D=e.exec(b.path);b.netLoc=D[1],b.path=D[2]}b.netLoc&&!b.path&&(b.path="/");var I={scheme:b.scheme,netLoc:v.netLoc,path:null,params:v.params,query:v.query,fragment:v.fragment};if(!v.netLoc&&(I.netLoc=b.netLoc,"/"!==v.path[0]))if(v.path){var P=b.path,G=P.substring(0,P.lastIndexOf("/")+1)+v.path;I.path=u.normalizePath(G)}else I.path=b.path,v.params||(I.params=b.params,v.query||(I.query=b.query));return null===I.path&&(I.path=p.alwaysNormalize?u.normalizePath(v.path):v.path),u.buildURLFromParts(I)},parseURL:function(c){var d=i.exec(c);return d?{scheme:d[1]||"",netLoc:d[2]||"",path:d[3]||"",params:d[4]||"",query:d[5]||"",fragment:d[6]||""}:null},normalizePath:function(c){for(c=c.split("").reverse().join("").replace(n,"");c.length!==(c=c.replace(a,"")).length;);return c.split("").reverse().join("")},buildURLFromParts:function(c){return c.scheme+c.netLoc+c.path+c.params+c.query+c.fragment}}});function Zv(s){return s&&"object"==typeof s&&"default"in s?s.default:s}var e0=Zv(v_),t0=Zv(M()),Uc=function(r,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(r)||(r=e0.buildAbsoluteURL(t0.location&&t0.location.href||"",r)),e0.buildAbsoluteURL(r,t))},Dv=function(r,t){r.resolvedUri||(r.resolvedUri=Uc(t,r.uri)),r.key&&!r.key.resolvedUri&&(r.key.resolvedUri=Uc(t,r.key.uri)),r.map&&!r.map.resolvedUri&&(r.map.resolvedUri=Uc(t,r.map.uri))},r0=function(r){var t=r.url,i=r.manifestString,a="dash"===m_(r.mimeType)?o_(i,{manifestUri:t,clientOffset:0}):function(r){var t=new h_;return t.push(r),t.end(),t.manifest}(i);return a.uri=t,a.resolvedUri=t,a.playlists?function(r){for(var t=0;t<r.playlists.length;t++){var i=r.playlists[t];i.uri||(i.uri="placeholder-uri-"+t),i.resolvedUri=Uc(r.uri,i.uri),i.segments&&i.segments.forEach(function(e){Dv(e,r.uri)})}g_(r,["AUDIO"],function(e,n,a,u){e.uri&&(e.resolvedUri=Uc(r.uri,e.uri)),e.playlists&&(e.playlists[0].resolvedUri||(e.playlists[0].resolvedUri=r.resolvedUri+"-audio-placeholder-"+a+"-"+u),e.playlists[0].segments.forEach(function(c){Dv(c,r.uri)}))})}(a):function(r){r.attributes=r.attributes||{},r.segments.forEach(function(t){Dv(t,r.uri)})}(a),a},qu=Vh(function(s,r){Object.defineProperty(r,"__esModule",{value:!0});var t=function(c){return c&&c.replace(/avc1\.(\d+)\.(\d+)/i,function(d,p,y){return"avc1."+("00"+Number(p).toString(16)).slice(-2)+"00"+("00"+Number(y).toString(16)).slice(-2)})},i=function(c){return c.map(t)},n=function(c){void 0===c&&(c="");var d={codecCount:0};d.codecCount=c.split(",").length,d.codecCount=d.codecCount||2;var p=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(c);return p&&(d.videoCodec=p[2],d.videoObjectTypeIndicator=p[3]),d.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(c),d.audioProfile=d.audioProfile&&d.audioProfile[2],d};r.audioProfileFromDefault=function(c,d){if(!c.mediaGroups.AUDIO||!d)return null;var p=c.mediaGroups.AUDIO[d];if(!p)return null;for(var y in p){var v=p[y];if(v.default&&v.playlists)return n(v.playlists[0].attributes.CODECS).audioProfile}return null},r.mapLegacyAvcCodecs=function(c){return c.replace(/avc1\.(\d+)\.(\d+)/i,function(d){return i([d])[0]})},r.parseCodecs=n,r.translateLegacyCodec=t,r.translateLegacyCodecs=i});wv(qu);var E_=qu.audioProfileFromDefault,C_=qu.mapLegacyAvcCodecs,A_=qu.parseCodecs,a0=function(r){return(r.playlists?r.playlists:[r]).reduce(function(i,e){if(!e.attributes||!e.attributes.CODECS)return i;var n=A_(e.attributes.CODECS);if(2!==n.codecCount&&e.attributes.AUDIO){var a=E_(r,e.attributes.AUDIO);a&&(n.audioProfile=a,n.codecCount++)}return i[e.resolvedUri]=n,i},{})},s0=function(r){var t=r.playlists,i=r.uriSuffix,e=void 0===i?"":i,n=t.reduce(function(v,b){var D=v.length,I=JSON.parse(JSON.stringify(b.segments)),P=v.concat(I);return v.length>0&&(P[D].discontinuity=!0),P},[]),a=t.reduce(function(v,b){return b.attributes&&b.attributes.BANDWIDTH&&(!v||b.attributes.BANDWIDTH>v)?b.attributes.BANDWIDTH:v},null),u=t.reduce(function(v,b){return v||(b.attributes?b.attributes.CODECS:null)},null),c={attributes:{},segments:n};a&&(c.attributes.BANDWIDTH=a),u&&(c.attributes.CODECS=u),c.uri="combined-playlist"+e,c.resolvedUri=c.uri,c.playlistType="VOD",c.targetDuration=t.reduce(function(v,b){return v>b.targetDuration?v:b.targetDuration},0),c.endList=!0,c.mediaSequence=0,c.discontinuitySequence=0,c.discontinuityStarts=[];for(var d=0,p=0;p<c.segments.length;p++){var y=c.segments[p];y.discontinuity&&(c.discontinuityStarts.push(p),d++),y.number=p,y.timeline=d}return c},Vc="com.widevine.alpha",o0=function(r){var t=r.pssh,i=r.audioContentType,e=r.videoContentType,n=r.url,a=r.getLicense;return function(u){var c={audioContentType:i,videoContentType:e,pssh:t};n&&(c.url=n),a&&(c.getLicense=a),u.eme.initializeMediaKeys({keySystems:{"com.widevine.alpha":c}})}},u0=function(r){r&&function(r){var t=r.manifests,i=r.targetVerticalResolution,e=r.callback,n=function(r){if(!r||!r.length)return"No sources provided";for(var t=0;t<r.length;t++){if(!r[t].url)return"All manifests must include a URL";if(!r[t].mimeType)return"All manifests must include a mime type"}return null}(t);if(n)e({message:n});else{var a=t.map(function(u){return u.url});Lh(a,function(u,c){if(u)e(u);else{var d=t.map(function(p){return{url:p.url,manifestString:c[p.url],mimeType:p.mimeType,keySystems:p.keySystems}});try{!function(r){var t=r.manifests,i=r.targetVerticalResolution,e=r.callback,n=t.map(r0),a=function(r){return r.map(function(t){var i=a0(t);return(t.playlists?t.playlists:[t]).filter(function(n){var a=i[n.resolvedUri];return!a||!(2!==a.codecCount||M().MediaSource&&M().MediaSource.isTypeSupported&&!M().MediaSource.isTypeSupported('video/mp4; codecs="'+C_(n.attributes.CODECS)+'"'))})})}(n);a.forEach(function(v){if(0===v.length)throw new Error("Did not find a supported playlist for each manifest")});for(var u=function(r,t){return r.map(function(i){return 1===i.length?i[0]:i.reduce(function(e,n){return e?n.attributes.RESOLUTION?!e.attributes.RESOLUTION||Math.abs(n.attributes.RESOLUTION-t)<Math.abs(e.attributes.RESOLUTION-t)?n:e:e.attributes.RESOLUTION?e:Math.abs(n.attributes.BANDWIDTH-4194304)<Math.abs(e.attributes.BANDWIDTH-4194304)?n:e:n},null)})}(a,i),c=function(r,t){if(r.length!==t.length)throw new Error("Invalid number of video playlists for provided manifests");for(var i=r.length,e=[],n=0;n<i;n++){var a=r[n],u=t[n];if(u.attributes.AUDIO&&a.mediaGroups.AUDIO[u.attributes.AUDIO])for(var c=a.mediaGroups.AUDIO[u.attributes.AUDIO],d=Object.keys(c),p=0;p<d.length;p++){var y=c[d[p]];if(y.default&&(y.resolvedUri||y.playlists)){e.push(y.playlists?y.playlists[0]:y);break}}}if(e.length>0&&e.length!==i)throw new Error("Did not find matching audio playlists for all video playlists");return e}(n,u),d=u.concat(c),p=t.map(function(v){return v.mimeType}),y=0;y<c.length;y++)p.push(p[y]);!function(r){var t=r.playlists,i=r.mimeTypes,e=r.callback,n=t.filter(function(v){return!v.segments}).map(function(v){return v.resolvedUri}),a=t.filter(function(v){return v.segments}),u={};if(a.forEach(function(v){u[v.resolvedUri]=v}),n.length){for(var c={},d={},p=0;p<t.length;p++){var y=t[p];c[y.resolvedUri]||(c[y.resolvedUri]=[]),c[y.resolvedUri].push(y),d[y.resolvedUri]=i[p].mimeType}Lh(n,function(v,b){if(v)e(v);else{for(var D=0;D<n.length;D++)for(var I=n[D],P=c[I],ye=r0({url:I,manifestString:b[I],mimeType:d[I]}),Z=0;Z<P.length;Z++)u[P[Z].resolvedUri]=ye;e(null,u)}})}else e(null,u)}({playlists:d,mimeTypes:p,callback:function(b,D){if(b)e(b);else{d.forEach(function(ee){var fe=D[ee.resolvedUri];ee.segments=fe.segments,ee.contentProtection=fe.contentProtection});var G=function(r){var t=r.videoPlaylist,i=r.audioPlaylist;t=JSON.parse(JSON.stringify(t)),i&&(i=JSON.parse(JSON.stringify(i)));var e=[t],n=i?[i]:null;e[t.uri]=t,n&&(n[i.uri]=i);var a={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:M().location.href,playlists:e};return i&&(a.mediaGroups.AUDIO.audio={default:{autoselect:!0,default:!0,language:"",uri:"combined-audio-playlists",playlists:n}},a.playlists[0].attributes.AUDIO="audio"),a}({videoPlaylist:s0({playlists:u}),audioPlaylist:c.length?s0({playlists:c,uriSuffix:"-audio"}):null}),ie={manifestObject:G},ye=function(r){for(var t=r.videoPlaylists,i=r.manifestObjects,e=[],n=0;n<t.length;n++){var a=t[n],d=a0(i[n])[a.resolvedUri];if(d){var p={};d.videoCodec&&(p.video='video/mp4; codecs="'+d.videoCodec+d.videoObjectTypeIndicator+'"'),d.audioProfile&&(p.audio='audio/mp4; codecs="mp4a.40.'+d.audioProfile+'"'),e.push(p)}else e.push(null)}return e}({videoPlaylists:u,manifestObjects:n}),Z=function(r){var t=r.videoPlaylists,i=r.audioPlaylists,e=r.audioAndVideoTypes,n=r.keySystems;if(!n.reduce(function(fe,re){return fe||!!re},!1))return null;for(var u=[],c=0;c<t.length;c++){var d=n[c];if(d){var p=d[Vc];if(p&&e[c]&&(e[c].video||e[c].audio)){var y="object"==typeof p?p.url:p,v="object"==typeof p?p.getLicense:null,b=t[c],D=i[c],I=b.contentProtection&&b.contentProtection[Vc]?b.contentProtection[Vc].pssh:null,P=D.contentProtection&&D.contentProtection[Vc]?D.contentProtection[Vc].pssh:null,ye={audioContentType:e[c].audio,videoContentType:e[c].video};if(y&&(ye.url=y),v&&(ye.getLicense=v),I){var Z=Rn.mergeOptions(ye,{pssh:I});u.push(o0(Z))}if(P){var ee=Rn.mergeOptions(ye,{pssh:P});u.push(o0(ee))}}}}return function(fe){u.forEach(function(re){re(fe)})}}({videoPlaylists:u,audioPlaylists:c,audioAndVideoTypes:ye,keySystems:t.map(function(ee){return ee.keySystems})});Z&&(ie.initializeKeySystems=Z),e(null,ie)}}})}({manifests:d,targetVerticalResolution:i,callback:e})}catch(p){e(p)}}})}}(r)};(Rn.registerPlugin||Rn.plugin)("concat",u0),u0.VERSION="1.0.0";var Iv=function(r){var t=r.playlist.autoadvance_;t.timeout&&r.clearTimeout(t.timeout),t.trigger&&r.off("ended",t.trigger),t.timeout=null,t.trigger=null},l0=function s(r,t){Iv(r),function(r){return"number"==typeof r&&!isNaN(r)&&r>=0&&r<1/0}(t)?(r.playlist.autoadvance_.delay=t,r.playlist.autoadvance_.trigger=function(){var i=function(){return s(r,t)};r.one("play",i),r.playlist.autoadvance_.timeout=r.setTimeout(function(){Iv(r),r.off("play",i),r.playlist.next()},1e3*t)},r.one("ended",r.playlist.autoadvance_.trigger)):r.playlist.autoadvance_.delay=null},c0=function(r){return!!r&&"object"==typeof r},j_=function(r,t){var i=r,e=t;return"object"==typeof r&&(i=r.src),"object"==typeof t&&(e=t.src),/^\/\//.test(i)&&(e=e.slice(e.indexOf("//"))),/^\/\//.test(e)&&(i=i.slice(i.indexOf("//"))),i===e},Hh=function(r,t){for(var i=0;i<r.length;i++){var e=r[i].sources;if(Array.isArray(e))for(var n=0;n<e.length;n++){var a=e[n];if(a&&j_(a,t))return i}}return-1};var d0=function(r,t){!function q_(s,r,t){void 0===t&&(t=0);var i=null,e=!1,n=s.playlist=function(a,u){if(void 0===u&&(u=0),e)throw new Error("do not call playlist() during a playlist change");if(Array.isArray(a)){var c=Array.isArray(i)?i.slice():null,d=a.slice();(i=d.slice()).filter(function(p){return c0(p)}).length!==i.length&&(i=function(r){var i,t=[];return r.forEach(function(e){c0(e)?i=e:(i=Object(e)).originalValue=e,t.push(i)}),t}(i)),function(r){var t=1;r.forEach(function(i){i.playlistItemId_=t++})}(i),e=!0,s.trigger({type:"duringplaylistchange",nextIndex:u,nextPlaylist:d,previousIndex:n.currentIndex_,previousPlaylist:c||[]}),e=!1,-1!==u&&n.currentItem(u),c&&s.setTimeout(function(){s.trigger("playlistchange")},0)}return i.map(function(p){return p.originalValue||p}).slice()};return s.on("loadstart",function(){-1===n.currentItem()&&Iv(s)}),n.currentIndex_=-1,n.player_=s,n.autoadvance_={},n.repeat_=!1,n.currentPlaylistItemId_=null,n.currentItem=function(a){if(e)return n.currentIndex_;if("number"==typeof a&&n.currentIndex_!==a&&a>=0&&a<i.length)return n.currentIndex_=a,function(r,t){var i=!r.paused()||r.ended();r.trigger("beforeplaylistitem",t.originalValue||t),t.playlistItemId_&&(r.playlist.currentPlaylistItemId_=t.playlistItemId_),r.poster(t.poster||""),r.src(t.sources),function(r){for(var t=r.remoteTextTracks(),i=t&&t.length||0;i--;)r.removeRemoteTextTrack(t[i])}(r),r.ready(function(){if((t.textTracks||[]).forEach(r.addRemoteTextTrack.bind(r)),r.trigger("playlistitem",t.originalValue||t),i){var e=r.play();typeof e<"u"&&"function"==typeof e.then&&e.then(null,function(n){})}l0(r,r.playlist.autoadvance_.delay)})}(n.player_,i[n.currentIndex_]),n.currentIndex_;var u=n.player_.currentSrc()||"";if(n.currentPlaylistItemId_){var c=function(r,t){for(var i=0;i<r.length;i++)if(r[i].playlistItemId_===t)return i;return-1}(i,n.currentPlaylistItemId_),d=i[c];if(d&&Array.isArray(d.sources)&&Hh([d],u)>-1)return n.currentIndex_=c,n.currentIndex_;n.currentPlaylistItemId_=null}return n.currentIndex_=n.indexOf(u),n.currentIndex_},n.contains=function(a){return-1!==n.indexOf(a)},n.indexOf=function(a){if("string"==typeof a)return Hh(i,a);for(var u=Array.isArray(a)?a:a.sources,c=0;c<u.length;c++){var d=u[c];if("string"==typeof d)return Hh(i,d);if(d.src)return Hh(i,d.src)}return-1},n.currentIndex=function(){return n.currentItem()},n.lastIndex=function(){return i.length-1},n.nextIndex=function(){var a=n.currentItem();if(-1===a)return-1;var u=n.lastIndex();return n.repeat_&&a===u?0:Math.min(a+1,u)},n.previousIndex=function(){var a=n.currentItem();return-1===a?-1:n.repeat_&&0===a?n.lastIndex():Math.max(a-1,0)},n.first=function(){if(!e){var a=n.currentItem(0);if(i.length)return i[a].originalValue||i[a];n.currentIndex_=-1}},n.last=function(){if(!e){var a=n.currentItem(n.lastIndex());if(i.length)return i[a].originalValue||i[a];n.currentIndex_=-1}},n.next=function(){if(!e){var a=n.nextIndex();if(a!==n.currentIndex_){var u=n.currentItem(a);return i[u].originalValue||i[u]}}},n.previous=function(){if(!e){var a=n.previousIndex();if(a!==n.currentIndex_){var u=n.currentItem(a);return i[u].originalValue||i[u]}}},n.autoadvance=function(a){l0(n.player_,a)},n.repeat=function(a){return void 0===a?n.repeat_:"boolean"==typeof a?(n.repeat_=!!a,n.repeat_):void Rn.log.error("videojs-playlist: Invalid value for repeat",a)},n.sort=function(a){i.length&&(i.sort(a),!e&&s.trigger("playlistsorted"))},n.reverse=function(){i.length&&(i.reverse(),!e&&s.trigger("playlistsorted"))},n.shuffle=function(a){var y,c=(void 0===a?{}:a).rest,d=0,p=i;c&&(p=i.slice(d=n.currentIndex_+1)),p.length<=1||(function(r){for(var t=-1,i=r.length-1;++t<r.length;){var e=t+Math.floor(Math.random()*(i-t+1)),n=r[e];r[e]=r[t],r[t]=n}}(p),c&&(y=i).splice.apply(y,[d,p.length].concat(p)),e||s.trigger("playlistsorted"))},Array.isArray(r)?n(r.slice(),t):i=[],n}(this,r,t)};(Rn.registerPlugin||Rn.plugin)("playlist",d0),d0.VERSION="4.3.1";class X_{handleError(r){console.error("MediaPlayer error:",r)}}class $_ extends X_{constructor(){super()}get _defaultOptions(){return{controls:!0,autoplay:!0,controlBar:{playToggle:!0,volumePanel:{inline:!1},currentTimeDisplay:!0,timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,progressControl:!0,fullscreenToggle:!0}}}init(r,t){try{if(!this.player){const i=Object.assign(this._defaultOptions,t);this.player=Rn(r,i,()=>{console.log("onPlayerReady",this)})}}catch(i){this.handleError(i)}}load(r){try{if(this.player){if(console.log("loading src"),1==r.length)return void this.player.src(r[0].src);this.player.playlist(r),this.player.playlist.autoadvance(0)}}catch(t){console.log("Entered load.func [catch]"),this.handleError(t)}}play(){try{this.player&&this.player.play()}catch(r){this.handleError(r)}}pause(){try{this.player&&this.player.pause()}catch(r){this.handleError(r)}}dispose(){try{this.player&&this.player.dispose()}catch(r){this.handleError(r)}}}const K_=["target"];let f0=(()=>{class s{constructor(){}ngOnInit(){this._player=new $_,this.init()}init(t){this._player?.init(this._target.nativeElement,t)}load(t){this._player?.load(t)}play(){this._player?.play()}pause(){this._player?.pause()}dispose(){this._player?.dispose()}ngOnDestroy(){this.dispose()}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275cmp=S.VBU({type:s,selectors:[["app-vjs-player"]],viewQuery:function(i,e){if(1&i&&S.GBs(K_,7),2&i){let n;S.mGM(n=S.lsd())&&(e._target=n.first)}},standalone:!0,features:[S.aNF],decls:2,vars:0,consts:[["target",""],["controls","","muted","","preload","auto",1,"video-js","vjs-default-skin"]],template:function(i,e){1&i&&S.nrm(0,"video",1,0)},styles:[".video-js[_ngcontent-%COMP%]{width:100%;height:100%}video[_ngcontent-%COMP%]{position:relative!important;height:100%;width:100%}"]})}return s})();var ds=function(s){return s.PLAY="PLAY",s.PAUSE="PAUSE",s.LOAD="LOAD",s}(ds||{}),Pv=De(7376),Gu=De(9928);let kv=(()=>{class s{constructor(){this._previewSubject=new Gu.t([]),this._currentActionSubject=new Gu.t(ds.PAUSE),this.preview$=this._previewSubject.asObservable(),this.currentAction$=this._currentActionSubject.asObservable()}_setPreview(t){this._previewSubject.next(t)}_play(){this._currentActionSubject.next(ds.PLAY)}_pause(){this._currentActionSubject.next(ds.PAUSE)}load(){this._currentActionSubject.next(ds.LOAD)}preview(t){this._setPreview(t),this._play()}stopPreview(){this._pause()}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275prov=S.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),Y_=(()=>{class s{constructor(t){this.scenePreviewService=t,this._previewSubscription=null,this._actionSubscription=null,this._currentPreview=[]}ngOnInit(){this.subscribeToCurrentPreview(),this.subscribeToCurrentAction()}subscribeToCurrentPreview(){this._previewSubscription=this.scenePreviewService.preview$.subscribe(t=>{this._currentPreview=t,this.scenePreviewService.load()})}subscribeToCurrentAction(){this._actionSubscription=this.scenePreviewService.currentAction$.subscribe(t=>{switch(t){case ds.PLAY:this._vjsPlayer.play();break;case ds.PAUSE:this._vjsPlayer.pause();break;case ds.LOAD:const i=this._convertToPlayerSource(this._currentPreview);this._vjsPlayer.load(i);break;default:console.error("Unrecognized action")}})}_isPreviewChanged(t){return(0,Pv.isEmpty)((0,Pv.differenceWith)(this._currentPreview,t,Pv.isEqual))}_convertToPlayerSource(t){return t.map(i=>({src:`${i.url}?fm=hls`,type:"application/x-mpegURL"}))}ngOnDestroy(){this._vjsPlayer.dispose(),this._previewSubscription?.unsubscribe(),this._actionSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||s)(S.rXU(kv))};static#t=this.\u0275cmp=S.VBU({type:s,selectors:[["app-scene-preview"]],viewQuery:function(i,e){if(1&i&&S.GBs(f0,7),2&i){let n;S.mGM(n=S.lsd())&&(e._vjsPlayer=n.first)}},standalone:!0,features:[S.aNF],decls:6,vars:0,consts:[[1,"scene__preview"],[1,"scene__preview__title"],[1,"scene__preview__player"]],template:function(i,e){1&i&&(S.j41(0,"div",0)(1,"div",1)(2,"h4"),S.EFF(3,"Preview"),S.k0s()(),S.j41(4,"div",2),S.nrm(5,"app-vjs-player"),S.k0s()())},dependencies:[f0],styles:[".scene__preview[_ngcontent-%COMP%]{height:100%;width:100%}.scene__preview[_ngcontent-%COMP%]   .scene__preview__player[_ngcontent-%COMP%]{height:auto;width:100%}video#video-player[_ngcontent-%COMP%]{width:100%!important;height:auto!important}.video-js.vjs-default-skin[_ngcontent-%COMP%]{position:relative;width:100%!important;height:auto!important}img.empty-state[_ngcontent-%COMP%]{width:100%;height:100%}"]})}return s})();var Fn=De(5667);let ry=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=S.$C({type:s});static#i=this.\u0275inj=S.G2t({imports:[qe.yE,he.MD,qe.yE]})}return s})();function ny(s,r){if(1&s){const t=S.RV6();S.j41(0,"button",7),S.bIt("click",function(){S.eBV(t);const e=S.XpG();return S.Njj(e.onPlay())}),S.j41(1,"mat-icon"),S.EFF(2,"play_arrow"),S.k0s()()}}function ay(s,r){if(1&s){const t=S.RV6();S.j41(0,"button",7),S.bIt("click",function(){S.eBV(t);const e=S.XpG();return S.Njj(e.onPause())}),S.j41(1,"mat-icon"),S.EFF(2,"pause"),S.k0s()()}}let sy=(()=>{class s{constructor(){this.play=(0,S.CGW)(),this.pause=(0,S.CGW)()}ngOnInit(){}onPlay(){this.play.emit()}onPause(){this.pause.emit()}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275cmp=S.VBU({type:s,selectors:[["app-scene"]],inputs:{scene:"scene",isPlaying:"isPlaying"},outputs:{play:"play",pause:"pause"},standalone:!0,features:[S.aNF],decls:13,vars:4,consts:[["cdkDrag","",1,"scene",3,"cdkDragData"],[1,"scene__content"],["cdkDragHandle","",1,"scene__content__drag__handler"],[1,"scene__title"],[1,"scene__description"],[1,"scene__controls"],["mat-icon-button",""],["mat-icon-button","",3,"click"]],template:function(i,e){1&i&&(S.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon"),S.EFF(4,"drag_indicator"),S.k0s()(),S.j41(5,"div")(6,"h4",3),S.EFF(7),S.k0s(),S.j41(8,"h5",4),S.EFF(9),S.k0s()()(),S.j41(10,"div",5),S.DNE(11,ny,3,0,"button",6)(12,ay,3,0,"button",6),S.k0s()()),2&i&&(S.Y8G("cdkDragData",e.scene),S.R7$(7),S.JRh(e.scene.title),S.R7$(2),S.SpI("Duration: ",e.scene.durationInS,"s"),S.R7$(2),S.vxM(e.isPlaying?12:11))},dependencies:[Ee.Hl,Ee.iY,R.m_,R.An,ry,Fn.T1,Fn.Fb],styles:[".scene[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;align-items:center;margin:1rem auto;padding:1rem;background-color:#2b2c31;border-radius:10px}.scene[_ngcontent-%COMP%]   .scene__content[_ngcontent-%COMP%]{display:flex;align-items:center}.scene[_ngcontent-%COMP%]   .scene__content[_ngcontent-%COMP%]   .scene__content__drag__handler[_ngcontent-%COMP%]{margin-right:1rem;cursor:grab}.scene[_ngcontent-%COMP%]   .scene__content[_ngcontent-%COMP%]   .scene__title[_ngcontent-%COMP%], .scene[_ngcontent-%COMP%]   .scene__content[_ngcontent-%COMP%]   .scene__description[_ngcontent-%COMP%]{margin:0}.scene[_ngcontent-%COMP%]   .scene__content[_ngcontent-%COMP%]   .scene__title[_ngcontent-%COMP%]{font-weight:500}.scene[_ngcontent-%COMP%]   .scene__content[_ngcontent-%COMP%]   .scene__description[_ngcontent-%COMP%]{font-weight:400;color:#c2bec7}.scene[_ngcontent-%COMP%]   .scene__controls[_ngcontent-%COMP%]{cursor:pointer}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}return s})();var oy=De(4421),uy=De(5006);const h0={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var jh,cy=new Uint8Array(16);function dy(){if(!jh&&!(jh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jh(cy)}for(var rr=[],Ov=0;Ov<256;++Ov)rr.push((Ov+256).toString(16).slice(1));const m0=function fy(s,r,t){if(h0.randomUUID&&!r&&!s)return h0.randomUUID();var i=(s=s||{}).random||(s.rng||dy)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,r){t=t||0;for(var e=0;e<16;++e)r[t+e]=i[e];return r}return function p0(s,r=0){return(rr[s[r+0]]+rr[s[r+1]]+rr[s[r+2]]+rr[s[r+3]]+"-"+rr[s[r+4]]+rr[s[r+5]]+"-"+rr[s[r+6]]+rr[s[r+7]]+"-"+rr[s[r+8]]+rr[s[r+9]]+"-"+rr[s[r+10]]+rr[s[r+11]]+rr[s[r+12]]+rr[s[r+13]]+rr[s[r+14]]+rr[s[r+15]]).toLowerCase()}(i)},hy=JSON.parse('[{"id":"1","title":"Scene 1","url":"https://content.shuffll.com/files/background-music/1.mp4","durationInS":5},{"id":"2","title":"Scene 2","url":"https://content.shuffll.com/files/background-music/2.mp4","durationInS":5},{"id":"3","title":"Scene 3","url":"https://content.shuffll.com/files/background-music/3.mp4","durationInS":5}]');let py=(()=>{class s{constructor(){this._scenes=hy}getScenes(){return(0,oy.of)(this._scenes).pipe((0,uy.T)(t=>t.map(i=>({...i,id:m0()}))))}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275prov=S.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const my=(s,r)=>r.id,gy=()=>["timeline-track","timeline-empty"];function vy(s,r){if(1&s){const t=S.RV6();S.j41(0,"app-scene",5),S.bIt("play",function(){const e=S.eBV(t).$implicit,n=S.XpG();return S.Njj(n.handleScenePlay(e))})("pause",function(){const e=S.eBV(t).$implicit,n=S.XpG();return S.Njj(n.handleScenePause(e))}),S.k0s()}if(2&s){const t=r.$implicit,i=S.XpG();S.Y8G("scene",t)("isPlaying",(null==i.playingScene?null:i.playingScene.id)===t.id)}}function _y(s,r){1&s&&(S.j41(0,"div",4),S.EFF(1,"no scenes yet!"),S.k0s())}let yy=(()=>{class s{constructor(t){this.scenesService=t,this.onScenePlay=(0,S.CGW)(),this.onScenePause=(0,S.CGW)(),this._subscriptions=[],this.scenes=[],this.playingScene=void 0}ngOnInit(){this._subscriptions.push(this.scenesService.getScenes().subscribe(t=>{this.scenes=t}))}handleScenePlay(t){this.playingScene=t,this.onScenePlay.emit(t)}handleScenePause(t){this.playingScene===t&&(this.playingScene=void 0,this.onScenePause.emit(t))}ngOnDestroy(){this._subscriptions.forEach(t=>t.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||s)(S.rXU(py))};static#t=this.\u0275cmp=S.VBU({type:s,selectors:[["app-scenes"]],outputs:{onScenePlay:"onScenePlay",onScenePause:"onScenePause"},standalone:!0,features:[S.aNF],decls:8,vars:4,consts:[[1,"scenes__list"],[1,"scenes__list__title"],["id","scenes","cdkDropList","",1,"scenes__list__items",3,"cdkDropListConnectedTo","cdkDropListData"],[3,"scene","isPlaying"],[1,"no-scenes"],[3,"play","pause","scene","isPlaying"]],template:function(i,e){1&i&&(S.j41(0,"div",0)(1,"div",1)(2,"h4"),S.EFF(3,"All Scenes"),S.k0s()(),S.j41(4,"div",2),S.Z7z(5,vy,1,2,"app-scene",3,my,!1,_y,2,0,"div",4),S.k0s()()),2&i&&(S.R7$(4),S.Y8G("cdkDropListConnectedTo",S.lJ4(3,gy))("cdkDropListData",e.scenes),S.R7$(),S.Dyx(e.scenes))},dependencies:[Fn.ad,Fn.O7,sy]})}return s})();class Ty{constructor(){this.startTime=0,this.elapsed=0,this.running=!1,this.totalDuration=1/0,this.tickCallback=()=>{},this.lastUpdateTime=0,this.updateInterval=100}start(r){this.totalDuration=1e3*r,this.running||(this.running=!0,this.startTime=performance.now()-this.elapsed,this.lastUpdateTime=this.startTime,this.tick())}pause(){this.running&&(this.running=!1,this.elapsed=performance.now()-this.startTime)}reset(){this.running=!1,this.elapsed=0,this.totalDuration=1/0,this.tickCallback(this.elapsed)}onTick(r){this.tickCallback=r}tick(){if(this.running){const r=performance.now();this.elapsed=r-this.startTime,r-this.lastUpdateTime>=this.updateInterval&&(this.tickCallback(this.elapsed),this.lastUpdateTime=r),this.elapsed>=this.totalDuration?(this.pause(),this.elapsed=this.totalDuration,this.tickCallback(this.elapsed)):requestAnimationFrame(this.tick.bind(this))}}}let wo=(()=>{class s{constructor(){this._tracksSubject=new Gu.t([]),this._totalDurationSubject=new Gu.t(0),this._currentTimeSubject=new Gu.t(0),this._isPlayingSubject=new Gu.t(!1),this.tracks$=this._tracksSubject.asObservable(),this.totalDuration$=this._totalDurationSubject.asObservable(),this.currentTime$=this._currentTimeSubject.asObservable(),this.isPlaying$=this._isPlayingSubject.asObservable(),this._timerEngine=new Ty,this._timerEngine.onTick(t=>{this._currentTimeSubject.next(t/1e3)})}get currentTracksValue(){return this._tracksSubject.getValue()}get timelineTotalDurationValue(){return this._totalDurationSubject.getValue()}get currentTimeValue(){return this._currentTimeSubject.getValue()}get isPlayingValue(){return this._isPlayingSubject.getValue()}calculateTotalDuration(){const t=this._tracksSubject.getValue().reduce((i,e)=>{const n=e.scenes.reduce((a,u)=>a+u.durationInS,0);return Math.max(i,n)},0);this._totalDurationSubject.next(t)}setTracks(t){this._tracksSubject.next(t),this.calculateTotalDuration()}getPixelsPerSecond(t){const i=this._totalDurationSubject.getValue();return i?t/i:0}start(){const t=this._totalDurationSubject.getValue();this._timerEngine.start(t),this._isPlayingSubject.next(!0)}pause(){this._timerEngine.pause(),this._isPlayingSubject.next(!1)}reset(){this._timerEngine.reset(),this._currentTimeSubject.next(0),this._isPlayingSubject.next(!1)}static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275prov=S.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function by(s,r){if(1&s){const t=S.RV6();S.j41(0,"button",5),S.bIt("click",function(){S.eBV(t);const e=S.XpG();return S.Njj(e.play())}),S.j41(1,"mat-icon"),S.EFF(2,"play_arrow"),S.k0s()()}}function xy(s,r){if(1&s){const t=S.RV6();S.j41(0,"button",5),S.bIt("click",function(){S.eBV(t);const e=S.XpG();return S.Njj(e.pause())}),S.j41(1,"mat-icon"),S.EFF(2,"pause"),S.k0s()()}}let Sy=(()=>{class s{constructor(t){this.timelineService=t,this.onTimelinePlay=(0,S.CGW)(),this.onTimelinePause=(0,S.CGW)(),this.onTimelineReset=(0,S.CGW)(),this.isPlaying=this.timelineService.isPlayingValue,this.currentTime=this.timelineService.currentTimeValue,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.timelineService.currentTime$.subscribe(t=>{this.currentTime=t}),this.timelineService.isPlaying$.subscribe(t=>{this.isPlaying=t}))}play(){this.onTimelinePlay.emit()}pause(){this.onTimelinePause.emit()}reset(){this.onTimelineReset.emit()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||s)(S.rXU(wo))};static#t=this.\u0275cmp=S.VBU({type:s,selectors:[["app-timeline-controls"]],outputs:{onTimelinePlay:"onTimelinePlay",onTimelinePause:"onTimelinePause",onTimelineReset:"onTimelineReset"},standalone:!0,features:[S.aNF],decls:14,vars:2,consts:[[1,"timeline__controls"],[1,"timeline__controls_time"],[1,"timeline__controls_main"],["mat-icon-button",""],[1,"timeline__controls_secondary"],["mat-icon-button","",3,"click"]],template:function(i,e){1&i&&(S.j41(0,"div",0)(1,"div",1)(2,"h5"),S.EFF(3),S.k0s()(),S.j41(4,"div",2),S.DNE(5,by,3,0,"button",3)(6,xy,3,0,"button",3),S.k0s(),S.j41(7,"div",4)(8,"button",3)(9,"mat-icon"),S.EFF(10,"zoom_in"),S.k0s()(),S.j41(11,"button",3)(12,"mat-icon"),S.EFF(13,"zoom_out"),S.k0s()()()()),2&i&&(S.R7$(3),S.SpI("Current Time: ",e.currentTime.toFixed(3),""),S.R7$(2),S.vxM(e.isPlaying?6:5))},dependencies:[Ee.Hl,Ee.iY,R.m_,R.An],styles:[".timeline__controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;align-items:center;padding:0 1rem;background-color:#1e1a1d;border:3px solid #2b2c31}.timeline__controls[_ngcontent-%COMP%]   .timeline__controls_time[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:auto 0}"]})}return s})(),Ey=(()=>{class s{constructor(t){this.timelineService=t,this.currentTime=this.timelineService.currentTimeValue,this.currentPosition=0,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.timelineService.currentTime$.subscribe(t=>{this.currentTime=t,this.calculateCursorPosition()}))}calculateCursorPosition(){const t=this.timelineService.getPixelsPerSecond(this.timelineWidth),e=this.currentTime*t-t/2;e>0&&(this.currentPosition=e)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||s)(S.rXU(wo))};static#t=this.\u0275cmp=S.VBU({type:s,selectors:[["app-timeline-cursor"]],inputs:{timelineWidth:"timelineWidth"},standalone:!0,features:[S.aNF],decls:2,vars:2,consts:[["cdkDrag","","cdkDragBoundary","track","cdkDragLockAxis","x",1,"cursor",3,"resize"],[1,"cursor__marker"]],template:function(i,e){1&i&&(S.j41(0,"div",0),S.bIt("resize",function(){return e.calculateCursorPosition()},!1,S.tSv),S.nrm(1,"div",1),S.k0s()),2&i&&S.xc7("left",e.currentPosition,"px")},dependencies:[Fn.T1],styles:[".cursor[_ngcontent-%COMP%]{width:3px;height:100%;background-color:red;position:absolute;top:7px;left:0;z-index:2;cursor:grab}.cursor[_ngcontent-%COMP%]   .cursor__marker[_ngcontent-%COMP%]{position:relative;left:-3px;height:9px;width:9px;background-color:red;transform:rotate(45deg)}"]})}return s})();De(9417),De(5254);let My=(()=>{class s{static#e=this.\u0275fac=function(i){return new(i||s)};static#t=this.\u0275mod=S.$C({type:s});static#i=this.\u0275inj=S.G2t({imports:[qe.yE,qe.pZ]})}return s})();function Fy(s,r){if(1&s&&(S.j41(0,"div",1),S.EFF(1),S.k0s()),2&s){const t=r.$index;S.R7$(),S.SpI("",t+1,"s")}}let Ny=(()=>{class s{constructor(t){this.timelineService=t,this.timelineTracks=S.hFB.required(),this.totalDurationInS=(0,S.vPA)(this.timelineService.timelineTotalDurationValue),this.ticks=(0,S.EWP)(()=>Array(this.totalDurationInS())),this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.timelineService.totalDuration$.subscribe(t=>{this.totalDurationInS.set(t)}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||s)(S.rXU(wo))};static#t=this.\u0275cmp=S.VBU({type:s,selectors:[["app-timeline-ruler"]],inputs:{timelineTracks:[1,"timelineTracks"]},standalone:!0,features:[S.aNF],decls:3,vars:0,consts:[[1,"ruler"],[1,"tick"]],template:function(i,e){1&i&&(S.j41(0,"div",0),S.Z7z(1,Fy,2,1,"div",1,S.Vm6),S.k0s()),2&i&&(S.R7$(),S.Dyx(e.ticks()))},dependencies:[My],styles:[".ruler[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;font-size:.8rem;width:100%;padding:.25rem 0;color:#c2bec7;background-color:#2b2c31}.ruler[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]{flex:1;text-align:center}"]})}return s})(),By=(()=>{class s{constructor(t){this.timelineService=t,this.removeTrackItem=(0,S.CGW)(),this.trackSceneWidth=0,this.trackSceneLeftOffset=0,this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.timelineService.totalDuration$.subscribe(t=>{this.calculateSceneWidth()}))}handleRemoveTrackItem(){this.removeTrackItem.emit(this.scene)}calculateSceneWidth(){const t=this.timelineService.getPixelsPerSecond(this.timelineWidth);this.trackSceneWidth=this.scene.durationInS*t-t/2}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||s)(S.rXU(wo))};static#t=this.\u0275cmp=S.VBU({type:s,selectors:[["app-timeline-track-item"]],inputs:{scene:"scene",timelineWidth:"timelineWidth"},outputs:{removeTrackItem:"removeTrackItem"},standalone:!0,features:[S.aNF],decls:7,vars:3,consts:[["cdkDrag","",1,"track__item",3,"resize"],[1,"track__item__controls"],["mat-icon-button","",3,"click"]],template:function(i,e){1&i&&(S.j41(0,"div",0),S.bIt("resize",function(){return e.calculateSceneWidth()},!1,S.tSv),S.j41(1,"span"),S.EFF(2),S.k0s(),S.j41(3,"div",1)(4,"button",2),S.bIt("click",function(){return e.handleRemoveTrackItem()}),S.j41(5,"mat-icon"),S.EFF(6,"close"),S.k0s()()()()),2&i&&(S.xc7("width",e.trackSceneWidth,"px"),S.R7$(2),S.JRh(e.scene.title))},dependencies:[Ee.Hl,Ee.iY,R.m_,R.An],styles:[".track__item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;align-items:center;position:relative;padding:5px;margin:0 5px;background-color:#2b2c31;border-radius:10px;line-height:50px;cursor:grab}.track__item[_ngcontent-%COMP%]   .track__item__controls[_ngcontent-%COMP%]{display:flex;align-items:center}"]})}return s})();function Uy(s,r){if(1&s){const t=S.RV6();S.j41(0,"app-timeline-track-item",4),S.bIt("removeTrackItem",function(e){S.eBV(t);const n=S.XpG();return S.Njj(n.handleRemoveTrackScene(e))}),S.k0s()}if(2&s){const t=r.$implicit,i=S.XpG();S.Y8G("scene",t)("timelineWidth",i.timelineWidth)}}function Vy(s,r){1&s&&(S.j41(0,"div",3)(1,"h5"),S.EFF(2,"Empty track"),S.k0s()())}let Hy=(()=>{class s{constructor(t){this.timelineService=t,this.onTrackUpdated=(0,S.CGW)(),this.subscriptions=[]}ngOnInit(){}sceneDropped(t){this.handleTrackSourceDropped(t),this.handleTrackSourcesRearranged(t),this.onTrackUpdated.emit(this.track)}handleTrackSourceDropped(t){t.previousContainer!==t.container&&this.track.scenes.push(t.previousContainer.data[t.previousIndex])}handleTrackSourcesRearranged(t){t.previousContainer===t.container&&(0,Fn.HD)(this.track.scenes,t.previousIndex,t.currentIndex)}handleRemoveTrackScene(t){const i=this.track.scenes.findIndex(a=>a.id===t.id);this.track.scenes.splice(i,1);const e=[...this.timelineService.currentTracksValue],n=e.findIndex(a=>a.id===this.track.id);-1!==n&&e.splice(n,1,this.track),this.timelineService.setTracks(e)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||s)(S.rXU(wo))};static#t=this.\u0275cmp=S.VBU({type:s,selectors:[["app-timeline-track"]],viewQuery:function(i,e){if(1&i&&S.GBs(y0,5),2&i){let n;S.mGM(n=S.lsd())&&(e.timelineEl=n.first)}},inputs:{track:"track",timelineWidth:"timelineWidth"},outputs:{onTrackUpdated:"onTrackUpdated"},standalone:!0,features:[S.aNF],decls:5,vars:2,consts:[["id","timeline-track","cdkDropList","",1,"track",3,"cdkDropListDropped","cdkDropListData"],[1,"track__content"],[3,"scene","timelineWidth"],[1,"empty-state"],[3,"removeTrackItem","scene","timelineWidth"]],template:function(i,e){1&i&&(S.j41(0,"div",0),S.bIt("cdkDropListDropped",function(a){return e.sceneDropped(a)}),S.j41(1,"div",1),S.Z7z(2,Uy,1,2,"app-timeline-track-item",2,S.Vm6,!1,Vy,3,0,"div",3),S.k0s()()),2&i&&(S.Y8G("cdkDropListData",e.track.scenes),S.R7$(2),S.Dyx(e.track.scenes))},dependencies:[Fn.ad,Fn.O7,By],styles:[".track[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;padding:10px 0;background-color:#5f00c0}.track[_ngcontent-%COMP%]   .track__content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;flex-wrap:nowrap;justify-content:flex-start;width:100%}.track[_ngcontent-%COMP%]   .track__content[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;height:100%;width:100%;margin:auto;color:#c2bec7}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}return s})();const jy=["timeline"],Wy=(s,r)=>r.id;function qy(s,r){if(1&s&&S.nrm(0,"app-timeline-ruler",7)(1,"app-timeline-cursor",8),2&s){const t=S.XpG();S.Y8G("timelineTracks",t.timelineTracks),S.R7$(),S.Y8G("timelineWidth",t.timelineWidth)}}function Gy(s,r){if(1&s){const t=S.RV6();S.j41(0,"app-timeline-track",9),S.bIt("onTrackUpdated",function(e){S.eBV(t);const n=S.XpG();return S.Njj(n.handleTrackUpdated(e))}),S.k0s()}if(2&s){const t=r.$implicit,i=S.XpG();S.Y8G("track",t)("timelineWidth",i.timelineWidth)}}function zy(s,r){if(1&s){const t=S.RV6();S.j41(0,"div",10),S.bIt("cdkDropListDropped",function(e){S.eBV(t);const n=S.XpG();return S.Njj(n.sceneDropped(e))}),S.j41(1,"h5"),S.EFF(2,"No tracks were added yet"),S.k0s()()}}let y0=(()=>{class s{constructor(t,i){this.timelineService=t,this.previewService=i,this.timelineWidth=0,this.timelineTracks=[],this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.timelineService.tracks$.subscribe(t=>{this.timelineTracks=t}))}ngAfterViewInit(){this.calculateTimelineWidth()}sceneDropped(t){if(0===this.timelineService.currentTracksValue.length){const n=this.createTrack(t.previousContainer.data[t.previousIndex]);this.timelineService.setTracks([...this.timelineService.currentTracksValue,n])}}createTrack(t){const i=m0();return{id:i,title:`track#${i}`,scenes:t?[t]:[]}}handleTrackUpdated(t){const i=[...this.timelineTracks],e=i.findIndex(n=>n.id===t.id);-1!==e&&i.splice(e,1,t),this.timelineService.setTracks(i)}handleTimelinePlay(){this.previewService.preview(this.timelineTracks[0].scenes),this.timelineService.start()}handleTimelinePause(){this.previewService.stopPreview(),this.timelineService.pause()}handleTimelineReset(){this.previewService.stopPreview(),this.timelineService.reset()}calculateTimelineWidth(){this.timelineWidth=this.timelineEl.nativeElement.clientWidth}onResize(t){this.calculateTimelineWidth()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||s)(S.rXU(wo),S.rXU(kv))};static#t=this.\u0275cmp=S.VBU({type:s,selectors:[["app-timeline"]],viewQuery:function(i,e){if(1&i&&S.GBs(jy,5),2&i){let n;S.mGM(n=S.lsd())&&(e.timelineEl=n.first)}},hostBindings:function(i,e){1&i&&S.bIt("resize",function(a){return e.onResize(a)},!1,S.tSv)},standalone:!0,features:[S.aNF],decls:9,vars:2,consts:[["timeline",""],[1,"timeline"],[3,"onTimelinePlay","onTimelinePause","onTimelineReset"],[1,"timeline__content"],["cdkDropListGroup","",1,"timeline__content__tracks"],[3,"track","timelineWidth"],["id","timeline-empty","cdkDropList","",1,"empty-state"],[3,"timelineTracks"],[3,"timelineWidth"],[3,"onTrackUpdated","track","timelineWidth"],["id","timeline-empty","cdkDropList","",1,"empty-state",3,"cdkDropListDropped"]],template:function(i,e){if(1&i){const n=S.RV6();S.j41(0,"div",1)(1,"app-timeline-controls",2),S.bIt("onTimelinePlay",function(){return S.eBV(n),S.Njj(e.handleTimelinePlay())})("onTimelinePause",function(){return S.eBV(n),S.Njj(e.handleTimelinePause())})("onTimelineReset",function(){return S.eBV(n),S.Njj(e.handleTimelineReset())}),S.k0s(),S.j41(2,"div",3),S.DNE(3,qy,2,2),S.j41(4,"div",4,0),S.Z7z(6,Gy,1,2,"app-timeline-track",5,Wy,!1,zy,3,0,"div",6),S.k0s()()()}2&i&&(S.R7$(3),S.vxM(e.timelineTracks.length>0?3:-1),S.R7$(3),S.Dyx(e.timelineTracks))},dependencies:[Fn.ad,Fn.O7,Fn.RK,Sy,Ny,Hy,Ey],styles:[".timeline[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;margin-top:20px;width:100%}.timeline[_ngcontent-%COMP%]   .timeline__content[_ngcontent-%COMP%]{position:relative}.timeline[_ngcontent-%COMP%]   .timeline__content[_ngcontent-%COMP%]   .timeline__content__tracks[_ngcontent-%COMP%]{height:100%;width:100%}.timeline[_ngcontent-%COMP%]   .timeline__content[_ngcontent-%COMP%]   .timeline__content__tracks[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;height:100%;width:100%;margin:auto;color:#c2bec7}"]})}return s})(),Xy=(()=>{class s{constructor(t,i){this.timelineService=t,this.scenePreviewService=i}handleScenePlay(t){this.scenePreviewService.preview([t])}handleScenePause(t){this.scenePreviewService.stopPreview()}static#e=this.\u0275fac=function(i){return new(i||s)(S.rXU(wo),S.rXU(kv))};static#t=this.\u0275cmp=S.VBU({type:s,selectors:[["app-video-editor"]],standalone:!0,features:[S.aNF],decls:12,vars:0,consts:[["scenePreview",""],[1,"mat-elevation-z3"],[1,"spacer"],[1,"toolbar__controls"],["mat-fab","","extended",""],[1,"grid-container","flex-between"],[3,"onScenePlay","onScenePause"]],template:function(i,e){if(1&i){const n=S.RV6();S.j41(0,"mat-toolbar",1)(1,"h2"),S.EFF(2,"WAFFLLE"),S.k0s(),S.nrm(3,"div",2),S.j41(4,"div",3)(5,"button",4),S.EFF(6,"Export"),S.k0s()()(),S.j41(7,"div",5)(8,"app-scenes",6),S.bIt("onScenePlay",function(u){return S.eBV(n),S.Njj(e.handleScenePlay(u))})("onScenePause",function(u){return S.eBV(n),S.Njj(e.handleScenePause(u))}),S.k0s(),S.nrm(9,"app-scene-preview",null,0),S.k0s(),S.nrm(11,"app-timeline")}},dependencies:[Ee.Hl,Ee.Sr,R.m_,we,Re,yy,Y_,y0],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:100%;width:100%}.toolbar__controls[_ngcontent-%COMP%]   .button-round[_ngcontent-%COMP%]{color:#333;background-color:#f5f5f5}.toolbar__controls[_ngcontent-%COMP%]   .button-round[_ngcontent-%COMP%]:hover{background-color:#c2bec7}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,1fr);gap:20px;padding:20px}@media (min-width: 576px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.container[_ngcontent-%COMP%]{width:90%}app-scenes[_ngcontent-%COMP%], app-scene-preview[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;width:100%}"]})}return s})()},1452:(rt,We,De)=>{"use strict";var Ee=De(2843);rt.exports=function(Ce,he){return void 0===he&&(he=!1),function(je,He,Ge){if(je)Ce(je);else if(He.statusCode>=400&&He.statusCode<=599){var Re=Ge;if(he)if(Ee.TextDecoder){var ft=function S(qe){return void 0===qe&&(qe=""),qe.toLowerCase().split(";").reduce(function(Ce,he){var je=he.split("="),Ge=je[1];return"charset"===je[0].trim()?Ge.trim():Ce},"utf-8")}(He.headers&&He.headers["content-type"]);try{Re=new TextDecoder(ft).decode(Ge)}catch{}}else Re=String.fromCharCode.apply(null,new Uint8Array(Ge));Ce({cause:Re})}else Ce(null,Ge)}}},7621:(rt,We,De)=>{"use strict";var Ee=De(2843),R=De(4634),S=De(9819);He.httpHandler=De(1452);var qe=function(et){var M={};return et&&et.trim().split("\n").forEach(function(It){var ue=It.indexOf(":"),vt=It.slice(0,ue).trim().toLowerCase(),Ie=It.slice(ue+1).trim();typeof M[vt]>"u"?M[vt]=Ie:Array.isArray(M[vt])?M[vt].push(Ie):M[vt]=[M[vt],Ie]}),M};function je(we,et,M){var It=we;return S(et)?(M=et,"string"==typeof we&&(It={uri:we})):It=R({},et,{uri:we}),It.callback=M,It}function He(we,et,M){return Ge(et=je(we,et,M))}function Ge(we){if(typeof we.callback>"u")throw new Error("callback argument missing");var et=!1,M=function(Le,Oe,Fe){et||(et=!0,we.callback(Le,Oe,Fe))};function ue(){var _e=void 0;if(_e=ne.response?ne.response:ne.responseText||function Re(we){try{if("document"===we.responseType)return we.responseXML;if(""===we.responseType&&(!we.responseXML||"parsererror"!==we.responseXML.documentElement.nodeName))return we.responseXML}catch{}return null}(ne),U)try{_e=JSON.parse(_e)}catch{}return _e}function vt(_e){return clearTimeout(Q),_e instanceof Error||(_e=new Error(""+(_e||"Unknown XMLHttpRequest Error"))),_e.statusCode=0,M(_e,Ae)}function Ie(){if(!Je){var _e;clearTimeout(Q);var Le=Ae,Oe=null;return 0!==(_e=we.useXDR&&void 0===ne.status?200:1223===ne.status?204:ne.status)?(Le={body:ue(),statusCode:_e,method:ht,headers:{},url:Y,rawRequest:ne},ne.getAllResponseHeaders&&(Le.headers=qe(ne.getAllResponseHeaders()))):Oe=new Error("Internal XMLHttpRequest Error"),M(Oe,Le,Le.body)}}var ne=we.xhr||null;ne||(ne=we.cors||we.useXDR?new He.XDomainRequest:new He.XMLHttpRequest);var pe,Je,Q,Y=ne.url=we.uri||we.url,ht=ne.method=we.method||"GET",_t=we.body||we.data,it=ne.headers=we.headers||{},N=!!we.sync,U=!1,Ae={body:void 0,headers:{},statusCode:0,method:ht,url:Y,rawRequest:ne};if("json"in we&&!1!==we.json&&(U=!0,it.accept||it.Accept||(it.Accept="application/json"),"GET"!==ht&&"HEAD"!==ht&&(it["content-type"]||it["Content-Type"]||(it["Content-Type"]="application/json"),_t=JSON.stringify(!0===we.json?_t:we.json))),ne.onreadystatechange=function It(){4===ne.readyState&&setTimeout(Ie,0)},ne.onload=Ie,ne.onerror=vt,ne.onprogress=function(){},ne.onabort=function(){Je=!0},ne.ontimeout=vt,ne.open(ht,Y,!N,we.username,we.password),N||(ne.withCredentials=!!we.withCredentials),!N&&we.timeout>0&&(Q=setTimeout(function(){if(!Je){Je=!0,ne.abort("timeout");var _e=new Error("XMLHttpRequest timeout");_e.code="ETIMEDOUT",vt(_e)}},we.timeout)),ne.setRequestHeader)for(pe in it)it.hasOwnProperty(pe)&&ne.setRequestHeader(pe,it[pe]);else if(we.headers&&!function he(we){for(var et in we)if(we.hasOwnProperty(et))return!1;return!0}(we.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in we&&(ne.responseType=we.responseType),"beforeSend"in we&&"function"==typeof we.beforeSend&&we.beforeSend(ne),ne.send(_t||null),ne}rt.exports=He,rt.exports.default=He,He.XMLHttpRequest=Ee.XMLHttpRequest||function ft(){},He.XDomainRequest="withCredentials"in new He.XMLHttpRequest?He.XMLHttpRequest:Ee.XDomainRequest,function Ce(we,et){for(var M=0;M<we.length;M++)et(we[M])}(["get","put","post","patch","head","delete"],function(we){He["delete"===we?"del":we]=function(et,M,It){return(M=je(et,M,It)).method=we.toUpperCase(),Ge(M)}})},3499:(rt,We)=>{"use strict";function Ee(Ce,he){return void 0===he&&(he=Object),he&&"function"==typeof he.freeze?he.freeze(Ce):Ce}var S=Ee({HTML:"text/html",isHTML:function(Ce){return Ce===S.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),qe=Ee({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(Ce){return Ce===qe.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});We.assign=function R(Ce,he){if(null===Ce||"object"!=typeof Ce)throw new TypeError("target is not an object");for(var je in he)Object.prototype.hasOwnProperty.call(he,je)&&(Ce[je]=he[je]);return Ce},We.find=function De(Ce,he,je){if(void 0===je&&(je=Array.prototype),Ce&&"function"==typeof je.find)return je.find.call(Ce,he);for(var He=0;He<Ce.length;He++)if(Object.prototype.hasOwnProperty.call(Ce,He)){var Ge=Ce[He];if(he.call(void 0,Ge,He,Ce))return Ge}},We.freeze=Ee,We.MIME_TYPE=S,We.NAMESPACE=qe},2219:(rt,We,De)=>{var R=De(3499),S=De(7315),qe=De(1032),Ce=De(1495),he=S.DOMImplementation,je=R.NAMESPACE,He=Ce.ParseError,Ge=Ce.XMLReader;function Re(Ie){return Ie.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function ft(Ie){this.options=Ie||{locator:{}}}function et(){this.cdata=!1}function M(Ie,ne){ne.lineNumber=Ie.lineNumber,ne.columnNumber=Ie.columnNumber}function It(Ie){if(Ie)return"\n@"+(Ie.systemId||"")+"#[line:"+Ie.lineNumber+",col:"+Ie.columnNumber+"]"}function ue(Ie,ne,pe){return"string"==typeof Ie?Ie.substr(ne,pe):Ie.length>=ne+pe||ne?new java.lang.String(Ie,ne,pe)+"":Ie}function vt(Ie,ne){Ie.currentElement?Ie.currentElement.appendChild(ne):Ie.doc.appendChild(ne)}ft.prototype.parseFromString=function(Ie,ne){var pe=this.options,Je=new Ge,Y=pe.domBuilder||new et,ht=pe.errorHandler,_t=pe.locator,it=pe.xmlns||{},N=/\/x?html?$/.test(ne),U=N?qe.HTML_ENTITIES:qe.XML_ENTITIES;return _t&&Y.setDocumentLocator(_t),Je.errorHandler=function we(Ie,ne,pe){if(!Ie){if(ne instanceof et)return ne;Ie=ne}var Je={},Y=Ie instanceof Function;function ht(_t){var it=Ie[_t];!it&&Y&&(it=2==Ie.length?function(N){Ie(_t,N)}:Ie),Je[_t]=it&&function(N){it("[xmldom "+_t+"]\t"+N+It(pe))}||function(){}}return pe=pe||{},ht("warning"),ht("error"),ht("fatalError"),Je}(ht,Y,_t),Je.domBuilder=pe.domBuilder||Y,N&&(it[""]=je.HTML),it.xml=it.xml||je.XML,Ie&&"string"==typeof Ie?Je.parse((pe.normalizeLineEndings||Re)(Ie),it,U):Je.errorHandler.error("invalid doc source"),Y.doc},et.prototype={startDocument:function(){this.doc=(new he).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(Ie,ne,pe,Je){var Y=this.doc,ht=Y.createElementNS(Ie,pe||ne),_t=Je.length;vt(this,ht),this.currentElement=ht,this.locator&&M(this.locator,ht);for(var it=0;it<_t;it++){Ie=Je.getURI(it);var N=Je.getValue(it),U=(pe=Je.getQName(it),Y.createAttributeNS(Ie,pe));this.locator&&M(Je.getLocator(it),U),U.value=U.nodeValue=N,ht.setAttributeNode(U)}},endElement:function(Ie,ne,pe){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(Ie,ne){},endPrefixMapping:function(Ie){},processingInstruction:function(Ie,ne){var pe=this.doc.createProcessingInstruction(Ie,ne);this.locator&&M(this.locator,pe),vt(this,pe)},ignorableWhitespace:function(Ie,ne,pe){},characters:function(Ie,ne,pe){if(Ie=ue.apply(this,arguments)){if(this.cdata)var Je=this.doc.createCDATASection(Ie);else Je=this.doc.createTextNode(Ie);this.currentElement?this.currentElement.appendChild(Je):/^\s*$/.test(Ie)&&this.doc.appendChild(Je),this.locator&&M(this.locator,Je)}},skippedEntity:function(Ie){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(Ie){(this.locator=Ie)&&(Ie.lineNumber=0)},comment:function(Ie,ne,pe){Ie=ue.apply(this,arguments);var Je=this.doc.createComment(Ie);this.locator&&M(this.locator,Je),vt(this,Je)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(Ie,ne,pe){var Je=this.doc.implementation;if(Je&&Je.createDocumentType){var Y=Je.createDocumentType(Ie,ne,pe);this.locator&&M(this.locator,Y),vt(this,Y),this.doc.doctype=Y}},warning:function(Ie){console.warn("[xmldom warning]\t"+Ie,It(this.locator))},error:function(Ie){console.error("[xmldom error]\t"+Ie,It(this.locator))},fatalError:function(Ie){throw new He(Ie,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(Ie){et.prototype[Ie]=function(){return null}}),We.DOMParser=ft},7315:(rt,We,De)=>{var Ee=De(3499),R=Ee.find,S=Ee.NAMESPACE;function qe(w){return""!==w}function he(w,O){return w.hasOwnProperty(O)||(w[O]=!0),w}function je(w){if(!w)return[];var O=function Ce(w){return w?w.split(/[\t\n\f\r ]+/).filter(qe):[]}(w);return Object.keys(O.reduce(he,{}))}function Ge(w,O){for(var j in w)Object.prototype.hasOwnProperty.call(w,j)&&(O[j]=w[j])}function Re(w,O){var j=w.prototype;if(!(j instanceof O)){let xe=function(){};xe.prototype=O.prototype,xe=new xe,Ge(j,xe),w.prototype=j=xe}j.constructor!=w&&("function"!=typeof w&&console.error("unknown Class:"+w),j.constructor=w)}var ft={},we=ft.ELEMENT_NODE=1,et=ft.ATTRIBUTE_NODE=2,M=ft.TEXT_NODE=3,It=ft.CDATA_SECTION_NODE=4,ue=ft.ENTITY_REFERENCE_NODE=5,vt=ft.ENTITY_NODE=6,Ie=ft.PROCESSING_INSTRUCTION_NODE=7,ne=ft.COMMENT_NODE=8,pe=ft.DOCUMENT_NODE=9,Je=ft.DOCUMENT_TYPE_NODE=10,Y=ft.DOCUMENT_FRAGMENT_NODE=11,ht=ft.NOTATION_NODE=12,_t={},it={},Q=(_t.INDEX_SIZE_ERR=(it[1]="Index size error",1),_t.DOMSTRING_SIZE_ERR=(it[2]="DOMString size error",2),_t.HIERARCHY_REQUEST_ERR=(it[3]="Hierarchy request error",3)),Fe=(_t.WRONG_DOCUMENT_ERR=(it[4]="Wrong document",4),_t.INVALID_CHARACTER_ERR=(it[5]="Invalid character",5),_t.NO_DATA_ALLOWED_ERR=(it[6]="No data allowed",6),_t.NO_MODIFICATION_ALLOWED_ERR=(it[7]="No modification allowed",7),_t.NOT_FOUND_ERR=(it[8]="Not found",8)),ke=(_t.NOT_SUPPORTED_ERR=(it[9]="Not supported",9),_t.INUSE_ATTRIBUTE_ERR=(it[10]="Attribute in use",10));function Ke(w,O){if(O instanceof Error)var j=O;else j=this,Error.call(this,it[w]),this.message=it[w],Error.captureStackTrace&&Error.captureStackTrace(this,Ke);return j.code=w,O&&(this.message=this.message+": "+O),j}function Ze(){}function gi(w,O){this._node=w,this._refresh=O,kt(this)}function kt(w){var O=w._node._inc||w._node.ownerDocument._inc;if(w._inc!==O){var j=w._refresh(w._node);if(xs(w,"length",j.length),!w.$$length||j.length<w.$$length)for(var te=j.length;te in w;te++)Object.prototype.hasOwnProperty.call(w,te)&&delete w[te];Ge(j,w),w._inc=O}}function Gt(){}function Mi(w,O){for(var j=w.length;j--;)if(w[j]===O)return j}function ci(w,O,j,te){if(te?O[Mi(O,te)]=j:O[O.length++]=j,w){j.ownerElement=w;var xe=w.ownerDocument;xe&&(te&&ps(xe,w,te),function aa(w,O,j){w&&w._inc++,j.namespaceURI===S.XMLNS&&(O._nsMap[j.prefix?j.localName:""]=j.value)}(xe,w,j))}}function Xi(w,O,j){var te=Mi(O,j);if(!(te>=0))throw new Ke(Fe,new Error(w.tagName+"@"+j));for(var xe=O.length-1;te<xe;)O[te]=O[++te];if(O.length=xe,w){var ut=w.ownerDocument;ut&&(ps(ut,w,j),j.ownerElement=null)}}function na(){}function at(){}function si(w){return("<"==w?"&lt;":">"==w&&"&gt;")||"&"==w&&"&amp;"||'"'==w&&"&quot;"||"&#"+w.charCodeAt()+";"}function Or(w,O){if(O(w))return!0;if(w=w.firstChild)do{if(Or(w,O))return!0}while(w=w.nextSibling)}function wt(){this.ownerDocument=this}function ps(w,O,j,te){w&&w._inc++,j.namespaceURI===S.XMLNS&&delete O._nsMap[j.prefix?j.localName:""]}function oi(w,O,j){if(w&&w._inc){w._inc++;var te=O.childNodes;if(j)te[te.length++]=j;else{for(var xe=O.firstChild,ut=0;xe;)te[ut++]=xe,xe=xe.nextSibling;te.length=ut,delete te[te.length]}}}function Fi(w,O){var j=O.previousSibling,te=O.nextSibling;return j?j.nextSibling=te:w.firstChild=te,te?te.previousSibling=j:w.lastChild=j,O.parentNode=null,O.previousSibling=null,O.nextSibling=null,oi(w.ownerDocument,w),O}function gr(w){return w&&w.nodeType===at.DOCUMENT_TYPE_NODE}function _i(w){return w&&w.nodeType===at.ELEMENT_NODE}function Bn(w){return w&&w.nodeType===at.TEXT_NODE}function tn(w,O){var j=w.childNodes||[];if(R(j,_i)||gr(O))return!1;var te=R(j,gr);return!(O&&te&&j.indexOf(te)>j.indexOf(O))}function rn(w,O){var j=w.childNodes||[];if(R(j,function te(ut){return _i(ut)&&ut!==O}))return!1;var xe=R(j,gr);return!(O&&xe&&j.indexOf(xe)>j.indexOf(O))}function gs(w,O,j){var te=w.childNodes||[],xe=O.childNodes||[];if(O.nodeType===at.DOCUMENT_FRAGMENT_NODE){var ut=xe.filter(_i);if(ut.length>1||R(xe,Bn))throw new Ke(Q,"More than one element or text in fragment");if(1===ut.length&&!tn(w,j))throw new Ke(Q,"Element in fragment can not be inserted before doctype")}if(_i(O)&&!tn(w,j))throw new Ke(Q,"Only one element can be added and only after doctype");if(gr(O)){if(R(te,gr))throw new Ke(Q,"Only one doctype is allowed");var Vt=R(te,_i);if(j&&te.indexOf(Vt)<te.indexOf(j))throw new Ke(Q,"Doctype can only be inserted before an element");if(!j&&Vt)throw new Ke(Q,"Doctype can not be appended since element is present")}}function Ba(w,O,j){var te=w.childNodes||[],xe=O.childNodes||[];if(O.nodeType===at.DOCUMENT_FRAGMENT_NODE){var ut=xe.filter(_i);if(ut.length>1||R(xe,Bn))throw new Ke(Q,"More than one element or text in fragment");if(1===ut.length&&!rn(w,j))throw new Ke(Q,"Element in fragment can not be inserted before doctype")}if(_i(O)&&!rn(w,j))throw new Ke(Q,"Only one element can be added and only after doctype");if(gr(O)){if(R(te,function(vr){return gr(vr)&&vr!==j}))throw new Ke(Q,"Only one doctype is allowed");var Vt=R(te,_i);if(j&&te.indexOf(Vt)<te.indexOf(j))throw new Ke(Q,"Doctype can only be inserted before an element")}}function Tn(w,O,j,te){(function ms(w,O,j){if(!function Mt(w){return w&&(w.nodeType===at.DOCUMENT_NODE||w.nodeType===at.DOCUMENT_FRAGMENT_NODE||w.nodeType===at.ELEMENT_NODE)}(w))throw new Ke(Q,"Unexpected parent node type "+w.nodeType);if(j&&j.parentNode!==w)throw new Ke(Fe,"child not in parent");if(!function vi(w){return w&&(_i(w)||Bn(w)||gr(w)||w.nodeType===at.DOCUMENT_FRAGMENT_NODE||w.nodeType===at.COMMENT_NODE||w.nodeType===at.PROCESSING_INSTRUCTION_NODE)}(O)||gr(O)&&w.nodeType!==at.DOCUMENT_NODE)throw new Ke(Q,"Unexpected node type "+O.nodeType+" for parent node type "+w.nodeType)})(w,O,j),w.nodeType===at.DOCUMENT_NODE&&(te||gs)(w,O,j);var xe=O.parentNode;if(xe&&xe.removeChild(O),O.nodeType===Y){var ut=O.firstChild;if(null==ut)return O;var Vt=O.lastChild}else ut=Vt=O;var yi=j?j.previousSibling:w.lastChild;ut.previousSibling=yi,Vt.nextSibling=j,yi?yi.nextSibling=ut:w.firstChild=ut,null==j?w.lastChild=Vt:j.previousSibling=Vt;do{ut.parentNode=w}while(ut!==Vt&&(ut=ut.nextSibling));return oi(w.ownerDocument||w,w),O.nodeType==Y&&(O.firstChild=O.lastChild=null),O}function Wr(){this._nsMap={}}function Un(){}function nn(){}function Vn(){}function _s(){}function Qe(){}function ys(){}function Mo(){}function di(){}function sa(){}function oa(){}function Fo(){}function Zu(){}function Ts(w,O){var j=[],te=9==this.nodeType&&this.documentElement||this,xe=te.prefix,ut=te.namespaceURI;if(ut&&null==xe&&null==(xe=te.lookupPrefix(ut)))var Vt=[{namespace:ut,prefix:null}];return bn(this,j,w,O,Vt),j.join("")}function No(w,O,j){var te=w.prefix||"",xe=w.namespaceURI;if(!xe||"xml"===te&&xe===S.XML||xe===S.XMLNS)return!1;for(var ut=j.length;ut--;){var Vt=j[ut];if(Vt.prefix===te)return Vt.namespace!==xe}return!0}function bs(w,O,j){w.push(" ",O,'="',j.replace(/[<>&"\t\n\r]/g,si),'"')}function bn(w,O,j,te,xe){if(xe||(xe=[]),te){if(!(w=te(w)))return;if("string"==typeof w)return void O.push(w)}switch(w.nodeType){case we:var ut=w.attributes,Vt=ut.length,Di=w.firstChild,yi=w.tagName,Lr=yi;if(!(j=S.isHTML(w.namespaceURI)||j)&&!w.prefix&&w.namespaceURI){for(var vr,_r=0;_r<ut.length;_r++)if("xmlns"===ut.item(_r).name){vr=ut.item(_r).value;break}if(!vr)for(var xn=xe.length-1;xn>=0;xn--)if(""===(ar=xe[xn]).prefix&&ar.namespace===w.namespaceURI){vr=ar.namespace;break}if(vr!==w.namespaceURI)for(xn=xe.length-1;xn>=0;xn--){var ar;if((ar=xe[xn]).namespace===w.namespaceURI){ar.prefix&&(Lr=ar.prefix+":"+yi);break}}}O.push("<",Lr);for(var yr=0;yr<Vt;yr++)"xmlns"==($i=ut.item(yr)).prefix?xe.push({prefix:$i.localName,namespace:$i.value}):"xmlns"==$i.nodeName&&xe.push({prefix:"",namespace:$i.value});for(yr=0;yr<Vt;yr++){var $i,an,sn;No($i=ut.item(yr),0,xe)&&(bs(O,(an=$i.prefix||"")?"xmlns:"+an:"xmlns",sn=$i.namespaceURI),xe.push({prefix:an,namespace:sn})),bn($i,O,j,te,xe)}if(yi===Lr&&No(w,0,xe)&&(bs(O,(an=w.prefix||"")?"xmlns:"+an:"xmlns",sn=w.namespaceURI),xe.push({prefix:an,namespace:sn})),Di||j&&!/^(?:meta|link|img|br|hr|input)$/i.test(yi)){if(O.push(">"),j&&/^script$/i.test(yi))for(;Di;)Di.data?O.push(Di.data):bn(Di,O,j,te,xe.slice()),Di=Di.nextSibling;else for(;Di;)bn(Di,O,j,te,xe.slice()),Di=Di.nextSibling;O.push("</",Lr,">")}else O.push("/>");return;case pe:case Y:for(Di=w.firstChild;Di;)bn(Di,O,j,te,xe.slice()),Di=Di.nextSibling;return;case et:return bs(O,w.name,w.value);case M:return O.push(w.data.replace(/[<&>]/g,si));case It:return O.push("<![CDATA[",w.data,"]]>");case ne:return O.push("\x3c!--",w.data,"--\x3e");case Je:var Va=w.publicId,Sn=w.systemId;if(O.push("<!DOCTYPE ",w.name),Va)O.push(" PUBLIC ",Va),Sn&&"."!=Sn&&O.push(" ",Sn),O.push(">");else if(Sn&&"."!=Sn)O.push(" SYSTEM ",Sn,">");else{var ua=w.internalSubset;ua&&O.push(" [",ua,"]"),O.push(">")}return;case Ie:return O.push("<?",w.target," ",w.data,"?>");case ue:return O.push("&",w.nodeName,";");default:O.push("??",w.nodeName)}}function Ua(w,O,j){var te;switch(O.nodeType){case we:(te=O.cloneNode(!1)).ownerDocument=w;case Y:break;case et:j=!0}if(te||(te=O.cloneNode(!1)),te.ownerDocument=w,te.parentNode=null,j)for(var xe=O.firstChild;xe;)te.appendChild(Ua(w,xe,j)),xe=xe.nextSibling;return te}function Ft(w,O,j){var te=new O.constructor;for(var xe in O)if(Object.prototype.hasOwnProperty.call(O,xe)){var ut=O[xe];"object"!=typeof ut&&ut!=te[xe]&&(te[xe]=ut)}switch(O.childNodes&&(te.childNodes=new Ze),te.ownerDocument=w,te.nodeType){case we:var Vt=O.attributes,yi=te.attributes=new Gt,Lr=Vt.length;yi._ownerElement=te;for(var vr=0;vr<Lr;vr++)te.setAttributeNode(Ft(w,Vt.item(vr),!0));break;case et:j=!0}if(j)for(var _r=O.firstChild;_r;)te.appendChild(Ft(w,_r,j)),_r=_r.nextSibling;return te}function xs(w,O,j){w[O]=j}_t.INVALID_STATE_ERR=(it[11]="Invalid state",11),_t.SYNTAX_ERR=(it[12]="Syntax error",12),_t.INVALID_MODIFICATION_ERR=(it[13]="Invalid modification",13),_t.NAMESPACE_ERR=(it[14]="Invalid namespace",14),_t.INVALID_ACCESS_ERR=(it[15]="Invalid access",15),Ke.prototype=Error.prototype,Ge(_t,Ke),Ze.prototype={length:0,item:function(w){return w>=0&&w<this.length?this[w]:null},toString:function(w,O){for(var j=[],te=0;te<this.length;te++)bn(this[te],j,w,O);return j.join("")},filter:function(w){return Array.prototype.filter.call(this,w)},indexOf:function(w){return Array.prototype.indexOf.call(this,w)}},gi.prototype.item=function(w){return kt(this),this[w]||null},Re(gi,Ze),Gt.prototype={length:0,item:Ze.prototype.item,getNamedItem:function(w){for(var O=this.length;O--;){var j=this[O];if(j.nodeName==w)return j}},setNamedItem:function(w){var O=w.ownerElement;if(O&&O!=this._ownerElement)throw new Ke(ke);var j=this.getNamedItem(w.nodeName);return ci(this._ownerElement,this,w,j),j},setNamedItemNS:function(w){var j,O=w.ownerElement;if(O&&O!=this._ownerElement)throw new Ke(ke);return j=this.getNamedItemNS(w.namespaceURI,w.localName),ci(this._ownerElement,this,w,j),j},removeNamedItem:function(w){var O=this.getNamedItem(w);return Xi(this._ownerElement,this,O),O},removeNamedItemNS:function(w,O){var j=this.getNamedItemNS(w,O);return Xi(this._ownerElement,this,j),j},getNamedItemNS:function(w,O){for(var j=this.length;j--;){var te=this[j];if(te.localName==O&&te.namespaceURI==w)return te}return null}},na.prototype={hasFeature:function(w,O){return!0},createDocument:function(w,O,j){var te=new wt;if(te.implementation=this,te.childNodes=new Ze,te.doctype=j||null,j&&te.appendChild(j),O){var xe=te.createElementNS(w,O);te.appendChild(xe)}return te},createDocumentType:function(w,O,j){var te=new ys;return te.name=w,te.nodeName=w,te.publicId=O||"",te.systemId=j||"",te}},at.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(w,O){return Tn(this,w,O)},replaceChild:function(w,O){Tn(this,w,O,Ba),O&&this.removeChild(O)},removeChild:function(w){return Fi(this,w)},appendChild:function(w){return this.insertBefore(w,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(w){return Ft(this.ownerDocument||this,this,w)},normalize:function(){for(var w=this.firstChild;w;){var O=w.nextSibling;O&&O.nodeType==M&&w.nodeType==M?(this.removeChild(O),w.appendData(O.data)):(w.normalize(),w=O)}},isSupported:function(w,O){return this.ownerDocument.implementation.hasFeature(w,O)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(w){for(var O=this;O;){var j=O._nsMap;if(j)for(var te in j)if(Object.prototype.hasOwnProperty.call(j,te)&&j[te]===w)return te;O=O.nodeType==et?O.ownerDocument:O.parentNode}return null},lookupNamespaceURI:function(w){for(var O=this;O;){var j=O._nsMap;if(j&&Object.prototype.hasOwnProperty.call(j,w))return j[w];O=O.nodeType==et?O.ownerDocument:O.parentNode}return null},isDefaultNamespace:function(w){return null==this.lookupPrefix(w)}},Ge(ft,at),Ge(ft,at.prototype),wt.prototype={nodeName:"#document",nodeType:pe,doctype:null,documentElement:null,_inc:1,insertBefore:function(w,O){if(w.nodeType==Y){for(var j=w.firstChild;j;){var te=j.nextSibling;this.insertBefore(j,O),j=te}return w}return Tn(this,w,O),w.ownerDocument=this,null===this.documentElement&&w.nodeType===we&&(this.documentElement=w),w},removeChild:function(w){return this.documentElement==w&&(this.documentElement=null),Fi(this,w)},replaceChild:function(w,O){Tn(this,w,O,Ba),w.ownerDocument=this,O&&this.removeChild(O),_i(w)&&(this.documentElement=w)},importNode:function(w,O){return Ua(this,w,O)},getElementById:function(w){var O=null;return Or(this.documentElement,function(j){if(j.nodeType==we&&j.getAttribute("id")==w)return O=j,!0}),O},getElementsByClassName:function(w){var O=je(w);return new gi(this,function(j){var te=[];return O.length>0&&Or(j.documentElement,function(xe){if(xe!==j&&xe.nodeType===we){var ut=xe.getAttribute("class");if(ut){var Vt=w===ut;if(!Vt){var yi=je(ut);Vt=O.every(function He(w){return function(O){return w&&-1!==w.indexOf(O)}}(yi))}Vt&&te.push(xe)}}}),te})},createElement:function(w){var O=new Wr;return O.ownerDocument=this,O.nodeName=w,O.tagName=w,O.localName=w,O.childNodes=new Ze,(O.attributes=new Gt)._ownerElement=O,O},createDocumentFragment:function(){var w=new oa;return w.ownerDocument=this,w.childNodes=new Ze,w},createTextNode:function(w){var O=new Vn;return O.ownerDocument=this,O.appendData(w),O},createComment:function(w){var O=new _s;return O.ownerDocument=this,O.appendData(w),O},createCDATASection:function(w){var O=new Qe;return O.ownerDocument=this,O.appendData(w),O},createProcessingInstruction:function(w,O){var j=new Fo;return j.ownerDocument=this,j.tagName=j.nodeName=j.target=w,j.nodeValue=j.data=O,j},createAttribute:function(w){var O=new Un;return O.ownerDocument=this,O.name=w,O.nodeName=w,O.localName=w,O.specified=!0,O},createEntityReference:function(w){var O=new sa;return O.ownerDocument=this,O.nodeName=w,O},createElementNS:function(w,O){var j=new Wr,te=O.split(":"),xe=j.attributes=new Gt;return j.childNodes=new Ze,j.ownerDocument=this,j.nodeName=O,j.tagName=O,j.namespaceURI=w,2==te.length?(j.prefix=te[0],j.localName=te[1]):j.localName=O,xe._ownerElement=j,j},createAttributeNS:function(w,O){var j=new Un,te=O.split(":");return j.ownerDocument=this,j.nodeName=O,j.name=O,j.namespaceURI=w,j.specified=!0,2==te.length?(j.prefix=te[0],j.localName=te[1]):j.localName=O,j}},Re(wt,at),wt.prototype.getElementsByTagName=(Wr.prototype={nodeType:we,hasAttribute:function(w){return null!=this.getAttributeNode(w)},getAttribute:function(w){var O=this.getAttributeNode(w);return O&&O.value||""},getAttributeNode:function(w){return this.attributes.getNamedItem(w)},setAttribute:function(w,O){var j=this.ownerDocument.createAttribute(w);j.value=j.nodeValue=""+O,this.setAttributeNode(j)},removeAttribute:function(w){var O=this.getAttributeNode(w);O&&this.removeAttributeNode(O)},appendChild:function(w){return w.nodeType===Y?this.insertBefore(w,null):function vs(w,O){return O.parentNode&&O.parentNode.removeChild(O),O.parentNode=w,O.previousSibling=w.lastChild,O.nextSibling=null,O.previousSibling?O.previousSibling.nextSibling=O:w.firstChild=O,w.lastChild=O,oi(w.ownerDocument,w,O),O}(this,w)},setAttributeNode:function(w){return this.attributes.setNamedItem(w)},setAttributeNodeNS:function(w){return this.attributes.setNamedItemNS(w)},removeAttributeNode:function(w){return this.attributes.removeNamedItem(w.nodeName)},removeAttributeNS:function(w,O){var j=this.getAttributeNodeNS(w,O);j&&this.removeAttributeNode(j)},hasAttributeNS:function(w,O){return null!=this.getAttributeNodeNS(w,O)},getAttributeNS:function(w,O){var j=this.getAttributeNodeNS(w,O);return j&&j.value||""},setAttributeNS:function(w,O,j){var te=this.ownerDocument.createAttributeNS(w,O);te.value=te.nodeValue=""+j,this.setAttributeNode(te)},getAttributeNodeNS:function(w,O){return this.attributes.getNamedItemNS(w,O)},getElementsByTagName:function(w){return new gi(this,function(O){var j=[];return Or(O,function(te){te!==O&&te.nodeType==we&&("*"===w||te.tagName==w)&&j.push(te)}),j})},getElementsByTagNameNS:function(w,O){return new gi(this,function(j){var te=[];return Or(j,function(xe){xe!==j&&xe.nodeType===we&&("*"===w||xe.namespaceURI===w)&&("*"===O||xe.localName==O)&&te.push(xe)}),te})}}).getElementsByTagName,wt.prototype.getElementsByTagNameNS=Wr.prototype.getElementsByTagNameNS,Re(Wr,at),Un.prototype.nodeType=et,Re(Un,at),nn.prototype={data:"",substringData:function(w,O){return this.data.substring(w,w+O)},appendData:function(w){this.nodeValue=this.data=w=this.data+w,this.length=w.length},insertData:function(w,O){this.replaceData(w,0,O)},appendChild:function(w){throw new Error(it[Q])},deleteData:function(w,O){this.replaceData(w,O,"")},replaceData:function(w,O,j){var te=this.data.substring(0,w),xe=this.data.substring(w+O);this.nodeValue=this.data=j=te+j+xe,this.length=j.length}},Re(nn,at),Vn.prototype={nodeName:"#text",nodeType:M,splitText:function(w){var O=this.data,j=O.substring(w);O=O.substring(0,w),this.data=this.nodeValue=O,this.length=O.length;var te=this.ownerDocument.createTextNode(j);return this.parentNode&&this.parentNode.insertBefore(te,this.nextSibling),te}},Re(Vn,nn),_s.prototype={nodeName:"#comment",nodeType:ne},Re(_s,nn),Qe.prototype={nodeName:"#cdata-section",nodeType:It},Re(Qe,nn),ys.prototype.nodeType=Je,Re(ys,at),Mo.prototype.nodeType=ht,Re(Mo,at),di.prototype.nodeType=vt,Re(di,at),sa.prototype.nodeType=ue,Re(sa,at),oa.prototype.nodeName="#document-fragment",oa.prototype.nodeType=Y,Re(oa,at),Fo.prototype.nodeType=Ie,Re(Fo,at),Zu.prototype.serializeToString=function(w,O,j){return Ts.call(w,O,j)},at.prototype.toString=Ts;try{if(Object.defineProperty){let w=function(O){switch(O.nodeType){case we:case Y:var j=[];for(O=O.firstChild;O;)7!==O.nodeType&&8!==O.nodeType&&j.push(w(O)),O=O.nextSibling;return j.join("");default:return O.nodeValue}};Object.defineProperty(gi.prototype,"length",{get:function(){return kt(this),this.$$length}}),Object.defineProperty(at.prototype,"textContent",{get:function(){return w(this)},set:function(O){switch(this.nodeType){case we:case Y:for(;this.firstChild;)this.removeChild(this.firstChild);(O||String(O))&&this.appendChild(this.ownerDocument.createTextNode(O));break;default:this.data=O,this.value=O,this.nodeValue=O}}}),xs=function(O,j,te){O["$$"+j]=te}}}catch{}We.DocumentType=ys,We.DOMException=Ke,We.DOMImplementation=na,We.Element=Wr,We.Node=at,We.NodeList=Ze,We.XMLSerializer=Zu},1032:(rt,We,De)=>{"use strict";var Ee=De(3499).freeze;We.XML_ENTITIES=Ee({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),We.HTML_ENTITIES=Ee({Aacute:"\xc1",aacute:"\xe1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",Acy:"\u0410",acy:"\u0430",AElig:"\xc6",aelig:"\xe6",af:"\u2061",Afr:"\u{1d504}",afr:"\u{1d51e}",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",AMP:"&",amp:"&",And:"\u2a53",and:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\xc5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1d538}",aopf:"\u{1d552}",ap:"\u2248",apacir:"\u2a6f",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\xc5",aring:"\xe5",Ascr:"\u{1d49c}",ascr:"\u{1d4b6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\u{1d505}",bfr:"\u{1d51f}",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\u{1d539}",bopf:"\u{1d553}",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250c",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252c",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxUL:"\u255d",boxUl:"\u255c",boxuL:"\u255b",boxul:"\u2518",boxUR:"\u255a",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256c",boxVh:"\u256b",boxvH:"\u256a",boxvh:"\u253c",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255f",boxvR:"\u255e",boxvr:"\u251c",bprime:"\u2035",Breve:"\u02d8",breve:"\u02d8",brvbar:"\xa6",Bscr:"\u212c",bscr:"\u{1d4b7}",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22d2",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\xc7",ccedil:"\xe7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\xb8",Cedilla:"\xb8",cemptyv:"\u29b2",cent:"\xa2",CenterDot:"\xb7",centerdot:"\xb7",Cfr:"\u212d",cfr:"\u{1d520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",cir:"\u25cb",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\xae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",Conint:"\u222f",conint:"\u222e",ContourIntegral:"\u222e",Copf:"\u2102",copf:"\u{1d554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xa9",copy:"\xa9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",Cross:"\u2a2f",cross:"\u2717",Cscr:"\u{1d49e}",cscr:"\u{1d4b8}",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",Cup:"\u22d3",cup:"\u222a",cupbrcap:"\u2a48",CupCap:"\u224d",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\xa4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21a1",dArr:"\u21d3",darr:"\u2193",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21ca",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\xb0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\u{1d507}",dfr:"\u{1d521}",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\xb4",DiacriticalDot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",Diamond:"\u22c4",diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\xa8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\u{1d53b}",dopf:"\u{1d555}",Dot:"\xa8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\xa8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21d3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",DownTeeArrow:"\u21a7",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\u{1d49f}",dscr:"\u{1d4b9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\xc9",eacute:"\xe9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",ecir:"\u2256",Ecirc:"\xca",ecirc:"\xea",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1d508}",efr:"\u{1d522}",eg:"\u2a9a",Egrave:"\xc8",egrave:"\xe8",egs:"\u2a96",egsdot:"\u2a98",el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1d53c}",eopf:"\u{1d556}",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212f",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\u{1d509}",ffr:"\u{1d523}",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\u{1d53d}",fopf:"\u{1d557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1d4bb}",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",geqq:"\u2267",geqslant:"\u2a7e",ges:"\u2a7e",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\u{1d50a}",gfr:"\u{1d524}",Gg:"\u22d9",gg:"\u226b",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2aa5",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gnE:"\u2269",gne:"\u2a88",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\u{1d53e}",gopf:"\u{1d558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\u{1d4a2}",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",Gt:"\u226b",GT:">",gt:">",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\xbd",hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",hArr:"\u21d4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",Hfr:"\u210c",hfr:"\u{1d525}",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",Hopf:"\u210d",hopf:"\u{1d559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210b",hscr:"\u{1d4bd}",hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xcd",iacute:"\xed",ic:"\u2063",Icirc:"\xce",icirc:"\xee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xa1",iff:"\u21d4",Ifr:"\u2111",ifr:"\u{1d526}",Igrave:"\xcc",igrave:"\xec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",in:"\u2208",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",Int:"\u222c",int:"\u222b",intcal:"\u22ba",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\u{1d540}",iopf:"\u{1d55a}",Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\xbf",Iscr:"\u2110",iscr:"\u{1d4be}",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xcf",iuml:"\xef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1d50d}",jfr:"\u{1d527}",jmath:"\u0237",Jopf:"\u{1d541}",jopf:"\u{1d55b}",Jscr:"\u{1d4a5}",jscr:"\u{1d4bf}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\u{1d50e}",kfr:"\u{1d528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\u{1d542}",kopf:"\u{1d55c}",Kscr:"\u{1d4a6}",kscr:"\u{1d4c0}",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",Lang:"\u27ea",lang:"\u27e8",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",Laplacetrf:"\u2112",laquo:"\xab",Larr:"\u219e",lArr:"\u21d0",larr:"\u2190",larrb:"\u21e4",larrbfs:"\u291f",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",lat:"\u2aab",lAtail:"\u291b",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lBarr:"\u290e",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",Leftarrow:"\u21d0",leftarrow:"\u2190",LeftArrowBar:"\u21e4",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrow:"\u2194",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTee:"\u22a3",LeftTeeArrow:"\u21a4",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangle:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",LeftVectorBar:"\u2952",lEg:"\u2a8b",leg:"\u22da",leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",les:"\u2a7d",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\u{1d50f}",lfr:"\u{1d529}",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22d8",ll:"\u226a",llarr:"\u21c7",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lnE:"\u2268",lne:"\u2a87",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftarrow:"\u27f5",LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longleftrightarrow:"\u27f7",longmapsto:"\u27fc",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",longrightarrow:"\u27f6",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\u{1d543}",lopf:"\u{1d55d}",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1d4c1}",Lsh:"\u21b0",lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226a",LT:"<",lt:"<",ltcc:"\u2aa6",ltcir:"\u2a79",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\u{1d510}",mfr:"\u{1d52a}",mho:"\u2127",micro:"\xb5",mid:"\u2223",midast:"*",midcir:"\u2af0",middot:"\xb7",minus:"\u2212",minusb:"\u229f",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\u{1d544}",mopf:"\u{1d55e}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1d4c2}",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266e",natural:"\u266e",naturals:"\u2115",nbsp:"\xa0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21d7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1d511}",nfr:"\u{1d52b}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nhArr:"\u21ce",nharr:"\u21ae",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlArr:"\u21cd",nlarr:"\u219a",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21cd",nleftarrow:"\u219a",nLeftrightarrow:"\u21ce",nleftrightarrow:"\u21ae",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xa0",Nopf:"\u2115",nopf:"\u{1d55f}",Not:"\u2aec",not:"\xac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangle:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangle:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",npre:"\u2aaf\u0338",nprec:"\u2280",npreceq:"\u2aaf\u0338",nrArr:"\u21cf",nrarr:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nRightarrow:"\u21cf",nrightarrow:"\u219b",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\u{1d4a9}",nscr:"\u{1d4c3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\xd1",ntilde:"\xf1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nVDash:"\u22af",nVdash:"\u22ae",nvDash:"\u22ad",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwArr:"\u21d6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xd3",oacute:"\xf3",oast:"\u229b",ocir:"\u229a",Ocirc:"\xd4",ocirc:"\xf4",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29bf",Ofr:"\u{1d512}",ofr:"\u{1d52c}",ogon:"\u02db",Ograve:"\xd2",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\u{1d546}",oopf:"\u{1d560}",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",Or:"\u2a54",or:"\u2228",orarr:"\u21bb",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\u{1d4aa}",oscr:"\u2134",Oslash:"\xd8",oslash:"\xf8",osol:"\u2298",Otilde:"\xd5",otilde:"\xf5",Otimes:"\u2a37",otimes:"\u2297",otimesas:"\u2a36",Ouml:"\xd6",ouml:"\xf6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",par:"\u2225",para:"\xb6",parallel:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\u{1d513}",pfr:"\u{1d52d}",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plus:"+",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\xb1",plusmn:"\xb1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\xb1",Poincareplane:"\u210c",pointint:"\u2a15",Popf:"\u2119",popf:"\u{1d561}",pound:"\xa3",Pr:"\u2abb",pr:"\u227a",prap:"\u2ab7",prcue:"\u227c",prE:"\u2ab3",pre:"\u2aaf",prec:"\u227a",precapprox:"\u2ab7",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",precsim:"\u227e",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportion:"\u2237",Proportional:"\u221d",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\u{1d4ab}",pscr:"\u{1d4c5}",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\u{1d514}",qfr:"\u{1d52e}",qint:"\u2a0c",Qopf:"\u211a",qopf:"\u{1d562}",qprime:"\u2057",Qscr:"\u{1d4ac}",qscr:"\u{1d4c6}",quaternions:"\u210d",quatint:"\u2a16",quest:"?",questeq:"\u225f",QUOT:'"',quot:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",Rang:"\u27eb",rang:"\u27e9",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\xbb",Rarr:"\u21a0",rArr:"\u21d2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",rAtail:"\u291c",ratail:"\u291a",ratio:"\u2236",rationals:"\u211a",RBarr:"\u2910",rBarr:"\u290f",rbarr:"\u290d",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",Re:"\u211c",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",rect:"\u25ad",REG:"\xae",reg:"\xae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",Rfr:"\u211c",rfr:"\u{1d52f}",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrow:"\u2192",Rightarrow:"\u21d2",rightarrow:"\u2192",RightArrowBar:"\u21e5",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangle:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",RightVectorBar:"\u2953",ring:"\u02da",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",Ropf:"\u211d",ropf:"\u{1d563}",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",Rscr:"\u211b",rscr:"\u{1d4c7}",Rsh:"\u21b1",rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",Sc:"\u2abc",sc:"\u227b",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227d",scE:"\u2ab4",sce:"\u2ab0",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdot:"\u22c5",sdotb:"\u22a1",sdote:"\u2a66",searhk:"\u2925",seArr:"\u21d8",searr:"\u2198",searrow:"\u2198",sect:"\xa7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1d516}",sfr:"\u{1d530}",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",Sopf:"\u{1d54a}",sopf:"\u{1d564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25a1",Square:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squf:"\u25aa",srarr:"\u2192",Sscr:"\u{1d4ae}",sscr:"\u{1d4c8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",straightphi:"\u03d5",strns:"\xaf",Sub:"\u22d0",sub:"\u2282",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",Subset:"\u22d0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succ:"\u227b",succapprox:"\u2ab8",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",Sum:"\u2211",sum:"\u2211",sung:"\u266a",Sup:"\u22d1",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",Supset:"\u22d1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swArr:"\u21d9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292a",szlig:"\xdf",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\u{1d517}",tfr:"\u{1d531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\xde",thorn:"\xfe",Tilde:"\u223c",tilde:"\u02dc",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xd7",timesb:"\u22a0",timesbar:"\u2a31",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",top:"\u22a4",topbot:"\u2336",topcir:"\u2af1",Topf:"\u{1d54b}",topf:"\u{1d565}",topfork:"\u2ada",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\u{1d4af}",tscr:"\u{1d4c9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",Uacute:"\xda",uacute:"\xfa",Uarr:"\u219f",uArr:"\u21d1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\xdb",ucirc:"\xfb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\u{1d518}",ufr:"\u{1d532}",Ugrave:"\xd9",ugrave:"\xf9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",Umacr:"\u016a",umacr:"\u016b",uml:"\xa8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1d54c}",uopf:"\u{1d566}",UpArrow:"\u2191",Uparrow:"\u21d1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",UpDownArrow:"\u2195",Updownarrow:"\u21d5",updownarrow:"\u2195",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03d2",upsi:"\u03c5",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTee:"\u22a5",UpTeeArrow:"\u21a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\u{1d4b0}",uscr:"\u{1d4ca}",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\xdc",uuml:"\xfc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",varpropto:"\u221d",vArr:"\u21d5",varr:"\u2195",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",Vbar:"\u2aeb",vBar:"\u2ae8",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22ab",Vdash:"\u22a9",vDash:"\u22a8",vdash:"\u22a2",Vdashl:"\u2ae6",Vee:"\u22c1",vee:"\u2228",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\u{1d519}",vfr:"\u{1d533}",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\u{1d54d}",vopf:"\u{1d567}",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\u{1d4b1}",vscr:"\u{1d4cb}",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",Wedge:"\u22c0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1d51a}",wfr:"\u{1d534}",Wopf:"\u{1d54e}",wopf:"\u{1d568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1d4b2}",wscr:"\u{1d4cc}",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\u{1d51b}",xfr:"\u{1d535}",xhArr:"\u27fa",xharr:"\u27f7",Xi:"\u039e",xi:"\u03be",xlArr:"\u27f8",xlarr:"\u27f5",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\u{1d54f}",xopf:"\u{1d569}",xoplus:"\u2a01",xotime:"\u2a02",xrArr:"\u27f9",xrarr:"\u27f6",Xscr:"\u{1d4b3}",xscr:"\u{1d4cd}",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\xdd",yacute:"\xfd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\xa5",Yfr:"\u{1d51c}",yfr:"\u{1d536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1d550}",yopf:"\u{1d56a}",Yscr:"\u{1d4b4}",yscr:"\u{1d4ce}",YUcy:"\u042e",yucy:"\u044e",Yuml:"\u0178",yuml:"\xff",Zacute:"\u0179",zacute:"\u017a",Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",Zfr:"\u2128",zfr:"\u{1d537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",Zopf:"\u2124",zopf:"\u{1d56b}",Zscr:"\u{1d4b5}",zscr:"\u{1d4cf}",zwj:"\u200d",zwnj:"\u200c"}),We.entityMap=We.HTML_ENTITIES},2419:(rt,We,De)=>{De(7315);We.DOMParser=De(2219).DOMParser},1495:(rt,We,De)=>{var Ee=De(3499).NAMESPACE,R=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=new RegExp("[\\-\\.0-9"+R.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),qe=new RegExp("^"+R.source+S.source+"*(?::"+R.source+S.source+"*)?$");function et(N,U){this.message=N,this.locator=U,Error.captureStackTrace&&Error.captureStackTrace(this,et)}function M(){}function ue(N,U){return U.lineNumber=N.lineNumber,U.columnNumber=N.columnNumber,U}function vt(N,U,Q,Ae,_e,Le){function Oe(yt,Ct,Ke){Q.attributeNames.hasOwnProperty(yt)&&Le.fatalError("Attribute "+yt+" redefined"),Q.addValue(yt,Ct.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,_e),Ke)}for(var Fe,ke=++U,be=0;;){var Se=N.charAt(ke);switch(Se){case"=":if(1===be)Fe=N.slice(U,ke),be=3;else{if(2!==be)throw new Error("attribute equal must after attrName");be=3}break;case"'":case'"':if(3===be||1===be){if(1===be&&(Le.warning('attribute value must after "="'),Fe=N.slice(U,ke)),!((ke=N.indexOf(Se,U=ke+1))>0))throw new Error("attribute value no end '"+Se+"' match");Oe(Fe,Te=N.slice(U,ke),U-1),be=5}else{if(4!=be)throw new Error('attribute value must after "="');Oe(Fe,Te=N.slice(U,ke),U),Le.warning('attribute "'+Fe+'" missed start quot('+Se+")!!"),U=ke+1,be=5}break;case"/":switch(be){case 0:Q.setTagName(N.slice(U,ke));case 5:case 6:case 7:be=7,Q.closed=!0;case 4:case 1:break;case 2:Q.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Le.error("unexpected end of input"),0==be&&Q.setTagName(N.slice(U,ke)),ke;case">":switch(be){case 0:Q.setTagName(N.slice(U,ke));case 5:case 6:case 7:break;case 4:case 1:"/"===(Te=N.slice(U,ke)).slice(-1)&&(Q.closed=!0,Te=Te.slice(0,-1));case 2:2===be&&(Te=Fe),4==be?(Le.warning('attribute "'+Te+'" missed quot(")!'),Oe(Fe,Te,U)):((!Ee.isHTML(Ae[""])||!Te.match(/^(?:disabled|checked|selected)$/i))&&Le.warning('attribute "'+Te+'" missed value!! "'+Te+'" instead!!'),Oe(Te,Te,U));break;case 3:throw new Error("attribute value missed!!")}return ke;case"\x80":Se=" ";default:if(Se<=" ")switch(be){case 0:Q.setTagName(N.slice(U,ke)),be=6;break;case 1:Fe=N.slice(U,ke),be=2;break;case 4:var Te=N.slice(U,ke);Le.warning('attribute "'+Te+'" missed quot(")!!'),Oe(Fe,Te,U);case 5:be=6}else switch(be){case 2:(!Ee.isHTML(Ae[""])||!Fe.match(/^(?:disabled|checked|selected)$/i))&&Le.warning('attribute "'+Fe+'" missed value!! "'+Fe+'" instead2!!'),Oe(Fe,Fe,U),U=ke,be=1;break;case 5:Le.warning('attribute space is required"'+Fe+'"!!');case 6:be=1,U=ke;break;case 3:be=4,U=ke;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}ke++}}function Ie(N,U,Q){for(var Ae=N.tagName,_e=null,Se=N.length;Se--;){var Le=N[Se],Oe=Le.qName,Fe=Le.value;if((Ye=Oe.indexOf(":"))>0)var Te=Le.prefix=Oe.slice(0,Ye),ke=Oe.slice(Ye+1),be="xmlns"===Te&&ke;else ke=Oe,Te=null,be="xmlns"===Oe&&"";Le.localName=ke,!1!==be&&(null==_e&&(_e={},Je(Q,Q={})),Q[be]=_e[be]=Fe,Le.uri=Ee.XMLNS,U.startPrefixMapping(be,Fe))}for(Se=N.length;Se--;)(Te=(Le=N[Se]).prefix)&&("xml"===Te&&(Le.uri=Ee.XML),"xmlns"!==Te&&(Le.uri=Q[Te||""]));var Ye;(Ye=Ae.indexOf(":"))>0?(Te=N.prefix=Ae.slice(0,Ye),ke=N.localName=Ae.slice(Ye+1)):(Te=null,ke=N.localName=Ae);var yt=N.uri=Q[Te||""];if(U.startElement(yt,ke,Ae,N),!N.closed)return N.currentNSMap=Q,N.localNSMap=_e,!0;if(U.endElement(yt,ke,Ae),_e)for(Te in _e)Object.prototype.hasOwnProperty.call(_e,Te)&&U.endPrefixMapping(Te)}function ne(N,U,Q,Ae,_e){if(/^(?:script|textarea)$/i.test(Q)){var Le=N.indexOf("</"+Q+">",U),Oe=N.substring(U+1,Le);if(/[&<]/.test(Oe))return/^script$/i.test(Q)?(_e.characters(Oe,0,Oe.length),Le):(Oe=Oe.replace(/&#?\w+;/g,Ae),_e.characters(Oe,0,Oe.length),Le)}return U+1}function pe(N,U,Q,Ae){var _e=Ae[Q];return null==_e&&((_e=N.lastIndexOf("</"+Q+">"))<U&&(_e=N.lastIndexOf("</"+Q)),Ae[Q]=_e),_e<U}function Je(N,U){for(var Q in N)Object.prototype.hasOwnProperty.call(N,Q)&&(U[Q]=N[Q])}function Y(N,U,Q,Ae){if("-"===N.charAt(U+2))return"-"===N.charAt(U+3)?(Le=N.indexOf("--\x3e",U+4))>U?(Q.comment(N,U+4,Le-U-4),Le+3):(Ae.error("Unclosed comment"),-1):-1;if("CDATA["==N.substr(U+3,6)){var Le=N.indexOf("]]>",U+9);return Q.startCDATA(),Q.characters(N,U+9,Le-U-9),Q.endCDATA(),Le+3}var Oe=function it(N,U){var Q,Ae=[],_e=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(_e.lastIndex=U,_e.exec(N);Q=_e.exec(N);)if(Ae.push(Q),Q[1])return Ae}(N,U),Fe=Oe.length;if(Fe>1&&/!doctype/i.test(Oe[0][0])){var Te=Oe[1][0],ke=!1,be=!1;Fe>3&&(/^public$/i.test(Oe[2][0])?(ke=Oe[3][0],be=Fe>4&&Oe[4][0]):/^system$/i.test(Oe[2][0])&&(be=Oe[3][0]));var Se=Oe[Fe-1];return Q.startDTD(Te,ke,be),Q.endDTD(),Se.index+Se[0].length}return-1}function ht(N,U,Q){var Ae=N.indexOf("?>",U);if(Ae){var _e=N.substring(U,Ae).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return _e?(Q.processingInstruction(_e[1],_e[2]),Ae+2):-1}return-1}function _t(){this.attributeNames={}}(et.prototype=new Error).name=et.name,M.prototype={parse:function(N,U,Q){var Ae=this.domBuilder;Ae.startDocument(),Je(U,U={}),function It(N,U,Q,Ae,_e){function Oe(Mt){var vi=Mt.slice(1,-1);return Object.hasOwnProperty.call(Q,vi)?Q[vi]:"#"===vi.charAt(0)?function Le(Mt){return Mt>65535?(Mt-=65536,String.fromCharCode(55296+(Mt>>10),56320+(1023&Mt))):String.fromCharCode(Mt)}(parseInt(vi.substr(1).replace("x","0x"))):(_e.error("entity not found:"+Mt),Mt)}function Fe(Mt){if(Mt>Ke){var vi=N.substring(Ke,Mt).replace(/&#?\w+;/g,Oe);Ye&&Te(Ke),Ae.characters(vi,0,Mt-Ke),Ke=Mt}}function Te(Mt,vi){for(;Mt>=be&&(vi=Se.exec(N));)be=(ke=vi.index)+vi[0].length,Ye.lineNumber++;Ye.columnNumber=Mt-ke+1}for(var ke=0,be=0,Se=/.*(?:\r\n?|\n)|.*$/g,Ye=Ae.locator,yt=[{currentNSMap:U}],Ct={},Ke=0;;){try{var Ze=N.indexOf("<",Ke);if(Ze<0){if(!N.substr(Ke).match(/^\s*$/)){var gi=Ae.doc,kt=gi.createTextNode(N.substr(Ke));gi.appendChild(kt),Ae.currentElement=kt}return}switch(Ze>Ke&&Fe(Ze),N.charAt(Ze+1)){case"/":var wt=N.indexOf(">",Ze+3),Gt=N.substring(Ze+2,wt).replace(/[ \t\n\r]+$/g,""),Mi=yt.pop();wt<0?(Gt=N.substring(Ze+2).replace(/[\s<].*/,""),_e.error("end tag name: "+Gt+" is not complete:"+Mi.tagName),wt=Ze+1+Gt.length):Gt.match(/\s</)&&(Gt=Gt.replace(/[\s<].*/,""),_e.error("end tag name: "+Gt+" maybe not complete"),wt=Ze+1+Gt.length);var ci=Mi.localNSMap,Xi=Mi.tagName==Gt;if(Xi||Mi.tagName&&Mi.tagName.toLowerCase()==Gt.toLowerCase()){if(Ae.endElement(Mi.uri,Mi.localName,Gt),ci)for(var at in ci)Object.prototype.hasOwnProperty.call(ci,at)&&Ae.endPrefixMapping(at);Xi||_e.fatalError("end tag name: "+Gt+" is not match the current start tagName:"+Mi.tagName)}else yt.push(Mi);wt++;break;case"?":Ye&&Te(Ze),wt=ht(N,Ze,Ae);break;case"!":Ye&&Te(Ze),wt=Y(N,Ze,Ae,_e);break;default:Ye&&Te(Ze);var si=new _t,Or=yt[yt.length-1].currentNSMap,aa=(wt=vt(N,Ze,si,Or,Oe,_e),si.length);if(!si.closed&&pe(N,wt,si.tagName,Ct)&&(si.closed=!0,Q.nbsp||_e.warning("unclosed xml attribute")),Ye&&aa){for(var ps=ue(Ye,{}),oi=0;oi<aa;oi++){var Fi=si[oi];Te(Fi.offset),Fi.locator=ue(Ye,{})}Ae.locator=ps,Ie(si,Ae,Or)&&yt.push(si),Ae.locator=Ye}else Ie(si,Ae,Or)&&yt.push(si);Ee.isHTML(si.uri)&&!si.closed?wt=ne(N,wt,si.tagName,Oe,Ae):wt++}}catch(Mt){if(Mt instanceof et)throw Mt;_e.error("element parse error: "+Mt),wt=-1}wt>Ke?Ke=wt:Fe(Math.max(Ze,Ke)+1)}}(N,U,Q,Ae,this.errorHandler),Ae.endDocument()}},_t.prototype={setTagName:function(N){if(!qe.test(N))throw new Error("invalid tagName:"+N);this.tagName=N},addValue:function(N,U,Q){if(!qe.test(N))throw new Error("invalid attribute:"+N);this.attributeNames[N]=this.length,this[this.length++]={qName:N,value:U,offset:Q}},length:0,getLocalName:function(N){return this[N].localName},getLocator:function(N){return this[N].locator},getQName:function(N){return this[N].qName},getURI:function(N){return this[N].uri},getValue:function(N){return this[N].value}},We.XMLReader=M,We.ParseError=et},410:(rt,We,De)=>{var S,Ee=typeof global<"u"?global:typeof window<"u"?window:{},R=De(542);typeof document<"u"?S=document:(S=Ee["__GLOBAL_DOCUMENT_CACHE@4"])||(S=Ee["__GLOBAL_DOCUMENT_CACHE@4"]=R),rt.exports=S},2843:rt=>{var We;We=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rt.exports=We},9819:rt=>{rt.exports=function De(Ee){if(!Ee)return!1;var R=We.call(Ee);return"[object Function]"===R||"function"==typeof Ee&&"[object RegExp]"!==R||typeof window<"u"&&(Ee===window.setTimeout||Ee===window.alert||Ee===window.confirm||Ee===window.prompt)};var We=Object.prototype.toString},2610:(rt,We)=>{function De(he){if(he&&"object"==typeof he){var je=he.which||he.keyCode||he.charCode;je&&(he=je)}if("number"==typeof he)return qe[he];var Ge,He=String(he);return(Ge=Ee[He.toLowerCase()])?Ge:(Ge=R[He.toLowerCase()])||(1===He.length?He.charCodeAt(0):void 0)}De.isEventKey=function(je,He){if(je&&"object"==typeof je){var Ge=je.which||je.keyCode||je.charCode;if(null==Ge)return!1;if("string"==typeof He){var Re;if(Re=Ee[He.toLowerCase()])return Re===Ge;if(Re=R[He.toLowerCase()])return Re===Ge}else if("number"==typeof He)return He===Ge;return!1}};var Ee=(We=rt.exports=De).code=We.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},R=We.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(S=97;S<123;S++)Ee[String.fromCharCode(S)]=S-32;for(var S=48;S<58;S++)Ee[S-48]=S;for(S=1;S<13;S++)Ee["f"+S]=S+111;for(S=0;S<10;S++)Ee["numpad "+S]=S+96;var qe=We.names=We.title={};for(S in Ee)qe[Ee[S]]=S;for(var Ce in R)Ee[Ce]=R[Ce]},7376:function(rt,We,De){var Ee;rt=De.nmd(rt),function(){var R,he="Expected a function",He="__lodash_hash_undefined__",Re="__lodash_placeholder__",Fe=1/0,Te=9007199254740991,Se=4294967295,Ct=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ke="[object Arguments]",Ze="[object Array]",kt="[object Boolean]",Gt="[object Date]",ci="[object Error]",Xi="[object Function]",na="[object GeneratorFunction]",at="[object Map]",si="[object Number]",wt="[object Object]",aa="[object Promise]",oi="[object RegExp]",Fi="[object Set]",Mt="[object String]",vi="[object Symbol]",_i="[object WeakMap]",tn="[object ArrayBuffer]",rn="[object DataView]",ms="[object Float32Array]",gs="[object Float64Array]",Ba="[object Int8Array]",Tn="[object Int16Array]",vs="[object Int32Array]",Wr="[object Uint8Array]",Un="[object Uint8ClampedArray]",nn="[object Uint16Array]",Vn="[object Uint32Array]",_s=/\b__p \+= '';/g,Qe=/\b(__p \+=) '' \+/g,ys=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mo=/&(?:amp|lt|gt|quot|#39);/g,di=/[&<>"']/g,sa=RegExp(Mo.source),oa=RegExp(di.source),Fo=/<%-([\s\S]+?)%>/g,Zu=/<%([\s\S]+?)%>/g,Ts=/<%=([\s\S]+?)%>/g,No=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bs=/^\w*$/,bn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ua=/[\\^$.*+?()[\]{}|]/g,Ft=RegExp(Ua.source),xs=/^\s+/,dp=/\s/,w=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,O=/\{\n\/\* \[wrapped with (.+)\] \*/,j=/,? & /,te=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xe=/[()=,{}\[\]\/\s]/,ut=/\\(\\)?/g,Vt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yi=/\w*$/,Lr=/^[-+]0x[0-9a-f]+$/i,vr=/^0b[01]+$/i,_r=/^\[object .+?Constructor\]$/,xn=/^0o[0-7]+$/i,ar=/^(?:0|[1-9]\d*)$/,yr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$i=/($^)/,an=/['\n\r\u2028\u2029\\]/g,sn="\\ud800-\\udfff",ua="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Kc="\\u2700-\\u27bf",Yc="a-z\\xdf-\\xf6\\xf8-\\xff",ed="A-Z\\xc0-\\xd6\\xd8-\\xde",td="\\ufe0e\\ufe0f",Ss="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",el="["+sn+"]",id="["+Ss+"]",Bo="["+ua+"]",rd="\\d+",hp="["+Kc+"]",nd="["+Yc+"]",ad="[^"+sn+Ss+rd+Kc+Yc+ed+"]",tl="\\ud83c[\\udffb-\\udfff]",sd="[^"+sn+"]",il="(?:\\ud83c[\\udde6-\\uddff]){2}",rl="[\\ud800-\\udbff][\\udc00-\\udfff]",la="["+ed+"]",ud="(?:"+nd+"|"+ad+")",ld="(?:"+la+"|"+ad+")",cd="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",dd="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",nl="(?:"+Bo+"|"+tl+")?",fd="["+td+"]?",hd=fd+nl+"(?:\\u200d(?:"+[sd,il,rl].join("|")+")"+fd+nl+")*",_p="(?:"+[hp,il,rl].join("|")+")"+hd,fi="(?:"+[sd+Bo+"?",Bo,il,rl,el].join("|")+")",al=RegExp("['\u2019]","g"),yp=RegExp(Bo,"g"),Hn=RegExp(tl+"(?="+tl+")|"+fi+hd,"g"),Tp=RegExp([la+"?"+nd+"+"+cd+"(?="+[id,la,"$"].join("|")+")",ld+"+"+dd+"(?="+[id,la+ud,"$"].join("|")+")",la+"?"+ud+"+"+cd,la+"+"+dd,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rd,_p].join("|"),"g"),pd=RegExp("[\\u200d"+sn+ua+td+"]"),ji=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Uo=-1,Ht={};Ht[ms]=Ht[gs]=Ht[Ba]=Ht[Tn]=Ht[vs]=Ht[Wr]=Ht[Un]=Ht[nn]=Ht[Vn]=!0,Ht[Ke]=Ht[Ze]=Ht[tn]=Ht[kt]=Ht[rn]=Ht[Gt]=Ht[ci]=Ht[Xi]=Ht[at]=Ht[si]=Ht[wt]=Ht[oi]=Ht[Fi]=Ht[Mt]=Ht[_i]=!1;var zt={};zt[Ke]=zt[Ze]=zt[tn]=zt[rn]=zt[kt]=zt[Gt]=zt[ms]=zt[gs]=zt[Ba]=zt[Tn]=zt[vs]=zt[at]=zt[si]=zt[wt]=zt[oi]=zt[Fi]=zt[Mt]=zt[vi]=zt[Wr]=zt[Un]=zt[nn]=zt[Vn]=!0,zt[ci]=zt[Xi]=zt[_i]=!1;var Cp={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ap=parseFloat,wp=parseInt,sl="object"==typeof global&&global&&global.Object===Object&&global,Dp="object"==typeof self&&self&&self.Object===Object&&self,Wi=sl||Dp||Function("return this")(),md=We&&!We.nodeType&&We,Cs=md&&rt&&!rt.nodeType&&rt,gd=Cs&&Cs.exports===md,ol=gd&&sl.process,Rr=function(){try{return Cs&&Cs.require&&Cs.require("util").types||ol&&ol.binding&&ol.binding("util")}catch{}}(),vd=Rr&&Rr.isArrayBuffer,Ha=Rr&&Rr.isDate,Ip=Rr&&Rr.isMap,Pp=Rr&&Rr.isRegExp,kp=Rr&&Rr.isSet,Op=Rr&&Rr.isTypedArray;function Mr($,oe,J){switch(J.length){case 0:return $.call(oe);case 1:return $.call(oe,J[0]);case 2:return $.call(oe,J[0],J[1]);case 3:return $.call(oe,J[0],J[1],J[2])}return $.apply(oe,J)}function Kv($,oe,J,Xe){for(var $e=-1,xt=null==$?0:$.length;++$e<xt;){var ei=$[$e];oe(Xe,ei,J(ei),$)}return Xe}function sr($,oe){for(var J=-1,Xe=null==$?0:$.length;++J<Xe&&!1!==oe($[J],J,$););return $}function Lp($,oe){for(var J=null==$?0:$.length;J--&&!1!==oe($[J],J,$););return $}function Vo($,oe){for(var J=-1,Xe=null==$?0:$.length;++J<Xe;)if(!oe($[J],J,$))return!1;return!0}function on($,oe){for(var J=-1,Xe=null==$?0:$.length,$e=0,xt=[];++J<Xe;){var ei=$[J];oe(ei,J,$)&&(xt[$e++]=ei)}return xt}function Ni($,oe){return!(null==$||!$.length)&&ja($,oe,0)>-1}function jn($,oe,J){for(var Xe=-1,$e=null==$?0:$.length;++Xe<$e;)if(J(oe,$[Xe]))return!0;return!1}function Nt($,oe){for(var J=-1,Xe=null==$?0:$.length,$e=Array(Xe);++J<Xe;)$e[J]=oe($[J],J,$);return $e}function Wn($,oe){for(var J=-1,Xe=oe.length,$e=$.length;++J<Xe;)$[$e+J]=oe[J];return $}function ul($,oe,J,Xe){var $e=-1,xt=null==$?0:$.length;for(Xe&&xt&&(J=$[++$e]);++$e<xt;)J=oe(J,$[$e],$e,$);return J}function Yv($,oe,J,Xe){var $e=null==$?0:$.length;for(Xe&&$e&&(J=$[--$e]);$e--;)J=oe(J,$[$e],$e,$);return J}function _d($,oe){for(var J=-1,Xe=null==$?0:$.length;++J<Xe;)if(oe($[J],J,$))return!0;return!1}var $t=cl("length");function qn($,oe,J){var Xe;return J($,function($e,xt,ei){if(oe($e,xt,ei))return Xe=xt,!1}),Xe}function As($,oe,J,Xe){for(var $e=$.length,xt=J+(Xe?1:-1);Xe?xt--:++xt<$e;)if(oe($[xt],xt,$))return xt;return-1}function ja($,oe,J){return oe==oe?function Wo($,oe,J){for(var Xe=J-1,$e=$.length;++Xe<$e;)if($[Xe]===oe)return Xe;return-1}($,oe,J):As($,Kt,J)}function Mp($,oe,J,Xe){for(var $e=J-1,xt=$.length;++$e<xt;)if(Xe($[$e],oe))return $e;return-1}function Kt($){return $!=$}function yd($,oe){var J=null==$?0:$.length;return J?fl($,oe)/J:NaN}function cl($){return function(oe){return null==oe?R:oe[$]}}function dl($){return function(oe){return null==$?R:$[oe]}}function Fp($,oe,J,Xe,$e){return $e($,function(xt,ei,Pt){J=Xe?(Xe=!1,xt):oe(J,xt,ei,Pt)}),J}function fl($,oe){for(var J,Xe=-1,$e=$.length;++Xe<$e;){var xt=oe($[Xe]);xt!==R&&(J=J===R?xt:J+xt)}return J}function hl($,oe){for(var J=-1,Xe=Array($);++J<$;)Xe[J]=oe(J);return Xe}function pl($){return $&&$.slice(0,Ds($)+1).replace(xs,"")}function Tr($){return function(oe){return $(oe)}}function ml($,oe){return Nt(oe,function(J){return $[J]})}function xi($,oe){return $.has(oe)}function ca($,oe){for(var J=-1,Xe=$.length;++J<Xe&&ja(oe,$[J],0)>-1;);return J}function Ho($,oe){for(var J=$.length;J--&&ja(oe,$[J],0)>-1;);return J}var gl=dl({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Vp=dl({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function jo($){return"\\"+Cp[$]}function Wa($){return pd.test($)}function qr($){var oe=-1,J=Array($.size);return $.forEach(function(Xe,$e){J[++oe]=[$e,Xe]}),J}function En($,oe){return function(J){return $(oe(J))}}function Gn($,oe){for(var J=-1,Xe=$.length,$e=0,xt=[];++J<Xe;){var ei=$[J];(ei===oe||ei===Re)&&($[J]=Re,xt[$e++]=J)}return xt}function ws($){var oe=-1,J=Array($.size);return $.forEach(function(Xe){J[++oe]=Xe}),J}function da($){return Wa($)?function or($){for(var oe=Hn.lastIndex=0;Hn.test($);)++oe;return oe}($):$t($)}function Ki($){return Wa($)?function jp($){return $.match(Hn)||[]}($):function ll($){return $.split("")}($)}function Ds($){for(var oe=$.length;oe--&&dp.test($.charAt(oe)););return oe}var Go=dl({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Is=function $(oe){var o,J=(oe=null==oe?Wi:Is.defaults(Wi.Object(),oe,Is.pick(Wi,bp))).Array,Xe=oe.Date,$e=oe.Error,xt=oe.Function,ei=oe.Math,Pt=oe.Object,Ti=oe.RegExp,xd=oe.String,Fr=oe.TypeError,Ps=J.prototype,ur=Pt.prototype,qa=oe["__core-js_shared__"],ks=xt.prototype.toString,Ot=ur.hasOwnProperty,Os=0,un=(o=/[^.]+$/.exec(qa&&qa.keys&&qa.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"",Ls=ur.toString,Rs=ks.call(Pt),yl=Wi._,Sd=Ti("^"+ks.call(Ot).replace(Ua,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Cn=gd?oe.Buffer:R,ln=oe.Symbol,Ga=oe.Uint8Array,qi=Cn?Cn.allocUnsafe:R,fa=En(Pt.getPrototypeOf,Pt),Ed=Pt.create,Tl=ur.propertyIsEnumerable,Ms=Ps.splice,Cd=ln?ln.isConcatSpreadable:R,cn=ln?ln.iterator:R,Nr=ln?ln.toStringTag:R,Fs=function(){try{var o=Zn(Pt,"defineProperty");return o({},"",{}),o}catch{}}(),Ad=oe.clearTimeout!==Wi.clearTimeout&&oe.clearTimeout,At=Xe&&Xe.now!==Wi.Date.now&&Xe.now,ha=oe.setTimeout!==Wi.setTimeout&&oe.setTimeout,za=ei.ceil,dn=ei.floor,Gr=Pt.getOwnPropertySymbols,Ns=Cn?Cn.isBuffer:R,bl=oe.isFinite,wd=Ps.join,An=En(Pt.keys,Pt),bi=ei.max,hi=ei.min,zo=Xe.now,Dd=oe.parseInt,xl=ei.random,Xa=Ps.reverse,pa=Zn(oe,"DataView"),zn=Zn(oe,"Map"),Xo=Zn(oe,"Promise"),Xn=Zn(oe,"Set"),$a=Zn(oe,"WeakMap"),ma=Zn(Pt,"create"),Bs=$a&&new $a,fn={},$n=mn(pa),Id=mn(zn),Pd=mn(Xo),kd=mn(Xn),Sl=mn($a),$o=ln?ln.prototype:R,ga=$o?$o.valueOf:R,Ko=$o?$o.toString:R;function k(o){if(ui(o)&&!gt(o)&&!(o instanceof pt)){if(o instanceof Br)return o;if(Ot.call(o,"__wrapped__"))return pi(o)}return new Br(o)}var va=function(){function o(){}return function(l){if(!Qt(l))return{};if(Ed)return Ed(l);o.prototype=l;var f=new o;return o.prototype=R,f}}();function Yo(){}function Br(o,l){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=R}function pt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Se,this.__views__=[]}function wn(o){var l=-1,f=null==o?0:o.length;for(this.clear();++l<f;){var T=o[l];this.set(T[0],T[1])}}function Yt(o){var l=-1,f=null==o?0:o.length;for(this.clear();++l<f;){var T=o[l];this.set(T[0],T[1])}}function Dt(o){var l=-1,f=null==o?0:o.length;for(this.clear();++l<f;){var T=o[l];this.set(T[0],T[1])}}function Qi(o){var l=-1,f=null==o?0:o.length;for(this.__data__=new Dt;++l<f;)this.add(o[l])}function lr(o){var l=this.__data__=new Yt(o);this.size=l.size}function tu(o,l){var f=gt(o),T=!f&&La(o),C=!f&&!T&&Vi(o),L=!f&&!T&&!C&&Jr(o),V=f||T||C||L,q=V?hl(o.length,xd):[],K=q.length;for(var ce in o)(l||Ot.call(o,ce))&&(!V||!("length"==ce||C&&("offset"==ce||"parent"==ce)||L&&("buffer"==ce||"byteLength"==ce||"byteOffset"==ce)||pn(ce,K)))&&q.push(ce);return q}function Nd(o){var l=o.length;return l?o[Nl(0,l-1)]:R}function Bd(o,l){return oo(cr(o),ya(l,0,o.length))}function iu(o){return oo(cr(o))}function ti(o,l,f){(f!==R&&!Hr(o[l],f)||f===R&&!(l in o))&&Xr(o,l,f)}function Vs(o,l,f){var T=o[l];(!Ot.call(o,l)||!Hr(T,f)||f===R&&!(l in o))&&Xr(o,l,f)}function Bt(o,l){for(var f=o.length;f--;)if(Hr(o[f][0],l))return f;return-1}function Yp(o,l,f,T){return Sr(o,function(C,L,V){l(T,C,f(C),V)}),T}function Ud(o,l){return o&&Kr(l,Xt(l),o)}function Xr(o,l,f){"__proto__"==l&&Fs?Fs(o,l,{configurable:!0,enumerable:!0,value:f,writable:!0}):o[l]=f}function ge(o,l){for(var f=-1,T=l.length,C=J(T),L=null==o;++f<T;)C[f]=L?R:Ec(o,l[f]);return C}function ya(o,l,f){return o==o&&(f!==R&&(o=o<=f?o:f),l!==R&&(o=o>=l?o:l)),o}function xr(o,l,f,T,C,L){var V,q=1&l,K=2&l,ce=4&l;if(f&&(V=C?f(o,T,C,L):f(o)),V!==R)return V;if(!Qt(o))return o;var de=gt(o);if(de){if(V=function cf(o){var l=o.length,f=new o.constructor(l);return l&&"string"==typeof o[0]&&Ot.call(o,"index")&&(f.index=o.index,f.input=o.input),f}(o),!q)return cr(o,V)}else{var ve=Bi(o),Ue=ve==Xi||ve==na;if(Vi(o))return ql(o,q);if(ve==wt||ve==Ke||Ue&&!C){if(V=K||Ue?{}:tc(o),!q)return K?function zl(o,l){return Kr(o,to(o),l)}(o,function Qp(o,l){return o&&Kr(l,tr(l),o)}(V,o)):function fu(o,l){return Kr(o,Jl(o),l)}(o,Ud(V,o))}else{if(!zt[ve])return C?o:{};V=function df(o,l,f){var T=o.constructor;switch(l){case tn:return zs(o);case kt:case Gt:return new T(+o);case rn:return function cm(o,l){var f=l?zs(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.byteLength)}(o,f);case ms:case gs:case Ba:case Tn:case vs:case Wr:case Un:case nn:case Vn:return wa(o,f);case at:return new T;case si:case Mt:return new T(o);case oi:return function dm(o){var l=new o.constructor(o.source,yi.exec(o));return l.lastIndex=o.lastIndex,l}(o);case Fi:return new T;case vi:return function es(o){return ga?Pt(ga.call(o)):{}}(o)}}(o,ve,q)}}L||(L=new lr);var Be=L.get(o);if(Be)return Be;L.set(o,V),_o(o)?o.forEach(function(ot){V.add(xr(ot,l,f,ot,o,L))}):oh(o)&&o.forEach(function(ot,Et){V.set(Et,xr(ot,l,f,Et,o,L))});var mt=de?R:(ce?K?Ys:Ks:K?tr:Xt)(o);return sr(mt||o,function(ot,Et){mt&&(ot=o[Et=ot]),Vs(V,Et,xr(ot,l,f,Et,o,L))}),V}function Kn(o,l,f){var T=f.length;if(null==o)return!T;for(o=Pt(o);T--;){var C=f[T],V=o[C];if(V===R&&!(C in o)||!(0,l[C])(V))return!1}return!0}function wl(o,l,f){if("function"!=typeof o)throw new Fr(he);return no(function(){o.apply(R,f)},l)}function Si(o,l,f,T){var C=-1,L=Ni,V=!0,q=o.length,K=[],ce=l.length;if(!q)return K;f&&(l=Nt(l,Tr(f))),T?(L=jn,V=!1):l.length>=200&&(L=xi,V=!1,l=new Qi(l));e:for(;++C<q;){var de=o[C],ve=null==f?de:f(de);if(de=T||0!==de?de:0,V&&ve==ve){for(var Ue=ce;Ue--;)if(l[Ue]===ve)continue e;K.push(de)}else L(l,ve,T)||K.push(de)}return K}k.templateSettings={escape:Fo,evaluate:Zu,interpolate:Ts,variable:"",imports:{_:k}},(k.prototype=Yo.prototype).constructor=k,(Br.prototype=va(Yo.prototype)).constructor=Br,(pt.prototype=va(Yo.prototype)).constructor=pt,wn.prototype.clear=function Qo(){this.__data__=ma?ma(null):{},this.size=0},wn.prototype.delete=function Jo(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l},wn.prototype.get=function qp(o){var l=this.__data__;if(ma){var f=l[o];return f===He?R:f}return Ot.call(l,o)?l[o]:R},wn.prototype.has=function Gp(o){var l=this.__data__;return ma?l[o]!==R:Ot.call(l,o)},wn.prototype.set=function br(o,l){var f=this.__data__;return this.size+=this.has(o)?0:1,f[o]=ma&&l===R?He:l,this},Yt.prototype.clear=function Ka(){this.__data__=[],this.size=0},Yt.prototype.delete=function Zo(o){var l=this.__data__,f=Bt(l,o);return!(f<0||(f==l.length-1?l.pop():Ms.call(l,f,1),--this.size,0))},Yt.prototype.get=function Rd(o){var l=this.__data__,f=Bt(l,o);return f<0?R:l[f][1]},Yt.prototype.has=function zp(o){return Bt(this.__data__,o)>-1},Yt.prototype.set=function zr(o,l){var f=this.__data__,T=Bt(f,o);return T<0?(++this.size,f.push([o,l])):f[T][1]=l,this},Dt.prototype.clear=function Dn(){this.size=0,this.__data__={hash:new wn,map:new(zn||Yt),string:new wn}},Dt.prototype.delete=function Xp(o){var l=Zs(this,o).delete(o);return this.size-=l?1:0,l},Dt.prototype.get=function Ii(o){return Zs(this,o).get(o)},Dt.prototype.has=function Us(o){return Zs(this,o).has(o)},Dt.prototype.set=function eu(o,l){var f=Zs(this,o),T=f.size;return f.set(o,l),this.size+=f.size==T?0:1,this},Qi.prototype.add=Qi.prototype.push=function $p(o){return this.__data__.set(o,He),this},Qi.prototype.has=function El(o){return this.__data__.has(o)},lr.prototype.clear=function Md(){this.__data__=new Yt,this.size=0},lr.prototype.delete=function Fd(o){var l=this.__data__,f=l.delete(o);return this.size=l.size,f},lr.prototype.get=function Cl(o){return this.__data__.get(o)},lr.prototype.has=function _a(o){return this.__data__.has(o)},lr.prototype.set=function Kp(o,l){var f=this.__data__;if(f instanceof Yt){var T=f.__data__;if(!zn||T.length<199)return T.push([o,l]),this.size=++f.size,this;f=this.__data__=new Dt(T)}return f.set(o,l),this.size=f.size,this};var Sr=Zd(Ji),Ya=Zd(Dl,!0);function hn(o,l){var f=!0;return Sr(o,function(T,C,L){return f=!!l(T,C,L)}),f}function Qa(o,l,f){for(var T=-1,C=o.length;++T<C;){var L=o[T],V=l(L);if(null!=V&&(q===R?V==V&&!Gi(V):f(V,q)))var q=V,K=L}return K}function Vd(o,l){var f=[];return Sr(o,function(T,C,L){l(T,C,L)&&f.push(T)}),f}function Pi(o,l,f,T,C){var L=-1,V=o.length;for(f||(f=hf),C||(C=[]);++L<V;){var q=o[L];l>0&&f(q)?l>1?Pi(q,l-1,f,T,C):Wn(C,q):T||(C[C.length]=q)}return C}var Hs=hu(),Ta=hu(!0);function Ji(o,l){return o&&Hs(o,l,Xt)}function Dl(o,l){return o&&Ta(o,l,Xt)}function Ja(o,l){return on(l,function(f){return kn(o[f])})}function ba(o,l){for(var f=0,T=(l=Li(l,o)).length;null!=o&&f<T;)o=o[Ur(l[f++])];return f&&f==T?o:R}function ru(o,l,f){var T=l(o);return gt(o)?T:Wn(T,f(o))}function Zi(o){return null==o?o===R?"[object Undefined]":"[object Null]":Nr&&Nr in Pt(o)?function uf(o){var l=Ot.call(o,Nr),f=o[Nr];try{o[Nr]=R;var T=!0}catch{}var C=Ls.call(o);return T&&(l?o[Nr]=f:delete o[Nr]),C}(o):function mm(o){return Ls.call(o)}(o)}function nu(o,l){return o>l}function Zp(o,l){return null!=o&&Ot.call(o,l)}function Hd(o,l){return null!=o&&l in Pt(o)}function Il(o,l,f){for(var T=f?jn:Ni,C=o[0].length,L=o.length,V=L,q=J(L),K=1/0,ce=[];V--;){var de=o[V];V&&l&&(de=Nt(de,Tr(l))),K=hi(de.length,K),q[V]=!f&&(l||C>=120&&de.length>=120)?new Qi(V&&de):R}de=o[0];var ve=-1,Ue=q[0];e:for(;++ve<C&&ce.length<K;){var Be=de[ve],st=l?l(Be):Be;if(Be=f||0!==Be?Be:0,!(Ue?xi(Ue,st):T(ce,st,f))){for(V=L;--V;){var mt=q[V];if(!(mt?xi(mt,st):T(o[V],st,f)))continue e}Ue&&Ue.push(st),ce.push(Be)}}return ce}function Za(o,l,f){var T=null==(o=_f(o,l=Li(l,o)))?o:o[Ur(er(l))];return null==T?R:Mr(T,o,f)}function au(o){return ui(o)&&Zi(o)==Ke}function xa(o,l,f,T,C){return o===l||(null==o||null==l||!ui(o)&&!ui(l)?o!=o&&l!=l:function su(o,l,f,T,C,L){var V=gt(o),q=gt(l),K=V?Ze:Bi(o),ce=q?Ze:Bi(l),de=(K=K==Ke?wt:K)==wt,ve=(ce=ce==Ke?wt:ce)==wt,Ue=K==ce;if(Ue&&Vi(o)){if(!Vi(l))return!1;V=!0,de=!1}if(Ue&&!de)return L||(L=new lr),V||Jr(o)?ka(o,l,f,T,C,L):function of(o,l,f,T,C,L,V){switch(f){case rn:if(o.byteLength!=l.byteLength||o.byteOffset!=l.byteOffset)return!1;o=o.buffer,l=l.buffer;case tn:return!(o.byteLength!=l.byteLength||!L(new Ga(o),new Ga(l)));case kt:case Gt:case si:return Hr(+o,+l);case ci:return o.name==l.name&&o.message==l.message;case oi:case Mt:return o==l+"";case at:var q=qr;case Fi:if(q||(q=ws),o.size!=l.size&&!(1&T))return!1;var ce=V.get(o);if(ce)return ce==l;T|=2,V.set(o,l);var de=ka(q(o),q(l),T,C,L,V);return V.delete(o),de;case vi:if(ga)return ga.call(o)==ga.call(l)}return!1}(o,l,K,f,T,C,L);if(!(1&f)){var Be=de&&Ot.call(o,"__wrapped__"),st=ve&&Ot.call(l,"__wrapped__");if(Be||st){var mt=Be?o.value():o,ot=st?l.value():l;return L||(L=new lr),C(mt,ot,f,T,L)}}return!!Ue&&(L||(L=new lr),function Ql(o,l,f,T,C,L){var V=1&f,q=Ks(o),K=q.length;if(K!=Ks(l).length&&!V)return!1;for(var ve=K;ve--;){var Ue=q[ve];if(!(V?Ue in l:Ot.call(l,Ue)))return!1}var Be=L.get(o),st=L.get(l);if(Be&&st)return Be==l&&st==o;var mt=!0;L.set(o,l),L.set(l,o);for(var ot=V;++ve<K;){var Et=o[Ue=q[ve]],ct=l[Ue];if(T)var Ir=V?T(ct,Et,Ue,l,o,L):T(Et,ct,Ue,o,l,L);if(!(Ir===R?Et===ct||C(Et,ct,f,T,L):Ir)){mt=!1;break}ot||(ot="constructor"==Ue)}if(mt&&!ot){var ir=o.constructor,zi=l.constructor;ir!=zi&&"constructor"in o&&"constructor"in l&&!("function"==typeof ir&&ir instanceof ir&&"function"==typeof zi&&zi instanceof zi)&&(mt=!1)}return L.delete(o),L.delete(l),mt}(o,l,f,T,C,L))}(o,l,f,T,xa,C))}function ou(o,l,f,T){var C=f.length,L=C,V=!T;if(null==o)return!L;for(o=Pt(o);C--;){var q=f[C];if(V&&q[2]?q[1]!==o[q[0]]:!(q[0]in o))return!1}for(;++C<L;){var K=(q=f[C])[0],ce=o[K],de=q[1];if(V&&q[2]){if(ce===R&&!(K in o))return!1}else{var ve=new lr;if(T)var Ue=T(ce,de,K,o,l,ve);if(!(Ue===R?xa(de,ce,3,T,ve):Ue))return!1}}return!0}function kl(o){return!(!Qt(o)||function mf(o){return!!un&&un in o}(o))&&(kn(o)?Sd:_r).test(mn(o))}function Ol(o){return"function"==typeof o?o:null==o?pr:"object"==typeof o?gt(o)?Ea(o[0],o[1]):Er(o):Oh(o)}function Ll(o){if(!ro(o))return An(o);var l=[];for(var f in Pt(o))Ot.call(o,f)&&"constructor"!=f&&l.push(f);return l}function Rl(o,l){return o<l}function Sa(o,l){var f=-1,T=fr(o)?J(o.length):[];return Sr(o,function(C,L,V){T[++f]=l(C,L,V)}),T}function Er(o){var l=eo(o);return 1==l.length&&l[0][2]?vf(l[0][0],l[0][1]):function(f){return f===o||ou(f,o,l)}}function Ea(o,l){return io(o)&&gf(l)?vf(Ur(o),l):function(f){var T=Ec(f,o);return T===R&&T===l?Cc(f,o):xa(l,T,3)}}function ki(o,l,f,T,C){o!==l&&Hs(l,function(L,V){if(C||(C=new lr),Qt(L))!function rm(o,l,f,T,C,L,V){var q=nc(o,f),K=nc(l,f),ce=V.get(K);if(ce)ti(o,f,ce);else{var de=L?L(q,K,f+"",o,l,V):R,ve=de===R;if(ve){var Ue=gt(K),Be=!Ue&&Vi(K),st=!Ue&&!Be&&Jr(K);de=K,Ue||Be||st?gt(q)?de=q:ii(q)?de=cr(q):Be?(ve=!1,de=ql(K,!0)):st?(ve=!1,de=wa(K,!0)):de=[]:ta(K)||La(K)?(de=q,La(q)?de=ph(q):(!Qt(q)||kn(q))&&(de=tc(K))):ve=!1}ve&&(V.set(K,de),C(de,K,T,L,V),V.delete(K)),ti(o,f,de)}}(o,l,V,f,ki,T,C);else{var q=T?T(nc(o,V),L,V+"",o,l,C):R;q===R&&(q=L),ti(o,V,q)}},tr)}function Ut(o,l){var f=o.length;if(f)return pn(l+=l<0?f:0,f)?o[l]:R}function Yn(o,l,f){l=l.length?Nt(l,function(L){return gt(L)?function(V){return ba(V,1===L.length?L[0]:L)}:L}):[pr];var T=-1;return l=Nt(l,Tr(nt())),function Np($,oe){var J=$.length;for($.sort(oe);J--;)$[J]=$[J].value;return $}(Sa(o,function(L,V,q){return{criteria:Nt(l,function(ce){return ce(L)}),index:++T,value:L}}),function(L,V){return function Gl(o,l,f){for(var T=-1,C=o.criteria,L=l.criteria,V=C.length,q=f.length;++T<V;){var K=cu(C[T],L[T]);if(K)return T>=q?K:K*("desc"==f[T]?-1:1)}return o.index-l.index}(L,V,f)})}function Ws(o,l,f){for(var T=-1,C=l.length,L={};++T<C;){var V=l[T],q=ba(o,V);f(q,V)&&Ca(L,Li(V,o),q)}return L}function Fl(o,l,f,T){var C=T?Mp:ja,L=-1,V=l.length,q=o;for(o===l&&(l=cr(l)),f&&(q=Nt(o,Tr(f)));++L<V;)for(var K=0,ce=l[L],de=f?f(ce):ce;(K=C(q,de,K,T))>-1;)q!==o&&Ms.call(q,K,1),Ms.call(o,K,1);return o}function zd(o,l){for(var f=o?l.length:0,T=f-1;f--;){var C=l[f];if(f==T||C!==L){var L=C;pn(C)?Ms.call(o,C,1):Vl(o,C)}}return o}function Nl(o,l){return o+dn(xl()*(l-o+1))}function uu(o,l){var f="";if(!o||l<1||l>Te)return f;do{l%2&&(f+=o),(l=dn(l/2))&&(o+=o)}while(l);return f}function St(o,l){return ao(rc(o,l,pr),o+"")}function sm(o){return Nd(Ra(o))}function Xd(o,l){var f=Ra(o);return oo(f,ya(l,0,f.length))}function Ca(o,l,f,T){if(!Qt(o))return o;for(var C=-1,L=(l=Li(l,o)).length,V=L-1,q=o;null!=q&&++C<L;){var K=Ur(l[C]),ce=f;if("__proto__"===K||"constructor"===K||"prototype"===K)return o;if(C!=V){var de=q[K];(ce=T?T(de,K,q):R)===R&&(ce=Qt(de)?de:pn(l[C+1])?[]:{})}Vs(q,K,ce),q=q[K]}return o}var $d=Bs?function(o,l){return Bs.set(o,l),o}:pr,om=Fs?function(o,l){return Fs(o,"toString",{configurable:!0,enumerable:!1,value:Ci(l),writable:!0})}:pr;function um(o){return oo(Ra(o))}function Oi(o,l,f){var T=-1,C=o.length;l<0&&(l=-l>C?0:C+l),(f=f>C?C:f)<0&&(f+=C),C=l>f?0:f-l>>>0,l>>>=0;for(var L=J(C);++T<C;)L[T]=o[T+l];return L}function lm(o,l){var f;return Sr(o,function(T,C,L){return!(f=l(T,C,L))}),!!f}function Aa(o,l,f){var T=0,C=null==o?T:o.length;if("number"==typeof l&&l==l&&C<=2147483647){for(;T<C;){var L=T+C>>>1,V=o[L];null!==V&&!Gi(V)&&(f?V<=l:V<l)?T=L+1:C=L}return C}return Bl(o,l,pr,f)}function Bl(o,l,f,T){var C=0,L=null==o?0:o.length;if(0===L)return 0;for(var V=(l=f(l))!=l,q=null===l,K=Gi(l),ce=l===R;C<L;){var de=dn((C+L)/2),ve=f(o[de]),Ue=ve!==R,Be=null===ve,st=ve==ve,mt=Gi(ve);if(V)var ot=T||st;else ot=ce?st&&(T||Ue):q?st&&Ue&&(T||!Be):K?st&&Ue&&!Be&&(T||!mt):!Be&&!mt&&(T?ve<=l:ve<l);ot?C=de+1:L=de}return hi(L,4294967294)}function Kd(o,l){for(var f=-1,T=o.length,C=0,L=[];++f<T;){var V=o[f],q=l?l(V):V;if(!f||!Hr(q,K)){var K=q;L[C++]=0===V?0:V}}return L}function Ul(o){return"number"==typeof o?o:Gi(o)?NaN:+o}function Cr(o){if("string"==typeof o)return o;if(gt(o))return Nt(o,Cr)+"";if(Gi(o))return Ko?Ko.call(o):"";var l=o+"";return"0"==l&&1/o==-Fe?"-0":l}function $r(o,l,f){var T=-1,C=Ni,L=o.length,V=!0,q=[],K=q;if(f)V=!1,C=jn;else if(L>=200){var ce=l?null:Yl(o);if(ce)return ws(ce);V=!1,C=xi,K=new Qi}else K=l?[]:q;e:for(;++T<L;){var de=o[T],ve=l?l(de):de;if(de=f||0!==de?de:0,V&&ve==ve){for(var Ue=K.length;Ue--;)if(K[Ue]===ve)continue e;l&&K.push(ve),q.push(de)}else C(K,ve,f)||(K!==q&&K.push(ve),q.push(de))}return q}function Vl(o,l){return null==(o=_f(o,l=Li(l,o)))||delete o[Ur(er(l))]}function Ar(o,l,f,T){return Ca(o,l,f(ba(o,l)),T)}function qs(o,l,f,T){for(var C=o.length,L=T?C:-1;(T?L--:++L<C)&&l(o[L],L,o););return f?Oi(o,T?0:L,T?L+1:C):Oi(o,T?L+1:0,T?C:L)}function Yd(o,l){var f=o;return f instanceof pt&&(f=f.value()),ul(l,function(T,C){return C.func.apply(C.thisArg,Wn([T],C.args))},f)}function Gs(o,l,f){var T=o.length;if(T<2)return T?$r(o[0]):[];for(var C=-1,L=J(T);++C<T;)for(var V=o[C],q=-1;++q<T;)q!=C&&(L[C]=Si(L[C]||V,o[q],l,f));return $r(Pi(L,1),l,f)}function lu(o,l,f){for(var T=-1,C=o.length,L=l.length,V={};++T<C;)f(V,o[T],T<L?l[T]:R);return V}function Hl(o){return ii(o)?o:[]}function jl(o){return"function"==typeof o?o:pr}function Li(o,l){return gt(o)?o:io(o,l)?[o]:yu(Lt(o))}var Qd=St;function Qn(o,l,f){var T=o.length;return f=f===R?T:f,!l&&f>=T?o:Oi(o,l,f)}var Wl=Ad||function(o){return Wi.clearTimeout(o)};function ql(o,l){if(l)return o.slice();var f=o.length,T=qi?qi(f):new o.constructor(f);return o.copy(T),T}function zs(o){var l=new o.constructor(o.byteLength);return new Ga(l).set(new Ga(o)),l}function wa(o,l){var f=l?zs(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.length)}function cu(o,l){if(o!==l){var f=o!==R,T=null===o,C=o==o,L=Gi(o),V=l!==R,q=null===l,K=l==l,ce=Gi(l);if(!q&&!ce&&!L&&o>l||L&&V&&K&&!q&&!ce||T&&V&&K||!f&&K||!C)return 1;if(!T&&!L&&!ce&&o<l||ce&&f&&C&&!T&&!L||q&&f&&C||!V&&C||!K)return-1}return 0}function Jd(o,l,f,T){for(var C=-1,L=o.length,V=f.length,q=-1,K=l.length,ce=bi(L-V,0),de=J(K+ce),ve=!T;++q<K;)de[q]=l[q];for(;++C<V;)(ve||C<L)&&(de[f[C]]=o[C]);for(;ce--;)de[q++]=o[C++];return de}function du(o,l,f,T){for(var C=-1,L=o.length,V=-1,q=f.length,K=-1,ce=l.length,de=bi(L-q,0),ve=J(de+ce),Ue=!T;++C<de;)ve[C]=o[C];for(var Be=C;++K<ce;)ve[Be+K]=l[K];for(;++V<q;)(Ue||C<L)&&(ve[Be+f[V]]=o[C++]);return ve}function cr(o,l){var f=-1,T=o.length;for(l||(l=J(T));++f<T;)l[f]=o[f];return l}function Kr(o,l,f,T){var C=!f;f||(f={});for(var L=-1,V=l.length;++L<V;){var q=l[L],K=T?T(f[q],o[q],q,f,o):R;K===R&&(K=o[q]),C?Xr(f,q,K):Vs(f,q,K)}return f}function ts(o,l){return function(f,T){var C=gt(f)?Kv:Yp,L=l?l():{};return C(f,o,nt(T,2),L)}}function is(o){return St(function(l,f){var T=-1,C=f.length,L=C>1?f[C-1]:R,V=C>2?f[2]:R;for(L=o.length>3&&"function"==typeof L?(C--,L):R,V&&Ui(f[0],f[1],V)&&(L=C<3?R:L,C=1),l=Pt(l);++T<C;){var q=f[T];q&&o(l,q,T,L)}return l})}function Zd(o,l){return function(f,T){if(null==f)return f;if(!fr(f))return o(f,T);for(var C=f.length,L=l?C:-1,V=Pt(f);(l?L--:++L<C)&&!1!==T(V[L],L,V););return f}}function hu(o){return function(l,f,T){for(var C=-1,L=Pt(l),V=T(l),q=V.length;q--;){var K=V[o?q:++C];if(!1===f(L[K],K,L))break}return l}}function Xs(o){return function(l){var f=Wa(l=Lt(l))?Ki(l):R,T=f?f[0]:l.charAt(0),C=f?Qn(f,1).join(""):l.slice(1);return T[o]()+C}}function Da(o){return function(l){return ul(Pc(Hu(l).replace(al,"")),o,"")}}function Ia(o){return function(){var l=arguments;switch(l.length){case 0:return new o;case 1:return new o(l[0]);case 2:return new o(l[0],l[1]);case 3:return new o(l[0],l[1],l[2]);case 4:return new o(l[0],l[1],l[2],l[3]);case 5:return new o(l[0],l[1],l[2],l[3],l[4]);case 6:return new o(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new o(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var f=va(o.prototype),T=o.apply(f,l);return Qt(T)?T:f}}function Xl(o){return function(l,f,T){var C=Pt(l);if(!fr(l)){var L=nt(f,3);l=Xt(l),f=function(q){return L(C[q],q,C)}}var V=o(l,f,T);return V>-1?C[L?l[V]:V]:R}}function $l(o){return Yr(function(l){var f=l.length,T=f,C=Br.prototype.thru;for(o&&l.reverse();T--;){var L=l[T];if("function"!=typeof L)throw new Fr(he);if(C&&!V&&"wrapper"==Js(L))var V=new Br([],!0)}for(T=V?T:f;++T<f;){var q=Js(L=l[T]),K="wrapper"==q?Qs(L):R;V=K&&Pn(K[0])&&424==K[1]&&!K[4].length&&1==K[9]?V[Js(K[0])].apply(V,K[3]):1==L.length&&Pn(L)?V[q]():V.thru(L)}return function(){var ce=arguments,de=ce[0];if(V&&1==ce.length&&gt(de))return V.plant(de).value();for(var ve=0,Ue=f?l[ve].apply(this,ce):de;++ve<f;)Ue=l[ve].call(this,Ue);return Ue}})}function pu(o,l,f,T,C,L,V,q,K,ce){var de=128&l,ve=1&l,Ue=2&l,Be=24&l,st=512&l,mt=Ue?R:Ia(o);return function ot(){for(var Et=arguments.length,ct=J(Et),Ir=Et;Ir--;)ct[Ir]=arguments[Ir];if(Be)var ir=Jn(ot),zi=function Up($,oe){for(var J=$.length,Xe=0;J--;)$[J]===oe&&++Xe;return Xe}(ct,ir);if(T&&(ct=Jd(ct,T,C,Be)),L&&(ct=du(ct,L,V,Be)),Et-=zi,Be&&Et<ce){var ri=Gn(ct,ir);return Kl(o,l,pu,ot.placeholder,f,ct,ri,q,K,ce-Et)}var Zr=ve?f:this,Mn=Ue?Zr[o]:o;return Et=ct.length,q?ct=function yf(o,l){for(var f=o.length,T=hi(l.length,f),C=cr(o);T--;){var L=l[T];o[T]=pn(L,f)?C[L]:R}return o}(ct,q):st&&Et>1&&ct.reverse(),de&&K<Et&&(ct.length=K),this&&this!==Wi&&this instanceof ot&&(Mn=mt||Ia(Mn)),Mn.apply(Zr,ct)}}function rf(o,l){return function(f,T){return function tm(o,l,f,T){return Ji(o,function(C,L,V){l(T,f(C),L,V)}),T}(f,o,l(T),{})}}function mu(o,l){return function(f,T){var C;if(f===R&&T===R)return l;if(f!==R&&(C=f),T!==R){if(C===R)return T;"string"==typeof f||"string"==typeof T?(f=Cr(f),T=Cr(T)):(f=Ul(f),T=Ul(T)),C=o(f,T)}return C}}function gu(o){return Yr(function(l){return l=Nt(l,Tr(nt())),St(function(f){var T=this;return o(l,function(C){return Mr(C,T,f)})})})}function Pa(o,l){var f=(l=l===R?" ":Cr(l)).length;if(f<2)return f?uu(l,o):l;var T=uu(l,za(o/da(l)));return Wa(l)?Qn(Ki(T),0,o).join(""):T.slice(0,o)}function af(o){return function(l,f,T){return T&&"number"!=typeof T&&Ui(l,f,T)&&(f=T=R),l=On(l),f===R?(f=l,l=0):f=On(f),function am(o,l,f,T){for(var C=-1,L=bi(za((l-o)/(f||1)),0),V=J(L);L--;)V[T?L:++C]=o,o+=f;return V}(l,f,T=T===R?l<f?1:-1:On(T),o)}}function $s(o){return function(l,f){return"string"==typeof l&&"string"==typeof f||(l=jr(l),f=jr(f)),o(l,f)}}function Kl(o,l,f,T,C,L,V,q,K,ce){var de=8&l;l|=de?32:64,4&(l&=~(de?64:32))||(l&=-4);var mt=[o,l,C,de?L:R,de?V:R,de?R:L,de?R:V,q,K,ce],ot=f.apply(R,mt);return Pn(o)&&Tf(ot,mt),ot.placeholder=T,Ne(ot,o,l)}function vu(o){var l=ei[o];return function(f,T){if(f=jr(f),(T=null==T?0:hi(Tt(T),292))&&bl(f)){var C=(Lt(f)+"e").split("e");return+((C=(Lt(l(C[0]+"e"+(+C[1]+T)))+"e").split("e"))[0]+"e"+(+C[1]-T))}return l(f)}}var Yl=Xn&&1/ws(new Xn([,-0]))[1]==Fe?function(o){return new Xn(o)}:So;function _u(o){return function(l){var f=Bi(l);return f==at?qr(l):f==Fi?function Hp($){var oe=-1,J=Array($.size);return $.forEach(function(Xe){J[++oe]=[Xe,Xe]}),J}(l):function Bp($,oe){return Nt(oe,function(J){return[J,$[J]]})}(l,o(l))}}function In(o,l,f,T,C,L,V,q){var K=2&l;if(!K&&"function"!=typeof o)throw new Fr(he);var ce=T?T.length:0;if(ce||(l&=-97,T=C=R),V=V===R?V:bi(Tt(V),0),q=q===R?q:Tt(q),ce-=C?C.length:0,64&l){var de=T,ve=C;T=C=R}var Ue=K?R:Qs(o),Be=[o,l,f,T,C,de,ve,L,V,q];if(Ue&&function pm(o,l){var f=o[1],T=l[1],C=f|T;if(!(C<131)&&!(128==T&&8==f||128==T&&256==f&&o[7].length<=l[8]||384==T&&l[7].length<=l[8]&&8==f))return o;1&T&&(o[2]=l[2],C|=1&f?0:4);var q=l[3];if(q){var K=o[3];o[3]=K?Jd(K,q,l[4]):q,o[4]=K?Gn(o[3],Re):l[4]}(q=l[5])&&(o[5]=(K=o[5])?du(K,q,l[6]):q,o[6]=K?Gn(o[5],Re):l[6]),(q=l[7])&&(o[7]=q),128&T&&(o[8]=null==o[8]?l[8]:hi(o[8],l[8])),null==o[9]&&(o[9]=l[9]),o[0]=l[0],o[1]=C}(Be,Ue),o=Be[0],l=Be[1],f=Be[2],T=Be[3],C=Be[4],!(q=Be[9]=Be[9]===R?K?0:o.length:bi(Be[9]-ce,0))&&24&l&&(l&=-25),l&&1!=l)st=8==l||16==l?function tf(o,l,f){var T=Ia(o);return function C(){for(var L=arguments.length,V=J(L),q=L,K=Jn(C);q--;)V[q]=arguments[q];var ce=L<3&&V[0]!==K&&V[L-1]!==K?[]:Gn(V,K);return(L-=ce.length)<f?Kl(o,l,pu,C.placeholder,R,V,ce,R,R,f-L):Mr(this&&this!==Wi&&this instanceof C?T:o,this,V)}}(o,l,q):32!=l&&33!=l||C.length?pu.apply(R,Be):function nf(o,l,f,T){var C=1&l,L=Ia(o);return function V(){for(var q=-1,K=arguments.length,ce=-1,de=T.length,ve=J(de+K),Ue=this&&this!==Wi&&this instanceof V?L:o;++ce<de;)ve[ce]=T[ce];for(;K--;)ve[ce++]=arguments[++q];return Mr(Ue,C?f:this,ve)}}(o,l,f,T);else var st=function ef(o,l,f){var T=1&l,C=Ia(o);return function L(){return(this&&this!==Wi&&this instanceof L?C:o).apply(T?f:this,arguments)}}(o,l,f);return Ne((Ue?$d:Tf)(st,Be),o,l)}function rs(o,l,f,T){return o===R||Hr(o,ur[f])&&!Ot.call(T,f)?l:o}function ns(o,l,f,T,C,L){return Qt(o)&&Qt(l)&&(L.set(l,o),ki(o,l,R,ns,L),L.delete(l)),o}function sf(o){return ta(o)?R:o}function ka(o,l,f,T,C,L){var V=1&f,q=o.length,K=l.length;if(q!=K&&!(V&&K>q))return!1;var ce=L.get(o),de=L.get(l);if(ce&&de)return ce==l&&de==o;var ve=-1,Ue=!0,Be=2&f?new Qi:R;for(L.set(o,l),L.set(l,o);++ve<q;){var st=o[ve],mt=l[ve];if(T)var ot=V?T(mt,st,ve,l,o,L):T(st,mt,ve,o,l,L);if(ot!==R){if(ot)continue;Ue=!1;break}if(Be){if(!_d(l,function(Et,ct){if(!xi(Be,ct)&&(st===Et||C(st,Et,f,T,L)))return Be.push(ct)})){Ue=!1;break}}else if(st!==mt&&!C(st,mt,f,T,L)){Ue=!1;break}}return L.delete(o),L.delete(l),Ue}function Yr(o){return ao(rc(o,R,sc),o+"")}function Ks(o){return ru(o,Xt,Jl)}function Ys(o){return ru(o,tr,to)}var Qs=Bs?function(o){return Bs.get(o)}:So;function Js(o){for(var l=o.name+"",f=fn[l],T=Ot.call(fn,l)?f.length:0;T--;){var C=f[T],L=C.func;if(null==L||L==o)return C.name}return l}function Jn(o){return(Ot.call(k,"placeholder")?k:o).placeholder}function nt(){var o=k.iteratee||kc;return o=o===kc?Ol:o,arguments.length?o(arguments[0],arguments[1]):o}function Zs(o,l){var f=o.__data__;return function pf(o){var l=typeof o;return"string"==l||"number"==l||"symbol"==l||"boolean"==l?"__proto__"!==o:null===o}(l)?f["string"==typeof l?"string":"hash"]:f.map}function eo(o){for(var l=Xt(o),f=l.length;f--;){var T=l[f],C=o[T];l[f]=[T,C,gf(C)]}return l}function Zn(o,l){var f=function vl($,oe){return null==$?R:$[oe]}(o,l);return kl(f)?f:R}var Jl=Gr?function(o){return null==o?[]:(o=Pt(o),on(Gr(o),function(l){return Tl.call(o,l)}))}:Lc,to=Gr?function(o){for(var l=[];o;)Wn(l,Jl(o)),o=fa(o);return l}:Lc,Bi=Zi;function ec(o,l,f){for(var T=-1,C=(l=Li(l,o)).length,L=!1;++T<C;){var V=Ur(l[T]);if(!(L=null!=o&&f(o,V)))break;o=o[V]}return L||++T!=C?L:!!(C=null==o?0:o.length)&&go(C)&&pn(V,C)&&(gt(o)||La(o))}function tc(o){return"function"!=typeof o.constructor||ro(o)?{}:va(fa(o))}function hf(o){return gt(o)||La(o)||!!(Cd&&o&&o[Cd])}function pn(o,l){var f=typeof o;return!!(l=l??Te)&&("number"==f||"symbol"!=f&&ar.test(o))&&o>-1&&o%1==0&&o<l}function Ui(o,l,f){if(!Qt(f))return!1;var T=typeof l;return!!("number"==T?fr(f)&&pn(l,f.length):"string"==T&&l in f)&&Hr(f[l],o)}function io(o,l){if(gt(o))return!1;var f=typeof o;return!("number"!=f&&"symbol"!=f&&"boolean"!=f&&null!=o&&!Gi(o))||bs.test(o)||!No.test(o)||null!=l&&o in Pt(l)}function Pn(o){var l=Js(o),f=k[l];if("function"!=typeof f||!(l in pt.prototype))return!1;if(o===f)return!0;var T=Qs(f);return!!T&&o===T[0]}(pa&&Bi(new pa(new ArrayBuffer(1)))!=rn||zn&&Bi(new zn)!=at||Xo&&Bi(Xo.resolve())!=aa||Xn&&Bi(new Xn)!=Fi||$a&&Bi(new $a)!=_i)&&(Bi=function(o){var l=Zi(o),f=l==wt?o.constructor:R,T=f?mn(f):"";if(T)switch(T){case $n:return rn;case Id:return at;case Pd:return aa;case kd:return Fi;case Sl:return _i}return l});var fm=qa?kn:Rc;function ro(o){var l=o&&o.constructor;return o===("function"==typeof l&&l.prototype||ur)}function gf(o){return o==o&&!Qt(o)}function vf(o,l){return function(f){return null!=f&&f[o]===l&&(l!==R||o in Pt(f))}}function rc(o,l,f){return l=bi(l===R?o.length-1:l,0),function(){for(var T=arguments,C=-1,L=bi(T.length-l,0),V=J(L);++C<L;)V[C]=T[l+C];C=-1;for(var q=J(l+1);++C<l;)q[C]=T[C];return q[l]=f(V),Mr(o,this,q)}}function _f(o,l){return l.length<2?o:ba(o,Oi(l,0,-1))}function nc(o,l){if(("constructor"!==l||"function"!=typeof o[l])&&"__proto__"!=l)return o[l]}var Tf=so($d),no=ha||function(o,l){return Wi.setTimeout(o,l)},ao=so(om);function Ne(o,l,f){var T=l+"";return ao(o,function ff(o,l){var f=l.length;if(!f)return o;var T=f-1;return l[T]=(f>1?"& ":"")+l[T],l=l.join(f>2?", ":" "),o.replace(w,"{\n/* [wrapped with "+l+"] */\n")}(T,function gm(o,l){return sr(Ct,function(f){var T="_."+f[0];l&f[1]&&!Ni(o,T)&&o.push(T)}),o.sort()}(function lf(o){var l=o.match(O);return l?l[1].split(j):[]}(T),f)))}function so(o){var l=0,f=0;return function(){var T=zo(),C=16-(T-f);if(f=T,C>0){if(++l>=800)return arguments[0]}else l=0;return o.apply(R,arguments)}}function oo(o,l){var f=-1,T=o.length,C=T-1;for(l=l===R?T:l;++f<l;){var L=Nl(f,C),V=o[L];o[L]=o[f],o[f]=V}return o.length=l,o}var yu=function hm(o){var l=Lu(o,function(T){return 500===f.size&&f.clear(),T}),f=l.cache;return l}(function(o){var l=[];return 46===o.charCodeAt(0)&&l.push(""),o.replace(bn,function(f,T,C,L){l.push(C?L.replace(ut,"$1"):T||f)}),l});function Ur(o){if("string"==typeof o||Gi(o))return o;var l=o+"";return"0"==l&&1/o==-Fe?"-0":l}function mn(o){if(null!=o){try{return ks.call(o)}catch{}try{return o+""}catch{}}return""}function pi(o){if(o instanceof pt)return o.clone();var l=new Br(o.__wrapped__,o.__chain__);return l.__actions__=cr(o.__actions__),l.__index__=o.__index__,l.__values__=o.__values__,l}var ss=St(function(o,l){return ii(o)?Si(o,Pi(l,1,ii,!0)):[]}),bu=St(function(o,l){var f=er(l);return ii(f)&&(f=R),ii(o)?Si(o,Pi(l,1,ii,!0),nt(f,2)):[]}),xu=St(function(o,l){var f=er(l);return ii(f)&&(f=R),ii(o)?Si(o,Pi(l,1,ii,!0),R,f):[]});function ac(o,l,f){var T=null==o?0:o.length;if(!T)return-1;var C=null==f?0:Tt(f);return C<0&&(C=bi(T+C,0)),As(o,nt(l,3),C)}function Sf(o,l,f){var T=null==o?0:o.length;if(!T)return-1;var C=T-1;return f!==R&&(C=Tt(f),C=f<0?bi(T+C,0):hi(C,T-1)),As(o,nt(l,3),C,!0)}function sc(o){return null!=o&&o.length?Pi(o,1):[]}function Vr(o){return o&&o.length?o[0]:R}var ea=St(function(o){var l=Nt(o,Hl);return l.length&&l[0]===o[0]?Il(l):[]}),vn=St(function(o){var l=er(o),f=Nt(o,Hl);return l===er(f)?l=R:f.pop(),f.length&&f[0]===o[0]?Il(f,nt(l,2)):[]}),Ef=St(function(o){var l=er(o),f=Nt(o,Hl);return(l="function"==typeof l?l:R)&&f.pop(),f.length&&f[0]===o[0]?Il(f,R,l):[]});function er(o){var l=null==o?0:o.length;return l?o[l-1]:R}var Cf=St(Af);function Af(o,l){return o&&o.length&&l&&l.length?Fl(o,l):o}var wf=Yr(function(o,l){var f=null==o?0:o.length,T=ge(o,l);return zd(o,Nt(l,function(C){return pn(C,f)?+C:C}).sort(cu)),T});function Au(o){return null==o?o:Xa.call(o)}var dc=St(function(o){return $r(Pi(o,1,ii,!0))}),wu=St(function(o){var l=er(o);return ii(l)&&(l=R),$r(Pi(o,1,ii,!0),nt(l,2))}),Cm=St(function(o){var l=er(o);return l="function"==typeof l?l:R,$r(Pi(o,1,ii,!0),R,l)});function co(o){if(!o||!o.length)return[];var l=0;return o=on(o,function(f){if(ii(f))return l=bi(f.length,l),!0}),hl(l,function(f){return Nt(o,cl(f))})}function Du(o,l){if(!o||!o.length)return[];var f=co(o);return null==l?f:Nt(f,function(T){return Mr(l,R,T)})}var Ff=St(function(o,l){return ii(o)?Si(o,l):[]}),fo=St(function(o){return Gs(on(o,ii))}),dr=St(function(o){var l=er(o);return ii(l)&&(l=R),Gs(on(o,ii),nt(l,2))}),Nf=St(function(o){var l=er(o);return l="function"==typeof l?l:R,Gs(on(o,ii),R,l)}),fc=St(co),us=St(function(o){var l=o.length,f=l>1?o[l-1]:R;return f="function"==typeof f?(o.pop(),f):R,Du(o,f)});function hc(o){var l=k(o);return l.__chain__=!0,l}function Iu(o,l){return l(o)}var km=Yr(function(o){var l=o.length,f=l?o[0]:0,T=this.__wrapped__,C=function(L){return ge(L,o)};return!(l>1||this.__actions__.length)&&T instanceof pt&&pn(f)?((T=T.slice(f,+f+(l?1:0))).__actions__.push({func:Iu,args:[C],thisArg:R}),new Br(T,this.__chain__).thru(function(L){return l&&!L.length&&L.push(R),L})):this.thru(C)}),Vf=ts(function(o,l,f){Ot.call(o,f)?++o[f]:Xr(o,f,1)}),mc=Xl(ac),ls=Xl(Sf);function vc(o,l){return(gt(o)?sr:Sr)(o,nt(l,3))}function jf(o,l){return(gt(o)?Lp:Ya)(o,nt(l,3))}var _c=ts(function(o,l,f){Ot.call(o,f)?o[f].push(l):Xr(o,f,[l])}),Um=St(function(o,l,f){var T=-1,C="function"==typeof l,L=fr(o)?J(o.length):[];return Sr(o,function(V){L[++T]=C?Mr(l,V,f):Za(V,l,f)}),L}),Vm=ts(function(o,l,f){Xr(o,f,l)});function ho(o,l){return(gt(o)?Nt:Sa)(o,nt(l,3))}var Wf=ts(function(o,l,f){o[f?0:1].push(l)},function(){return[[],[]]}),Xm=St(function(o,l){if(null==o)return[];var f=l.length;return f>1&&Ui(o,l[0],l[1])?l=[]:f>2&&Ui(l[0],l[1],l[2])&&(l=[l[0]]),Yn(o,Pi(l,1),[])}),Ou=At||function(){return Wi.Date.now()};function zf(o,l,f){return l=f?R:l,In(o,128,R,R,R,R,l=o&&null==l?o.length:l)}function Xf(o,l){var f;if("function"!=typeof l)throw new Fr(he);return o=Tt(o),function(){return--o>0&&(f=l.apply(this,arguments)),o<=1&&(l=R),f}}var po=St(function(o,l,f){var T=1;if(f.length){var C=Gn(f,Jn(po));T|=32}return In(o,T,l,f,C)}),$f=St(function(o,l,f){var T=3;if(f.length){var C=Gn(f,Jn($f));T|=32}return In(l,T,o,f,C)});function Tc(o,l,f){var T,C,L,V,q,K,ce=0,de=!1,ve=!1,Ue=!0;if("function"!=typeof o)throw new Fr(he);function Be(ri){var Zr=T,Mn=C;return T=C=R,ce=ri,V=o.apply(Mn,Zr)}function ot(ri){var Zr=ri-K;return K===R||Zr>=l||Zr<0||ve&&ri-ce>=L}function Et(){var ri=Ou();if(ot(ri))return ct(ri);q=no(Et,function mt(ri){var Uh=l-(ri-K);return ve?hi(Uh,L-(ri-ce)):Uh}(ri))}function ct(ri){return q=R,Ue&&T?Be(ri):(T=C=R,V)}function zi(){var ri=Ou(),Zr=ot(ri);if(T=arguments,C=this,K=ri,Zr){if(q===R)return function st(ri){return ce=ri,q=no(Et,l),de?Be(ri):V}(K);if(ve)return Wl(q),q=no(Et,l),Be(K)}return q===R&&(q=no(Et,l)),V}return l=jr(l)||0,Qt(f)&&(de=!!f.leading,L=(ve="maxWait"in f)?bi(jr(f.maxWait)||0,l):L,Ue="trailing"in f?!!f.trailing:Ue),zi.cancel=function Ir(){q!==R&&Wl(q),ce=0,T=K=C=q=R},zi.flush=function ir(){return q===R?V:ct(Ou())},zi}var Km=St(function(o,l){return wl(o,1,l)}),Ym=St(function(o,l,f){return wl(o,jr(l)||0,f)});function Lu(o,l){if("function"!=typeof o||null!=l&&"function"!=typeof l)throw new Fr(he);var f=function(){var T=arguments,C=l?l.apply(this,T):T[0],L=f.cache;if(L.has(C))return L.get(C);var V=o.apply(this,T);return f.cache=L.set(C,V)||L,V};return f.cache=new(Lu.Cache||Dt),f}function Ru(o){if("function"!=typeof o)throw new Fr(he);return function(){var l=arguments;switch(l.length){case 0:return!o.call(this);case 1:return!o.call(this,l[0]);case 2:return!o.call(this,l[0],l[1]);case 3:return!o.call(this,l[0],l[1],l[2])}return!o.apply(this,l)}}Lu.Cache=Dt;var Jm=Qd(function(o,l){var f=(l=1==l.length&&gt(l[0])?Nt(l[0],Tr(nt())):Nt(Pi(l,1),Tr(nt()))).length;return St(function(T){for(var C=-1,L=hi(T.length,f);++C<L;)T[C]=l[C].call(this,T[C]);return Mr(o,this,T)})}),mo=St(function(o,l){var f=Gn(l,Jn(mo));return In(o,32,R,l,f)}),Ei=St(function(o,l){var f=Gn(l,Jn(Ei));return In(o,64,R,l,f)}),Zm=Yr(function(o,l){return In(o,256,R,R,R,l)});function Hr(o,l){return o===l||o!=o&&l!=l}var ih=$s(nu),rh=$s(function(o,l){return o>=l}),La=au(function(){return arguments}())?au:function(o){return ui(o)&&Ot.call(o,"callee")&&!Tl.call(o,"callee")},gt=J.isArray,nh=vd?Tr(vd):function Pl(o){return ui(o)&&Zi(o)==tn};function fr(o){return null!=o&&go(o.length)&&!kn(o)}function ii(o){return ui(o)&&fr(o)}var Vi=Ns||Rc,bc=Ha?Tr(Ha):function jd(o){return ui(o)&&Zi(o)==Gt};function Fu(o){if(!ui(o))return!1;var l=Zi(o);return l==ci||"[object DOMException]"==l||"string"==typeof o.message&&"string"==typeof o.name&&!ta(o)}function kn(o){if(!Qt(o))return!1;var l=Zi(o);return l==Xi||l==na||"[object AsyncFunction]"==l||"[object Proxy]"==l}function sh(o){return"number"==typeof o&&o==Tt(o)}function go(o){return"number"==typeof o&&o>-1&&o%1==0&&o<=Te}function Qt(o){var l=typeof o;return null!=o&&("object"==l||"function"==l)}function ui(o){return null!=o&&"object"==typeof o}var oh=Ip?Tr(Ip):function im(o){return ui(o)&&Bi(o)==at};function lh(o){return"number"==typeof o||ui(o)&&Zi(o)==si}function ta(o){if(!ui(o)||Zi(o)!=wt)return!1;var l=fa(o);if(null===l)return!0;var f=Ot.call(l,"constructor")&&l.constructor;return"function"==typeof f&&f instanceof f&&ks.call(f)==Rs}var Nu=Pp?Tr(Pp):function js(o){return ui(o)&&Zi(o)==oi},_o=kp?Tr(kp):function Wd(o){return ui(o)&&Bi(o)==Fi};function yo(o){return"string"==typeof o||!gt(o)&&ui(o)&&Zi(o)==Mt}function Gi(o){return"symbol"==typeof o||ui(o)&&Zi(o)==vi}var Jr=Op?Tr(Op):function qd(o){return ui(o)&&go(o.length)&&!!Ht[Zi(o)]},dh=$s(Rl),mg=$s(function(o,l){return o<=l});function fh(o){if(!o)return[];if(fr(o))return yo(o)?Ki(o):cr(o);if(cn&&o[cn])return function Td($){for(var oe,J=[];!(oe=$.next()).done;)J.push(oe.value);return J}(o[cn]());var l=Bi(o);return(l==at?qr:l==Fi?ws:Ra)(o)}function On(o){return o?(o=jr(o))===Fe||o===-Fe?17976931348623157e292*(o<0?-1:1):o==o?o:0:0===o?o:0}function Tt(o){var l=On(o),f=l%1;return l==l?f?l-f:l:0}function hh(o){return o?ya(Tt(o),0,Se):0}function jr(o){if("number"==typeof o)return o;if(Gi(o))return NaN;if(Qt(o)){var l="function"==typeof o.valueOf?o.valueOf():o;o=Qt(l)?l+"":l}if("string"!=typeof o)return 0===o?o:+o;o=pl(o);var f=vr.test(o);return f||xn.test(o)?wp(o.slice(2),f?2:8):Lr.test(o)?NaN:+o}function ph(o){return Kr(o,tr(o))}function Lt(o){return null==o?"":Cr(o)}var To=is(function(o,l){if(ro(l)||fr(l))Kr(l,Xt(l),o);else for(var f in l)Ot.call(l,f)&&Vs(o,f,l[f])}),mh=is(function(o,l){Kr(l,tr(l),o)}),Bu=is(function(o,l,f,T){Kr(l,tr(l),o,T)}),vg=is(function(o,l,f,T){Kr(l,Xt(l),o,T)}),_g=Yr(ge),gh=St(function(o,l){o=Pt(o);var f=-1,T=l.length,C=T>2?l[2]:R;for(C&&Ui(l[0],l[1],C)&&(T=1);++f<T;)for(var L=l[f],V=tr(L),q=-1,K=V.length;++q<K;){var ce=V[q],de=o[ce];(de===R||Hr(de,ur[ce])&&!Ot.call(o,ce))&&(o[ce]=L[ce])}return o}),Tg=St(function(o){return o.push(R,ns),Mr(Vu,R,o)});function Ec(o,l,f){var T=null==o?R:ba(o,l);return T===R?f:T}function Cc(o,l){return null!=o&&ec(o,l,Hd)}var Th=rf(function(o,l,f){null!=l&&"function"!=typeof l.toString&&(l=Ls.call(l)),o[l]=f},Ci(pr)),Eg=rf(function(o,l,f){null!=l&&"function"!=typeof l.toString&&(l=Ls.call(l)),Ot.call(o,l)?o[l].push(f):o[l]=[f]},nt),Ac=St(Za);function Xt(o){return fr(o)?tu(o):Ll(o)}function tr(o){return fr(o)?tu(o,!0):function Gd(o){if(!Qt(o))return function ic(o){var l=[];if(null!=o)for(var f in Pt(o))l.push(f);return l}(o);var l=ro(o),f=[];for(var T in o)"constructor"==T&&(l||!Ot.call(o,T))||f.push(T);return f}(o)}var Ag=is(function(o,l,f){ki(o,l,f)}),Vu=is(function(o,l,f,T){ki(o,l,f,T)}),bh=Yr(function(o,l){var f={};if(null==o)return f;var T=!1;l=Nt(l,function(L){return L=Li(L,o),T||(T=L.length>1),L}),Kr(o,Ys(o),f),T&&(f=xr(f,7,sf));for(var C=l.length;C--;)Vl(f,l[C]);return f}),wr=Yr(function(o,l){return null==o?{}:function Ml(o,l){return Ws(o,l,function(f,T){return Cc(o,T)})}(o,l)});function hr(o,l){if(null==o)return{};var f=Nt(Ys(o),function(T){return[T]});return l=nt(l),Ws(o,f,function(T,C){return l(T,C[0])})}var Dc=_u(Xt),Ch=_u(tr);function Ra(o){return null==o?[]:ml(o,Xt(o))}var Mg=Da(function(o,l,f){return l=l.toLowerCase(),o+(f?xo(l):l)});function xo(o){return Ic(Lt(o).toLowerCase())}function Hu(o){return(o=Lt(o))&&o.replace(yr,gl).replace(yp,"")}var ju=Da(function(o,l,f){return o+(f?"-":"")+l.toLowerCase()}),Ah=Da(function(o,l,f){return o+(f?" ":"")+l.toLowerCase()}),Ug=Xs("toLowerCase"),zg=Da(function(o,l,f){return o+(f?"_":"")+l.toLowerCase()}),Xg=Da(function(o,l,f){return o+(f?" ":"")+Ic(l)}),iv=Da(function(o,l,f){return o+(f?" ":"")+l.toUpperCase()}),Ic=Xs("toUpperCase");function Pc(o,l,f){return o=Lt(o),(l=f?R:l)===R?function _l($){return ji.test($)}(o)?function bd($){return $.match(Tp)||[]}(o):function Rp($){return $.match(te)||[]}(o):o.match(l)||[]}var Dh=St(function(o,l){try{return Mr(o,R,l)}catch(f){return Fu(f)?f:new $e(f)}}),rv=Yr(function(o,l){return sr(l,function(f){f=Ur(f),Xr(o,f,po(o[f],o))}),o});function Ci(o){return function(){return o}}var Ph=$l(),sv=$l(!0);function pr(o){return o}function kc(o){return Ol("function"==typeof o?o:xr(o,1))}var kh=St(function(o,l){return function(f){return Za(f,o,l)}}),lv=St(function(o,l){return function(f){return Za(o,f,l)}});function Oc(o,l,f){var T=Xt(l),C=Ja(l,T);null==f&&(!Qt(l)||!C.length&&T.length)&&(f=l,l=o,o=this,C=Ja(l,Xt(l)));var L=!(Qt(f)&&"chain"in f&&!f.chain),V=kn(o);return sr(C,function(q){var K=l[q];o[q]=K,V&&(o.prototype[q]=function(){var ce=this.__chain__;if(L||ce){var de=o(this.__wrapped__);return(de.__actions__=cr(this.__actions__)).push({func:K,args:arguments,thisArg:o}),de.__chain__=ce,de}return K.apply(o,Wn([this.value()],arguments))})}),o}function So(){}var dv=gu(Nt),fv=gu(Vo),Rn=gu(_d);function Oh(o){return io(o)?cl(Ur(o)):function nm(o){return function(l){return ba(l,o)}}(o)}var Rh=af(),Dr=af(!0);function Lc(){return[]}function Rc(){return!1}var Fh=mu(function(o,l){return o+l},0),Mc=vu("ceil"),Ao=mu(function(o,l){return o/l},1),gv=vu("floor"),Nc=mu(function(o,l){return o*l},1),Tv=vu("round"),bv=mu(function(o,l){return o-l},0);return k.after=function $m(o,l){if("function"!=typeof l)throw new Fr(he);return o=Tt(o),function(){if(--o<1)return l.apply(this,arguments)}},k.ary=zf,k.assign=To,k.assignIn=mh,k.assignInWith=Bu,k.assignWith=vg,k.at=_g,k.before=Xf,k.bind=po,k.bindAll=rv,k.bindKey=$f,k.castArray=function tg(){if(!arguments.length)return[];var o=arguments[0];return gt(o)?o:[o]},k.chain=hc,k.chunk=function uo(o,l,f){l=(f?Ui(o,l,f):l===R)?1:bi(Tt(l),0);var T=null==o?0:o.length;if(!T||l<1)return[];for(var C=0,L=0,V=J(za(T/l));C<T;)V[L++]=Oi(o,C,C+=l);return V},k.compact=function Tu(o){for(var l=-1,f=null==o?0:o.length,T=0,C=[];++l<f;){var L=o[l];L&&(C[T++]=L)}return C},k.concat=function as(){var o=arguments.length;if(!o)return[];for(var l=J(o-1),f=arguments[0],T=o;T--;)l[T-1]=arguments[T];return Wn(gt(f)?cr(f):[f],Pi(l,1))},k.cond=function nv(o){var l=null==o?0:o.length,f=nt();return o=l?Nt(o,function(T){if("function"!=typeof T[1])throw new Fr(he);return[f(T[0]),T[1]]}):[],St(function(T){for(var C=-1;++C<l;){var L=o[C];if(Mr(L[0],this,T))return Mr(L[1],this,T)}})},k.conforms=function av(o){return function Al(o){var l=Xt(o);return function(f){return Kn(f,o,l)}}(xr(o,1))},k.constant=Ci,k.countBy=Vf,k.create=function yg(o,l){var f=va(o);return null==l?f:Ud(f,l)},k.curry=function Kf(o,l,f){var T=In(o,8,R,R,R,R,R,l=f?R:l);return T.placeholder=Kf.placeholder,T},k.curryRight=function yc(o,l,f){var T=In(o,16,R,R,R,R,R,l=f?R:l);return T.placeholder=yc.placeholder,T},k.debounce=Tc,k.defaults=gh,k.defaultsDeep=Tg,k.defer=Km,k.delay=Ym,k.difference=ss,k.differenceBy=bu,k.differenceWith=xu,k.drop=function bf(o,l,f){var T=null==o?0:o.length;return T?Oi(o,(l=f||l===R?1:Tt(l))<0?0:l,T):[]},k.dropRight=function Su(o,l,f){var T=null==o?0:o.length;return T?Oi(o,0,(l=T-(l=f||l===R?1:Tt(l)))<0?0:l):[]},k.dropRightWhile=function vm(o,l){return o&&o.length?qs(o,nt(l,3),!0,!0):[]},k.dropWhile=function xf(o,l){return o&&o.length?qs(o,nt(l,3),!0):[]},k.fill=function gn(o,l,f,T){var C=null==o?0:o.length;return C?(f&&"number"!=typeof f&&Ui(o,l,f)&&(f=0,T=C),function Jp(o,l,f,T){var C=o.length;for((f=Tt(f))<0&&(f=-f>C?0:C+f),(T=T===R||T>C?C:Tt(T))<0&&(T+=C),T=f>T?0:hh(T);f<T;)o[f++]=l;return o}(o,l,f,T)):[]},k.filter=function pc(o,l){return(gt(o)?on:Vd)(o,nt(l,3))},k.flatMap=function Fm(o,l){return Pi(ho(o,l),1)},k.flatMapDeep=function Nm(o,l){return Pi(ho(o,l),Fe)},k.flatMapDepth=function gc(o,l,f){return f=f===R?1:Tt(f),Pi(ho(o,l),f)},k.flatten=sc,k.flattenDeep=function z(o){return null!=o&&o.length?Pi(o,Fe):[]},k.flattenDepth=function Eu(o,l){return null!=o&&o.length?Pi(o,l=l===R?1:Tt(l)):[]},k.flip=function Qm(o){return In(o,512)},k.flow=Ph,k.flowRight=sv,k.fromPairs=function oc(o){for(var l=-1,f=null==o?0:o.length,T={};++l<f;){var C=o[l];T[C[0]]=C[1]}return T},k.functions=function cs(o){return null==o?[]:Ja(o,Xt(o))},k.functionsIn=function _h(o){return null==o?[]:Ja(o,tr(o))},k.groupBy=_c,k.initial=function Qr(o){return null!=o&&o.length?Oi(o,0,-1):[]},k.intersection=ea,k.intersectionBy=vn,k.intersectionWith=Ef,k.invert=Th,k.invertBy=Eg,k.invokeMap=Um,k.iteratee=kc,k.keyBy=Vm,k.keys=Xt,k.keysIn=tr,k.map=ho,k.mapKeys=function Cg(o,l){var f={};return l=nt(l,3),Ji(o,function(T,C,L){Xr(f,l(T,C,L),T)}),f},k.mapValues=function wc(o,l){var f={};return l=nt(l,3),Ji(o,function(T,C,L){Xr(f,C,l(T,C,L))}),f},k.matches=function ov(o){return Er(xr(o,1))},k.matchesProperty=function uv(o,l){return Ea(o,xr(l,1))},k.memoize=Lu,k.merge=Ag,k.mergeWith=Vu,k.method=kh,k.methodOf=lv,k.mixin=Oc,k.negate=Ru,k.nthArg=function Eo(o){return o=Tt(o),St(function(l){return Ut(l,o)})},k.omit=bh,k.omitBy=function _n(o,l){return hr(o,Ru(nt(l)))},k.once=function Yf(o){return Xf(2,o)},k.orderBy=function ku(o,l,f,T){return null==o?[]:(gt(l)||(l=null==l?[]:[l]),gt(f=T?R:f)||(f=null==f?[]:[f]),Yn(o,l,f))},k.over=dv,k.overArgs=Jm,k.overEvery=fv,k.overSome=Rn,k.partial=mo,k.partialRight=Ei,k.partition=Wf,k.pick=wr,k.pickBy=hr,k.property=Oh,k.propertyOf=function Lh(o){return function(l){return null==o?R:ba(o,l)}},k.pull=Cf,k.pullAll=Af,k.pullAllBy=function Oa(o,l,f){return o&&o.length&&l&&l.length?Fl(o,l,nt(f,2)):o},k.pullAllWith=function Tm(o,l,f){return o&&o.length&&l&&l.length?Fl(o,l,R,f):o},k.pullAt=wf,k.range=Rh,k.rangeRight=Dr,k.rearg=Zm,k.reject=function jm(o,l){return(gt(o)?on:Vd)(o,Ru(nt(l,3)))},k.remove=function uc(o,l){var f=[];if(!o||!o.length)return f;var T=-1,C=[],L=o.length;for(l=nt(l,3);++T<L;){var V=o[T];l(V,T,o)&&(f.push(V),C.push(T))}return zd(o,C),f},k.rest=function Qf(o,l){if("function"!=typeof o)throw new Fr(he);return St(o,l=l===R?l:Tt(l))},k.reverse=Au,k.sampleSize=function Gf(o,l,f){return l=(f?Ui(o,l,f):l===R)?1:Tt(l),(gt(o)?Bd:Xd)(o,l)},k.set=function Sh(o,l,f){return null==o?o:Ca(o,l,f)},k.setWith=function Eh(o,l,f,T){return T="function"==typeof T?T:R,null==o?o:Ca(o,l,f,T)},k.shuffle=function qm(o){return(gt(o)?iu:um)(o)},k.slice=function lc(o,l,f){var T=null==o?0:o.length;return T?(f&&"number"!=typeof f&&Ui(o,l,f)?(l=0,f=T):(l=null==l?0:Tt(l),f=f===R?T:Tt(f)),Oi(o,l,f)):[]},k.sortBy=Xm,k.sortedUniq=function kf(o){return o&&o.length?Kd(o):[]},k.sortedUniqBy=function Of(o,l){return o&&o.length?Kd(o,nt(l,2)):[]},k.split=function Ln(o,l,f){return f&&"number"!=typeof f&&Ui(o,l,f)&&(l=f=R),(f=f===R?Se:f>>>0)?(o=Lt(o))&&("string"==typeof l||null!=l&&!Nu(l))&&!(l=Cr(l))&&Wa(o)?Qn(Ki(o),0,f):o.split(l,f):[]},k.spread=function eg(o,l){if("function"!=typeof o)throw new Fr(he);return l=null==l?0:bi(Tt(l),0),St(function(f){var T=f[l],C=Qn(f,0,l);return T&&Wn(C,T),Mr(o,this,C)})},k.tail=function lo(o){var l=null==o?0:o.length;return l?Oi(o,1,l):[]},k.take=function Lf(o,l,f){return o&&o.length?Oi(o,0,(l=f||l===R?1:Tt(l))<0?0:l):[]},k.takeRight=function Sm(o,l,f){var T=null==o?0:o.length;return T?Oi(o,(l=T-(l=f||l===R?1:Tt(l)))<0?0:l,T):[]},k.takeRightWhile=function Em(o,l){return o&&o.length?qs(o,nt(l,3),!1,!0):[]},k.takeWhile=function Rf(o,l){return o&&o.length?qs(o,nt(l,3)):[]},k.tap=function Pm(o,l){return l(o),o},k.throttle=function Jf(o,l,f){var T=!0,C=!0;if("function"!=typeof o)throw new Fr(he);return Qt(f)&&(T="leading"in f?!!f.leading:T,C="trailing"in f?!!f.trailing:C),Tc(o,l,{leading:T,maxWait:l,trailing:C})},k.thru=Iu,k.toArray=fh,k.toPairs=Dc,k.toPairsIn=Ch,k.toPath=function pv(o){return gt(o)?Nt(o,Ur):Gi(o)?[o]:cr(yu(Lt(o)))},k.toPlainObject=ph,k.transform=function wg(o,l,f){var T=gt(o),C=T||Vi(o)||Jr(o);if(l=nt(l,4),null==f){var L=o&&o.constructor;f=C?T?new L:[]:Qt(o)&&kn(L)?va(fa(o)):{}}return(C?sr:Ji)(o,function(V,q,K){return l(f,V,q,K)}),f},k.unary=function Zf(o){return zf(o,1)},k.union=dc,k.unionBy=wu,k.unionWith=Cm,k.uniq=function Am(o){return o&&o.length?$r(o):[]},k.uniqBy=function Mf(o,l){return o&&o.length?$r(o,nt(l,2)):[]},k.uniqWith=function wm(o,l){return l="function"==typeof l?l:R,o&&o.length?$r(o,R,l):[]},k.unset=function Dg(o,l){return null==o||Vl(o,l)},k.unzip=co,k.unzipWith=Du,k.update=function Ig(o,l,f){return null==o?o:Ar(o,l,jl(f))},k.updateWith=function Pg(o,l,f,T){return T="function"==typeof T?T:R,null==o?o:Ar(o,l,jl(f),T)},k.values=Ra,k.valuesIn=function kg(o){return null==o?[]:ml(o,tr(o))},k.without=Ff,k.words=Pc,k.wrap=function eh(o,l){return mo(jl(l),o)},k.xor=fo,k.xorBy=dr,k.xorWith=Nf,k.zip=fc,k.zipObject=function Dm(o,l){return lu(o||[],l||[],Vs)},k.zipObjectDeep=function Im(o,l){return lu(o||[],l||[],Ca)},k.zipWith=us,k.entries=Dc,k.entriesIn=Ch,k.extend=mh,k.extendWith=Bu,Oc(k,k),k.add=Fh,k.attempt=Dh,k.camelCase=Mg,k.capitalize=xo,k.ceil=Mc,k.clamp=function Og(o,l,f){return f===R&&(f=l,l=R),f!==R&&(f=(f=jr(f))==f?f:0),l!==R&&(l=(l=jr(l))==l?l:0),ya(jr(o),l,f)},k.clone=function ig(o){return xr(o,4)},k.cloneDeep=function ng(o){return xr(o,5)},k.cloneDeepWith=function ag(o,l){return xr(o,5,l="function"==typeof l?l:R)},k.cloneWith=function rg(o,l){return xr(o,4,l="function"==typeof l?l:R)},k.conformsTo=function th(o,l){return null==l||Kn(o,l,Xt(l))},k.deburr=Hu,k.defaultTo=function Ih(o,l){return null==o||o!=o?l:o},k.divide=Ao,k.endsWith=function Fg(o,l,f){o=Lt(o),l=Cr(l);var T=o.length,C=f=f===R?T:ya(Tt(f),0,T);return(f-=l.length)>=0&&o.slice(f,C)==l},k.eq=Hr,k.escape=function Ng(o){return(o=Lt(o))&&oa.test(o)?o.replace(di,Vp):o},k.escapeRegExp=function Bg(o){return(o=Lt(o))&&Ft.test(o)?o.replace(Ua,"\\$&"):o},k.every=function Hf(o,l,f){var T=gt(o)?Vo:hn;return f&&Ui(o,l,f)&&(l=R),T(o,nt(l,3))},k.find=mc,k.findIndex=ac,k.findKey=function bo(o,l){return qn(o,nt(l,3),Ji)},k.findLast=ls,k.findLastIndex=Sf,k.findLastKey=function bg(o,l){return qn(o,nt(l,3),Dl)},k.floor=gv,k.forEach=vc,k.forEachRight=jf,k.forIn=function vh(o,l){return null==o?o:Hs(o,nt(l,3),tr)},k.forInRight=function Uu(o,l){return null==o?o:Ta(o,nt(l,3),tr)},k.forOwn=function xg(o,l){return o&&Ji(o,nt(l,3))},k.forOwnRight=function Sg(o,l){return o&&Dl(o,nt(l,3))},k.get=Ec,k.gt=ih,k.gte=rh,k.has=function yh(o,l){return null!=o&&ec(o,l,Zp)},k.hasIn=Cc,k.head=Vr,k.identity=pr,k.includes=function Bm(o,l,f,T){o=fr(o)?o:Ra(o),f=f&&!T?Tt(f):0;var C=o.length;return f<0&&(f=bi(C+f,0)),yo(o)?f<=C&&o.indexOf(l,f)>-1:!!C&&ja(o,l,f)>-1},k.indexOf=function Cu(o,l,f){var T=null==o?0:o.length;if(!T)return-1;var C=null==f?0:Tt(f);return C<0&&(C=bi(T+C,0)),ja(o,l,C)},k.inRange=function Lg(o,l,f){return l=On(l),f===R?(f=l,l=0):f=On(f),function em(o,l,f){return o>=hi(l,f)&&o<bi(l,f)}(o=jr(o),l,f)},k.invoke=Ac,k.isArguments=La,k.isArray=gt,k.isArrayBuffer=nh,k.isArrayLike=fr,k.isArrayLikeObject=ii,k.isBoolean=function Mu(o){return!0===o||!1===o||ui(o)&&Zi(o)==kt},k.isBuffer=Vi,k.isDate=bc,k.isElement=function sg(o){return ui(o)&&1===o.nodeType&&!ta(o)},k.isEmpty=function og(o){if(null==o)return!0;if(fr(o)&&(gt(o)||"string"==typeof o||"function"==typeof o.splice||Vi(o)||Jr(o)||La(o)))return!o.length;var l=Bi(o);if(l==at||l==Fi)return!o.size;if(ro(o))return!Ll(o).length;for(var f in o)if(Ot.call(o,f))return!1;return!0},k.isEqual=function xc(o,l){return xa(o,l)},k.isEqualWith=function ah(o,l,f){var T=(f="function"==typeof f?f:R)?f(o,l):R;return T===R?xa(o,l,R,f):!!T},k.isError=Fu,k.isFinite=function ug(o){return"number"==typeof o&&bl(o)},k.isFunction=kn,k.isInteger=sh,k.isLength=go,k.isMap=oh,k.isMatch=function lg(o,l){return o===l||ou(o,l,eo(l))},k.isMatchWith=function cg(o,l,f){return f="function"==typeof f?f:R,ou(o,l,eo(l),f)},k.isNaN=function dg(o){return lh(o)&&o!=+o},k.isNative=function fg(o){if(fm(o))throw new $e("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return kl(o)},k.isNil=function uh(o){return null==o},k.isNull=function hg(o){return null===o},k.isNumber=lh,k.isObject=Qt,k.isObjectLike=ui,k.isPlainObject=ta,k.isRegExp=Nu,k.isSafeInteger=function vo(o){return sh(o)&&o>=-Te&&o<=Te},k.isSet=_o,k.isString=yo,k.isSymbol=Gi,k.isTypedArray=Jr,k.isUndefined=function Sc(o){return o===R},k.isWeakMap=function pg(o){return ui(o)&&Bi(o)==_i},k.isWeakSet=function ch(o){return ui(o)&&"[object WeakSet]"==Zi(o)},k.join=function os(o,l){return null==o?"":wd.call(o,l)},k.kebabCase=ju,k.last=er,k.lastIndexOf=function _m(o,l,f){var T=null==o?0:o.length;if(!T)return-1;var C=T;return f!==R&&(C=(C=Tt(f))<0?bi(T+C,0):hi(C,T-1)),l==l?function qo($,oe,J){for(var Xe=J+1;Xe--;)if($[Xe]===oe)return Xe;return Xe}(o,l,C):As(o,Kt,C,!0)},k.lowerCase=Ah,k.lowerFirst=Ug,k.lt=dh,k.lte=mg,k.max=function vv(o){return o&&o.length?Qa(o,pr,nu):R},k.maxBy=function _v(o,l){return o&&o.length?Qa(o,nt(l,2),nu):R},k.mean=function Fc(o){return yd(o,pr)},k.meanBy=function Nh(o,l){return yd(o,nt(l,2))},k.min=function yv(o){return o&&o.length?Qa(o,pr,Rl):R},k.minBy=function Bh(o,l){return o&&o.length?Qa(o,nt(l,2),Rl):R},k.stubArray=Lc,k.stubFalse=Rc,k.stubObject=function Wu(){return{}},k.stubString=function Mh(){return""},k.stubTrue=function hv(){return!0},k.multiply=Nc,k.nth=function ym(o,l){return o&&o.length?Ut(o,Tt(l)):R},k.noConflict=function cv(){return Wi._===this&&(Wi._=yl),this},k.noop=So,k.now=Ou,k.pad=function Vg(o,l,f){o=Lt(o);var T=(l=Tt(l))?da(o):0;if(!l||T>=l)return o;var C=(l-T)/2;return Pa(dn(C),f)+o+Pa(za(C),f)},k.padEnd=function Hg(o,l,f){o=Lt(o);var T=(l=Tt(l))?da(o):0;return l&&T<l?o+Pa(l-T,f):o},k.padStart=function jg(o,l,f){o=Lt(o);var T=(l=Tt(l))?da(o):0;return l&&T<l?Pa(l-T,f)+o:o},k.parseInt=function Wg(o,l,f){return f||null==l?l=0:l&&(l=+l),Dd(Lt(o).replace(xs,""),l||0)},k.random=function Rg(o,l,f){if(f&&"boolean"!=typeof f&&Ui(o,l,f)&&(l=f=R),f===R&&("boolean"==typeof l?(f=l,l=R):"boolean"==typeof o&&(f=o,o=R)),o===R&&l===R?(o=0,l=1):(o=On(o),l===R?(l=o,o=0):l=On(l)),o>l){var T=o;o=l,l=T}if(f||o%1||l%1){var C=xl();return hi(o+C*(l-o+Ap("1e-"+((C+"").length-1))),l)}return Nl(o,l)},k.reduce=function qf(o,l,f){var T=gt(o)?ul:Fp,C=arguments.length<3;return T(o,nt(l,4),f,C,Sr)},k.reduceRight=function Hm(o,l,f){var T=gt(o)?Yv:Fp,C=arguments.length<3;return T(o,nt(l,4),f,C,Ya)},k.repeat=function qg(o,l,f){return l=(f?Ui(o,l,f):l===R)?1:Tt(l),uu(Lt(o),l)},k.replace=function Gg(){var o=arguments,l=Lt(o[0]);return o.length<3?l:l.replace(o[1],o[2])},k.result=function xh(o,l,f){var T=-1,C=(l=Li(l,o)).length;for(C||(C=1,o=R);++T<C;){var L=null==o?R:o[Ur(l[T])];L===R&&(T=C,L=f),o=kn(L)?L.call(o):L}return o},k.round=Tv,k.runInContext=$,k.sample=function Wm(o){return(gt(o)?Nd:sm)(o)},k.size=function Gm(o){if(null==o)return 0;if(fr(o))return yo(o)?da(o):o.length;var l=Bi(o);return l==at||l==Fi?o.size:Ll(o).length},k.snakeCase=zg,k.some=function zm(o,l,f){var T=gt(o)?_d:lm;return f&&Ui(o,l,f)&&(l=R),T(o,nt(l,3))},k.sortedIndex=function cc(o,l){return Aa(o,l)},k.sortedIndexBy=function Df(o,l,f){return Bl(o,l,nt(f,2))},k.sortedIndexOf=function If(o,l){var f=null==o?0:o.length;if(f){var T=Aa(o,l);if(T<f&&Hr(o[T],l))return T}return-1},k.sortedLastIndex=function Pf(o,l){return Aa(o,l,!0)},k.sortedLastIndexBy=function bm(o,l,f){return Bl(o,l,nt(f,2),!0)},k.sortedLastIndexOf=function xm(o,l){if(null!=o&&o.length){var T=Aa(o,l,!0)-1;if(Hr(o[T],l))return T}return-1},k.startCase=Xg,k.startsWith=function $g(o,l,f){return o=Lt(o),f=null==f?0:ya(Tt(f),0,o.length),l=Cr(l),o.slice(f,f+l.length)==l},k.subtract=bv,k.sum=function xv(o){return o&&o.length?fl(o,pr):0},k.sumBy=function Sv(o,l){return o&&o.length?fl(o,nt(l,2)):0},k.template=function Kg(o,l,f){var T=k.templateSettings;f&&Ui(o,l,f)&&(l=R),o=Lt(o),l=Bu({},l,T,rs);var q,K,C=Bu({},l.imports,T.imports,rs),L=Xt(C),V=ml(C,L),ce=0,de=l.interpolate||$i,ve="__p += '",Ue=Ti((l.escape||$i).source+"|"+de.source+"|"+(de===Ts?Vt:$i).source+"|"+(l.evaluate||$i).source+"|$","g"),Be="//# sourceURL="+(Ot.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Uo+"]")+"\n";o.replace(Ue,function(ot,Et,ct,Ir,ir,zi){return ct||(ct=Ir),ve+=o.slice(ce,zi).replace(an,jo),Et&&(q=!0,ve+="' +\n__e("+Et+") +\n'"),ir&&(K=!0,ve+="';\n"+ir+";\n__p += '"),ct&&(ve+="' +\n((__t = ("+ct+")) == null ? '' : __t) +\n'"),ce=zi+ot.length,ot}),ve+="';\n";var st=Ot.call(l,"variable")&&l.variable;if(st){if(xe.test(st))throw new $e("Invalid `variable` option passed into `_.template`")}else ve="with (obj) {\n"+ve+"\n}\n";ve=(K?ve.replace(_s,""):ve).replace(Qe,"$1").replace(ys,"$1;"),ve="function("+(st||"obj")+") {\n"+(st?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(q?", __e = _.escape":"")+(K?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+ve+"return __p\n}";var mt=Dh(function(){return xt(L,Be+"return "+ve).apply(R,V)});if(mt.source=ve,Fu(mt))throw mt;return mt},k.times=function Co(o,l){if((o=Tt(o))<1||o>Te)return[];var f=Se,T=hi(o,Se);l=nt(l),o-=Se;for(var C=hl(T,l);++f<o;)l(f);return C},k.toFinite=On,k.toInteger=Tt,k.toLength=hh,k.toLower=function Yg(o){return Lt(o).toLowerCase()},k.toNumber=jr,k.toSafeInteger=function gg(o){return o?ya(Tt(o),-Te,Te):0===o?o:0},k.toString=Lt,k.toUpper=function Qg(o){return Lt(o).toUpperCase()},k.trim=function Jg(o,l,f){if((o=Lt(o))&&(f||l===R))return pl(o);if(!o||!(l=Cr(l)))return o;var T=Ki(o),C=Ki(l);return Qn(T,ca(T,C),Ho(T,C)+1).join("")},k.trimEnd=function Zg(o,l,f){if((o=Lt(o))&&(f||l===R))return o.slice(0,Ds(o)+1);if(!o||!(l=Cr(l)))return o;var T=Ki(o);return Qn(T,0,Ho(T,Ki(l))+1).join("")},k.trimStart=function wh(o,l,f){if((o=Lt(o))&&(f||l===R))return o.replace(xs,"");if(!o||!(l=Cr(l)))return o;var T=Ki(o);return Qn(T,ca(T,Ki(l))).join("")},k.truncate=function ev(o,l){var f=30,T="...";if(Qt(l)){var C="separator"in l?l.separator:C;f="length"in l?Tt(l.length):f,T="omission"in l?Cr(l.omission):T}var L=(o=Lt(o)).length;if(Wa(o)){var V=Ki(o);L=V.length}if(f>=L)return o;var q=f-da(T);if(q<1)return T;var K=V?Qn(V,0,q).join(""):o.slice(0,q);if(C===R)return K+T;if(V&&(q+=K.length-q),Nu(C)){if(o.slice(q).search(C)){var ce,de=K;for(C.global||(C=Ti(C.source,Lt(yi.exec(C))+"g")),C.lastIndex=0;ce=C.exec(de);)var ve=ce.index;K=K.slice(0,ve===R?q:ve)}}else if(o.indexOf(Cr(C),q)!=q){var Ue=K.lastIndexOf(C);Ue>-1&&(K=K.slice(0,Ue))}return K+T},k.unescape=function tv(o){return(o=Lt(o))&&sa.test(o)?o.replace(Mo,Go):o},k.uniqueId=function mv(o){var l=++Os;return Lt(o)+l},k.upperCase=iv,k.upperFirst=Ic,k.each=vc,k.eachRight=jf,k.first=Vr,Oc(k,function(){var o={};return Ji(k,function(l,f){Ot.call(k.prototype,f)||(o[f]=l)}),o}(),{chain:!1}),k.VERSION="4.17.21",sr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){k[o].placeholder=k}),sr(["drop","take"],function(o,l){pt.prototype[o]=function(f){f=f===R?1:bi(Tt(f),0);var T=this.__filtered__&&!l?new pt(this):this.clone();return T.__filtered__?T.__takeCount__=hi(f,T.__takeCount__):T.__views__.push({size:hi(f,Se),type:o+(T.__dir__<0?"Right":"")}),T},pt.prototype[o+"Right"]=function(f){return this.reverse()[o](f).reverse()}}),sr(["filter","map","takeWhile"],function(o,l){var f=l+1,T=1==f||3==f;pt.prototype[o]=function(C){var L=this.clone();return L.__iteratees__.push({iteratee:nt(C,3),type:f}),L.__filtered__=L.__filtered__||T,L}}),sr(["head","last"],function(o,l){var f="take"+(l?"Right":"");pt.prototype[o]=function(){return this[f](1).value()[0]}}),sr(["initial","tail"],function(o,l){var f="drop"+(l?"":"Right");pt.prototype[o]=function(){return this.__filtered__?new pt(this):this[f](1)}}),pt.prototype.compact=function(){return this.filter(pr)},pt.prototype.find=function(o){return this.filter(o).head()},pt.prototype.findLast=function(o){return this.reverse().find(o)},pt.prototype.invokeMap=St(function(o,l){return"function"==typeof o?new pt(this):this.map(function(f){return Za(f,o,l)})}),pt.prototype.reject=function(o){return this.filter(Ru(nt(o)))},pt.prototype.slice=function(o,l){o=Tt(o);var f=this;return f.__filtered__&&(o>0||l<0)?new pt(f):(o<0?f=f.takeRight(-o):o&&(f=f.drop(o)),l!==R&&(f=(l=Tt(l))<0?f.dropRight(-l):f.take(l-o)),f)},pt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},pt.prototype.toArray=function(){return this.take(Se)},Ji(pt.prototype,function(o,l){var f=/^(?:filter|find|map|reject)|While$/.test(l),T=/^(?:head|last)$/.test(l),C=k[T?"take"+("last"==l?"Right":""):l],L=T||/^find/.test(l);C&&(k.prototype[l]=function(){var V=this.__wrapped__,q=T?[1]:arguments,K=V instanceof pt,ce=q[0],de=K||gt(V),ve=function(Et){var ct=C.apply(k,Wn([Et],q));return T&&Ue?ct[0]:ct};de&&f&&"function"==typeof ce&&1!=ce.length&&(K=de=!1);var Ue=this.__chain__,st=L&&!Ue,mt=K&&!this.__actions__.length;if(!L&&de){V=mt?V:new pt(this);var ot=o.apply(V,q);return ot.__actions__.push({func:Iu,args:[ve],thisArg:R}),new Br(ot,Ue)}return st&&mt?o.apply(this,q):(ot=this.thru(ve),st?T?ot.value()[0]:ot.value():ot)})}),sr(["pop","push","shift","sort","splice","unshift"],function(o){var l=Ps[o],f=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",T=/^(?:pop|shift)$/.test(o);k.prototype[o]=function(){var C=arguments;if(T&&!this.__chain__){var L=this.value();return l.apply(gt(L)?L:[],C)}return this[f](function(V){return l.apply(gt(V)?V:[],C)})}}),Ji(pt.prototype,function(o,l){var f=k[l];if(f){var T=f.name+"";Ot.call(fn,T)||(fn[T]=[]),fn[T].push({name:l,func:f})}}),fn[pu(R,2).name]=[{name:"wrapper",func:R}],pt.prototype.clone=function Od(){var o=new pt(this.__wrapped__);return o.__actions__=cr(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=cr(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=cr(this.__views__),o},pt.prototype.reverse=function Yi(){if(this.__filtered__){var o=new pt(this);o.__dir__=-1,o.__filtered__=!0}else(o=this.clone()).__dir__*=-1;return o},pt.prototype.value=function Ld(){var o=this.__wrapped__.value(),l=this.__dir__,f=gt(o),T=l<0,C=f?o.length:0,L=function Zl(o,l,f){for(var T=-1,C=f.length;++T<C;){var L=f[T],V=L.size;switch(L.type){case"drop":o+=V;break;case"dropRight":l-=V;break;case"take":l=hi(l,o+V);break;case"takeRight":o=bi(o,l-V)}}return{start:o,end:l}}(0,C,this.__views__),V=L.start,q=L.end,K=q-V,ce=T?q:V-1,de=this.__iteratees__,ve=de.length,Ue=0,Be=hi(K,this.__takeCount__);if(!f||!T&&C==K&&Be==K)return Yd(o,this.__actions__);var st=[];e:for(;K--&&Ue<Be;){for(var mt=-1,ot=o[ce+=l];++mt<ve;){var Et=de[mt],Ir=Et.type,ir=(0,Et.iteratee)(ot);if(2==Ir)ot=ir;else if(!ir){if(1==Ir)continue e;break e}}st[Ue++]=ot}return st},k.prototype.at=km,k.prototype.chain=function Bf(){return hc(this)},k.prototype.commit=function Pu(){return new Br(this.value(),this.__chain__)},k.prototype.next=function Om(){this.__values__===R&&(this.__values__=fh(this.value()));var o=this.__index__>=this.__values__.length;return{done:o,value:o?R:this.__values__[this.__index__++]}},k.prototype.plant=function Rm(o){for(var l,f=this;f instanceof Yo;){var T=pi(f);T.__index__=0,T.__values__=R,l?C.__wrapped__=T:l=T;var C=T;f=f.__wrapped__}return C.__wrapped__=o,l},k.prototype.reverse=function Mm(){var o=this.__wrapped__;if(o instanceof pt){var l=o;return this.__actions__.length&&(l=new pt(this)),(l=l.reverse()).__actions__.push({func:Iu,args:[Au],thisArg:R}),new Br(l,this.__chain__)}return this.thru(Au)},k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=function Uf(){return Yd(this.__wrapped__,this.__actions__)},k.prototype.first=k.prototype.head,cn&&(k.prototype[cn]=function Lm(){return this}),k}();Wi._=Is,(Ee=function(){return Is}.call(We,De,We,rt))!==R&&(rt.exports=Ee)}.call(this)},9766:rt=>{rt.exports=function We(De,Ee){var R,S=null;try{R=JSON.parse(De,Ee)}catch(qe){S=qe}return[S,R]}},4753:function(rt){var De,Ee,R,S,qe;De=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,Ee=/^(?=([^\/?#]*))\1([^]*)$/,R=/(?:\/|^)\.(?=\/)/g,S=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,rt.exports=qe={buildAbsoluteURL:function(Ce,he,je){if(je=je||{},Ce=Ce.trim(),!(he=he.trim())){if(!je.alwaysNormalize)return Ce;var He=qe.parseURL(Ce);if(!He)throw new Error("Error trying to parse base URL.");return He.path=qe.normalizePath(He.path),qe.buildURLFromParts(He)}var Ge=qe.parseURL(he);if(!Ge)throw new Error("Error trying to parse relative URL.");if(Ge.scheme)return je.alwaysNormalize?(Ge.path=qe.normalizePath(Ge.path),qe.buildURLFromParts(Ge)):he;var Re=qe.parseURL(Ce);if(!Re)throw new Error("Error trying to parse base URL.");if(!Re.netLoc&&Re.path&&"/"!==Re.path[0]){var ft=Ee.exec(Re.path);Re.netLoc=ft[1],Re.path=ft[2]}Re.netLoc&&!Re.path&&(Re.path="/");var we={scheme:Re.scheme,netLoc:Ge.netLoc,path:null,params:Ge.params,query:Ge.query,fragment:Ge.fragment};if(!Ge.netLoc&&(we.netLoc=Re.netLoc,"/"!==Ge.path[0]))if(Ge.path){var et=Re.path,M=et.substring(0,et.lastIndexOf("/")+1)+Ge.path;we.path=qe.normalizePath(M)}else we.path=Re.path,Ge.params||(we.params=Re.params,Ge.query||(we.query=Re.query));return null===we.path&&(we.path=je.alwaysNormalize?qe.normalizePath(Ge.path):Ge.path),qe.buildURLFromParts(we)},parseURL:function(Ce){var he=De.exec(Ce);return he?{scheme:he[1]||"",netLoc:he[2]||"",path:he[3]||"",params:he[4]||"",query:he[5]||"",fragment:he[6]||""}:null},normalizePath:function(Ce){for(Ce=Ce.split("").reverse().join("").replace(R,"");Ce.length!==(Ce=Ce.replace(S,"")).length;);return Ce.split("").reverse().join("")},buildURLFromParts:function(Ce){return Ce.scheme+Ce.netLoc+Ce.path+Ce.params+Ce.query+Ce.fragment}}},2081:(rt,We,De)=>{var Ee=De(3691).getUint64;rt.exports=function(S){var qe=new DataView(S.buffer,S.byteOffset,S.byteLength),Ce={version:S[0],flags:new Uint8Array(S.subarray(1,4)),references:[],referenceId:qe.getUint32(4),timescale:qe.getUint32(8)},he=12;0===Ce.version?(Ce.earliestPresentationTime=qe.getUint32(he),Ce.firstOffset=qe.getUint32(he+4),he+=8):(Ce.earliestPresentationTime=Ee(S.subarray(he)),Ce.firstOffset=Ee(S.subarray(he+8)),he+=16);var je=qe.getUint16(he+=2);for(he+=2;je>0;he+=12,je--)Ce.references.push({referenceType:(128&S[he])>>>7,referencedSize:2147483647&qe.getUint32(he),subsegmentDuration:qe.getUint32(he+4),startsWithSap:!!(128&S[he+8]),sapType:(112&S[he+8])>>>4,sapDeltaTime:268435455&qe.getUint32(he+8)});return Ce}},9651:rt=>{var De,Ee,R,S,qe,Ce,he;qe=function(je,He){return De(S(je,He))},Ce=function(je,He){return Ee(R(je),He)},he=function(je,He,Ge){return R(Ge?je:je-He)},rt.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:De=function(je){return 9e4*je},secondsToAudioTs:Ee=function(je,He){return je*He},videoTsToSeconds:R=function(je){return je/9e4},audioTsToSeconds:S=function(je,He){return je/He},audioTsToVideoTs:qe,videoTsToAudioTs:Ce,metadataTsToSeconds:he}},3691:rt=>{var We=Math.pow(2,32);rt.exports={getUint64:function(Ee){var S,R=new DataView(Ee.buffer,Ee.byteOffset,Ee.byteLength);return R.getBigUint64?(S=R.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(S):S:R.getUint32(0)*We+R.getUint32(4)},MAX_UINT32:We}},509:(rt,We,De)=>{var Ee=De(2843),R=rt.exports={WebVTT:De(3042),VTTCue:De(411),VTTRegion:De(9370)};Ee.vttjs=R,Ee.WebVTT=R.WebVTT;var S=R.VTTCue,qe=R.VTTRegion,Ce=Ee.VTTCue,he=Ee.VTTRegion;R.shim=function(){Ee.VTTCue=S,Ee.VTTRegion=qe},R.restore=function(){Ee.VTTCue=Ce,Ee.VTTRegion=he},Ee.VTTCue||R.shim()},3042:(rt,We,De)=>{var Ee=De(410),R=Object.create||function(){function N(){}return function(U){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return N.prototype=U,new N}}();function S(N,U){this.name="ParsingError",this.code=N.code,this.message=U||N.message}function qe(N){function U(Ae,_e,Le,Oe){return 3600*(0|Ae)+60*(0|_e)+(0|Le)+(0|Oe)/1e3}var Q=N.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return Q?Q[3]?U(Q[1],Q[2],Q[3].replace(":",""),Q[4]):Q[1]>59?U(Q[1],Q[2],0,Q[4]):U(0,Q[1],Q[2],Q[4]):null}function Ce(){this.values=R(null)}function he(N,U,Q,Ae){var _e=Ae?N.split(Ae):[N];for(var Le in _e)if("string"==typeof _e[Le]){var Oe=_e[Le].split(Q);2===Oe.length&&U(Oe[0].trim(),Oe[1].trim())}}function je(N,U,Q){var Ae=N;function _e(){var Fe=qe(N);if(null===Fe)throw new S(S.Errors.BadTimeStamp,"Malformed timestamp: "+Ae);return N=N.replace(/^[^\sa-zA-Z-]+/,""),Fe}function Oe(){N=N.replace(/^\s+/,"")}if(Oe(),U.startTime=_e(),Oe(),"--\x3e"!==N.substr(0,3))throw new S(S.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+Ae);N=N.substr(3),Oe(),U.endTime=_e(),Oe(),function Le(Fe,Te){var ke=new Ce;he(Fe,function(be,Se){switch(be){case"region":for(var Ye=Q.length-1;Ye>=0;Ye--)if(Q[Ye].id===Se){ke.set(be,Q[Ye].region);break}break;case"vertical":ke.alt(be,Se,["rl","lr"]);break;case"line":var yt=Se.split(","),Ct=yt[0];ke.integer(be,Ct),ke.percent(be,Ct)&&ke.set("snapToLines",!1),ke.alt(be,Ct,["auto"]),2===yt.length&&ke.alt("lineAlign",yt[1],["start","center","end"]);break;case"position":yt=Se.split(","),ke.percent(be,yt[0]),2===yt.length&&ke.alt("positionAlign",yt[1],["start","center","end"]);break;case"size":ke.percent(be,Se);break;case"align":ke.alt(be,Se,["start","center","end","left","right"])}},/:/,/\s/),Te.region=ke.get("region",null),Te.vertical=ke.get("vertical","");try{Te.line=ke.get("line","auto")}catch{}Te.lineAlign=ke.get("lineAlign","start"),Te.snapToLines=ke.get("snapToLines",!0),Te.size=ke.get("size",100);try{Te.align=ke.get("align","center")}catch{Te.align=ke.get("align","middle")}try{Te.position=ke.get("position","auto")}catch{Te.position=ke.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Te.align)}Te.positionAlign=ke.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Te.align)}(N,U)}(S.prototype=R(Error.prototype)).constructor=S,S.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Ce.prototype={set:function(N,U){!this.get(N)&&""!==U&&(this.values[N]=U)},get:function(N,U,Q){return Q?this.has(N)?this.values[N]:U[Q]:this.has(N)?this.values[N]:U},has:function(N){return N in this.values},alt:function(N,U,Q){for(var Ae=0;Ae<Q.length;++Ae)if(U===Q[Ae]){this.set(N,U);break}},integer:function(N,U){/^-?\d+$/.test(U)&&this.set(N,parseInt(U,10))},percent:function(N,U){return!!(U.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(U=parseFloat(U),U>=0&&U<=100))&&(this.set(N,U),!0)}};var He=Ee.createElement&&Ee.createElement("textarea"),Ge={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Re={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},ft={v:"title",lang:"lang"},we={rt:"ruby"};function et(N,U){function Q(){if(!U)return null;var Ke=U.match(/^([^<]*)(<[^>]*>?)?/);return function Ct(Ze){return U=U.substr(Ze.length),Ze}(Ke[1]?Ke[1]:Ke[2])}function Ae(Ct){return He.innerHTML=Ct,Ct=He.textContent,He.textContent="",Ct}function Le(Ct,Ke){var Ze=Ge[Ct];if(!Ze)return null;var gi=N.document.createElement(Ze),kt=ft[Ct];return kt&&Ke&&(gi[kt]=Ke.trim()),gi}for(var Te,Oe=N.document.createElement("div"),Fe=Oe,ke=[];null!==(Te=Q());)if("<"!==Te[0])Fe.appendChild(N.document.createTextNode(Ae(Te)));else{if("/"===Te[1]){ke.length&&ke[ke.length-1]===Te.substr(2).replace(">","")&&(ke.pop(),Fe=Fe.parentNode);continue}var Se,be=qe(Te.substr(1,Te.length-2));if(be){Se=N.document.createProcessingInstruction("timestamp",be),Fe.appendChild(Se);continue}var Ye=Te.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!Ye||!(Se=Le(Ye[1],Ye[3]))||we[(Ke=Se).localName]&&we[Ke.localName]!==Fe.localName)continue;if(Ye[2]){var yt=Ye[2].split(".");yt.forEach(function(Ct){var Ke=/^bg_/.test(Ct),Ze=Ke?Ct.slice(3):Ct;Re.hasOwnProperty(Ze)&&(Se.style[Ke?"background-color":"color"]=Re[Ze])}),Se.className=yt.join(" ")}ke.push(Ye[1]),Fe.appendChild(Se),Fe=Se}var Ke;return Oe}var M=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function It(N){for(var U=0;U<M.length;U++){var Q=M[U];if(N>=Q[0]&&N<=Q[1])return!0}return!1}function ue(N){var U=[],Q="";if(!N||!N.childNodes)return"ltr";function _e(Fe,Te){for(var ke=Te.childNodes.length-1;ke>=0;ke--)Fe.push(Te.childNodes[ke])}function Le(Fe){if(!Fe||!Fe.length)return null;var Te=Fe.pop(),ke=Te.textContent||Te.innerText;if(ke){var be=ke.match(/^.*(\n|\r)/);return be?(Fe.length=0,be[0]):ke}return"ruby"===Te.tagName?Le(Fe):Te.childNodes?(_e(Fe,Te),Le(Fe)):void 0}for(_e(U,N);Q=Le(U);)for(var Oe=0;Oe<Q.length;Oe++)if(It(Q.charCodeAt(Oe)))return"rtl";return"ltr"}function Ie(){}function ne(N,U,Q){Ie.call(this),this.cue=U,this.cueDiv=et(N,U.text);var Ae={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===U.vertical?"horizontal-tb":"lr"===U.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(Ae,this.cueDiv),this.div=N.document.createElement("div"),Ae={direction:ue(this.cueDiv),writingMode:""===U.vertical?"horizontal-tb":"lr"===U.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===U.align?"center":U.align,font:Q.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(Ae),this.div.appendChild(this.cueDiv);var _e=0;switch(U.positionAlign){case"start":case"line-left":_e=U.position;break;case"center":_e=U.position-U.size/2;break;case"end":case"line-right":_e=U.position-U.size}this.applyStyles(""===U.vertical?{left:this.formatStyle(_e,"%"),width:this.formatStyle(U.size,"%")}:{top:this.formatStyle(_e,"%"),height:this.formatStyle(U.size,"%")}),this.move=function(Le){this.applyStyles({top:this.formatStyle(Le.top,"px"),bottom:this.formatStyle(Le.bottom,"px"),left:this.formatStyle(Le.left,"px"),right:this.formatStyle(Le.right,"px"),height:this.formatStyle(Le.height,"px"),width:this.formatStyle(Le.width,"px")})}}function pe(N){var U,Q,Ae,_e;if(N.div){Q=N.div.offsetHeight,Ae=N.div.offsetWidth,_e=N.div.offsetTop;var Le=(Le=N.div.childNodes)&&(Le=Le[0])&&Le.getClientRects&&Le.getClientRects();N=N.div.getBoundingClientRect(),U=Le?Math.max(Le[0]&&Le[0].height||0,N.height/Le.length):0}this.left=N.left,this.right=N.right,this.top=N.top||_e,this.height=N.height||Q,this.bottom=N.bottom||_e+(N.height||Q),this.width=N.width||Ae,this.lineHeight=void 0!==U?U:N.lineHeight}function Je(N,U,Q,Ae){var Le=new pe(U),Oe=U.cue,Fe=function vt(N){if("number"==typeof N.line&&(N.snapToLines||N.line>=0&&N.line<=100))return N.line;if(!N.track||!N.track.textTrackList||!N.track.textTrackList.mediaElement)return-1;for(var U=N.track,Q=U.textTrackList,Ae=0,_e=0;_e<Q.length&&Q[_e]!==U;_e++)"showing"===Q[_e].mode&&Ae++;return-1*++Ae}(Oe),Te=[];if(Oe.snapToLines){var ke;switch(Oe.vertical){case"":Te=["+y","-y"],ke="height";break;case"rl":Te=["+x","-x"],ke="width";break;case"lr":Te=["-x","+x"],ke="width"}var be=Le.lineHeight,Se=be*Math.round(Fe),Ye=Q[ke]+be,yt=Te[0];Math.abs(Se)>Ye&&(Se=Se<0?-1:1,Se*=Math.ceil(Ye/be)*be),Fe<0&&(Se+=""===Oe.vertical?Q.height:Q.width,Te=Te.reverse()),Le.move(yt,Se)}else{var Ct=Le.lineHeight/Q.height*100;switch(Oe.lineAlign){case"center":Fe-=Ct/2;break;case"end":Fe-=Ct}switch(Oe.vertical){case"":U.applyStyles({top:U.formatStyle(Fe,"%")});break;case"rl":U.applyStyles({left:U.formatStyle(Fe,"%")});break;case"lr":U.applyStyles({right:U.formatStyle(Fe,"%")})}Te=["+y","-x","+x","-y"],Le=new pe(U)}var Ke=function _e(Ze,gi){for(var kt,Gt=new pe(Ze),Mi=1,ci=0;ci<gi.length;ci++){for(;Ze.overlapsOppositeAxis(Q,gi[ci])||Ze.within(Q)&&Ze.overlapsAny(Ae);)Ze.move(gi[ci]);if(Ze.within(Q))return Ze;var Xi=Ze.intersectPercentage(Q);Mi>Xi&&(kt=new pe(Ze),Mi=Xi),Ze=new pe(Gt)}return kt||Gt}(Le,Te);U.move(Ke.toCSSCompatValues(Q))}function Y(){}Ie.prototype.applyStyles=function(N,U){for(var Q in U=U||this.div,N)N.hasOwnProperty(Q)&&(U.style[Q]=N[Q])},Ie.prototype.formatStyle=function(N,U){return 0===N?0:N+U},(ne.prototype=R(Ie.prototype)).constructor=ne,pe.prototype.move=function(N,U){switch(U=void 0!==U?U:this.lineHeight,N){case"+x":this.left+=U,this.right+=U;break;case"-x":this.left-=U,this.right-=U;break;case"+y":this.top+=U,this.bottom+=U;break;case"-y":this.top-=U,this.bottom-=U}},pe.prototype.overlaps=function(N){return this.left<N.right&&this.right>N.left&&this.top<N.bottom&&this.bottom>N.top},pe.prototype.overlapsAny=function(N){for(var U=0;U<N.length;U++)if(this.overlaps(N[U]))return!0;return!1},pe.prototype.within=function(N){return this.top>=N.top&&this.bottom<=N.bottom&&this.left>=N.left&&this.right<=N.right},pe.prototype.overlapsOppositeAxis=function(N,U){switch(U){case"+x":return this.left<N.left;case"-x":return this.right>N.right;case"+y":return this.top<N.top;case"-y":return this.bottom>N.bottom}},pe.prototype.intersectPercentage=function(N){return Math.max(0,Math.min(this.right,N.right)-Math.max(this.left,N.left))*Math.max(0,Math.min(this.bottom,N.bottom)-Math.max(this.top,N.top))/(this.height*this.width)},pe.prototype.toCSSCompatValues=function(N){return{top:this.top-N.top,bottom:N.bottom-this.bottom,left:this.left-N.left,right:N.right-this.right,height:this.height,width:this.width}},pe.getSimpleBoxPosition=function(N){var U=N.div?N.div.offsetHeight:N.tagName?N.offsetHeight:0,Q=N.div?N.div.offsetWidth:N.tagName?N.offsetWidth:0,Ae=N.div?N.div.offsetTop:N.tagName?N.offsetTop:0;return{left:(N=N.div?N.div.getBoundingClientRect():N.tagName?N.getBoundingClientRect():N).left,right:N.right,top:N.top||Ae,height:N.height||U,bottom:N.bottom||Ae+(N.height||U),width:N.width||Q}},Y.StringDecoder=function(){return{decode:function(N){if(!N)return"";if("string"!=typeof N)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(N))}}},Y.convertCueToDOMTree=function(N,U){return N&&U?et(N,U):null},Y.processCues=function(N,U,Q){if(!N||!U||!Q)return null;for(;Q.firstChild;)Q.removeChild(Q.firstChild);var Ae=N.document.createElement("div");if(Ae.style.position="absolute",Ae.style.left="0",Ae.style.right="0",Ae.style.top="0",Ae.style.bottom="0",Ae.style.margin="1.5%",Q.appendChild(Ae),function _e(be){for(var Se=0;Se<be.length;Se++)if(be[Se].hasBeenReset||!be[Se].displayState)return!0;return!1}(U)){var Oe=[],Fe=pe.getSimpleBoxPosition(Ae),ke={font:Math.round(.05*Fe.height*100)/100+"px sans-serif"};!function(){for(var be,Se,Ye=0;Ye<U.length;Ye++)be=new ne(N,Se=U[Ye],ke),Ae.appendChild(be.div),Je(0,be,Fe,Oe),Se.displayState=be.div,Oe.push(pe.getSimpleBoxPosition(be))}()}else for(var Le=0;Le<U.length;Le++)Ae.appendChild(U[Le].displayState)},(Y.Parser=function(N,U,Q){Q||(Q=U,U={}),U||(U={}),this.window=N,this.vttjs=U,this.state="INITIAL",this.buffer="",this.decoder=Q||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(N){if(!(N instanceof S))throw N;this.onparsingerror&&this.onparsingerror(N)},parse:function(N){var be,U=this;function Q(){for(var be=U.buffer,Se=0;Se<be.length&&"\r"!==be[Se]&&"\n"!==be[Se];)++Se;var Ye=be.substr(0,Se);return"\r"===be[Se]&&++Se,"\n"===be[Se]&&++Se,U.buffer=be.substr(Se),Ye}N&&(U.buffer+=U.decoder.decode(N,{stream:!0}));try{var Oe;if("INITIAL"===U.state){if(!/\r\n|\n/.test(U.buffer))return this;var Fe=(Oe=Q()).match(/^WEBVTT([ \t].*)?$/);if(!Fe||!Fe[0])throw new S(S.Errors.BadSignature);U.state="HEADER"}for(var Te=!1;U.buffer;){if(!/\r\n|\n/.test(U.buffer))return this;switch(Te?Te=!1:Oe=Q(),U.state){case"HEADER":/:/.test(Oe)?(be=Oe).match(/X-TIMESTAMP-MAP/)?he(be,function(Se,Ye){"X-TIMESTAMP-MAP"===Se&&function _e(be){var Se=new Ce;he(be,function(Ye,yt){switch(Ye){case"MPEGT":Se.integer(Ye+"S",yt);break;case"LOCA":Se.set(Ye+"L",qe(yt))}},/[^\d]:/,/,/),U.ontimestampmap&&U.ontimestampmap({MPEGTS:Se.get("MPEGTS"),LOCAL:Se.get("LOCAL")})}(Ye)},/=/):he(be,function(Se,Ye){"Region"===Se&&function Ae(be){var Se=new Ce;if(he(be,function(yt,Ct){switch(yt){case"id":Se.set(yt,Ct);break;case"width":Se.percent(yt,Ct);break;case"lines":Se.integer(yt,Ct);break;case"regionanchor":case"viewportanchor":var Ke=Ct.split(",");if(2!==Ke.length)break;var Ze=new Ce;if(Ze.percent("x",Ke[0]),Ze.percent("y",Ke[1]),!Ze.has("x")||!Ze.has("y"))break;Se.set(yt+"X",Ze.get("x")),Se.set(yt+"Y",Ze.get("y"));break;case"scroll":Se.alt(yt,Ct,["up"])}},/=/,/\s/),Se.has("id")){var Ye=new(U.vttjs.VTTRegion||U.window.VTTRegion);Ye.width=Se.get("width",100),Ye.lines=Se.get("lines",3),Ye.regionAnchorX=Se.get("regionanchorX",0),Ye.regionAnchorY=Se.get("regionanchorY",100),Ye.viewportAnchorX=Se.get("viewportanchorX",0),Ye.viewportAnchorY=Se.get("viewportanchorY",100),Ye.scroll=Se.get("scroll",""),U.onregion&&U.onregion(Ye),U.regionList.push({id:Se.get("id"),region:Ye})}}(Ye)},/:/):Oe||(U.state="ID");continue;case"NOTE":Oe||(U.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Oe)){U.state="NOTE";break}if(!Oe)continue;U.cue=new(U.vttjs.VTTCue||U.window.VTTCue)(0,0,"");try{U.cue.align="center"}catch{U.cue.align="middle"}if(U.state="CUE",-1===Oe.indexOf("--\x3e")){U.cue.id=Oe;continue}case"CUE":try{je(Oe,U.cue,U.regionList)}catch(be){U.reportOrThrowError(be),U.cue=null,U.state="BADCUE";continue}U.state="CUETEXT";continue;case"CUETEXT":var ke=-1!==Oe.indexOf("--\x3e");if(!Oe||ke&&(Te=!0)){U.oncue&&U.oncue(U.cue),U.cue=null,U.state="ID";continue}U.cue.text&&(U.cue.text+="\n"),U.cue.text+=Oe.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":Oe||(U.state="ID");continue}}}catch(be){U.reportOrThrowError(be),"CUETEXT"===U.state&&U.cue&&U.oncue&&U.oncue(U.cue),U.cue=null,U.state="INITIAL"===U.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var N=this;try{if(N.buffer+=N.decoder.decode(),(N.cue||"HEADER"===N.state)&&(N.buffer+="\n\n",N.parse()),"INITIAL"===N.state)throw new S(S.Errors.BadSignature)}catch(U){N.reportOrThrowError(U)}return N.onflush&&N.onflush(),this}},rt.exports=Y},411:rt=>{var De={"":1,lr:1,rl:1},Ee={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function S(Ce){return"string"==typeof Ce&&!!Ee[Ce.toLowerCase()]&&Ce.toLowerCase()}function qe(Ce,he,je){this.hasBeenReset=!1;var He="",Ge=!1,Re=Ce,ft=he,we=je,et=null,M="",It=!0,ue="auto",vt="start",Ie="auto",ne="auto",pe=100,Je="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return He},set:function(Y){He=""+Y}},pauseOnExit:{enumerable:!0,get:function(){return Ge},set:function(Y){Ge=!!Y}},startTime:{enumerable:!0,get:function(){return Re},set:function(Y){if("number"!=typeof Y)throw new TypeError("Start time must be set to a number.");Re=Y,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return ft},set:function(Y){if("number"!=typeof Y)throw new TypeError("End time must be set to a number.");ft=Y,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return we},set:function(Y){we=""+Y,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return et},set:function(Y){et=Y,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return M},set:function(Y){var ht=function R(Ce){return"string"==typeof Ce&&!!De[Ce.toLowerCase()]&&Ce.toLowerCase()}(Y);if(!1===ht)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");M=ht,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return It},set:function(Y){It=!!Y,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return ue},set:function(Y){if("number"!=typeof Y&&"auto"!==Y)throw new SyntaxError("Line: an invalid number or illegal string was specified.");ue=Y,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return vt},set:function(Y){var ht=S(Y);ht?(vt=ht,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return Ie},set:function(Y){if(Y<0||Y>100)throw new Error("Position must be between 0 and 100.");Ie=Y,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return ne},set:function(Y){var ht=S(Y);ht?(ne=ht,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return pe},set:function(Y){if(Y<0||Y>100)throw new Error("Size must be between 0 and 100.");pe=Y,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Je},set:function(Y){var ht=S(Y);if(!ht)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Je=ht,this.hasBeenReset=!0}}}),this.displayState=void 0}qe.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},rt.exports=qe},9370:rt=>{var We={"":!0,up:!0};function Ee(S){return"number"==typeof S&&S>=0&&S<=100}rt.exports=function R(){var S=100,qe=3,Ce=0,he=100,je=0,He=100,Ge="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return S},set:function(Re){if(!Ee(Re))throw new Error("Width must be between 0 and 100.");S=Re}},lines:{enumerable:!0,get:function(){return qe},set:function(Re){if("number"!=typeof Re)throw new TypeError("Lines must be set to a number.");qe=Re}},regionAnchorY:{enumerable:!0,get:function(){return he},set:function(Re){if(!Ee(Re))throw new Error("RegionAnchorX must be between 0 and 100.");he=Re}},regionAnchorX:{enumerable:!0,get:function(){return Ce},set:function(Re){if(!Ee(Re))throw new Error("RegionAnchorY must be between 0 and 100.");Ce=Re}},viewportAnchorY:{enumerable:!0,get:function(){return He},set:function(Re){if(!Ee(Re))throw new Error("ViewportAnchorY must be between 0 and 100.");He=Re}},viewportAnchorX:{enumerable:!0,get:function(){return je},set:function(Re){if(!Ee(Re))throw new Error("ViewportAnchorX must be between 0 and 100.");je=Re}},scroll:{enumerable:!0,get:function(){return Ge},set:function(Re){var ft=function De(S){return"string"==typeof S&&!!We[S.toLowerCase()]&&S.toLowerCase()}(Re);!1===ft?console.warn("Scroll: an invalid or illegal string was specified."):Ge=ft}}})}},542:()=>{},4634:rt=>{function We(){return rt.exports=We=Object.assign?Object.assign.bind():function(De){for(var Ee=1;Ee<arguments.length;Ee++){var R=arguments[Ee];for(var S in R)Object.prototype.hasOwnProperty.call(R,S)&&(De[S]=R[S])}return De},rt.exports.__esModule=!0,rt.exports.default=rt.exports,We.apply(this,arguments)}rt.exports=We,rt.exports.__esModule=!0,rt.exports.default=rt.exports}}]);