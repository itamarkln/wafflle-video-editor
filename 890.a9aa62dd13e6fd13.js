"use strict";(self.webpackChunkwafflle_video_editor=self.webpackChunkwafflle_video_editor||[]).push([[890],{8890:(q,u,i)=>{i.r(u),i.d(u,{VideoEditorPageComponent:()=>Z});var t=i(3953),p=i(6600),h=i(6860),g=i(177);const f=["*",[["mat-toolbar-row"]]],_=["*","mat-toolbar-row"];let b=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275dir=t.FsC({type:e,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}return e})(),v=(()=>{class e{constructor(r,a,n){this._elementRef=r,this._platform=a,this._document=n}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static#t=this.\u0275fac=function(a){return new(a||e)(t.rXU(t.aKT),t.rXU(h.OD),t.rXU(g.qQ))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["mat-toolbar"]],contentQueries:function(a,n,c){if(1&a&&t.wni(c,b,5),2&a){let m;t.mGM(m=t.lsd())&&(n._toolbarRows=m)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(a,n){2&a&&(t.HbH(n.color?"mat-"+n.color:""),t.AVh("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",0===n._toolbarRows.length))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[t.aNF],ngContentSelectors:_,decls:2,vars:0,template:function(a,n){1&a&&(t.NAR(f),t.SdG(0),t.SdG(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}return e})(),x=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.$C({type:e});static#a=this.\u0275inj=t.G2t({imports:[p.yE,p.yE]})}return e})();var d=i(5667);function C(e,o){if(1&e&&t.nrm(0,"video",3),2&e){const r=t.XpG();t.Y8G("src",r.scene.url,t.B4B)}}function y(e,o){1&e&&t.nrm(0,"img",4)}let M=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-scene-preview"]],inputs:{scene:"scene"},standalone:!0,features:[t.aNF],decls:7,vars:1,consts:[[1,"scene__preview"],[1,"scene__preview__title"],[1,"scene__preview__player"],["controls","",3,"src"],["src","assets/emptyState.jpg","alt","no-scene-selected",1,"empty-state"]],template:function(a,n){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"h4"),t.EFF(3,"Preview"),t.k0s()(),t.j41(4,"div",2),t.DNE(5,C,1,1,"video",3)(6,y,1,0,"img",4),t.k0s()()),2&a&&(t.R7$(5),t.vxM(n.scene?5:6))},styles:["img.empty-state[_ngcontent-%COMP%]{width:90%;height:90%}"]})}return e})();var s=i(8834);let S=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.$C({type:e});static#a=this.\u0275inj=t.G2t({imports:[p.yE,g.MD,p.yE]})}return e})();var l=i(9217);let P=(()=>{class e{constructor(){this.scene=t.hFB.required()}static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-scene"]],inputs:{scene:[1,"scene"]},standalone:!0,features:[t.aNF],decls:10,vars:3,consts:[["cdkDrag","",1,"scene",3,"cdkDragData"],[1,"scene__content"],[1,"scene__title"],[1,"scene__description"],[1,"scene__controls"],["mat-icon-button",""]],template:function(a,n){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"h4",2),t.EFF(3),t.k0s(),t.j41(4,"h5",3),t.EFF(5),t.k0s()(),t.j41(6,"div",4)(7,"button",5)(8,"mat-icon"),t.EFF(9,"play_arrow"),t.k0s()()()()),2&a&&(t.Y8G("cdkDragData",n.scene()),t.R7$(3),t.JRh(n.scene().title),t.R7$(2),t.SpI("Duration: ",n.scene().duration,"s"))},dependencies:[s.Hl,s.iY,l.m_,l.An,S,d.T1],styles:[".scene[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;align-items:center;margin:1rem auto;padding:1rem;background-color:#2b2c31;border-radius:10px;cursor:grab}.scene[_ngcontent-%COMP%]   .scene__content[_ngcontent-%COMP%]   .scene__title[_ngcontent-%COMP%], .scene[_ngcontent-%COMP%]   .scene__content[_ngcontent-%COMP%]   .scene__description[_ngcontent-%COMP%]{margin:0}.scene[_ngcontent-%COMP%]   .scene__content[_ngcontent-%COMP%]   .scene__title[_ngcontent-%COMP%]{font-weight:500}.scene[_ngcontent-%COMP%]   .scene__content[_ngcontent-%COMP%]   .scene__description[_ngcontent-%COMP%]{font-weight:400;color:#c2bec7}.scene[_ngcontent-%COMP%]   .scene__controls[_ngcontent-%COMP%]{cursor:pointer}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}return e})();var A=i(4421);const j=JSON.parse('[{"id":"1","title":"Scene 1","url":"https://content.shuffll.com/files/background-music/1.mp4","duration":5},{"id":"2","title":"Scene 2","url":"https://content.shuffll.com/files/background-music/2.mp4","duration":5},{"id":"3","title":"Scene 3","url":"https://content.shuffll.com/files/background-music/3.mp4","duration":5}]');let I=(()=>{class e{constructor(){this._scenes=j}getScenes(){return(0,A.of)(this._scenes)}static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const E=(e,o)=>o.id,R=()=>["timeline-tracks"];function z(e,o){1&e&&t.nrm(0,"app-scene",4),2&e&&t.Y8G("scene",o.$implicit)}function U(e,o){1&e&&(t.j41(0,"div",5),t.EFF(1,"no scenes yet!"),t.k0s())}let G=(()=>{class e{constructor(r){this.scenesService=r,this._subscriptions=[],this.scenes=[]}ngOnInit(){this.handleSubscriptions()}handleSubscriptions(){this.subscribeScenes()}subscribeScenes(){this._subscriptions.push(this.scenesService.getScenes().subscribe(r=>{this.scenes=r}))}ngOnDestroy(){this._subscriptions.forEach(r=>r.unsubscribe())}static#t=this.\u0275fac=function(a){return new(a||e)(t.rXU(I))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-scenes"]],standalone:!0,features:[t.aNF],decls:10,vars:4,consts:[[1,"container","flex-between"],[1,"scenes__list"],[1,"scenes__list__title"],["id","scenes","cdkDropList","",1,"scenes__list__items",3,"cdkDropListConnectedTo","cdkDropListData"],[3,"scene"],[1,"no-scenes"]],template:function(a,n){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),t.EFF(4,"All Scenes"),t.k0s()(),t.j41(5,"div",3),t.Z7z(6,z,1,1,"app-scene",4,E,!1,U,2,0,"div",5),t.k0s()(),t.nrm(9,"app-scene-preview"),t.k0s()),2&a&&(t.R7$(5),t.Y8G("cdkDropListConnectedTo",t.lJ4(3,R))("cdkDropListData",n.scenes),t.R7$(),t.Dyx(n.scenes))},dependencies:[d.ad,d.O7,P,M],styles:[".scenes__list[_ngcontent-%COMP%]{width:100%;max-width:24rem}"]})}return e})(),V=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-timeline-controls"]],standalone:!0,features:[t.aNF],decls:15,vars:0,consts:[[1,"timeline__controls"],[1,"left"],["mat-icon-button",""],[1,"right"]],template:function(a,n){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"button",2)(3,"mat-icon"),t.EFF(4,"zoom_in"),t.k0s()(),t.j41(5,"button",2)(6,"mat-icon"),t.EFF(7,"zoom_out"),t.k0s()()(),t.j41(8,"div",3)(9,"button",2)(10,"mat-icon"),t.EFF(11,"play_arrow"),t.k0s()(),t.j41(12,"button",2)(13,"mat-icon"),t.EFF(14,"pause"),t.k0s()()()())},dependencies:[s.Hl,s.iY,l.m_,l.An],styles:[".timeline__controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;background-color:#1e1a1d;border:3px solid #2b2c31}"]})}return e})();const L=e=>({"left.px":e});let N=(()=>{class e{constructor(){}ngOnChanges(r){r.currentTime&&this.updateCursor()}calculateCursorPosition(){return 10*this.currentTime}updateCursor(){}static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-timeline-cursor"]],inputs:{currentTime:"currentTime"},standalone:!0,features:[t.OA$,t.aNF],decls:1,vars:4,consts:[[1,"cursor"]],template:function(a,n){1&a&&t.nrm(0,"div",0),2&a&&t.Aen(t.eq3(2,L,n.calculateCursorPosition()))},styles:[".cursor[_ngcontent-%COMP%]{width:2px;height:100%;background-color:red;position:absolute;top:0}"]})}return e})();function B(e,o){if(1&e&&(t.j41(0,"div",1),t.EFF(1),t.k0s()),2&e){const r=o.$index;t.R7$(),t.SpI("",r+1,"s")}}let $=(()=>{class e{constructor(){this.timelineTracks=t.hFB.required(),this.ticks=(0,t.EWP)(()=>this.handleTicksComputed())}handleTicksComputed(){const r=this.timelineTracks().reduce((a,n)=>a+n.duration,0);return Array(r)}static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-timeline-ruler"]],inputs:{timelineTracks:[1,"timelineTracks"]},standalone:!0,features:[t.aNF],decls:3,vars:0,consts:[[1,"ruler"],[1,"tick"]],template:function(a,n){1&a&&(t.j41(0,"div",0),t.Z7z(1,B,2,1,"div",1,t.Vm6),t.k0s()),2&a&&(t.R7$(),t.Dyx(n.ticks()))},styles:[".ruler[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;font-size:.8rem;width:100%;padding:.25rem 0;color:#c2bec7;background-color:#2b2c31}.ruler[_ngcontent-%COMP%]   .tick[_ngcontent-%COMP%]{flex:1;text-align:center}"]})}return e})();const H=(e,o)=>o.id,X=(e,o)=>({"left.px":e,"width.px":o});function Y(e,o){if(1&e&&(t.j41(0,"div",4),t.EFF(1),t.k0s()),2&e){const r=o.$implicit,a=o.$index,n=t.XpG();t.Aen(t.l_i(4,X,n.calculateTrackLeftOffset(a),n.calculateTrackWidth(r))),t.R7$(),t.Lme(" ",r.title," (",r.duration,"s) ")}}function W(e,o){1&e&&(t.j41(0,"div",3),t.EFF(1,"No scenes were selected yet"),t.k0s())}let J=(()=>{class e{constructor(){this.onTracksUpdated=(0,t.CGW)(),this.tracks=(0,t.vPA)([])}dropped(r){this.handleTrackDropped(r),this.handleTracksRearrangement(r),this.onTracksUpdated.emit(this.tracks())}handleTrackDropped(r){if(r.previousContainer!==r.container){const a=r.previousContainer.data.find((n,c)=>c===r.previousIndex);a&&this.tracks.set([...this.tracks(),a])}}handleTracksRearrangement(r){r.previousContainer===r.container&&(0,d.HD)(this.tracks(),r.previousIndex,r.currentIndex)}calculateTrackWidth(r){return 10*r.duration}calculateTrackLeftOffset(r){return this.tracks().reduce((a,n,c)=>(r<c&&(a+=10*n.duration),a),0)}static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-timeline-track"]],outputs:{onTracksUpdated:"onTracksUpdated"},standalone:!0,features:[t.aNF],decls:5,vars:2,consts:[["track",""],["id","timeline-tracks","cdkDropList","",1,"tracks",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","",1,"track",3,"style"],[1,"empty-state"],["cdkDrag","",1,"track"]],template:function(a,n){if(1&a){const c=t.RV6();t.j41(0,"div",1,0),t.bIt("cdkDropListDropped",function(K){return t.eBV(c),t.Njj(n.dropped(K))}),t.Z7z(2,Y,2,7,"div",2,H,!1,W,2,0,"div",3),t.k0s()}2&a&&(t.Y8G("cdkDropListData",n.tracks()),t.R7$(2),t.Dyx(n.tracks()))},dependencies:[d.ad,d.O7,d.T1],styles:[".tracks[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;padding:10px 0;background-color:#5f00c0;height:73px;border:3px solid #1e1a1d}.tracks[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]{position:relative;padding:5px;margin:0 5px;background-color:#2b2c31;border-radius:10px;line-height:50px;cursor:grab}.tracks[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{margin:auto;color:#c2bec7}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}return e})(),Q=(()=>{class e{constructor(){this.timelineTracks=[],this.currentTime=0}handleTracksUpdated(r){this.timelineTracks=r}static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-timeline"]],standalone:!0,features:[t.aNF],decls:6,vars:2,consts:[[1,"timeline"],[1,"timeline__content"],[3,"timelineTracks"],[3,"currentTime"],[3,"onTracksUpdated"]],template:function(a,n){1&a&&(t.j41(0,"div",0),t.nrm(1,"app-timeline-controls"),t.j41(2,"div",1),t.nrm(3,"app-timeline-ruler",2)(4,"app-timeline-cursor",3),t.j41(5,"app-timeline-track",4),t.bIt("onTracksUpdated",function(m){return n.handleTracksUpdated(m)}),t.k0s()()()),2&a&&(t.R7$(3),t.Y8G("timelineTracks",n.timelineTracks),t.R7$(),t.Y8G("currentTime",n.currentTime))},dependencies:[V,$,J,N],styles:[".timeline[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;margin-top:20px;width:100%}.timeline[_ngcontent-%COMP%]   .timeline__content[_ngcontent-%COMP%]{position:relative}"]})}return e})(),Z=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["app-video-editor"]],standalone:!0,features:[t.aNF],decls:9,vars:0,consts:[[1,"mat-elevation-z3"],[1,"spacer"],[1,"toolbar__controls"],["mat-fab","","extended",""]],template:function(a,n){1&a&&(t.j41(0,"mat-toolbar",0)(1,"h2"),t.EFF(2,"WAFFLLE"),t.k0s(),t.nrm(3,"div",1),t.j41(4,"div",2)(5,"button",3),t.EFF(6,"Home"),t.k0s()()(),t.nrm(7,"app-scenes")(8,"app-timeline"))},dependencies:[s.Hl,s.Sr,l.m_,x,v,G,Q],styles:[".toolbar__controls[_ngcontent-%COMP%]   .button-round[_ngcontent-%COMP%]{color:#333;background-color:#f5f5f5}.toolbar__controls[_ngcontent-%COMP%]   .button-round[_ngcontent-%COMP%]:hover{background-color:#c2bec7}"]})}return e})()}}]);